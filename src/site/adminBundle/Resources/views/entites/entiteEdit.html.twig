{% extends 'siteadminBundle::page_admin_generic.html.twig' %}
{% set cssjsloads = cssjsloads|default('FORM') %}
{% set DEVMODE = (app.environment in ['dev', 'test']) or (is_granted('ROLE_SUPER_ADMIN')) %}

{% block page_heading %}
<div class="row wrapper border-bottom white-bg page-heading">
	<div class="col-lg-12 m-t-xs">
		<h2 class="row">
			<div class="col-md-8 ellipsis">{{ UCfirst(('name')|trans({}, entite.className)) }} {{ entite.nom|trans({}, entite.className) }}</div>
			<div class="col-md-4">
				<a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className, id: entite.id, action: 'delete'}) }}" type="button" class="btn btn-xs btn-danger btn-outline pull-right need-confirmation" data-message="{{ UCfirst('actions.suppQuestion'|trans({'%name%': entite.nom|trans({}, entite.className)})) }}"><i class="fa fa-times icon-wait-on-click"></i> {{ UCfirst('actions.supprimer'|trans) }}</a>
				{#
				<a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className, id: entite.id, action: 'edit'}) }}" type="button" class="btn btn-xs btn-warning pull-right"><i class="fa fa-pencil icon-wait-on-click"></i> {{ UCfirst('actions.modifier'|trans) }}</a>
				#}
				<a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className, id: entite.id, action: 'show'}) }}" type="button" class="btn btn-xs btn-white pull-right"><i class="fa fa-eye icon-wait-on-click"></i> {{ UCfirst('actions.voir'|trans) }}</a>
				<a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className}) }}" type="button" class="btn btn-xs btn-white pull-right"><i class="fa fa-bars icon-wait-on-click"></i> {{ UCfirst(('backlist_btn')|trans({}, entite.className)) }}</a>
			</div>
		</h2>
		<ol class="breadcrumb">
			<li><a href="{{ path('siteadmin_homepage') }}"><strong>{{ UCfirst('administration'|trans) }}</strong></a></li>
			<li><a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className}) }}"><strong>{{ UCfirst('name_s'|trans({}, entite.className)) }}</strong></a></li>
			<li><a href="{{ path('siteadmin_entite', {entite: edit_form.vars.value.className, id: entite.id, action: 'show'}) }}"><strong>{{ entite.nom|trans({}, entite.className) }}</strong></a></li>
			<li>{{ UCfirst('actions.modification'|trans) }}</li>
		</ol>
	</div>
</div>
{% endblock page_heading %}


{% block content %}

	{% if is_granted(entite.statut.niveau|default('ROLE_USER')) %}

	{% set prior = ["nom"] %}
	{% set lasts = ["submit"] %}
	{{ form_start(edit_form) }}
	{{ form_errors(edit_form) }}

	{% for item in prior if edit_form[item] is defined %}
		{{ form_row(edit_form[item]) }}
	{% endfor %}

	{% for key,child in edit_form.children if ((key not in prior) and (key not in lasts)) %}
		{{ form_row(child) }}
	{% endfor %}
	
	{% for item in lasts if edit_form[item] is defined %}
		{{ form_row(edit_form[item]) }}
	{% endfor %}

	{{ form_rest(edit_form) }}
	{{ form_end(edit_form) }}

	{% else %}
	{{ include('siteadminBundle:blocks:entite_interdit.html.twig', {entite: entite}) }}
	{% endif %}

{% endblock content %}