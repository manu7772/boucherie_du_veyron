(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery||Zepto)})(function(c){var f=function(h,o,n){h=c(h);var j=this,i=h.val(),b;o="function"===typeof o?o(h.val(),void 0,h,n):o;var m={invalid:[],getCaret:function(){try{var l,g=0,p=h.get(0),k=document.selection,s=p.selectionStart;if(k&&-1===navigator.appVersion.indexOf("MSIE 10")){l=k.createRange(),l.moveStart("character",h.is("input")?-h.val().length:-h.text().length),g=l.text.length}else{if(s||"0"===s){g=s}}return g}catch(r){}},setCaret:function(l){try{if(h.is(":focus")){var g,p=h.get(0);p.setSelectionRange?p.setSelectionRange(l,l):p.createTextRange&&(g=p.createTextRange(),g.collapse(!0),g.moveEnd("character",l),g.moveStart("character",l),g.select())}}catch(k){}},events:function(){h.on("input.mask keyup.mask",m.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){h.keydown().keyup()},100)}).on("change.mask",function(){h.data("changed",!0)}).on("blur.mask",function(){i===h.val()||h.data("changed")||h.triggerHandler("change");h.data("changed",!1)}).on("blur.mask",function(){i=h.val()}).on("focus.mask",function(g){!0===n.selectOnFocus&&c(g.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!b.test(m.val())&&m.val("")})},getRegexMask:function(){for(var k=[],g,q,p,r,l=0;l<o.length;l++){(g=j.translation[o.charAt(l)])?(q=g.pattern.toString().replace(/.{1}$|^.{1}/g,""),p=g.optional,(g=g.recursive)?(k.push(o.charAt(l)),r={digit:o.charAt(l),pattern:q}):k.push(p||g?q+"?":q)):k.push(o.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}k=k.join("");r&&(k=k.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern));return new RegExp(k)},destroyEvents:function(){h.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(g){var k=h.is("input")?"val":"text";if(0<arguments.length){if(h[k]()!==g){h[k](g)}k=h}else{k=h[k]()}return k},getMCharsBeforeCount:function(k,g){for(var p=0,l=0,q=o.length;l<q&&l<k;l++){j.translation[o.charAt(l)]||(k=g?k+1:k,p++)}return p},caretPos:function(k,g,p,l){return j.translation[o.charAt(Math.min(k-1,o.length-1))]?Math.min(k+p-g-l,p):m.caretPos(k+1,g,p,l)},behaviour:function(l){l=l||window.event;m.invalid=[];var u=l.keyCode||l.which;if(-1===c.inArray(u,j.byPassKeys)){var s=m.getCaret(),r=m.val().length,t=s<r,q=m.getMasked(),p=q.length,g=m.getMCharsBeforeCount(p-1)-m.getMCharsBeforeCount(r-1);m.val(q);!t||65===u&&l.ctrlKey||(8!==u&&46!==u&&(s=m.caretPos(s,r,p,g)),m.setCaret(s));return m.callbacks(l)}},getMasked:function(F){var D=[],A=m.val(),C=0,s=o.length,B=0,z=A.length,y=1,q="push",I=-1,J,G;n.reverse?(q="unshift",y=-1,J=0,C=s-1,B=z-1,G=function(){return -1<C&&-1<B}):(J=s-1,G=function(){return C<s&&B<z});for(;G();){var E=o.charAt(C),H=A.charAt(B),g=j.translation[E];if(g){H.match(g.pattern)?(D[q](H),g.recursive&&(-1===I?I=C:C===J&&(C=I-y),J===I&&(C-=y)),C+=y):g.optional?(C+=y,B-=y):g.fallback?(D[q](g.fallback),C+=y,B-=y):m.invalid.push({p:B,v:H,e:g.pattern}),B+=y}else{if(!F){D[q](E)}H===E&&(B+=y);C+=y}}F=o.charAt(J);s!==z+1||j.translation[F]||D.push(F);return D.join("")},callbacks:function(k){var q=m.val(),p=q!==i,r=[q,k,h,n],s=function(l,g,t){"function"===typeof n[l]&&g&&n[l].apply(this,t)};s("onChange",!0===p,r);s("onKeyPress",!0===p,r);s("onComplete",q.length===o.length,r);s("onInvalid",0<m.invalid.length,[q,k,h,m.invalid,n])}};j.mask=o;j.options=n;j.remove=function(){var g=m.getCaret();m.destroyEvents();m.val(j.getCleanVal());m.setCaret(g-m.getMCharsBeforeCount(g));return h};j.getCleanVal=function(){return m.getMasked(!0)};j.init=function(g){g=g||!1;n=n||{};j.byPassKeys=c.jMaskGlobals.byPassKeys;j.translation=c.jMaskGlobals.translation;j.translation=c.extend({},j.translation,n.translation);j=c.extend(!0,{},j,n);b=m.getRegexMask();!1===g?(n.placeholder&&h.attr("placeholder",n.placeholder),c("input").length&&!1==="oninput" in c("input")[0]&&"on"===h.attr("autocomplete")&&h.attr("autocomplete","off"),m.destroyEvents(),m.events(),g=m.getCaret(),m.val(m.getMasked()),m.setCaret(g+m.getMCharsBeforeCount(g,!0))):(m.events(),m.val(m.getMasked()))};j.init(!h.is("input"))};c.maskWatchers={};var a=function(){var b=c(this),h={},g=b.attr("data-mask");b.attr("data-mask-reverse")&&(h.reverse=!0);b.attr("data-mask-clearifnotmatch")&&(h.clearIfNotMatch=!0);"true"===b.attr("data-mask-selectonfocus")&&(h.selectOnFocus=!0);if(e(b,g,h)){return b.data("mask",new f(this,g,h))}},e=function(h,n,m){m=m||{};var j=c(h).data("mask"),i=JSON.stringify;h=c(h).val()||c(h).text();try{return"function"===typeof n&&(n=n(h)),"object"!==typeof j||i(j.options)!==i(m)||j.mask!==n}catch(b){}};c.fn.mask=function(h,n){n=n||{};var m=this.selector,j=c.jMaskGlobals,i=c.jMaskGlobals.watchInterval,b=function(){if(e(this,h,n)){return c(this).data("mask",new f(this,h,n))}};c(this).each(b);m&&""!==m&&j.watchInputs&&(clearInterval(c.maskWatchers[m]),c.maskWatchers[m]=setInterval(function(){c(document).find(m).each(b)},i));return this};c.fn.unmask=function(){clearInterval(c.maskWatchers[this.selector]);delete c.maskWatchers[this.selector];return this.each(function(){var b=c(this).data("mask");b&&b.remove().removeData("mask")})};c.fn.cleanVal=function(){return this.data("mask").getCleanVal()};c.applyDataMask=function(b){b=b||c.jMaskGlobals.maskElements;(b instanceof c?b:c(b)).filter(c.jMaskGlobals.dataMaskAttr).each(a)};var d={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};c.jMaskGlobals=c.jMaskGlobals||{};d=c.jMaskGlobals=c.extend(!0,{},d,c.jMaskGlobals);d.dataMask&&c.applyDataMask();setInterval(function(){c.jMaskGlobals.watchDataMask&&c.applyDataMask()},d.watchInterval)});
jQuery(document).ready(function($){var errorMessages=new Array();var hiddenBalise="hiddendata";if($("#"+hiddenBalise+" #environnementMode").length){var environnementMode=$("#"+hiddenBalise+" #environnementMode").text();$("body").data("environnementMode",environnementMode)}else{alert("Erreur majeure : environnement non défini.");errorMessages.push("Erreur : environnement non défini.")}var locale=$("#"+hiddenBalise+" #locale").text();if(environnementMode!="prod"){console.log("Locale : ",locale)}$(".js-switch").each(function(item){var switchButton=new Switchery(this,{color:"#a3401b",size:"small"})});$(".data-report").each(function(item){var dr_target=$(this).attr("data-report-target");var $parent=$(this);if(dr_target!=undefined){var target=$(dr_target);if(target!=undefined){$parent.text(target.val());$(target).on("keyup change",function(elem){$parent.text(target.val())})}}});$(".icheckbox, .iradio").each(function(){$(this).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green"})});$(".input-group.date").datepicker({todayBtn:"linked",keyboardNavigation:false,forceParse:false,calendarWeeks:true,autoclose:true,format:$("#formFormatDate").text()});$(".colorpickers").each(function(e){$(this).colorpicker({format:"rgba"})});$(".richtexts").each(function(item){var $parent=$(this);var height=140;if($(this).attr("data-height")!=undefined){height=parseInt($(this).attr("data-height"))}$(this).summernote({lang:"fr",height:height,focus:true,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture"]],["help",["help"]]]})});$('body [data-toggle="popover"]').popover({});$('body [data-toggle="tooltip"]').tooltip({container:"body",delay:{show:500,hide:100}});var formatState=function(state){if(!state.id){return state.text}var $state=$('<i class="fa fa-'+state.text+' fa-2x m-r-sm"></i><span>'+state.text+"</span>");return $state};$(".select2").each(function(item){var options=new Array();if($(this).attr("placeholder")!=undefined){placeholder=$(this).attr("placeholder")}else{placeholder="…"}options.placeholder={id:"",placeholder:placeholder};if($(this).attr("data-allowClear")){options.allowClear=eval($(this).attr("data-allowClear"))}if($(this).attr("data-limit")){limit=parseInt($(this).attr("data-limit"));if(limit>0){options.maximumSelectionLength=limit}}if(locale!=undefined){options.language=locale}if($(this).attr("data-language")){options.language=parseInt($(this).attr("data-language"))}if($(this).attr("data-format")){options.templateResult=eval($(this).attr("data-format"))}if(environnementMode!="prod"){console.log("options : ",options)}$(this).select2(options)});var points="• ";if(errorMessages.length>0&&environnementMode!="prod"){alert(points+errorMessages.join("\n"+points))}});
/*! DataTables 1.10.8
 * ©2008-2014 SpryMedia Ltd - datatables.net/license
 */
(function(b,a,c){(function(d){if(typeof define==="function"&&define.amd){define("datatables",["jquery"],d)}else{if(typeof exports==="object"){module.exports=d(require("jquery"))}else{if(jQuery&&!jQuery.fn.dataTable){d(jQuery)}}}}(function(bE){var N;var I;var J;var bj;var aA;var a6={};var W=/[\r\n]/g;var aT=/<.*?>/g;var am=/^[\w\+\-]/;var bu=/[\w\+\-]$/;var aC=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g");var bF=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi;var bA=function(bQ){return !bQ||bQ===true||bQ==="-"?true:false};var F=function(bR){var bQ=parseInt(bR,10);return !isNaN(bQ)&&isFinite(bR)?bQ:null};var bC=function(bR,bQ){if(!a6[bQ]){a6[bQ]=new RegExp(m(bQ),"g")}return typeof bR==="string"&&bQ!=="."?bR.replace(/\./g,"").replace(a6[bQ],"."):bR};var aj=function(bT,bQ,bS){var bR=typeof bT==="string";if(bA(bT)){return true}if(bQ&&bR){bT=bC(bT,bQ)}if(bS&&bR){bT=bT.replace(bF,"")}return !isNaN(parseFloat(bT))&&isFinite(bT)};var bL=function(bQ){return bA(bQ)||typeof bQ==="string"};var j=function(bT,bQ,bS){if(bA(bT)){return true}var bR=bL(bT);return !bR?null:aj(D(bT),bQ,bS)?true:null};var au=function(bR,bV,bU){var bS=[];var bT=0,bQ=bR.length;if(bU!==c){for(;bT<bQ;bT++){if(bR[bT]&&bR[bT][bV]){bS.push(bR[bT][bV][bU])}}}else{for(;bT<bQ;bT++){if(bR[bT]){bS.push(bR[bT][bV])}}}return bS};var t=function(bS,bQ,bW,bV){var bT=[];var bU=0,bR=bQ.length;if(bV!==c){for(;bU<bR;bU++){if(bS[bQ[bU]][bW]){bT.push(bS[bQ[bU]][bW][bV])}}}else{for(;bU<bR;bU++){bT.push(bS[bQ[bU]][bW])}}return bT};var bf=function(bQ,bU){var bS=[];var bR;if(bU===c){bU=0;bR=bQ}else{bR=bU;bU=bQ}for(var bT=bU;bT<bR;bT++){bS.push(bT)}return bS};var ad=function(bR){var bS=[];for(var bT=0,bQ=bR.length;bT<bQ;bT++){if(bR[bT]){bS.push(bR[bT])}}return bS};var D=function(bQ){return bQ.replace(aT,"")};var aG=function(bW){var bT=[],bV,bU,bQ=bW.length,bS,bR=0;again:for(bU=0;bU<bQ;bU++){bV=bW[bU];for(bS=0;bS<bR;bS++){if(bT[bS]===bV){continue again}}bT.push(bV);bR++}return bT};function T(bU){var bT="a aa ai ao as b fn i m o s ",bQ,bS,bR={};bE.each(bU,function(bV,bW){bQ=bV.match(/^([^A-Z]+?)([A-Z])/);if(bQ&&bT.indexOf(bQ[1]+" ")!==-1){bS=bV.replace(bQ[0],bQ[2].toLowerCase());bR[bS]=bV;if(bQ[1]==="o"){T(bU[bV])}}});bU._hungarianMap=bR}function aa(bT,bQ,bS){if(!bT._hungarianMap){T(bT)}var bR;bE.each(bQ,function(bU,bV){bR=bT._hungarianMap[bU];if(bR!==c&&(bS||bQ[bR]===c)){if(bR.charAt(0)==="o"){if(!bQ[bR]){bQ[bR]={}}bE.extend(true,bQ[bR],bQ[bU]);aa(bT[bR],bQ[bR],bS)}else{bQ[bR]=bQ[bU]}}})}function aR(bT){var bS=N.defaults.oLanguage;var bR=bT.sZeroRecords;if(!bT.sEmptyTable&&bR&&bS.sEmptyTable==="No data available in table"){R(bT,bT,"sZeroRecords","sEmptyTable")}if(!bT.sLoadingRecords&&bR&&bS.sLoadingRecords==="Loading..."){R(bT,bT,"sZeroRecords","sLoadingRecords")}if(bT.sInfoThousands){bT.sThousands=bT.sInfoThousands}var bQ=bT.sDecimal;if(bQ){bq(bQ)}}var aL=function(bS,bR,bQ){if(bS[bR]!==c){bS[bQ]=bS[bR]}};function a3(bT){aL(bT,"ordering","bSort");aL(bT,"orderMulti","bSortMulti");aL(bT,"orderClasses","bSortClasses");aL(bT,"orderCellsTop","bSortCellsTop");aL(bT,"order","aaSorting");aL(bT,"orderFixed","aaSortingFixed");aL(bT,"paging","bPaginate");aL(bT,"pagingType","sPaginationType");aL(bT,"pageLength","iDisplayLength");aL(bT,"searching","bFilter");if(typeof bT.sScrollX==="boolean"){bT.sScrollX=bT.sScrollX?"100%":""}var bS=bT.aoSearchCols;if(bS){for(var bR=0,bQ=bS.length;bR<bQ;bR++){if(bS[bR]){aa(N.models.oSearch,bS[bR])}}}}function X(bR){aL(bR,"orderable","bSortable");aL(bR,"orderData","aDataSort");aL(bR,"orderSequence","asSorting");aL(bR,"orderDataType","sortDataType");var bQ=bR.aDataSort;if(bQ&&!bE.isArray(bQ)){bR.aDataSort=[bQ]}}function bd(bR){var bQ=bR.oBrowser;var bT=bE("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(bE("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(bE('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body");var bS=bT.find(".test");bQ.bScrollOversize=bS[0].offsetWidth===100;bQ.bScrollbarLeft=Math.round(bS.offset().left)!==1;bQ.bBounding=bT[0].getBoundingClientRect().width?true:false;bT.remove()}function aU(bU,bW,bY,bQ,bS,bR){var bT=bQ,bX,bV=false;if(bY!==c){bX=bY;bV=true}while(bT!==bS){if(!bU.hasOwnProperty(bT)){continue}bX=bV?bW(bX,bU[bT],bT,bU):bU[bT];bV=true;bT+=bR}return bX}function O(bU,bT){var bV=N.defaults.column;var bQ=bU.aoColumns.length;var bS=bE.extend({},N.models.oColumn,bV,{nTh:bT?bT:a.createElement("th"),sTitle:bV.sTitle?bV.sTitle:bT?bT.innerHTML:"",aDataSort:bV.aDataSort?bV.aDataSort:[bQ],mData:bV.mData?bV.mData:bQ,idx:bQ});bU.aoColumns.push(bS);var bR=bU.aoPreSearchCols;bR[bQ]=bE.extend({},N.models.oSearch,bR[bQ]);a1(bU,bQ,bE(bT).data())}function a1(bS,b1,b0){var bW=bS.aoColumns[b1];var bQ=bS.oClasses;var bR=bE(bW.nTh);if(!bW.sWidthOrig){bW.sWidthOrig=bR.attr("width")||null;var b2=(bR.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);if(b2){bW.sWidthOrig=b2[1]}}if(b0!==c&&b0!==null){X(b0);aa(N.defaults.column,b0);if(b0.mDataProp!==c&&!b0.mData){b0.mData=b0.mDataProp}if(b0.sType){bW._sManualType=b0.sType}if(b0.className&&!b0.sClass){b0.sClass=b0.className}bE.extend(bW,b0);R(bW,b0,"sWidth","sWidthOrig");if(b0.iDataSort!==c){bW.aDataSort=[b0.iDataSort]}R(bW,b0,"aDataSort")}var bZ=bW.mData;var bV=ao(bZ);var bY=bW.mRender?ao(bW.mRender):null;var bU=function(b3){return typeof b3==="string"&&b3.indexOf("@")!==-1};bW._bAttrSrc=bE.isPlainObject(bZ)&&(bU(bZ.sort)||bU(bZ.type)||bU(bZ.filter));bW.fnGetData=function(b5,b4,b6){var b3=bV(b5,b4,c,b6);return bY&&b4?bY(b3,b4,b5,b6):b3};bW.fnSetData=function(b3,b5,b4){return ax(bZ)(b3,b5,b4)};if(typeof bZ!=="number"){bS._rowReadObject=true}if(!bS.oFeatures.bSort){bW.bSortable=false;bR.addClass(bQ.sSortableNone)}var bT=bE.inArray("asc",bW.asSorting)!==-1;var bX=bE.inArray("desc",bW.asSorting)!==-1;if(!bW.bSortable||(!bT&&!bX)){bW.sSortingClass=bQ.sSortableNone;bW.sSortingClassJUI=""}else{if(bT&&!bX){bW.sSortingClass=bQ.sSortableAsc;bW.sSortingClassJUI=bQ.sSortJUIAscAllowed}else{if(!bT&&bX){bW.sSortingClass=bQ.sSortableDesc;bW.sSortingClassJUI=bQ.sSortJUIDescAllowed}else{bW.sSortingClass=bQ.sSortable;bW.sSortingClassJUI=bQ.sSortJUI}}}}function aI(bU){if(bU.oFeatures.bAutoWidth!==false){var bT=bU.aoColumns;bv(bU);for(var bS=0,bR=bT.length;bS<bR;bS++){bT[bS].nTh.style.width=bT[bS].sWidth}}var bQ=bU.oScroll;if(bQ.sY!==""||bQ.sX!==""){l(bU)}L(bU,null,"column-sizing",[bU])}function r(bS,bQ){var bR=p(bS,"bVisible");return typeof bR[bQ]==="number"?bR[bQ]:null}function bI(bS,bQ){var bR=p(bS,"bVisible");var bT=bE.inArray(bQ,bR);return bT!==-1?bT:null}function aP(bQ){return p(bQ,"bVisible").length}function p(bS,bR){var bQ=[];bE.map(bS.aoColumns,function(bU,bT){if(bU[bR]){bQ.push(bT)}});return bQ}function v(bT){var bU=bT.aoColumns;var bY=bT.aoData;var b0=N.ext.type.detect;var bZ,b3,bX,bR,bW,bV;var bS,b1,b2,bQ;for(bZ=0,b3=bU.length;bZ<b3;bZ++){bS=bU[bZ];bQ=[];if(!bS.sType&&bS._sManualType){bS.sType=bS._sManualType}else{if(!bS.sType){for(bX=0,bR=b0.length;bX<bR;bX++){for(bW=0,bV=bY.length;bW<bV;bW++){if(bQ[bW]===c){bQ[bW]=bt(bT,bW,bZ,"type")}b2=b0[bX](bQ[bW],bT);if(!b2&&bX!==b0.length-1){break}if(b2==="html"){break}}if(b2){bS.sType=b2;break}}if(!bS.sType){bS.sType="string"}}}}}function k(bR,b1,bS,b0){var bX,bT,bW,b2,bV,bZ,bQ;var bU=bR.aoColumns;if(b1){for(bX=b1.length-1;bX>=0;bX--){bQ=b1[bX];var bY=bQ.targets!==c?bQ.targets:bQ.aTargets;if(!bE.isArray(bY)){bY=[bY]}for(bW=0,b2=bY.length;bW<b2;bW++){if(typeof bY[bW]==="number"&&bY[bW]>=0){while(bU.length<=bY[bW]){O(bR)}b0(bY[bW],bQ)}else{if(typeof bY[bW]==="number"&&bY[bW]<0){b0(bU.length+bY[bW],bQ)}else{if(typeof bY[bW]==="string"){for(bV=0,bZ=bU.length;bV<bZ;bV++){if(bY[bW]=="_all"||bE(bU[bV].nTh).hasClass(bY[bW])){b0(bV,bQ)}}}}}}}}if(bS){for(bX=0,bT=bS.length;bX<bT;bX++){b0(bX,bS[bX])}}}function aN(bS,b1,b0,bX){var bZ=bS.aoData.length;var bR=bE.extend(true,{},N.models.oRow,{src:b0?"dom":"data",idx:bZ});bR._aData=b1;bS.aoData.push(bR);var bW,bU;var bV=bS.aoColumns;for(var bY=0,bT=bV.length;bY<bT;bY++){if(b0){bl(bS,bZ,bY,bt(bS,bZ,bY))}bV[bY].sType=null}bS.aiDisplayMaster.push(bZ);var bQ=bS.rowIdFn(b1);if(bQ!==c){bS.aIds[bQ]=bR}if(b0||!bS.oFeatures.bDeferRender){P(bS,bZ,b0,bX)}return bZ}function bP(bR,bQ){var bS;if(!(bQ instanceof bE)){bQ=bE(bQ)}return bQ.map(function(bT,bU){bS=be(bR,bU);return aN(bR,bS.data,bU,bS.cells)})}function br(bQ,bR){return(bR._DT_RowIndex!==c)?bR._DT_RowIndex:null}function aZ(bQ,bR,bS){return bE.inArray(bS,bQ.aoData[bR].anCells)}function bt(bT,bQ,bU,bW){var bX=bT.iDraw;var bR=bT.aoColumns[bU];var bS=bT.aoData[bQ]._aData;var bY=bR.sDefaultContent;var bV=bR.fnGetData(bS,bW,{settings:bT,row:bQ,col:bU});if(bV===c){if(bT.iDrawError!=bX&&bY===null){aM(bT,0,"Requested unknown parameter "+(typeof bR.mData=="function"?"{function}":"'"+bR.mData+"'")+" for row "+bQ,4);bT.iDrawError=bX}return bY}if((bV===bS||bV===null)&&bY!==null){bV=bY}else{if(typeof bV==="function"){return bV.call(bS)}}if(bV===null&&bW=="display"){return""}return bV}function bl(bR,bS,bV,bU){var bQ=bR.aoColumns[bV];var bT=bR.aoData[bS]._aData;bQ.fnSetData(bT,bU,{settings:bR,row:bS,col:bV})}var K=/\[.*?\]$/;var f=/\(\)$/;function ak(bQ){return bE.map(bQ.match(/(\\.|[^\.])+/g)||[""],function(bR){return bR.replace(/\\./g,".")})}function ao(bR){if(bE.isPlainObject(bR)){var bS={};bE.each(bR,function(bT,bU){if(bU){bS[bT]=ao(bU)}});return function(bV,bU,bX,bW){var bT=bS[bU]||bS._;return bT!==c?bT(bV,bU,bX,bW):bV}}else{if(bR===null){return function(bT){return bT}}else{if(typeof bR==="function"){return function(bU,bT,bW,bV){return bR(bU,bT,bW,bV)}}else{if(typeof bR==="string"&&(bR.indexOf(".")!==-1||bR.indexOf("[")!==-1||bR.indexOf("(")!==-1)){var bQ=function(b1,b2,bT){var b4,bX,bZ,bW;if(bT!==""){var b3=ak(bT);for(var b0=0,bV=b3.length;b0<bV;b0++){b4=b3[b0].match(K);bX=b3[b0].match(f);if(b4){b3[b0]=b3[b0].replace(K,"");if(b3[b0]!==""){b1=b1[b3[b0]]}bZ=[];b3.splice(0,b0+1);bW=b3.join(".");for(var bY=0,b5=b1.length;bY<b5;bY++){bZ.push(bQ(b1[bY],b2,bW))}var bU=b4[0].substring(1,b4[0].length-1);b1=(bU==="")?bZ:bZ.join(bU);break}else{if(bX){b3[b0]=b3[b0].replace(f,"");b1=b1[b3[b0]]();continue}}if(b1===null||b1[b3[b0]]===c){return c}b1=b1[b3[b0]]}}return b1};return function(bU,bT){return bQ(bU,bT,bR)}}else{return function(bU,bT){return bU[bR]}}}}}}function ax(bR){if(bE.isPlainObject(bR)){return ax(bR._)}else{if(bR===null){return function(){}}else{if(typeof bR==="function"){return function(bS,bU,bT){bR(bS,"set",bU,bT)}}else{if(typeof bR==="string"&&(bR.indexOf(".")!==-1||bR.indexOf("[")!==-1||bR.indexOf("(")!==-1)){var bQ=function(b0,bW,bS){var b3=ak(bS),b1;var b2=b3[b3.length-1];var b4,bX,bT,bV;for(var bZ=0,bU=b3.length-1;bZ<bU;bZ++){b4=b3[bZ].match(K);bX=b3[bZ].match(f);if(b4){b3[bZ]=b3[bZ].replace(K,"");b0[b3[bZ]]=[];b1=b3.slice();b1.splice(0,bZ+1);bV=b1.join(".");for(var bY=0,b5=bW.length;bY<b5;bY++){bT={};bQ(bT,bW[bY],bV);b0[b3[bZ]].push(bT)}return}else{if(bX){b3[bZ]=b3[bZ].replace(f,"");b0=b0[b3[bZ]](bW)}}if(b0[b3[bZ]]===null||b0[b3[bZ]]===c){b0[b3[bZ]]={}}b0=b0[b3[bZ]]}if(b2.match(f)){b0=b0[b2.replace(f,"")](bW)}else{b0[b2.replace(K,"")]=bW}};return function(bS,bT){return bQ(bS,bT,bR)}}else{return function(bS,bT){bS[bR]=bT}}}}}}function bG(bQ){return au(bQ.aoData,"_aData")}function bh(bQ){bQ.aoData.length=0;bQ.aiDisplayMaster.length=0;bQ.aiDisplay.length=0}function a4(bR,bT,bV){var bU=-1;for(var bS=0,bQ=bR.length;bS<bQ;bS++){if(bR[bS]==bT){bU=bS}else{if(bR[bS]>bT){bR[bS]--}}}if(bU!=-1&&bV===c){bR.splice(bU,1)}}function B(bT,bR,bQ,bU){var bZ=bT.aoData[bR];var bV,bX;var bS=function(b0,b1){while(b0.childNodes.length){b0.removeChild(b0.firstChild)}b0.innerHTML=bt(bT,bR,b1,"display")};if(bQ==="dom"||((!bQ||bQ==="auto")&&bZ.src==="dom")){bZ._aData=be(bT,bZ,bU,bU===c?c:bZ._aData).data}else{var bY=bZ.anCells;if(bY){if(bU!==c){bS(bY[bU],bU)}else{for(bV=0,bX=bY.length;bV<bX;bV++){bS(bY[bV],bV)}}}}bZ._aSortData=null;bZ._aFilterData=null;var bW=bT.aoColumns;if(bU!==c){bW[bU].sType=null}else{for(bV=0,bX=bW.length;bV<bX;bV++){bW[bV].sType=null}ac(bT,bZ)}}function be(b5,bT,bW,b6){var b2=[],bU=bT.firstChild,b7,bS,bY,b3=0,b4,bQ=b5.aoColumns,bR=b5._rowReadObject;b6=b6||bR?{}:[];var bZ=function(ca,cc){if(typeof ca==="string"){var b9=ca.indexOf("@");if(b9!==-1){var b8=ca.substring(b9+1);var cb=ax(ca);cb(b6,cc.getAttribute(b8))}}};var bV=function(b8){if(bW===c||bW===b3){bS=bQ[b3];b4=bE.trim(b8.innerHTML);if(bS&&bS._bAttrSrc){var b9=ax(bS.mData._);b9(b6,b4);bZ(bS.mData.sort,b8);bZ(bS.mData.type,b8);bZ(bS.mData.filter,b8)}else{if(bR){if(!bS._setter){bS._setter=ax(bS.mData)}bS._setter(b6,b4)}else{b6[b3]=b4}}}b3++};if(bU){while(bU){b7=bU.nodeName.toUpperCase();if(b7=="TD"||b7=="TH"){bV(bU);b2.push(bU)}bU=bU.nextSibling}}else{b2=bT.anCells;for(var b1=0,b0=b2.length;b1<b0;b1++){bV(b2[b1])}}var bX=bT.getAttribute("id");if(bX){ax(b5.rowId)(b6,bX)}return{data:b6,cells:b2}}function P(bR,bY,bQ,bW){var b1=bR.aoData[bY],bU=b1._aData,b0=[],bZ,bV,bT,bX,bS;if(b1.nTr===null){bZ=bQ||a.createElement("tr");b1.nTr=bZ;b1.anCells=b0;bZ._DT_RowIndex=bY;ac(bR,b1);for(bX=0,bS=bR.aoColumns.length;bX<bS;bX++){bT=bR.aoColumns[bX];bV=bQ?bW[bX]:a.createElement(bT.sCellType);b0.push(bV);if(!bQ||bT.mRender||bT.mData!==bX){bV.innerHTML=bt(bR,bY,bX,"display")}if(bT.sClass){bV.className+=" "+bT.sClass}if(bT.bVisible&&!bQ){bZ.appendChild(bV)}else{if(!bT.bVisible&&bQ){bV.parentNode.removeChild(bV)}}if(bT.fnCreatedCell){bT.fnCreatedCell.call(bR.oInstance,bV,bt(bR,bY,bX),bU,bY,bX)}}L(bR,"aoRowCreatedCallback",null,[bZ,bU,bY])}b1.nTr.setAttribute("role","row")}function ac(bR,bU){var bT=bU.nTr;var bS=bU._aData;if(bT){var bV=bR.rowIdFn(bS);if(bV){bT.id=bV}if(bS.DT_RowClass){var bQ=bS.DT_RowClass.split(" ");bU.__rowc=bU.__rowc?aG(bU.__rowc.concat(bQ)):bQ;bE(bT).removeClass(bU.__rowc.join(" ")).addClass(bS.DT_RowClass)}if(bS.DT_RowAttr){bE(bT).attr(bS.DT_RowAttr)}if(bS.DT_RowData){bE(bT).data(bS.DT_RowData)}}}function aK(bQ){var bU,bZ,bY,b1,bT;var bV=bQ.nTHead;var bW=bQ.nTFoot;var bX=bE("th, td",bV).length===0;var bS=bQ.oClasses;var bR=bQ.aoColumns;if(bX){b1=bE("<tr/>").appendTo(bV)}for(bU=0,bZ=bR.length;bU<bZ;bU++){bT=bR[bU];bY=bE(bT.nTh).addClass(bT.sClass);if(bX){bY.appendTo(b1)}if(bQ.oFeatures.bSort){bY.addClass(bT.sSortingClass);if(bT.bSortable!==false){bY.attr("tabindex",bQ.iTabIndex).attr("aria-controls",bQ.sTableId);C(bQ,bT.nTh,bU)}}if(bT.sTitle!=bY[0].innerHTML){bY.html(bT.sTitle)}S(bQ,"header")(bQ,bY,bT,bS)}if(bX){aw(bQ.aoHeader,bV)}bE(bV).find(">tr").attr("role","row");bE(bV).find(">tr>th, >tr>td").addClass(bS.sHeaderTH);bE(bW).find(">tr>th, >tr>td").addClass(bS.sFooterTH);if(bW!==null){var b0=bQ.aoFooter[0];for(bU=0,bZ=b0.length;bU<bZ;bU++){bT=bR[bU];bT.nTf=b0[bU].cell;if(bT.sClass){bE(bT.nTf).addClass(bT.sClass)}}}}function a5(bT,b2,b5){var bY,bV,bX,b1,bW,bZ,bU,b4;var bS=[];var b0=[];var bQ=bT.aoColumns.length;var bR,b3;if(!b2){return}if(b5===c){b5=false}for(bY=0,bV=b2.length;bY<bV;bY++){bS[bY]=b2[bY].slice();bS[bY].nTr=b2[bY].nTr;for(bX=bQ-1;bX>=0;bX--){if(!bT.aoColumns[bX].bVisible&&!b5){bS[bY].splice(bX,1)}}b0.push([])}for(bY=0,bV=bS.length;bY<bV;bY++){b4=bS[bY].nTr;if(b4){while((bU=b4.firstChild)){b4.removeChild(bU)}}for(bX=0,b1=bS[bY].length;bX<b1;bX++){bR=1;b3=1;if(b0[bY][bX]===c){b4.appendChild(bS[bY][bX].cell);b0[bY][bX]=1;while(bS[bY+bR]!==c&&bS[bY][bX].cell==bS[bY+bR][bX].cell){b0[bY+bR][bX]=1;bR++}while(bS[bY][bX+b3]!==c&&bS[bY][bX].cell==bS[bY][bX+b3].cell){for(bW=0;bW<bR;bW++){b0[bY+bW][bX+b3]=1}b3++}bE(bS[bY][bX].cell).attr("rowspan",bR).attr("colspan",b3)}}}}function a2(bS){var cc=L(bS,"aoPreDrawCallback","preDraw",[bS]);if(bE.inArray(false,cc)!==-1){w(bS,false);return}var cb,b7,b3;var bW=[];var ce=0;var b0=bS.asStripeClasses;var b5=b0.length;var b1=bS.aoOpenRows.length;var b6=bS.oLanguage;var b2=bS.iInitDisplayStart;var ca=y(bS)=="ssp";var bV=bS.aiDisplay;bS.bDrawing=true;if(b2!==c&&b2!==-1){bS._iDisplayStart=ca?b2:b2>=bS.fnRecordsDisplay()?0:b2;bS.iInitDisplayStart=-1}var bR=bS._iDisplayStart;var bT=bS.fnDisplayEnd();if(bS.bDeferLoading){bS.bDeferLoading=false;bS.iDraw++;w(bS,false)}else{if(!ca){bS.iDraw++}else{if(!bS.bDestroying&&!af(bS)){return}}}if(bV.length!==0){var bU=ca?0:bR;var bQ=ca?bS.aoData.length:bT;for(var b8=bU;b8<bQ;b8++){var bY=bV[b8];var bZ=bS.aoData[bY];if(bZ.nTr===null){P(bS,bY)}var cd=bZ.nTr;if(b5!==0){var b9=b0[ce%b5];if(bZ._sRowStripe!=b9){bE(cd).removeClass(bZ._sRowStripe).addClass(b9);bZ._sRowStripe=b9}}L(bS,"aoRowCallback",null,[cd,bZ._aData,ce,b8]);bW.push(cd);ce++}}else{var b4=b6.sZeroRecords;if(bS.iDraw==1&&y(bS)=="ajax"){b4=b6.sLoadingRecords}else{if(b6.sEmptyTable&&bS.fnRecordsTotal()===0){b4=b6.sEmptyTable}}bW[0]=bE("<tr/>",{"class":b5?b0[0]:""}).append(bE("<td />",{valign:"top",colSpan:aP(bS),"class":bS.oClasses.sRowEmpty}).html(b4))[0]}L(bS,"aoHeaderCallback","header",[bE(bS.nTHead).children("tr")[0],bG(bS),bR,bT,bV]);L(bS,"aoFooterCallback","footer",[bE(bS.nTFoot).children("tr")[0],bG(bS),bR,bT,bV]);var bX=bE(bS.nTBody);bX.children().detach();bX.append(bE(bW));L(bS,"aoDrawCallback","draw",[bS]);bS.bSorted=false;bS.bFiltered=false;bS.bDrawing=false}function ai(bU,bR){var bT=bU.oFeatures,bQ=bT.bSort,bS=bT.bFilter;if(bQ){x(bU)}if(bS){u(bU,bU.oPreviousSearch)}else{bU.aiDisplay=bU.aiDisplayMaster.slice()}if(bR!==true){bU._iDisplayStart=0}bU._drawHold=bR;a2(bU);bU._drawHold=false}function i(bU){var b7=bU.oClasses;var b4=bE(bU.nTable);var bW=bE("<div/>").insertBefore(b4);var bV=bU.oFeatures;var bR=bE("<div/>",{id:bU.sTableId+"_wrapper","class":b7.sWrapper+(bU.nTFoot?"":" "+b7.sNoFooter)});bU.nHolding=bW[0];bU.nTableWrapper=bR[0];bU.nTableReinsertBefore=bU.nTable.nextSibling;var bX=bU.sDom.split("");var b2,bY,bT,b8,b6,b0;for(var b3=0;b3<bX.length;b3++){b2=null;bY=bX[b3];if(bY=="<"){bT=bE("<div/>")[0];b8=bX[b3+1];if(b8=="'"||b8=='"'){b6="";b0=2;while(bX[b3+b0]!=b8){b6+=bX[b3+b0];b0++}if(b6=="H"){b6=b7.sJUIHeader}else{if(b6=="F"){b6=b7.sJUIFooter}}if(b6.indexOf(".")!=-1){var b1=b6.split(".");bT.id=b1[0].substr(1,b1[0].length-1);bT.className=b1[1]}else{if(b6.charAt(0)=="#"){bT.id=b6.substr(1,b6.length-1)}else{bT.className=b6}}b3+=b0}bR.append(bT);bR=bE(bT)}else{if(bY==">"){bR=bR.parent()}else{if(bY=="l"&&bV.bPaginate&&bV.bLengthChange){b2=aQ(bU)}else{if(bY=="f"&&bV.bFilter){b2=q(bU)}else{if(bY=="r"&&bV.bProcessing){b2=bz(bU)}else{if(bY=="t"){b2=by(bU)}else{if(bY=="i"&&bV.bInfo){b2=g(bU)}else{if(bY=="p"&&bV.bPaginate){b2=az(bU)}else{if(N.ext.feature.length!==0){var b5=N.ext.feature;for(var bZ=0,bQ=b5.length;bZ<bQ;bZ++){if(bY==b5[bZ].cFeature){b2=b5[bZ].fnInit(bU);break}}}}}}}}}}}if(b2){var bS=bU.aanFeatures;if(!bS[bY]){bS[bY]=[]}bS[bY].push(b2);bR.append(b2)}}bW.replaceWith(bR);bU.nHolding=null}function aw(bW,bR){var b3=bE(bR).children("tr");var b2,b0;var bY,bV,bU,bS,b4,bZ,bX,b5,bQ;var b1;var bT=function(b6,b9,b8){var b7=b6[b9];while(b7[b8]){b8++}return b8};bW.splice(0,bW.length);for(bY=0,bS=b3.length;bY<bS;bY++){bW.push([])}for(bY=0,bS=b3.length;bY<bS;bY++){b2=b3[bY];bX=0;b0=b2.firstChild;while(b0){if(b0.nodeName.toUpperCase()=="TD"||b0.nodeName.toUpperCase()=="TH"){b5=b0.getAttribute("colspan")*1;bQ=b0.getAttribute("rowspan")*1;b5=(!b5||b5===0||b5===1)?1:b5;bQ=(!bQ||bQ===0||bQ===1)?1:bQ;bZ=bT(bW,bY,bX);b1=b5===1?true:false;for(bU=0;bU<b5;bU++){for(bV=0;bV<bQ;bV++){bW[bY+bV][bZ+bU]={cell:b0,unique:b1};bW[bY+bV].nTr=b2}}}b0=b0.nextSibling}}}function bg(bX,bR,bV){var bS=[];if(!bV){bV=bX.aoHeader;if(bR){bV=[];aw(bV,bR)}}for(var bU=0,bQ=bV.length;bU<bQ;bU++){for(var bT=0,bW=bV[bU].length;bT<bW;bT++){if(bV[bU][bT].unique&&(!bS[bT]||!bX.bSortCellsTop)){bS[bT]=bV[bU][bT].cell}}}return bS}function av(bR,bS,bW){L(bR,"aoServerParams","serverParams",[bS]);if(bS&&bE.isArray(bS)){var bT={};var bU=/(.*?)\[\]$/;bE.each(bS,function(b3,b4){var b2=b4.name.match(bU);if(b2){var b1=b2[0];if(!bT[b1]){bT[b1]=[]}bT[b1].push(b4.value)}else{bT[b4.name]=b4.value}});bS=bT}var bQ;var bX=bR.ajax;var bY=bR.oInstance;var bZ=function(b1){L(bR,null,"xhr",[bR,b1,bR.jqXHR]);bW(b1)};if(bE.isPlainObject(bX)&&bX.data){bQ=bX.data;var b0=bE.isFunction(bQ)?bQ(bS,bR):bQ;bS=bE.isFunction(bQ)&&b0?b0:bE.extend(true,bS,b0);delete bX.data}var bV={data:bS,success:function(b2){var b1=b2.error||b2.sError;if(b1){aM(bR,0,b1)}bR.json=b2;bZ(b2)},dataType:"json",cache:false,type:bR.sServerMethod,error:function(b4,b2,b3){var b1=L(bR,null,"xhr",[bR,null,bR.jqXHR]);if(bE.inArray(true,b1)===-1){if(b2=="parsererror"){aM(bR,0,"Invalid JSON response",1)}else{if(b4.readyState===4){aM(bR,0,"Ajax error",7)}}}w(bR,false)}};bR.oAjaxData=bS;L(bR,null,"preXhr",[bR,bS]);if(bR.fnServerData){bR.fnServerData.call(bY,bR.sAjaxSource,bE.map(bS,function(b2,b1){return{name:b1,value:b2}}),bZ,bR)}else{if(bR.sAjaxSource||typeof bX==="string"){bR.jqXHR=bE.ajax(bE.extend(bV,{url:bX||bR.sAjaxSource}))}else{if(bE.isFunction(bX)){bR.jqXHR=bX.call(bY,bS,bZ,bR)}else{bR.jqXHR=bE.ajax(bE.extend(bV,bX));bX.data=bQ}}}}function af(bQ){if(bQ.bAjaxDataGet){bQ.iDraw++;w(bQ,true);av(bQ,bK(bQ),function(bR){V(bQ,bR)});return false}return true}function bK(bV){var bW=bV.aoColumns,b2=bW.length,bS=bV.oFeatures,bQ=bV.oPreviousSearch,b1=bV.aoPreSearchCols,bZ,bY=[],bR,bU,b4,bX=aH(bV),b6=bV._iDisplayStart,b0=bS.bPaginate!==false?bV._iDisplayLength:-1;var bT=function(b7,b8){bY.push({name:b7,value:b8})};bT("sEcho",bV.iDraw);bT("iColumns",b2);bT("sColumns",au(bW,"sName").join(","));bT("iDisplayStart",b6);bT("iDisplayLength",b0);var b3={draw:bV.iDraw,columns:[],order:[],start:b6,length:b0,search:{value:bQ.sSearch,regex:bQ.bRegex}};for(bZ=0;bZ<b2;bZ++){bU=bW[bZ];b4=b1[bZ];bR=typeof bU.mData=="function"?"function":bU.mData;b3.columns.push({data:bR,name:bU.sName,searchable:bU.bSearchable,orderable:bU.bSortable,search:{value:b4.sSearch,regex:b4.bRegex}});bT("mDataProp_"+bZ,bR);if(bS.bFilter){bT("sSearch_"+bZ,b4.sSearch);bT("bRegex_"+bZ,b4.bRegex);bT("bSearchable_"+bZ,bU.bSearchable)}if(bS.bSort){bT("bSortable_"+bZ,bU.bSortable)}}if(bS.bFilter){bT("sSearch",bQ.sSearch);bT("bRegex",bQ.bRegex)}if(bS.bSort){bE.each(bX,function(b7,b8){b3.order.push({column:b8.col,dir:b8.dir});bT("iSortCol_"+b7,b8.col);bT("sSortDir_"+b7,b8.dir)});bT("iSortingCols",bX.length)}var b5=N.ext.legacy.ajax;if(b5===null){return bV.sAjaxSource?bY:b3}return b5?bY:b3}function V(bQ,bY){var bV=function(bZ,b0){return bY[bZ]!==c?bY[bZ]:bY[b0]};var bR=bs(bQ,bY);var bT=bV("sEcho","draw");var bU=bV("iTotalRecords","recordsTotal");var bX=bV("iTotalDisplayRecords","recordsFiltered");if(bT){if(bT*1<bQ.iDraw){return}bQ.iDraw=bT*1}bh(bQ);bQ._iRecordsTotal=parseInt(bU,10);bQ._iRecordsDisplay=parseInt(bX,10);for(var bS=0,bW=bR.length;bS<bW;bS++){aN(bQ,bR[bS])}bQ.aiDisplay=bQ.aiDisplayMaster.slice();bQ.bAjaxDataGet=false;a2(bQ);if(!bQ._bInitComplete){aB(bQ,bY)}bQ.bAjaxDataGet=true;w(bQ,false)}function bs(bS,bR){var bQ=bE.isPlainObject(bS.ajax)&&bS.ajax.dataSrc!==c?bS.ajax.dataSrc:bS.sAjaxDataProp;if(bQ==="data"){return bR.aaData||bR[bQ]}return bQ!==""?ao(bQ)(bR):bR}function q(bT){var bU=bT.oClasses;var bS=bT.sTableId;var bW=bT.oLanguage;var bV=bT.oPreviousSearch;var bR=bT.aanFeatures;var b1='<input type="search" class="'+bU.sFilterInput+'"/>';var b0=bW.sSearch;b0=b0.match(/_INPUT_/)?b0.replace("_INPUT_",b1):b0+b1;var bQ=bE("<div/>",{id:!bR.f?bS+"_filter":null,"class":bU.sFilter}).append(bE("<label/>").append(b0));var bZ=function(){var b3=bR.f;var b2=!this.value?"":this.value;if(b2!=bV.sSearch){u(bT,{sSearch:b2,bRegex:bV.bRegex,bSmart:bV.bSmart,bCaseInsensitive:bV.bCaseInsensitive});bT._iDisplayStart=0;a2(bT)}};var bY=bT.searchDelay!==null?bT.searchDelay:y(bT)==="ssp"?400:0;var bX=bE("input",bQ).val(bV.sSearch).attr("placeholder",bW.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",bY?al(bZ,bY):bZ).bind("keypress.DT",function(b2){if(b2.keyCode==13){return false}}).attr("aria-controls",bS);bE(bT.nTable).on("search.dt.DT",function(b3,b2){if(bT===b2){try{if(bX[0]!==a.activeElement){bX.val(bV.sSearch)}}catch(b4){}}});return bQ[0]}function u(bT,bX,bW){var bS=bT.oPreviousSearch;var bV=bT.aoPreSearchCols;var bU=function(bY){bS.sSearch=bY.sSearch;bS.bRegex=bY.bRegex;bS.bSmart=bY.bSmart;bS.bCaseInsensitive=bY.bCaseInsensitive};var bR=function(bY){return bY.bEscapeRegex!==c?!bY.bEscapeRegex:bY.bRegex};v(bT);if(y(bT)!="ssp"){ay(bT,bX.sSearch,bW,bR(bX),bX.bSmart,bX.bCaseInsensitive);bU(bX);for(var bQ=0;bQ<bV.length;bQ++){Y(bT,bV[bQ].sSearch,bQ,bR(bV[bQ]),bV[bQ].bSmart,bV[bQ].bCaseInsensitive)}ar(bT)}else{bU(bX)}bT.bFiltered=true;L(bT,null,"search",[bT])}function ar(bT){var bS=N.ext.search;var bW=bT.aiDisplay;var bY,bR;for(var bV=0,bX=bS.length;bV<bX;bV++){var bZ=[];for(var bU=0,bQ=bW.length;bU<bQ;bU++){bR=bW[bU];bY=bT.aoData[bR];if(bS[bV](bT,bY._aFilterData,bR,bY._aData,bU)){bZ.push(bR)}}bW.length=0;bW.push.apply(bW,bZ)}}function Y(bR,bQ,bV,bY,bZ,bT){if(bQ===""){return}var bW;var bX=bR.aiDisplay;var bS=aV(bQ,bY,bZ,bT);for(var bU=bX.length-1;bU>=0;bU--){bW=bR.aoData[bX[bU]]._aFilterData[bV];if(!bS.test(bW)){bX.splice(bU,1)}}}function ay(bR,bZ,bQ,bY,b1,bU){var bT=aV(bZ,bY,b1,bU);var bS=bR.oPreviousSearch.sSearch;var bW=bR.aiDisplayMaster;var bX,b0,bV;if(N.ext.search.length!==0){bQ=true}b0=aD(bR);if(bZ.length<=0){bR.aiDisplay=bW.slice()}else{if(b0||bQ||bS.length>bZ.length||bZ.indexOf(bS)!==0||bR.bSorted){bR.aiDisplay=bW.slice()}bX=bR.aiDisplay;for(bV=bX.length-1;bV>=0;bV--){if(!bT.test(bR.aoData[bX[bV]]._sFilterRow)){bX.splice(bV,1)}}}}function aV(bS,bT,bU,bQ){bS=bT?bS:m(bS);if(bU){var bR=bE.map(bS.match(/"[^"]+"|[^ ]+/g)||[""],function(bW){if(bW.charAt(0)==='"'){var bV=bW.match(/^"(.*)"$/);bW=bV?bV[1]:bW}return bW.replace('"',"")});bS="^(?=.*?"+bR.join(")(?=.*?")+").*$"}return new RegExp(bS,bQ?"i":"")}function m(bQ){return bQ.replace(aC,"\\$1")}var e=bE("<div>")[0];var aq=e.textContent!==c;function aD(bR){var bT=bR.aoColumns;var bS;var bV,bU,bZ,bQ,bY,bW,b1;var b0=N.ext.type.search;var bX=false;for(bV=0,bZ=bR.aoData.length;bV<bZ;bV++){b1=bR.aoData[bV];if(!b1._aFilterData){bY=[];for(bU=0,bQ=bT.length;bU<bQ;bU++){bS=bT[bU];if(bS.bSearchable){bW=bt(bR,bV,bU,"filter");if(b0[bS.sType]){bW=b0[bS.sType](bW)}if(bW===null){bW=""}if(typeof bW!=="string"&&bW.toString){bW=bW.toString()}}else{bW=""}if(bW.indexOf&&bW.indexOf("&")!==-1){e.innerHTML=bW;bW=aq?e.textContent:e.innerText}if(bW.replace){bW=bW.replace(/[\r\n]/g,"")}bY.push(bW)}b1._aFilterData=bY;b1._sFilterRow=bY.join("  ");bX=true}}return bX}function bx(bQ){return{search:bQ.sSearch,smart:bQ.bSmart,regex:bQ.bRegex,caseInsensitive:bQ.bCaseInsensitive}}function aE(bQ){return{sSearch:bQ.search,bSmart:bQ.smart,bRegex:bQ.regex,bCaseInsensitive:bQ.caseInsensitive}}function g(bR){var bS=bR.sTableId,bQ=bR.aanFeatures.i,bT=bE("<div/>",{"class":bR.oClasses.sInfo,id:!bQ?bS+"_info":null});if(!bQ){bR.aoDrawCallback.push({fn:at,sName:"information"});bT.attr("role","status").attr("aria-live","polite");bE(bR.nTable).attr("aria-describedby",bS+"_info")}return bT[0]}function at(bT){var bQ=bT.aanFeatures.i;if(bQ.length===0){return}var bS=bT.oLanguage,bR=bT._iDisplayStart+1,bU=bT.fnDisplayEnd(),bX=bT.fnRecordsTotal(),bW=bT.fnRecordsDisplay(),bV=bW?bS.sInfo:bS.sInfoEmpty;if(bW!==bX){bV+=" "+bS.sInfoFiltered}bV+=bS.sInfoPostFix;bV=bo(bT,bV);var bY=bS.fnInfoCallback;if(bY!==null){bV=bY.call(bT.oInstance,bT,bR,bU,bX,bW,bV)}bE(bQ).html(bV)}function bo(bT,bV){var bR=bT.fnFormatNumber,bW=bT._iDisplayStart+1,bQ=bT._iDisplayLength,bU=bT.fnRecordsDisplay(),bS=bQ===-1;return bV.replace(/_START_/g,bR.call(bT,bW)).replace(/_END_/g,bR.call(bT,bT.fnDisplayEnd())).replace(/_MAX_/g,bR.call(bT,bT.fnRecordsTotal())).replace(/_TOTAL_/g,bR.call(bT,bU)).replace(/_PAGE_/g,bR.call(bT,bS?1:Math.ceil(bW/bQ))).replace(/_PAGES_/g,bR.call(bT,bS?1:Math.ceil(bU/bQ)))}function h(bT){var bW,bS,bX=bT.iInitDisplayStart;var bV=bT.aoColumns,bU;var bR=bT.oFeatures;var bQ=bT.bDeferLoading;if(!bT.bInitialised){setTimeout(function(){h(bT)},200);return}i(bT);aK(bT);a5(bT,bT.aoHeader);a5(bT,bT.aoFooter);w(bT,true);if(bR.bAutoWidth){bv(bT)}for(bW=0,bS=bV.length;bW<bS;bW++){bU=bV[bW];if(bU.sWidth){bU.nTh.style.width=bJ(bU.sWidth)}}L(bT,null,"preInit",[bT]);ai(bT);var bY=y(bT);if(bY!="ssp"||bQ){if(bY=="ajax"){av(bT,[],function(b0){var bZ=bs(bT,b0);for(bW=0;bW<bZ.length;bW++){aN(bT,bZ[bW])}bT.iInitDisplayStart=bX;ai(bT);w(bT,false);aB(bT,b0)},bT)}else{w(bT,false);aB(bT)}}}function aB(bR,bQ){bR._bInitComplete=true;if(bQ||bR.oInit.aaData){aI(bR)}L(bR,"aoInitComplete","init",[bR,bQ])}function aS(bR,bS){var bQ=parseInt(bS,10);bR._iDisplayLength=bQ;bk(bR);L(bR,null,"length",[bR,bQ])}function aQ(bV){var bW=bV.oClasses,bT=bV.sTableId,bS=bV.aLengthMenu,bQ=bE.isArray(bS[0]),bU=bQ?bS[0]:bS,bY=bQ?bS[1]:bS;var bZ=bE("<select/>",{name:bT+"_length","aria-controls":bT,"class":bW.sLengthSelect});for(var bX=0,b0=bU.length;bX<b0;bX++){bZ[0][bX]=new Option(bY[bX],bU[bX])}var bR=bE("<div><label/></div>").addClass(bW.sLength);if(!bV.aanFeatures.l){bR[0].id=bT+"_length"}bR.children().append(bV.oLanguage.sLengthMenu.replace("_MENU_",bZ[0].outerHTML));bE("select",bR).val(bV._iDisplayLength).bind("change.DT",function(b1){aS(bV,bE(this).val());a2(bV)});bE(bV.nTable).bind("length.dt.DT",function(b3,b2,b1){if(bV===b2){bE("select",bR).val(b1)}});return bR[0]}function az(bT){var bS=bT.sPaginationType,bV=N.ext.pager[bS],bR=typeof bV==="function",bW=function(bX){a2(bX)},bU=bE("<div/>").addClass(bT.oClasses.sPaging+bS)[0],bQ=bT.aanFeatures;if(!bR){bV.fnInit(bT,bU,bW)}if(!bQ.p){bU.id=bT.sTableId+"_paginate";bT.aoDrawCallback.push({fn:function(b0){if(bR){var bX=b0._iDisplayStart,b2=b0._iDisplayLength,bY=b0.fnRecordsDisplay(),b5=b2===-1,b3=b5?0:Math.ceil(bX/b2),bZ=b5?1:Math.ceil(bY/b2),b4=bV(b3,bZ),b1,b6;for(b1=0,b6=bQ.p.length;b1<b6;b1++){S(b0,"pageButton")(b0,bQ.p[b1],b1,b4,b3,bZ)}}else{bV.fnUpdate(b0,bW)}},sName:"pagination"})}return bU}function aF(bS,bT,bW){var bV=bS._iDisplayStart,bQ=bS._iDisplayLength,bR=bS.fnRecordsDisplay();if(bR===0||bQ===-1){bV=0}else{if(typeof bT==="number"){bV=bT*bQ;if(bV>bR){bV=0}}else{if(bT=="first"){bV=0}else{if(bT=="previous"){bV=bQ>=0?bV-bQ:0;if(bV<0){bV=0}}else{if(bT=="next"){if(bV+bQ<bR){bV+=bQ}}else{if(bT=="last"){bV=Math.floor((bR-1)/bQ)*bQ}else{aM(bS,0,"Unknown paging action: "+bT,5)}}}}}}var bU=bS._iDisplayStart!==bV;bS._iDisplayStart=bV;if(bU){L(bS,null,"page",[bS]);if(bW){a2(bS)}}return bU}function bz(bQ){return bE("<div/>",{id:!bQ.aanFeatures.r?bQ.sTableId+"_processing":null,"class":bQ.oClasses.sProcessing}).html(bQ.oLanguage.sProcessing).insertBefore(bQ.nTable)[0]}function w(bR,bQ){if(bR.oFeatures.bProcessing){bE(bR.aanFeatures.r).css("display",bQ?"block":"none")}L(bR,null,"processing",[bR,bQ])}function by(b4){var b3=bE(b4.nTable);b3.attr("role","grid");var bQ=b4.oScroll;if(bQ.sX===""&&bQ.sY===""){return b4.nTable}var bY=bQ.sX;var bX=bQ.sY;var b5=b4.oClasses;var b2=b3.children("caption");var bR=b2.length?b2[0]._captionSide:null;var bU=bE(b3[0].cloneNode(false));var b7=bE(b3[0].cloneNode(false));var bW=b3.children("tfoot");var bZ="<div/>";var bV=function(b8){return !b8?null:bJ(b8)};if(bQ.sX&&b3.attr("width")==="100%"){b3.removeAttr("width")}if(!bW.length){bW=null}var b1=bE(bZ,{"class":b5.sScrollWrapper}).append(bE(bZ,{"class":b5.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:bY?bV(bY):"100%"}).append(bE(bZ,{"class":b5.sScrollHeadInner}).css({"box-sizing":"content-box",width:bQ.sXInner||"100%"}).append(bU.removeAttr("id").css("margin-left",0).append(bR==="top"?b2:null).append(b3.children("thead"))))).append(bE(bZ,{"class":b5.sScrollBody}).css({position:"relative",overflow:"auto",width:bV(bY)}).append(b3));if(bW){b1.append(bE(bZ,{"class":b5.sScrollFoot}).css({overflow:"hidden",border:0,width:bY?bV(bY):"100%"}).append(bE(bZ,{"class":b5.sScrollFootInner}).append(b7.removeAttr("id").css("margin-left",0).append(bR==="bottom"?b2:null).append(b3.children("tfoot")))))}var bS=b1.children();var b0=bS[0];var b6=bS[1];var bT=bW?bS[2]:null;if(bY){bE(b6).on("scroll.DT",function(b8){var b9=this.scrollLeft;b0.scrollLeft=b9;if(bW){bT.scrollLeft=b9}})}bE(b6).css(bX&&bQ.bCollapse?"max-height":"height",bX);b4.nScrollHead=b0;b4.nScrollBody=b6;b4.nScrollFoot=bT;b4.aoDrawCallback.push({fn:l,sName:"scrolling"});return b1[0]}function l(cp){var cl=cp.oScroll,bV=cl.sX,cg=cl.sXInner,bS=cl.sY,ce=cl.iBarWidth,cj=bE(cp.nScrollHead),b8=cj[0].style,bU=cj.children("div"),bR=bU[0].style,cs=bU.children("table"),b1=cp.nScrollBody,cc=bE(b1),b7=b1.style,cm=bE(cp.nScrollFoot),cb=cm.children("div"),b9=cb.children("table"),bZ=bE(cp.nTHead),ca=bE(cp.nTable),cd=ca[0],bX=cd.style,b6=cp.nTFoot?bE(cp.nTFoot):null,bY=cp.oBrowser,b3=bY.bScrollOversize,bT,bW,co,cq,b4,b2,ci=[],ck=[],cf=[],cr,b0,ct,b5=function(cu){var cv=cu.style;cv.paddingTop="0";cv.paddingBottom="0";cv.borderTopWidth="0";cv.borderBottomWidth="0";cv.height=0};ca.children("thead, tfoot").remove();b4=bZ.clone().prependTo(ca);bT=bZ.find("tr");co=b4.find("tr");b4.find("th, td").removeAttr("tabindex");if(b6){b2=b6.clone().prependTo(ca);bW=b6.find("tr");cq=b2.find("tr")}if(!bV){b7.width="100%";cj[0].style.width="100%"}bE.each(bg(cp,b4),function(cu,cv){cr=r(cp,cu);cv.style.width=cp.aoColumns[cr].sWidth});if(b6){a7(function(cu){cu.style.width=""},cq)}ct=ca.outerWidth();if(bV===""){bX.width="100%";if(b3&&(ca.find("tbody").height()>b1.offsetHeight||cc.css("overflow-y")=="scroll")){bX.width=bJ(ca.outerWidth()-ce)}ct=ca.outerWidth()}else{if(cg!==""){bX.width=bJ(cg);ct=ca.outerWidth()}}a7(b5,co);a7(function(cu){cf.push(cu.innerHTML);ci.push(bJ(bE(cu).css("width")))},co);a7(function(cv,cu){cv.style.width=ci[cu]},bT);bE(co).height(0);if(b6){a7(b5,cq);a7(function(cu){ck.push(bJ(bE(cu).css("width")))},cq);a7(function(cv,cu){cv.style.width=ck[cu]},bW);bE(cq).height(0)}a7(function(cv,cu){cv.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+cf[cu]+"</div>";cv.style.width=ci[cu]},co);if(b6){a7(function(cv,cu){cv.innerHTML="";cv.style.width=ck[cu]},cq)}if(ca.outerWidth()<ct){b0=((b1.scrollHeight>b1.offsetHeight||cc.css("overflow-y")=="scroll"))?ct+ce:ct;if(b3&&(b1.scrollHeight>b1.offsetHeight||cc.css("overflow-y")=="scroll")){bX.width=bJ(b0-ce)}if(bV===""||cg!==""){aM(cp,1,"Possible column misalignment",6)}}else{b0="100%"}b7.width=bJ(b0);b8.width=bJ(b0);if(b6){cp.nScrollFoot.style.width=bJ(b0)}if(!bS){if(b3){b7.height=bJ(cd.offsetHeight+ce)}}var bQ=ca.outerWidth();cs[0].style.width=bJ(bQ);bR.width=bJ(bQ);var ch=ca.height()>b1.clientHeight||cc.css("overflow-y")=="scroll";var cn="padding"+(bY.bScrollbarLeft?"Left":"Right");bR[cn]=ch?ce+"px":"0px";if(b6){b9[0].style.width=bJ(bQ);cb[0].style.width=bJ(bQ);cb[0].style[cn]=ch?ce+"px":"0px"}cc.scroll();if((cp.bSorted||cp.bFiltered)&&!cp._drawHold){b1.scrollTop=0}}function a7(bV,bS,bR){var bT=0,bU=0,bQ=bS.length;var bX,bW;while(bU<bQ){bX=bS[bU].firstChild;bW=bR?bR[bU].firstChild:null;while(bX){if(bX.nodeType===1){if(bR){bV(bX,bW,bT)}else{bV(bX,bT)}bT++}bX=bX.nextSibling;bW=bR?bW.nextSibling:null}bU++}}var a0=/<.*?>/g;function bv(bW){var b7=bW.nTable,bT=bW.aoColumns,bS=bW.oScroll,b3=bS.sY,b4=bS.sX,bV=bS.sXInner,cc=bT.length,b9=p(bW,"bVisible"),b8=bE("th",bW.nTHead),b0=b7.getAttribute("width"),bY=b7.parentNode,ca=false,b6,bU,ce,b2,bQ,cd=bW.oBrowser,b5=cd.bScrollOversize;var bZ=b7.style.width;if(bZ&&bZ.indexOf("%")!==-1){b0=bZ}for(b6=0;b6<b9.length;b6++){bU=bT[b9[b6]];if(bU.sWidth!==null){bU.sWidth=ag(bU.sWidthOrig,bY);ca=true}}if(b5||!ca&&!b4&&!b3&&cc==aP(bW)&&cc==b8.length){for(b6=0;b6<cc;b6++){bT[b6].sWidth=bJ(b8.eq(b6).width())}}else{var bX=bE(b7).clone().css("visibility","hidden").removeAttr("id");bX.find("tbody tr").remove();var bR=bE("<tr/>").appendTo(bX.find("tbody"));bX.find("thead, tfoot").remove();bX.append(bE(bW.nTHead).clone()).append(bE(bW.nTFoot).clone());bX.find("tfoot th, tfoot td").css("width","");b8=bg(bW,bX.find("thead")[0]);for(b6=0;b6<b9.length;b6++){bU=bT[b9[b6]];b8[b6].style.width=bU.sWidthOrig!==null&&bU.sWidthOrig!==""?bJ(bU.sWidthOrig):""}if(bW.aoData.length){for(b6=0;b6<b9.length;b6++){ce=b9[b6];bU=bT[ce];bE(aJ(bW,ce)).clone(false).append(bU.sContentPadding).appendTo(bR)}}var b1=bE("<div/>").css(b4||b3?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(bX).appendTo(bY);if(b4&&bV){bX.width(bV)}else{if(b4){bX.css("width","auto");if(bX.width()<bY.clientWidth){bX.width(bY.clientWidth)}}else{if(b3){bX.width(bY.clientWidth)}else{if(b0){bX.width(b0)}}}}if(b4){var cf=0;for(b6=0;b6<b9.length;b6++){bU=bT[b9[b6]];bQ=cd.bBounding?b8[b6].getBoundingClientRect().width:bE(b8[b6]).outerWidth();cf+=bU.sWidthOrig===null?bQ:parseInt(bU.sWidth,10)+bQ-bE(b8[b6]).width()}bX.width(bJ(cf));b7.style.width=bJ(cf)}for(b6=0;b6<b9.length;b6++){bU=bT[b9[b6]];b2=bE(b8[b6]).width();if(b2){bU.sWidth=bJ(b2)}}b7.style.width=bJ(bX.css("width"));b1.remove()}if(b0){b7.style.width=bJ(b0)}if((b0||b4)&&!bW._reszEvt){var cb=function(){bE(b).bind("resize.DT-"+bW.sInstance,al(function(){aI(bW)}))};if(b5){setTimeout(cb,1000)}else{cb()}bW._reszEvt=true}}function al(bQ,bT){var bS=bT!==c?bT:200,bR,bU;return function(){var bX=this,bW=+new Date(),bV=arguments;if(bR&&bW<bR+bS){clearTimeout(bU);bU=setTimeout(function(){bR=c;bQ.apply(bX,bV)},bS)}else{bR=bW;bQ.apply(bX,bV)}}}function ag(bR,bQ){if(!bR){return 0}var bT=bE("<div/>").css("width",bJ(bR)).appendTo(bQ||a.body);var bS=bT[0].offsetWidth;bT.remove();return bS}function aJ(bR,bT){var bQ=ab(bR,bT);if(bQ<0){return null}var bS=bR.aoData[bQ];return !bS.nTr?bE("<td/>").html(bt(bR,bQ,bT,"display"))[0]:bS.anCells[bT]}function ab(bV,bW){var bU,bQ=-1,bS=-1;for(var bT=0,bR=bV.aoData.length;bT<bR;bT++){bU=bt(bV,bT,bW,"display")+"";bU=bU.replace(a0,"");if(bU.length>bQ){bQ=bU.length;bS=bT}}return bS}function bJ(bQ){if(bQ===null){return"0px"}if(typeof bQ=="number"){return bQ<0?"0px":bQ+"px"}return bQ.match(/\d$/)?bQ+"px":bQ}function ba(){var bQ=N.__scrollbarWidth;if(bQ===c){var bR=bE("<p/>").css({position:"absolute",top:0,left:0,width:"100%",height:150,padding:0,overflow:"scroll",visibility:"hidden"}).appendTo("body");bQ=bR[0].offsetWidth-bR[0].clientWidth;N.__scrollbarWidth=bQ;bR.remove()}return bQ}function aH(bT){var bY,bS,bV,bZ,bW=[],b1=[],b3=bT.aoColumns,bX,b2,bQ,b0,bU=bT.aaSortingFixed,b5=bE.isPlainObject(bU),bR=[],b4=function(b6){if(b6.length&&!bE.isArray(b6[0])){bR.push(b6)}else{bR.push.apply(bR,b6)}};if(bE.isArray(bU)){b4(bU)}if(b5&&bU.pre){b4(bU.pre)}b4(bT.aaSorting);if(b5&&bU.post){b4(bU.post)}for(bY=0;bY<bR.length;bY++){b0=bR[bY][0];bX=b3[b0].aDataSort;for(bV=0,bZ=bX.length;bV<bZ;bV++){b2=bX[bV];bQ=b3[b2].sType||"string";if(bR[bY]._idx===c){bR[bY]._idx=bE.inArray(bR[bY][1],b3[b2].asSorting)}bW.push({src:b0,col:b2,dir:bR[bY][1],index:bR[bY]._idx,type:bQ,formatter:N.ext.type.order[bQ+"-pre"]})}}return bW}function x(bV){var b7,bT,b4,b6,b8,b3,bQ,b0,bW,cc=[],bZ=N.ext.type.order,b1=bV.aoData,b5=bV.aoColumns,bR,cb,bU,bY,b2,b9=0,bX,bS=bV.aiDisplayMaster,ca;v(bV);ca=aH(bV);for(b7=0,bT=ca.length;b7<bT;b7++){bX=ca[b7];if(bX.formatter){b9++}G(bV,bX.col)}if(y(bV)!="ssp"&&ca.length!==0){for(b7=0,b4=bS.length;b7<b4;b7++){cc[bS[b7]]=b7}if(b9===ca.length){bS.sort(function(cl,ck){var cm,cj,cd,ci,ce,cf=ca.length,ch=b1[cl]._aSortData,cg=b1[ck]._aSortData;for(cd=0;cd<cf;cd++){ce=ca[cd];cm=ch[ce.col];cj=cg[ce.col];ci=cm<cj?-1:cm>cj?1:0;if(ci!==0){return ce.dir==="asc"?ci:-ci}}cm=cc[cl];cj=cc[ck];return cm<cj?-1:cm>cj?1:0})}else{bS.sort(function(cn,cm){var co,cl,ce,cd,cj,cf,ck,cg=ca.length,ci=b1[cn]._aSortData,ch=b1[cm]._aSortData;for(ce=0;ce<cg;ce++){cf=ca[ce];co=ci[cf.col];cl=ch[cf.col];ck=bZ[cf.type+"-"+cf.dir]||bZ["string-"+cf.dir];cj=ck(co,cl);if(cj!==0){return cj}}co=cc[cn];cl=cc[cm];return co<cl?-1:co>cl?1:0})}}bV.bSorted=true}function bc(bU){var b0;var bZ;var bV=bU.aoColumns;var bW=aH(bU);var bX=bU.oLanguage.oAria;for(var bY=0,bS=bV.length;bY<bS;bY++){var bR=bV[bY];var bT=bR.asSorting;var b1=bR.sTitle.replace(/<.*?>/g,"");var bQ=bR.nTh;bQ.removeAttribute("aria-sort");if(bR.bSortable){if(bW.length>0&&bW[0].col==bY){bQ.setAttribute("aria-sort",bW[0].dir=="asc"?"ascending":"descending");bZ=bT[bW[0].index+1]||bT[0]}else{bZ=bT[0]}b0=b1+(bZ==="asc"?bX.sSortAscending:bX.sSortDescending)}else{b0=b1}bQ.setAttribute("aria-label",b0)}}function bi(bT,bV,bQ,bZ){var bR=bT.aoColumns[bV];var bX=bT.aaSorting;var bU=bR.asSorting;var bY;var bW=function(b1,b2){var b0=b1._idx;if(b0===c){b0=bE.inArray(b1[1],bU)}return b0+1<bU.length?b0+1:b2?null:0};if(typeof bX[0]==="number"){bX=bT.aaSorting=[bX]}if(bQ&&bT.oFeatures.bSortMulti){var bS=bE.inArray(bV,au(bX,"0"));if(bS!==-1){bY=bW(bX[bS],true);if(bY===null&&bX.length===1){bY=0}if(bY===null){bX.splice(bS,1)}else{bX[bS][1]=bU[bY];bX[bS]._idx=bY}}else{bX.push([bV,bU[0],0]);bX[bX.length-1]._idx=0}}else{if(bX.length&&bX[0][0]==bV){bY=bW(bX[0]);bX.length=1;bX[0][1]=bU[bY];bX[0]._idx=bY}else{bX.length=0;bX.push([bV,bU[0]]);bX[0]._idx=0}}ai(bT);if(typeof bZ=="function"){bZ(bT)}}function C(bS,bR,bU,bT){var bQ=bS.aoColumns[bU];bb(bR,{},function(bV){if(bQ.bSortable===false){return}if(bS.oFeatures.bProcessing){w(bS,true);setTimeout(function(){bi(bS,bU,bV.shiftKey,bT);if(y(bS)!=="ssp"){w(bS,false)}},0)}else{bi(bS,bU,bV.shiftKey,bT)}})}function ae(bV){var bW=bV.aLastSort;var bR=bV.oClasses.sSortColumn;var bT=aH(bV);var bU=bV.oFeatures;var bS,bQ,bX;if(bU.bSort&&bU.bSortClasses){for(bS=0,bQ=bW.length;bS<bQ;bS++){bX=bW[bS].src;bE(au(bV.aoData,"anCells",bX)).removeClass(bR+(bS<2?bS+1:3))}for(bS=0,bQ=bT.length;bS<bQ;bS++){bX=bT[bS].src;bE(au(bV.aoData,"anCells",bX)).addClass(bR+(bS<2?bS+1:3))}}bV.aLastSort=bT}function G(bQ,bV){var bR=bQ.aoColumns[bV];var bZ=N.ext.order[bR.sSortDataType];var bX;if(bZ){bX=bZ.call(bQ.oInstance,bQ,bV,bI(bQ,bV))}var bY,bT;var bU=N.ext.type.order[bR.sType+"-pre"];for(var bS=0,bW=bQ.aoData.length;bS<bW;bS++){bY=bQ.aoData[bS];if(!bY._aSortData){bY._aSortData=[]}if(!bY._aSortData[bV]||bZ){bT=bZ?bX[bS]:bt(bQ,bS,bV,"sort");bY._aSortData[bV]=bU?bU(bT):bT}}}function bn(bQ){if(!bQ.oFeatures.bStateSave||bQ.bDestroying){return}var bR={time:+new Date(),start:bQ._iDisplayStart,length:bQ._iDisplayLength,order:bE.extend(true,[],bQ.aaSorting),search:bx(bQ.oPreviousSearch),columns:bE.map(bQ.aoColumns,function(bS,bT){return{visible:bS.bVisible,search:bx(bQ.aoPreSearchCols[bT])}})};L(bQ,"aoStateSaveParams","stateSaveParams",[bQ,bR]);bQ.oSavedState=bR;bQ.fnStateSaveCallback.call(bQ.oInstance,bQ,bR)}function bN(bS,bX){var bV,bY;var bT=bS.aoColumns;if(!bS.oFeatures.bStateSave){return}var bQ=bS.fnStateLoadCallback.call(bS.oInstance,bS);if(!bQ||!bQ.time){return}var bW=L(bS,"aoStateLoadParams","stateLoadParams",[bS,bQ]);if(bE.inArray(false,bW)!==-1){return}var bU=bS.iStateDuration;if(bU>0&&bQ.time<+new Date()-(bU*1000)){return}if(bT.length!==bQ.columns.length){return}bS.oLoadedState=bE.extend(true,{},bQ);if(bQ.start!==c){bS._iDisplayStart=bQ.start;bS.iInitDisplayStart=bQ.start}if(bQ.length!==c){bS._iDisplayLength=bQ.length}if(bQ.order!==c){bS.aaSorting=[];bE.each(bQ.order,function(b0,bZ){bS.aaSorting.push(bZ[0]>=bT.length?[0,bZ[1]]:bZ)})}if(bQ.search!==c){bE.extend(bS.oPreviousSearch,aE(bQ.search))}for(bV=0,bY=bQ.columns.length;bV<bY;bV++){var bR=bQ.columns[bV];if(bR.visible!==c){bT[bV].bVisible=bR.visible}if(bR.search!==c){bE.extend(bS.aoPreSearchCols[bV],aE(bR.search))}}L(bS,"aoStateLoaded","stateLoaded",[bS,bQ])}function an(bS){var bR=N.settings;var bQ=bE.inArray(bS,au(bR,"nTable"));return bQ!==-1?bR[bQ]:null}function aM(bT,bV,bU,bQ){bU="DataTables warning: "+(bT?"table id="+bT.sTableId+" - ":"")+bU;if(bQ){bU+=". For more information about this error, please see http://datatables.net/tn/"+bQ}if(!bV){var bS=N.ext;var bR=bS.sErrMode||bS.errMode;if(bT){L(bT,null,"error",[bT,bQ,bU])}if(bR=="alert"){alert(bU)}else{if(bR=="throw"){throw new Error(bU)}else{if(typeof bR=="function"){bR(bT,bQ,bU)}}}}else{if(b.console&&console.log){console.log(bU)}}}function R(bR,bT,bQ,bS){if(bE.isArray(bQ)){bE.each(bQ,function(bU,bV){if(bE.isArray(bV)){R(bR,bT,bV[0],bV[1])}else{R(bR,bT,bV)}});return}if(bS===c){bS=bQ}if(bT[bQ]!==c){bR[bS]=bT[bQ]}}function aW(bQ,bS,bR){var bT;for(var bU in bS){if(bS.hasOwnProperty(bU)){bT=bS[bU];if(bE.isPlainObject(bT)){if(!bE.isPlainObject(bQ[bU])){bQ[bU]={}}bE.extend(true,bQ[bU],bT)}else{if(bR&&bU!=="data"&&bU!=="aaData"&&bE.isArray(bT)){bQ[bU]=bT.slice()}else{bQ[bU]=bT}}}}return bQ}function bb(bS,bR,bQ){bE(bS).bind("click.DT",bR,function(bT){bS.blur();bQ(bT)}).bind("keypress.DT",bR,function(bT){if(bT.which===13){bT.preventDefault();bQ(bT)}}).bind("selectstart.DT",function(){return false})}function bM(bT,bR,bQ,bS){if(bQ){bT[bR].push({fn:bQ,sName:bS})}}function L(bT,bU,bQ,bS){var bR=[];if(bU){bR=bE.map(bT[bU].slice().reverse(),function(bX,bW){return bX.fn.apply(bT.oInstance,bS)})}if(bQ!==null){var bV=bE.Event(bQ+".dt");bE(bT.nTable).trigger(bV,bS);bR.push(bV.result)}return bR}function bk(bS){var bT=bS._iDisplayStart,bR=bS.fnDisplayEnd(),bQ=bS._iDisplayLength;if(bT>=bR){bT=bR-bQ}bT-=(bT%bQ);if(bQ===-1||bT<0){bT=0}bS._iDisplayStart=bT}function S(bR,bQ){var bT=bR.renderer;var bS=N.ext.renderer[bQ];if(bE.isPlainObject(bT)&&bT[bQ]){return bS[bT[bQ]]||bS._}else{if(typeof bT==="string"){return bS[bT]||bS._}}return bS._}function y(bQ){if(bQ.oFeatures.bServerSide){return"ssp"}else{if(bQ.ajax||bQ.sAjaxSource){return"ajax"}}return"dom"}N=function(bS){this.$=function(bW,bV){return this.api(true).$(bW,bV)};this._=function(bW,bV){return this.api(true).rows(bW,bV).data()};this.api=function(bV){return bV?new J(an(this[I.iApiIndex])):new J(this)};this.fnAddData=function(bX,bY){var bV=this.api(true);var bW=bE.isArray(bX)&&(bE.isArray(bX[0])||bE.isPlainObject(bX[0]))?bV.rows.add(bX):bV.row.add(bX);if(bY===c||bY){bV.draw()}return bW.flatten().toArray()};this.fnAdjustColumnSizing=function(bY){var bX=this.api(true).columns.adjust();var bW=bX.settings()[0];var bV=bW.oScroll;if(bY===c||bY){bX.draw(false)}else{if(bV.sX!==""||bV.sY!==""){l(bW)}}};this.fnClearTable=function(bW){var bV=this.api(true).clear();if(bW===c||bW){bV.draw()}};this.fnClose=function(bV){this.api(true).row(bV).child.hide()};this.fnDeleteRow=function(bZ,b1,b0){var bW=this.api(true);var bY=bW.rows(bZ);var bV=bY.settings()[0];var bX=bV.aoData[bY[0][0]];bY.remove();if(b1){b1.call(this,bV,bX)}if(b0===c||b0){bW.draw()}return bX};this.fnDestroy=function(bV){this.api(true).destroy(bV)};this.fnDraw=function(bV){this.api(true).draw(bV)};this.fnFilter=function(bZ,bW,bX,b1,b0,bV){var bY=this.api(true);if(bW===null||bW===c){bY.search(bZ,bX,b1,bV)}else{bY.column(bW).search(bZ,bX,b1,bV)}bY.draw()};this.fnGetData=function(bY,bV){var bX=this.api(true);if(bY!==c){var bW=bY.nodeName?bY.nodeName.toLowerCase():"";return bV!==c||bW=="td"||bW=="th"?bX.cell(bY,bV).data():bX.row(bY).data()||null}return bX.data().toArray()};this.fnGetNodes=function(bW){var bV=this.api(true);return bW!==c?bV.row(bW).node():bV.rows().nodes().flatten().toArray()};this.fnGetPosition=function(bX){var bW=this.api(true);var bY=bX.nodeName.toUpperCase();if(bY=="TR"){return bW.row(bX).index()}else{if(bY=="TD"||bY=="TH"){var bV=bW.cell(bX).index();return[bV.row,bV.columnVisible,bV.column]}}return null};this.fnIsOpen=function(bV){return this.api(true).row(bV).child.isShown()};this.fnOpen=function(bW,bV,bX){return this.api(true).row(bW).child(bV,bX).show().child()[0]};this.fnPageChange=function(bV,bX){var bW=this.api(true).page(bV);if(bX===c||bX){bW.draw(false)}};this.fnSetColumnVis=function(bW,bV,bY){var bX=this.api(true).column(bW).visible(bV);if(bY===c||bY){bX.columns.adjust().draw()}};this.fnSettings=function(){return an(this[I.iApiIndex])};this.fnSort=function(bV){this.api(true).order(bV).draw()};this.fnSortListener=function(bW,bV,bX){this.api(true).order.listener(bW,bV,bX)};this.fnUpdate=function(bZ,bY,bV,b0,bX){var bW=this.api(true);if(bV===c||bV===null){bW.row(bY).data(bZ)}else{bW.cell(bY,bV).data(bZ)}if(bX===c||bX){bW.columns.adjust()}if(b0===c||b0){bW.draw()}return 0};this.fnVersionCheck=I.fnVersionCheck;var bT=this;var bR=bS===c;var bQ=this.length;if(bR){bS={}}this.oApi=this.internal=I.internal;for(var bU in N.ext.internal){if(bU){this[bU]=ah(bU)}}this.each(function(){var cf={};var cb=bQ>1?aW(cf,bS,true):bS;var cl=0,cj,ck,co,ci,bV;var b6=this.getAttribute("id");var b4=false;var b9=N.defaults;var b5=bE(this);if(this.nodeName.toLowerCase()!="table"){aM(null,0,"Non-table node initialisation ("+this.nodeName+")",2);return}a3(b9);X(b9.column);aa(b9,b9,true);aa(b9.column,b9.column,true);aa(b9,bE.extend(cb,b5.data()));var b1=N.settings;for(cl=0,cj=b1.length;cl<cj;cl++){var cc=b1[cl];if(cc.nTable==this||cc.nTHead.parentNode==this||(cc.nTFoot&&cc.nTFoot.parentNode==this)){var ch=cb.bRetrieve!==c?cb.bRetrieve:b9.bRetrieve;var b8=cb.bDestroy!==c?cb.bDestroy:b9.bDestroy;if(bR||ch){return cc.oInstance}else{if(b8){cc.oInstance.fnDestroy();break}else{aM(cc,0,"Cannot reinitialise DataTable",3);return}}}if(cc.sTableId==this.id){b1.splice(cl,1);break}}if(b6===null||b6===""){b6="DataTables_Table_"+(N.ext._unique++);this.id=b6}var b2=bE.extend(true,{},N.models.oSettings,{sDestroyWidth:b5[0].style.width,sInstance:b6,sTableId:b6});b2.nTable=this;b2.oApi=bT.internal;b2.oInit=cb;b1.push(b2);b2.oInstance=(bT.length===1)?bT:b5.dataTable();a3(cb);if(cb.oLanguage){aR(cb.oLanguage)}if(cb.aLengthMenu&&!cb.iDisplayLength){cb.iDisplayLength=bE.isArray(cb.aLengthMenu[0])?cb.aLengthMenu[0][0]:cb.aLengthMenu[0]}cb=aW(bE.extend(true,{},b9),cb);R(b2.oFeatures,cb,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]);R(b2,cb,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]);R(b2.oScroll,cb,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);R(b2.oLanguage,cb,"fnInfoCallback");bM(b2,"aoDrawCallback",cb.fnDrawCallback,"user");bM(b2,"aoServerParams",cb.fnServerParams,"user");bM(b2,"aoStateSaveParams",cb.fnStateSaveParams,"user");bM(b2,"aoStateLoadParams",cb.fnStateLoadParams,"user");bM(b2,"aoStateLoaded",cb.fnStateLoaded,"user");bM(b2,"aoRowCallback",cb.fnRowCallback,"user");bM(b2,"aoRowCreatedCallback",cb.fnCreatedRow,"user");bM(b2,"aoHeaderCallback",cb.fnHeaderCallback,"user");bM(b2,"aoFooterCallback",cb.fnFooterCallback,"user");bM(b2,"aoInitComplete",cb.fnInitComplete,"user");bM(b2,"aoPreDrawCallback",cb.fnPreDrawCallback,"user");b2.rowIdFn=ao(cb.rowId);var b7=b2.oClasses;if(cb.bJQueryUI){bE.extend(b7,N.ext.oJUIClasses,cb.oClasses);if(cb.sDom===b9.sDom&&b9.sDom==="lfrtip"){b2.sDom='<"H"lfr>t<"F"ip>'}if(!b2.renderer){b2.renderer="jqueryui"}else{if(bE.isPlainObject(b2.renderer)&&!b2.renderer.header){b2.renderer.header="jqueryui"}}}else{bE.extend(b7,N.ext.classes,cb.oClasses)}b5.addClass(b7.sTable);if(b2.oScroll.sX!==""||b2.oScroll.sY!==""){b2.oScroll.iBarWidth=ba()}if(b2.iInitDisplayStart===c){b2.iInitDisplayStart=cb.iDisplayStart;b2._iDisplayStart=cb.iDisplayStart}if(cb.iDeferLoading!==null){b2.bDeferLoading=true;var cp=bE.isArray(cb.iDeferLoading);b2._iRecordsDisplay=cp?cb.iDeferLoading[0]:cb.iDeferLoading;b2._iRecordsTotal=cp?cb.iDeferLoading[1]:cb.iDeferLoading}var ce=b2.oLanguage;bE.extend(true,ce,cb.oLanguage);if(ce.sUrl!==""){bE.ajax({dataType:"json",url:ce.sUrl,success:function(cr){aR(cr);aa(b9.oLanguage,cr);bE.extend(true,ce,cr);h(b2)},error:function(){h(b2)}});b4=true}if(cb.asStripeClasses===null){b2.asStripeClasses=[b7.sStripeOdd,b7.sStripeEven]}var cm=b2.asStripeClasses;var b0=b5.children("tbody").find("tr").eq(0);if(bE.inArray(true,bE.map(cm,function(cs,cr){return b0.hasClass(cs)}))!==-1){bE("tbody tr",this).removeClass(cm.join(" "));b2.asDestroyStripes=cm.slice()}var cg=[];var bZ;var cd=this.getElementsByTagName("thead");if(cd.length!==0){aw(b2.aoHeader,cd[0]);cg=bg(b2)}if(cb.aoColumns===null){bZ=[];for(cl=0,cj=cg.length;cl<cj;cl++){bZ.push(null)}}else{bZ=cb.aoColumns}for(cl=0,cj=bZ.length;cl<cj;cl++){O(b2,cg?cg[cl]:null)}k(b2,cb.aoColumnDefs,bZ,function(cs,cr){a1(b2,cs,cr)});if(b0.length){var cq=function(cr,cs){return cr.getAttribute("data-"+cs)!==null?cs:null};bE.each(be(b2,b0[0]).cells,function(cu,cr){var cs=b2.aoColumns[cu];if(cs.mData===cu){var ct=cq(cr,"sort")||cq(cr,"order");var cv=cq(cr,"filter")||cq(cr,"search");if(ct!==null||cv!==null){cs.mData={_:cu+".display",sort:ct!==null?cu+".@data-"+ct:c,type:ct!==null?cu+".@data-"+ct:c,filter:cv!==null?cu+".@data-"+cv:c};a1(b2,cu)}}})}var b3=b2.oFeatures;if(cb.bStateSave){b3.bStateSave=true;bN(b2,cb);bM(b2,"aoDrawCallback",bn,"state_save")}if(cb.aaSorting===c){var bY=b2.aaSorting;for(cl=0,cj=bY.length;cl<cj;cl++){bY[cl][1]=b2.aoColumns[cl].asSorting[0]}}ae(b2);if(b3.bSort){bM(b2,"aoDrawCallback",function(){if(b2.bSorted){var cr=aH(b2);var cs={};bE.each(cr,function(ct,cu){cs[cu.src]=cu.dir});L(b2,null,"order",[b2,cr,cs]);bc(b2)}})}bM(b2,"aoDrawCallback",function(){if(b2.bSorted||y(b2)==="ssp"||b3.bDeferRender){ae(b2)}},"sc");bd(b2);var bX=b5.children("caption").each(function(){this._captionSide=b5.css("caption-side")});var cn=b5.children("thead");if(cn.length===0){cn=bE("<thead/>").appendTo(this)}b2.nTHead=cn[0];var bW=b5.children("tbody");if(bW.length===0){bW=bE("<tbody/>").appendTo(this)}b2.nTBody=bW[0];var ca=b5.children("tfoot");if(ca.length===0&&bX.length>0&&(b2.oScroll.sX!==""||b2.oScroll.sY!=="")){ca=bE("<tfoot/>").appendTo(this)}if(ca.length===0||ca.children().length===0){b5.addClass(b7.sNoFooter)}else{if(ca.length>0){b2.nTFoot=ca[0];aw(b2.aoFooter,b2.nTFoot)}}if(cb.aaData){for(cl=0;cl<cb.aaData.length;cl++){aN(b2,cb.aaData[cl])}}else{if(b2.bDeferLoading||y(b2)=="dom"){bP(b2,bE(b2.nTBody).children("tr"))}}b2.aiDisplay=b2.aiDisplayMaster.slice();b2.bInitialised=true;if(b4===false){h(b2)}});bT=null;return this};var U=[];var o=Array.prototype;var bO=function(bS){var bQ,bU;var bT=N.settings;var bR=bE.map(bT,function(bW,bV){return bW.nTable});if(!bS){return[]}else{if(bS.nTable&&bS.oApi){return[bS]}else{if(bS.nodeName&&bS.nodeName.toLowerCase()==="table"){bQ=bE.inArray(bS,bR);return bQ!==-1?[bT[bQ]]:null}else{if(bS&&typeof bS.settings==="function"){return bS.settings().toArray()}else{if(typeof bS==="string"){bU=bE(bS)}else{if(bS instanceof bE){bU=bS}}}}}}if(bU){return bU.map(function(bV){bQ=bE.inArray(this,bR);return bQ!==-1?bT[bQ]:null}).toArray()}};J=function(bS,bU){if(!(this instanceof J)){return new J(bS,bU)}var bT=[];var bV=function(bX){var bW=bO(bX);if(bW){bT.push.apply(bT,bW)}};if(bE.isArray(bS)){for(var bR=0,bQ=bS.length;bR<bQ;bR++){bV(bS[bR])}}else{bV(bS)}this.context=aG(bT);if(bU){this.push.apply(this,bU.toArray?bU.toArray():bU)}this.selector={rows:null,cols:null,opts:null};J.extend(this,this,U)};N.Api=J;J.prototype={any:function(){return this.count()!==0},concat:o.concat,context:[],count:function(){return this.flatten().length},each:function(bS){for(var bR=0,bQ=this.length;bR<bQ;bR++){bS.call(this,this[bR],bR,this)}return this},eq:function(bQ){var bR=this.context;return bR.length>bQ?new J(bR[bQ],this[bQ]):null},filter:function(bT){var bR=[];if(o.filter){bR=o.filter.call(this,bT,this)}else{for(var bS=0,bQ=this.length;bS<bQ;bS++){if(bT.call(this,this[bS],bS,this)){bR.push(this[bS])}}}return new J(this.context,bR)},flatten:function(){var bQ=[];return new J(this.context,bQ.concat.apply(bQ,this.toArray()))},join:o.join,indexOf:o.indexOf||function(bS,bT){for(var bR=(bT||0),bQ=this.length;bR<bQ;bR++){if(this[bR]===bS){return bR}}return -1},iterator:function(b7,bS,bT,bV){var b5=[],b6,b2,bQ,b0,bZ,bR=this.context,bU,bX,b4,b1=this.selector;if(typeof b7==="string"){bV=bT;bT=bS;bS=b7;b7=false}for(b2=0,bQ=bR.length;b2<bQ;b2++){var bY=new J(bR[b2]);if(bS==="table"){b6=bT.call(bY,bR[b2],b2);if(b6!==c){b5.push(b6)}}else{if(bS==="columns"||bS==="rows"){b6=bT.call(bY,bR[b2],this[b2],b2);if(b6!==c){b5.push(b6)}}else{if(bS==="column"||bS==="column-rows"||bS==="row"||bS==="cell"){bX=this[b2];if(bS==="column-rows"){bU=aO(bR[b2],b1.opts)}for(b0=0,bZ=bX.length;b0<bZ;b0++){b4=bX[b0];if(bS==="cell"){b6=bT.call(bY,bR[b2],b4.row,b4.column,b2,b0)}else{b6=bT.call(bY,bR[b2],b4,b2,b0,bU)}if(b6!==c){b5.push(b6)}}}}}}if(b5.length||bV){var bW=new J(bR,b7?b5.concat.apply([],b5):b5);var b3=bW.selector;b3.rows=b1.rows;b3.cols=b1.cols;b3.opts=b1.opts;return bW}return this},lastIndexOf:o.lastIndexOf||function(bQ,bR){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(bT){var bR=[];if(o.map){bR=o.map.call(this,bT,this)}else{for(var bS=0,bQ=this.length;bS<bQ;bS++){bR.push(bT.call(this,this[bS],bS))}}return new J(this.context,bR)},pluck:function(bQ){return this.map(function(bR){return bR[bQ]})},pop:o.pop,push:o.push,reduce:o.reduce||function(bQ,bR){return aU(this,bQ,bR,0,this.length,1)},reduceRight:o.reduceRight||function(bQ,bR){return aU(this,bQ,bR,this.length-1,-1,-1)},reverse:o.reverse,selector:null,shift:o.shift,sort:o.sort,splice:o.splice,toArray:function(){return o.slice.call(this)},to$:function(){return bE(this)},toJQuery:function(){return bE(this)},unique:function(){return new J(this.context,aG(this))},unshift:o.unshift};J.extend=function(bY,bU,bR){if(!bR.length||!bU||(!(bU instanceof J)&&!bU.__dt_wrapper)){return}var bV,bX,bT,bQ,bS,bZ,bW=function(b1,b0,b2){return function(){var b3=b0.apply(b1,arguments);J.extend(b3,b3,b2.methodExt);return b3}};for(bV=0,bX=bR.length;bV<bX;bV++){bS=bR[bV];bU[bS.name]=typeof bS.val==="function"?bW(bY,bS.val,bS):bE.isPlainObject(bS.val)?{}:bS.val;bU[bS.name].__dt_wrapper=true;J.extend(bY,bU[bS.name],bS.propExt)}};J.register=bj=function(bS,bU){if(bE.isArray(bS)){for(var bX=0,bT=bS.length;bX<bT;bX++){J.register(bS[bX],bU)}return}var bY,b1,bV=bS.split("."),bW=U,b0,bR;var bZ=function(b5,b3){for(var b4=0,b2=b5.length;b4<b2;b4++){if(b5[b4].name===b3){return b5[b4]}}return null};for(bY=0,b1=bV.length;bY<b1;bY++){bR=bV[bY].indexOf("()")!==-1;b0=bR?bV[bY].replace("()",""):bV[bY];var bQ=bZ(bW,b0);if(!bQ){bQ={name:b0,val:{},methodExt:[],propExt:[]};bW.push(bQ)}if(bY===b1-1){bQ.val=bU}else{bW=bR?bQ.methodExt:bQ.propExt}}};J.registerPlural=aA=function(bQ,bS,bR){J.register(bQ,bR);J.register(bS,function(){var bT=bR.apply(this,arguments);if(bT===this){return this}else{if(bT instanceof J){return bT.length?bE.isArray(bT[0])?new J(bT.context,bT[0]):bT[0]:c}}return bT})};var d=function(bQ,bR){if(typeof bQ==="number"){return[bR[bQ]]}var bS=bE.map(bR,function(bU,bT){return bU.nTable});return bE(bS).filter(bQ).map(function(bU){var bT=bE.inArray(this,bS);return bR[bT]}).toArray()};bj("tables()",function(bQ){return bQ?new J(d(bQ,this.context)):this});bj("table()",function(bQ){var bS=this.tables(bQ);var bR=bS.context;return bR.length?new J(bR[0]):bS});aA("tables().nodes()","table().node()",function(){return this.iterator("table",function(bQ){return bQ.nTable},1)});aA("tables().body()","table().body()",function(){return this.iterator("table",function(bQ){return bQ.nTBody},1)});aA("tables().header()","table().header()",function(){return this.iterator("table",function(bQ){return bQ.nTHead},1)});aA("tables().footer()","table().footer()",function(){return this.iterator("table",function(bQ){return bQ.nTFoot},1)});aA("tables().containers()","table().container()",function(){return this.iterator("table",function(bQ){return bQ.nTableWrapper},1)});bj("draw()",function(bQ){return this.iterator("table",function(bR){if(bQ==="page"){a2(bR)}else{if(typeof bQ==="string"){bQ=bQ==="full-hold"?false:true}ai(bR,bQ===false)}})});bj("page()",function(bQ){if(bQ===c){return this.page.info().page}return this.iterator("table",function(bR){aF(bR,bQ)})});bj("page.info()",function(bU){if(this.context.length===0){return c}var bT=this.context[0],bV=bT._iDisplayStart,bQ=bT._iDisplayLength,bR=bT.fnRecordsDisplay(),bS=bQ===-1;return{page:bS?0:Math.floor(bV/bQ),pages:bS?1:Math.ceil(bR/bQ),start:bV,end:bT.fnDisplayEnd(),length:bQ,recordsTotal:bT.fnRecordsTotal(),recordsDisplay:bR,serverSide:y(bT)==="ssp"}});bj("page.len()",function(bQ){if(bQ===c){return this.context.length!==0?this.context[0]._iDisplayLength:c}return this.iterator("table",function(bR){aS(bR,bQ)})});var H=function(bS,bQ,bU){if(bU){var bR=new J(bS);bR.one("draw",function(){bU(bR.ajax.json())})}if(y(bS)=="ssp"){ai(bS,bQ)}else{w(bS,true);var bT=bS.jqXHR;if(bT&&bT.readyState!==4){bT.abort()}av(bS,[],function(bX){bh(bS);var bY=bs(bS,bX);for(var bW=0,bV=bY.length;bW<bV;bW++){aN(bS,bY[bW])}ai(bS,bQ);w(bS,false)})}};bj("ajax.json()",function(){var bQ=this.context;if(bQ.length>0){return bQ[0].json}});bj("ajax.params()",function(){var bQ=this.context;if(bQ.length>0){return bQ[0].oAjaxData}});bj("ajax.reload()",function(bR,bQ){return this.iterator("table",function(bS){H(bS,bQ===false,bR)})});bj("ajax.url()",function(bR){var bQ=this.context;if(bR===c){if(bQ.length===0){return c}bQ=bQ[0];return bQ.ajax?bE.isPlainObject(bQ.ajax)?bQ.ajax.url:bQ.ajax:bQ.sAjaxSource}return this.iterator("table",function(bS){if(bE.isPlainObject(bS.ajax)){bS.ajax.url=bR}else{bS.ajax=bR}})});bj("ajax.url().load()",function(bR,bQ){return this.iterator("table",function(bS){H(bS,bQ===false,bR)})});var ap=function(bZ,bU,b0,bT,bQ){var bW=[],bY,b1,bX,b3,bV,bR,b2=typeof bU;if(!bU||b2==="string"||b2==="function"||bU.length===c){bU=[bU]}for(bX=0,b3=bU.length;bX<b3;bX++){b1=bU[bX]&&bU[bX].split?bU[bX].split(","):[bU[bX]];for(bV=0,bR=b1.length;bV<bR;bV++){bY=b0(typeof b1[bV]==="string"?bE.trim(b1[bV]):b1[bV]);if(bY&&bY.length){bW.push.apply(bW,bY)}}}var bS=I.selector[bZ];if(bS.length){for(bX=0,b3=bS.length;bX<b3;bX++){bW=bS[bX](bT,bQ,bW)}}return bW};var bD=function(bQ){if(!bQ){bQ={}}if(bQ.filter&&bQ.search===c){bQ.search=bQ.filter}return bE.extend({search:"none",order:"current",page:"all"},bQ)};var z=function(bS){for(var bR=0,bQ=bS.length;bR<bQ;bR++){if(bS[bR].length>0){bS[0]=bS[bR];bS[0].length=1;bS.length=1;bS.context=[bS.context[bR]];return bS}}bS.length=0;return bS};var aO=function(bS,bQ){var bT,bZ,bU,bX=[],bY=bS.aiDisplay,bV=bS.aiDisplayMaster;var b0=bQ.search,bR=bQ.order,bW=bQ.page;if(y(bS)=="ssp"){return b0==="removed"?[]:bf(0,bV.length)}else{if(bW=="current"){for(bT=bS._iDisplayStart,bZ=bS.fnDisplayEnd();bT<bZ;bT++){bX.push(bY[bT])}}else{if(bR=="current"||bR=="applied"){bX=b0=="none"?bV.slice():b0=="applied"?bY.slice():bE.map(bV,function(b2,b1){return bE.inArray(b2,bY)===-1?b2:null})}else{if(bR=="index"||bR=="original"){for(bT=0,bZ=bS.aoData.length;bT<bZ;bT++){if(b0=="none"){bX.push(bT)}else{bU=bE.inArray(bT,bY);if((bU===-1&&b0=="removed")||(bU>=0&&b0=="applied")){bX.push(bT)}}}}}}}return bX};var E=function(bR,bQ,bS){var bT=function(b0){var bW=F(b0);var bY,bU;if(bW!==null&&!bS){return[bW]}var bZ=aO(bR,bS);if(bW!==null&&bE.inArray(bW,bZ)!==-1){return[bW]}else{if(!b0){return bZ}}if(typeof b0==="function"){return bE.map(bZ,function(b1){var b2=bR.aoData[b1];return b0(b1,b2._aData,b2.nTr)?b1:null})}var bV=ad(t(bR.aoData,bZ,"nTr"));if(b0.nodeName){if(bE.inArray(b0,bV)!==-1){return[b0._DT_RowIndex]}}if(typeof b0==="string"&&b0.charAt(0)==="#"){var bX=bR.aIds[b0.replace(/^#/,"")];if(bX!==c){return[bX.idx]}}return bE(bV).filter(b0).map(function(){return this._DT_RowIndex}).toArray()};return ap("row",bQ,bT,bR,bS)};bj("rows()",function(bQ,bR){if(bQ===c){bQ=""}else{if(bE.isPlainObject(bQ)){bR=bQ;bQ=""}}bR=bD(bR);var bS=this.iterator("table",function(bT){return E(bT,bQ,bR)},1);bS.selector.rows=bQ;bS.selector.opts=bR;return bS});bj("rows().nodes()",function(){return this.iterator("row",function(bQ,bR){return bQ.aoData[bR].nTr||c},1)});bj("rows().data()",function(){return this.iterator(true,"rows",function(bQ,bR){return t(bQ.aoData,bR,"_aData")},1)});aA("rows().cache()","row().cache()",function(bQ){return this.iterator("row",function(bR,bT){var bS=bR.aoData[bT];return bQ==="search"?bS._aFilterData:bS._aSortData},1)});aA("rows().invalidate()","row().invalidate()",function(bQ){return this.iterator("row",function(bR,bS){B(bR,bS,bQ)})});aA("rows().indexes()","row().index()",function(){return this.iterator("row",function(bQ,bR){return bR},1)});aA("rows().ids()","row().id()",function(bW){var bR=[];var bU=this.context;for(var bT=0,bQ=bU.length;bT<bQ;bT++){for(var bS=0,bV=this[bT].length;bS<bV;bS++){var bX=bU[bT].rowIdFn(bU[bT].aoData[this[bT][bS]]._aData);bR.push((bW===true?"#":"")+bX)}}return new J(bU,bR)});aA("rows().remove()","row().remove()",function(){var bQ=this;this.iterator("row",function(bU,bW,bT){var bV=bU.aoData;bV.splice(bW,1);for(var bS=0,bR=bV.length;bS<bR;bS++){if(bV[bS].nTr!==null){bV[bS].nTr._DT_RowIndex=bS}}a4(bU.aiDisplayMaster,bW);a4(bU.aiDisplay,bW);a4(bQ[bT],bW,false);bk(bU)});this.iterator("table",function(bT){for(var bS=0,bR=bT.aoData.length;bS<bR;bS++){bT.aoData[bS].idx=bS}});return this});bj("rows.add()",function(bS){var bR=this.iterator("table",function(bW){var bX,bV,bT;var bU=[];for(bV=0,bT=bS.length;bV<bT;bV++){bX=bS[bV];if(bX.nodeName&&bX.nodeName.toUpperCase()==="TR"){bU.push(bP(bW,bX)[0])}else{bU.push(aN(bW,bX))}}return bU},1);var bQ=this.rows(-1);bQ.pop();bQ.push.apply(bQ,bR.toArray());return bQ});bj("row()",function(bQ,bR){return z(this.rows(bQ,bR))});bj("row().data()",function(bR){var bQ=this.context;if(bR===c){return bQ.length&&this.length?bQ[0].aoData[this[0]]._aData:c}bQ[0].aoData[this[0]]._aData=bR;B(bQ[0],this[0],"data");return this});bj("row().node()",function(){var bQ=this.context;return bQ.length&&this.length?bQ[0].aoData[this[0]].nTr||null:null});bj("row.add()",function(bR){if(bR instanceof bE&&bR.length){bR=bR[0]}var bQ=this.iterator("table",function(bS){if(bR.nodeName&&bR.nodeName.toUpperCase()==="TR"){return bP(bS,bR)[0]}return aN(bS,bR)});return this.row(bQ[0])});var Z=function(bS,bV,bU,bQ){var bT=[];var bR=function(bZ,bX){if(bE.isArray(bZ)||bZ instanceof bE){for(var bY=0,bW=bZ.length;bY<bW;bY++){bR(bZ[bY],bX)}return}if(bZ.nodeName&&bZ.nodeName.toLowerCase()==="tr"){bT.push(bZ)}else{var b0=bE("<tr><td/></tr>").addClass(bX);bE("td",b0).addClass(bX).html(bZ)[0].colSpan=aP(bS);bT.push(b0[0])}};bR(bU,bQ);if(bV._details){bV._details.remove()}bV._details=bE(bT);if(bV._detailsShow){bV._details.insertAfter(bV.nTr)}};var A=function(bS,bQ){var bR=bS.context;if(bR.length){var bT=bR[0].aoData[bQ!==c?bQ:bS[0]];if(bT&&bT._details){bT._details.remove();bT._detailsShow=c;bT._details=c}}};var a9=function(bS,bR){var bQ=bS.context;if(bQ.length&&bS.length){var bT=bQ[0].aoData[bS[0]];if(bT._details){bT._detailsShow=bR;if(bR){bT._details.insertAfter(bT.nTr)}else{bT._details.detach()}bw(bQ[0])}}};var bw=function(bV){var bU=new J(bV);var bT=".dt.DT_details";var bS="draw"+bT;var bQ="column-visibility"+bT;var bR="destroy"+bT;var bW=bV.aoData;bU.off(bS+" "+bQ+" "+bR);if(au(bW,"_details").length>0){bU.on(bS,function(bY,bX){if(bV!==bX){return}bU.rows({page:"current"}).eq(0).each(function(bZ){var b0=bW[bZ];if(b0._detailsShow){b0._details.insertAfter(b0.nTr)}})});bU.on(bQ,function(b2,bZ,bX,b1){if(bV!==bZ){return}var b4,b3=aP(bZ);for(var b0=0,bY=bW.length;b0<bY;b0++){b4=bW[b0];if(b4._details){b4._details.children("td[colspan]").attr("colspan",b3)}}});bU.on(bR,function(b0,bY){if(bV!==bY){return}for(var bZ=0,bX=bW.length;bZ<bX;bZ++){if(bW[bZ]._details){A(bU,bZ)}}})}};var n="";var s=n+"row().child";var aX=s+"()";bj(aX,function(bS,bQ){var bR=this.context;if(bS===c){return bR.length&&this.length?bR[0].aoData[this[0]]._details:c}else{if(bS===true){this.child.show()}else{if(bS===false){A(this)}else{if(bR.length&&this.length){Z(bR[0],bR[0].aoData[this[0]],bS,bQ)}}}}return this});bj([s+".show()",aX+".show()"],function(bQ){a9(this,true);return this});bj([s+".hide()",aX+".hide()"],function(){a9(this,false);return this});bj([s+".remove()",aX+".remove()"],function(){A(this);return this});bj(s+".isShown()",function(){var bQ=this.context;if(bQ.length&&this.length){return bQ[0].aoData[this[0]]._detailsShow||false}return false});var a8=/^(.+):(name|visIdx|visible)$/;var aY=function(bV,bU,bT,bS,bW){var bR=[];for(var bX=0,bQ=bW.length;bX<bQ;bX++){bR.push(bt(bV,bW[bX],bU))}return bR};var bB=function(bT,bQ,bU){var bS=bT.aoColumns,bW=au(bS,"sName"),bR=au(bS,"nTh");var bV=function(b1){var bY=F(b1);if(b1===""){return bf(bS.length)}if(bY!==null){return[bY>=0?bY:bS.length+bY]}if(typeof b1==="function"){var b2=aO(bT,bU);return bE.map(bS,function(b4,b3){return b1(b3,aY(bT,b3,0,0,b2),bR[b3])?b3:null})}var bZ=typeof b1==="string"?b1.match(a8):"";if(bZ){switch(bZ[2]){case"visIdx":case"visible":var bX=parseInt(bZ[1],10);if(bX<0){var b0=bE.map(bS,function(b3,b4){return b3.bVisible?b4:null});return[b0[b0.length+bX]]}return[r(bT,bX)];case"name":return bE.map(bW,function(b3,b4){return b3===bZ[1]?b4:null})}}else{return bE(bR).filter(b1).map(function(){return bE.inArray(this,bR)}).toArray()}};return ap("column",bQ,bV,bT,bU)};var M=function(bS,bT,bQ,bX){var bZ=bS.aoColumns,bR=bZ[bT],bV=bS.aoData,b2,b1,bU,b0,bY;if(bQ===c){return bR.bVisible}if(bR.bVisible===bQ){return}if(bQ){var bW=bE.inArray(true,au(bZ,"bVisible"),bT+1);for(bU=0,b0=bV.length;bU<b0;bU++){bY=bV[bU].nTr;b1=bV[bU].anCells;if(bY){bY.insertBefore(b1[bT],b1[bW]||null)}}}else{bE(au(bS.aoData,"anCells",bT)).detach()}bR.bVisible=bQ;a5(bS,bS.aoHeader);a5(bS,bS.aoFooter);if(bX===c||bX){aI(bS);if(bS.oScroll.sX||bS.oScroll.sY){l(bS)}}L(bS,null,"column-visibility",[bS,bT,bQ]);bn(bS)};bj("columns()",function(bQ,bR){if(bQ===c){bQ=""}else{if(bE.isPlainObject(bQ)){bR=bQ;bQ=""}}bR=bD(bR);var bS=this.iterator("table",function(bT){return bB(bT,bQ,bR)},1);bS.selector.cols=bQ;bS.selector.opts=bR;return bS});aA("columns().header()","column().header()",function(bQ,bR){return this.iterator("column",function(bT,bS){return bT.aoColumns[bS].nTh},1)});aA("columns().footer()","column().footer()",function(bQ,bR){return this.iterator("column",function(bT,bS){return bT.aoColumns[bS].nTf},1)});aA("columns().data()","column().data()",function(){return this.iterator("column-rows",aY,1)});aA("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(bR,bQ){return bR.aoColumns[bQ].mData},1)});aA("columns().cache()","column().cache()",function(bQ){return this.iterator("column-rows",function(bU,bT,bS,bR,bV){return t(bU.aoData,bV,bQ==="search"?"_aFilterData":"_aSortData",bT)},1)});aA("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(bT,bS,bR,bQ,bU){return t(bT.aoData,bU,"anCells",bS)},1)});aA("columns().visible()","column().visible()",function(bR,bQ){return this.iterator("column",function(bT,bS){if(bR===c){return bT.aoColumns[bS].bVisible}M(bT,bS,bR,bQ)})});aA("columns().indexes()","column().index()",function(bQ){return this.iterator("column",function(bS,bR){return bQ==="visible"?bI(bS,bR):bR},1)});bj("columns.adjust()",function(){return this.iterator("table",function(bQ){aI(bQ)},1)});bj("column.index()",function(bS,bQ){if(this.context.length!==0){var bR=this.context[0];if(bS==="fromVisible"||bS==="toData"){return r(bR,bQ)}else{if(bS==="fromData"||bS==="toVisible"){return bI(bR,bQ)}}}});bj("column()",function(bQ,bR){return z(this.columns(bQ,bR))});var bp=function(bU,bV,bQ){var bY=bU.aoData;var b5=aO(bU,bQ);var b3=ad(t(bY,b5,"anCells"));var b2=bE([].concat.apply([],b3));var b4;var bT=bU.aoColumns.length;var bZ,bX,b0,bW,bR,b1;var bS=function(b6){var b7=typeof b6==="function";if(b6===null||b6===c||b7){bZ=[];for(bX=0,b0=b5.length;bX<b0;bX++){b4=b5[bX];for(bW=0;bW<bT;bW++){bR={row:b4,column:bW};if(b7){b1=bU.aoData[b4];if(b6(bR,bt(bU,b4,bW),b1.anCells?b1.anCells[bW]:null)){bZ.push(bR)}}else{bZ.push(bR)}}}return bZ}if(bE.isPlainObject(b6)){return[b6]}return b2.filter(b6).map(function(b8,b9){b4=b9.parentNode._DT_RowIndex;return{row:b4,column:bE.inArray(b9,bY[b4].anCells)}}).toArray()};return ap("cell",bV,bS,bU,bQ)};bj("cells()",function(bT,bQ,bR){if(bE.isPlainObject(bT)){if(bT.row===c){bR=bT;bT=null}else{bR=bQ;bQ=null}}if(bE.isPlainObject(bQ)){bR=bQ;bQ=null}if(bQ===null||bQ===c){return this.iterator("table",function(b1){return bp(b1,bT,bD(bR))})}var bU=this.columns(bQ,bR);var b0=this.rows(bT,bR);var bX,bW,bY,bV,bS;var bZ=this.iterator("table",function(b2,b1){bX=[];for(bW=0,bY=b0[b1].length;bW<bY;bW++){for(bV=0,bS=bU[b1].length;bV<bS;bV++){bX.push({row:b0[b1][bW],column:bU[b1][bV]})}}return bX},1);bE.extend(bZ.selector,{cols:bQ,rows:bT,opts:bR});return bZ});aA("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(bS,bT,bR){var bQ=bS.aoData[bT].anCells;return bQ?bQ[bR]:c},1)});bj("cells().data()",function(){return this.iterator("cell",function(bR,bS,bQ){return bt(bR,bS,bQ)},1)});aA("cells().cache()","cell().cache()",function(bQ){bQ=bQ==="search"?"_aFilterData":"_aSortData";return this.iterator("cell",function(bS,bT,bR){return bS.aoData[bT][bQ][bR]},1)});aA("cells().render()","cell().render()",function(bQ){return this.iterator("cell",function(bS,bT,bR){return bt(bS,bT,bR,bQ)},1)});aA("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(bR,bS,bQ){return{row:bS,column:bQ,columnVisible:bI(bR,bQ)}},1)});aA("cells().invalidate()","cell().invalidate()",function(bQ){return this.iterator("cell",function(bS,bT,bR){B(bS,bT,bQ,bR)})});bj("cell()",function(bQ,bS,bR){return z(this.cells(bQ,bS,bR))});bj("cell().data()",function(bS){var bR=this.context;var bQ=this[0];if(bS===c){return bR.length&&bQ.length?bt(bR[0],bQ[0].row,bQ[0].column):c}bl(bR[0],bQ[0].row,bQ[0].column,bS);B(bR[0],bQ[0].row,"data",bQ[0].column);return this});bj("order()",function(bQ,bS){var bR=this.context;if(bQ===c){return bR.length!==0?bR[0].aaSorting:c}if(typeof bQ==="number"){bQ=[[bQ,bS]]}else{if(!bE.isArray(bQ[0])){bQ=Array.prototype.slice.call(arguments)}}return this.iterator("table",function(bT){bT.aaSorting=bQ.slice()})});bj("order.listener()",function(bR,bQ,bS){return this.iterator("table",function(bT){C(bT,bR,bQ,bS)})});bj(["columns().order()","column().order()"],function(bQ){var bR=this;return this.iterator("table",function(bU,bT){var bS=[];bE.each(bR[bT],function(bW,bV){bS.push([bV,bQ])});bU.aaSorting=bS})});bj("search()",function(bR,bT,bU,bS){var bQ=this.context;if(bR===c){return bQ.length!==0?bQ[0].oPreviousSearch.sSearch:c}return this.iterator("table",function(bV){if(!bV.oFeatures.bFilter){return}u(bV,bE.extend({},bV.oPreviousSearch,{sSearch:bR+"",bRegex:bT===null?false:bT,bSmart:bU===null?true:bU,bCaseInsensitive:bS===null?true:bS}),1)})});aA("columns().search()","column().search()",function(bQ,bS,bT,bR){return this.iterator("column",function(bW,bV){var bU=bW.aoPreSearchCols;if(bQ===c){return bU[bV].sSearch}if(!bW.oFeatures.bFilter){return}bE.extend(bU[bV],{sSearch:bQ+"",bRegex:bS===null?false:bS,bSmart:bT===null?true:bT,bCaseInsensitive:bR===null?true:bR});u(bW,bW.oPreviousSearch,1)})});bj("state()",function(){return this.context.length?this.context[0].oSavedState:null});bj("state.clear()",function(){return this.iterator("table",function(bQ){bQ.fnStateSaveCallback.call(bQ.oInstance,bQ,{})})});bj("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});bj("state.save()",function(){return this.iterator("table",function(bQ){bn(bQ)})});N.versionCheck=N.fnVersionCheck=function(bS){var bW=N.version.split(".");var bT=bS.split(".");var bR,bV;for(var bU=0,bQ=bT.length;bU<bQ;bU++){bR=parseInt(bW[bU],10)||0;bV=parseInt(bT[bU],10)||0;if(bR===bV){continue}return bR>bV}return true};N.isDataTable=N.fnIsDataTable=function(bS){var bQ=bE(bS).get(0);var bR=false;bE.each(N.settings,function(bV,bW){var bU=bW.nScrollHead?bE("table",bW.nScrollHead)[0]:null;var bT=bW.nScrollFoot?bE("table",bW.nScrollFoot)[0]:null;if(bW.nTable===bQ||bU===bQ||bT===bQ){bR=true}});return bR};N.tables=N.fnTables=function(bS){var bR=false;if(bE.isPlainObject(bS)){bR=bS.api;bS=bS.visible}var bQ=bE.map(N.settings,function(bT){if(!bS||(bS&&bE(bT.nTable).is(":visible"))){return bT.nTable}});return bR?new J(bQ):bQ};N.util={throttle:al,escapeRegex:m};N.camelToHungarian=aa;bj("$()",function(bQ,bS){var bT=this.rows(bS).nodes(),bR=bE(bT);return bE([].concat(bR.filter(bQ).toArray(),bR.find(bQ).toArray()))});bE.each(["on","one","off"],function(bR,bQ){bj(bQ+"()",function(){var bS=Array.prototype.slice.call(arguments);if(!bS[0].match(/\.dt\b/)){bS[0]+=".dt"}var bT=bE(this.tables().nodes());bT[bQ].apply(bT,bS);return this})});bj("clear()",function(){return this.iterator("table",function(bQ){bh(bQ)})});bj("settings()",function(){return new J(this.context,this.context)});bj("init()",function(){var bQ=this.context;return bQ.length?bQ[0].oInit:null});bj("data()",function(){return this.iterator("table",function(bQ){return au(bQ.aoData,"_aData")}).flatten()});bj("destroy()",function(bQ){bQ=bQ||false;return this.iterator("table",function(bR){var b1=bR.nTableWrapper.parentNode;var bS=bR.oClasses;var b3=bR.nTable;var bW=bR.nTBody;var bY=bR.nTHead;var bZ=bR.nTFoot;var b4=bE(b3);var bV=bE(bW);var bX=bE(bR.nTableWrapper);var b5=bE.map(bR.aoData,function(b6){return b6.nTr});var bU,b2;bR.bDestroying=true;L(bR,"aoDestroyCallback","destroy",[bR]);if(!bQ){new J(bR).columns().visible(true)}bX.unbind(".DT").find(":not(tbody *)").unbind(".DT");bE(b).unbind(".DT-"+bR.sInstance);if(b3!=bY.parentNode){b4.children("thead").detach();b4.append(bY)}if(bZ&&b3!=bZ.parentNode){b4.children("tfoot").detach();b4.append(bZ)}bR.aaSorting=[];bR.aaSortingFixed=[];ae(bR);bE(b5).removeClass(bR.asStripeClasses.join(" "));bE("th, td",bY).removeClass(bS.sSortable+" "+bS.sSortableAsc+" "+bS.sSortableDesc+" "+bS.sSortableNone);if(bR.bJUI){bE("th span."+bS.sSortIcon+", td span."+bS.sSortIcon,bY).detach();bE("th, td",bY).each(function(){var b6=bE("div."+bS.sSortJUIWrapper,this);bE(this).append(b6.contents());b6.detach()})}bV.children().detach();bV.append(b5);var bT=bQ?"remove":"detach";b4[bT]();bX[bT]();if(!bQ&&b1){b1.insertBefore(b3,bR.nTableReinsertBefore);b4.css("width",bR.sDestroyWidth).removeClass(bS.sTable);b2=bR.asDestroyStripes.length;if(b2){bV.children().each(function(b6){bE(this).addClass(bR.asDestroyStripes[b6%b2])})}}var b0=bE.inArray(bR,N.settings);if(b0!==-1){N.settings.splice(b0,1)}})});bE.each(["column","row","cell"],function(bQ,bR){bj(bR+"s().every()",function(bS){return this.iterator(bR,function(bX,bW,bV,bU,bT){bS.call(new J(bX)[bR](bW,bR==="cell"?bV:c),bW,bV,bU,bT)})})});bj("i18n()",function(bT,bU,bS){var bR=this.context[0];var bQ=ao(bT)(bR.oLanguage);if(bQ===c){bQ=bU}if(bS!==c&&bE.isPlainObject(bQ)){bQ=bQ[bS]!==c?bQ[bS]:bQ._}return bQ.replace("%d",bS)});N.version="1.10.8";N.settings=[];N.models={};N.models.oSearch={bCaseInsensitive:true,sSearch:"",bRegex:false,bSmart:true};N.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};N.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:false,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};N.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:true,bDeferRender:false,bDestroy:false,bFilter:true,bInfo:true,bJQueryUI:false,bLengthChange:true,bPaginate:true,bProcessing:false,bRetrieve:false,bScrollCollapse:false,bServerSide:false,bSort:true,bSortMulti:true,bSortCellsTop:false,bSortClasses:true,bStateSave:false,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(bQ){return bQ.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(bQ){try{return JSON.parse((bQ.iStateDuration===-1?sessionStorage:localStorage).getItem("DataTables_"+bQ.sInstance+"_"+location.pathname))}catch(bR){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(bQ,bR){try{(bQ.iStateDuration===-1?sessionStorage:localStorage).setItem("DataTables_"+bQ.sInstance+"_"+location.pathname,JSON.stringify(bR))}catch(bS){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:bE.extend({},N.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};T(N.defaults);N.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:true,bSortable:true,bVisible:true,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};T(N.defaults.column);N.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:false,bScrollbarLeft:false,bBounding:false},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:false,bInitialised:false,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:true,jqXHR:null,json:c,oAjaxData:c,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:false,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:false,bSorted:false,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return y(this)=="ssp"?this._iRecordsTotal*1:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return y(this)=="ssp"?this._iRecordsDisplay*1:this.aiDisplay.length},fnDisplayEnd:function(){var bQ=this._iDisplayLength,bV=this._iDisplayStart,bS=bV+bQ,bR=this.aiDisplay.length,bT=this.oFeatures,bU=bT.bPaginate;if(bT.bServerSide){return bU===false||bQ===-1?bV+bR:Math.min(bV+bQ,this._iRecordsDisplay)}else{return !bU||bS>bR||bQ===-1?bR:bS}},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};N.ext=I={buttons:{},classes:{},errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:N.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:N.version};bE.extend(I,{afnFiltering:I.search,aTypes:I.type.detect,ofnSearch:I.type.search,oSort:I.type.order,afnSortData:I.order,aoFeatures:I.feature,oApi:I.internal,oStdClasses:I.classes,oPagination:I.pager});bE.extend(N.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});(function(){var bR="";bR="";var bS=bR+"ui-state-default";var bT=bR+"css_right ui-icon ui-icon-";var bQ=bR+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";bE.extend(N.ext.oJUIClasses,N.ext.classes,{sPageButton:"fg-button ui-button "+bS,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:bS+" sorting_asc",sSortDesc:bS+" sorting_desc",sSortable:bS+" sorting",sSortableAsc:bS+" sorting_asc_disabled",sSortableDesc:bS+" sorting_desc_disabled",sSortableNone:bS+" sorting_disabled",sSortJUIAsc:bT+"triangle-1-n",sSortJUIDesc:bT+"triangle-1-s",sSortJUI:bT+"carat-2-n-s",sSortJUIAscAllowed:bT+"carat-1-n",sSortJUIDescAllowed:bT+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+bS,sScrollFoot:"dataTables_scrollFoot "+bS,sHeaderTH:bS,sFooterTH:bS,sJUIHeader:bQ+" ui-corner-tl ui-corner-tr",sJUIFooter:bQ+" ui-corner-bl ui-corner-br"})}());var bH=N.ext.pager;function bm(bV,bQ){var bR=[],bT=bH.numbers_length,bU=Math.floor(bT/2),bS=1;if(bQ<=bT){bR=bf(0,bQ)}else{if(bV<=bU){bR=bf(0,bT-2);bR.push("ellipsis");bR.push(bQ-1)}else{if(bV>=bQ-1-bU){bR=bf(bQ-(bT-2),bQ);bR.splice(0,0,"ellipsis");bR.splice(0,0,0)}else{bR=bf(bV-bU+2,bV+bU-1);bR.push("ellipsis");bR.push(bQ-1);bR.splice(0,0,"ellipsis");bR.splice(0,0,0)}}}bR.DT_el="span";return bR}bE.extend(bH,{simple:function(bR,bQ){return["previous","next"]},full:function(bR,bQ){return["first","previous","next","last"]},numbers:function(bR,bQ){return[bm(bR,bQ)]},simple_numbers:function(bR,bQ){return["previous",bm(bR,bQ),"next"]},full_numbers:function(bR,bQ){return["first","previous",bm(bR,bQ),"next","last"]},_numbers:bm,numbers_length:7});bE.extend(true,N.ext.renderer,{pageButton:{_:function(bW,b3,b2,b1,b0,bU){var bX=bW.oClasses;var bT=bW.oLanguage.oPaginate;var bS,bR,bQ=0;var bY=function(b5,ca){var b8,b4,b9,b7;var cb=function(cc){aF(bW,cc.data.action,true)};for(b8=0,b4=ca.length;b8<b4;b8++){b7=ca[b8];if(bE.isArray(b7)){var b6=bE("<"+(b7.DT_el||"div")+"/>").appendTo(b5);bY(b6,b7)}else{bS=null;bR="";switch(b7){case"ellipsis":b5.append('<span class="ellipsis">&#x2026;</span>');break;case"first":bS=bT.sFirst;bR=b7+(b0>0?"":" "+bX.sPageButtonDisabled);break;case"previous":bS=bT.sPrevious;bR=b7+(b0>0?"":" "+bX.sPageButtonDisabled);break;case"next":bS=bT.sNext;bR=b7+(b0<bU-1?"":" "+bX.sPageButtonDisabled);break;case"last":bS=bT.sLast;bR=b7+(b0<bU-1?"":" "+bX.sPageButtonDisabled);break;default:bS=b7+1;bR=b0===b7?bX.sPageButtonActive:"";break}if(bS!==null){b9=bE("<a>",{"class":bX.sPageButton+" "+bR,"aria-controls":bW.sTableId,"data-dt-idx":bQ,tabindex:bW.iTabIndex,id:b2===0&&typeof b7==="string"?bW.sTableId+"_"+b7:null}).html(bS).appendTo(b5);bb(b9,{action:b7},cb);bQ++}}}};var bV;try{bV=bE(b3).find(a.activeElement).data("dt-idx")}catch(bZ){}bY(bE(b3).empty(),b1);if(bV){bE(b3).find("[data-dt-idx="+bV+"]").focus()}}}});bE.extend(N.ext.type.detect,[function(bS,bR){var bQ=bR.oLanguage.sDecimal;return aj(bS,bQ)?"num"+bQ:null},function(bS,bR){if(bS&&!(bS instanceof Date)&&(!am.test(bS)||!bu.test(bS))){return null}var bQ=Date.parse(bS);return(bQ!==null&&!isNaN(bQ))||bA(bS)?"date":null},function(bS,bR){var bQ=bR.oLanguage.sDecimal;return aj(bS,bQ,true)?"num-fmt"+bQ:null},function(bS,bR){var bQ=bR.oLanguage.sDecimal;return j(bS,bQ)?"html-num"+bQ:null},function(bS,bR){var bQ=bR.oLanguage.sDecimal;return j(bS,bQ,true)?"html-num-fmt"+bQ:null},function(bR,bQ){return bA(bR)||(typeof bR==="string"&&bR.indexOf("<")!==-1)?"html":null}]);bE.extend(N.ext.type.search,{html:function(bQ){return bA(bQ)?bQ:typeof bQ==="string"?bQ.replace(W," ").replace(aT,""):""},string:function(bQ){return bA(bQ)?bQ:typeof bQ==="string"?bQ.replace(W," "):bQ}});var Q=function(bT,bQ,bS,bR){if(bT!==0&&(!bT||bT==="-")){return -Infinity}if(bQ){bT=bC(bT,bQ)}if(bT.replace){if(bS){bT=bT.replace(bS,"")}if(bR){bT=bT.replace(bR,"")}}return bT*1};function bq(bQ){bE.each({num:function(bR){return Q(bR,bQ)},"num-fmt":function(bR){return Q(bR,bQ,bF)},"html-num":function(bR){return Q(bR,bQ,aT)},"html-num-fmt":function(bR){return Q(bR,bQ,aT,bF)}},function(bR,bS){I.type.order[bR+bQ+"-pre"]=bS;if(bR.match(/^html\-/)){I.type.search[bR+bQ]=I.type.search.html}})}bE.extend(I.type.order,{"date-pre":function(bQ){return Date.parse(bQ)||0},"html-pre":function(bQ){return bA(bQ)?"":bQ.replace?bQ.replace(/<.*?>/g,"").toLowerCase():bQ+""},"string-pre":function(bQ){return bA(bQ)?"":typeof bQ==="string"?bQ.toLowerCase():!bQ.toString?"":bQ.toString()},"string-asc":function(bQ,bR){return((bQ<bR)?-1:((bQ>bR)?1:0))},"string-desc":function(bQ,bR){return((bQ<bR)?1:((bQ>bR)?-1:0))}});bq("");bE.extend(true,N.ext.renderer,{header:{_:function(bT,bQ,bS,bR){bE(bT.nTable).on("order.dt.DT",function(bX,bU,bW,bV){if(bT!==bU){return}var bY=bS.idx;bQ.removeClass(bS.sSortingClass+" "+bR.sSortAsc+" "+bR.sSortDesc).addClass(bV[bY]=="asc"?bR.sSortAsc:bV[bY]=="desc"?bR.sSortDesc:bS.sSortingClass)})},jqueryui:function(bT,bQ,bS,bR){bE("<div/>").addClass(bR.sSortJUIWrapper).append(bQ.contents()).append(bE("<span/>").addClass(bR.sSortIcon+" "+bS.sSortingClassJUI)).appendTo(bQ);bE(bT.nTable).on("order.dt.DT",function(bX,bU,bW,bV){if(bT!==bU){return}var bY=bS.idx;bQ.removeClass(bR.sSortAsc+" "+bR.sSortDesc).addClass(bV[bY]=="asc"?bR.sSortAsc:bV[bY]=="desc"?bR.sSortDesc:bS.sSortingClass);bQ.find("span."+bR.sSortIcon).removeClass(bR.sSortJUIAsc+" "+bR.sSortJUIDesc+" "+bR.sSortJUI+" "+bR.sSortJUIAscAllowed+" "+bR.sSortJUIDescAllowed).addClass(bV[bY]=="asc"?bR.sSortJUIAsc:bV[bY]=="desc"?bR.sSortJUIDesc:bS.sSortingClassJUI)})}}});N.render={number:function(bS,bR,bQ,bT,bU){return{display:function(bY){if(typeof bY!=="number"&&typeof bY!=="string"){return bY}var bW=bY<0?"-":"";bY=Math.abs(parseFloat(bY));var bX=parseInt(bY,10);var bV=bQ?bR+(bY-bX).toFixed(bQ).substring(2):"";return bW+(bT||"")+bX.toString().replace(/\B(?=(\d{3})+(?!\d))/g,bS)+bV+(bU||"")}}}};function ah(bQ){return function(){var bR=[an(this[N.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return N.ext.internal[bQ].apply(this,bR)}}bE.extend(N.ext.internal,{_fnExternApiFunc:ah,_fnBuildAjax:av,_fnAjaxUpdate:af,_fnAjaxParameters:bK,_fnAjaxUpdateDraw:V,_fnAjaxDataSrc:bs,_fnAddColumn:O,_fnColumnOptions:a1,_fnAdjustColumnSizing:aI,_fnVisibleToColumnIndex:r,_fnColumnIndexToVisible:bI,_fnVisbleColumns:aP,_fnGetColumns:p,_fnColumnTypes:v,_fnApplyColumnDefs:k,_fnHungarianMap:T,_fnCamelToHungarian:aa,_fnLanguageCompat:aR,_fnBrowserDetect:bd,_fnAddData:aN,_fnAddTr:bP,_fnNodeToDataIndex:br,_fnNodeToColumnIndex:aZ,_fnGetCellData:bt,_fnSetCellData:bl,_fnSplitObjNotation:ak,_fnGetObjectDataFn:ao,_fnSetObjectDataFn:ax,_fnGetDataMaster:bG,_fnClearTable:bh,_fnDeleteIndex:a4,_fnInvalidate:B,_fnGetRowElements:be,_fnCreateTr:P,_fnBuildHead:aK,_fnDrawHead:a5,_fnDraw:a2,_fnReDraw:ai,_fnAddOptionsHtml:i,_fnDetectHeader:aw,_fnGetUniqueThs:bg,_fnFeatureHtmlFilter:q,_fnFilterComplete:u,_fnFilterCustom:ar,_fnFilterColumn:Y,_fnFilter:ay,_fnFilterCreateSearch:aV,_fnEscapeRegex:m,_fnFilterData:aD,_fnFeatureHtmlInfo:g,_fnUpdateInfo:at,_fnInfoMacros:bo,_fnInitialise:h,_fnInitComplete:aB,_fnLengthChange:aS,_fnFeatureHtmlLength:aQ,_fnFeatureHtmlPaginate:az,_fnPageChange:aF,_fnFeatureHtmlProcessing:bz,_fnProcessingDisplay:w,_fnFeatureHtmlTable:by,_fnScrollDraw:l,_fnApplyToChildren:a7,_fnCalculateColumnWidths:bv,_fnThrottle:al,_fnConvertToWidth:ag,_fnGetWidestNode:aJ,_fnGetMaxLenString:ab,_fnStringToCss:bJ,_fnScrollBarWidth:ba,_fnSortFlatten:aH,_fnSort:x,_fnSortAria:bc,_fnSortListener:bi,_fnSortAttachListener:C,_fnSortingClasses:ae,_fnSortData:G,_fnSaveState:bn,_fnLoadState:bN,_fnSettingsFromNode:an,_fnLog:aM,_fnMap:R,_fnBindAction:bb,_fnCallbackReg:bM,_fnCallbackFire:L,_fnLengthOverflow:bk,_fnRenderer:S,_fnDataSource:y,_fnRowAttributes:ac,_fnCalculateEnd:function(){}});bE.fn.dataTable=N;bE.fn.dataTableSettings=N.settings;bE.fn.dataTableExt=N.ext;bE.fn.DataTable=function(bQ){return bE(this).dataTable(bQ).api()};bE.each(N,function(bR,bQ){bE.fn.DataTable[bR]=bQ});return bE.fn.dataTable}))}(window,document));
/*! DataTables Bootstrap 3 integration
 * ©2011-2014 SpryMedia Ltd - datatables.net/license
 */
(function(c,a,d){var b=function(f,e){f.extend(true,e.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"});f.extend(e.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"});e.ext.renderer.pageButton.bootstrap=function(m,u,t,s,r,k){var p=new e.Api(m);var n=m.oClasses;var j=m.oLanguage.oPaginate;var i,h,g=0;var o=function(w,A){var y,v,z,x;var B=function(C){C.preventDefault();if(!f(C.currentTarget).hasClass("disabled")){p.page(C.data.action).draw("page")}};for(y=0,v=A.length;y<v;y++){x=A[y];if(f.isArray(x)){o(w,x)}else{i="";h="";switch(x){case"ellipsis":i="&hellip;";h="disabled";break;case"first":i=j.sFirst;h=x+(r>0?"":" disabled");break;case"previous":i=j.sPrevious;h=x+(r>0?"":" disabled");break;case"next":i=j.sNext;h=x+(r<k-1?"":" disabled");break;case"last":i=j.sLast;h=x+(r<k-1?"":" disabled");break;default:i=x+1;h=r===x?"active":"";break}if(i){z=f("<li>",{"class":n.sPageButton+" "+h,id:t===0&&typeof x==="string"?m.sTableId+"_"+x:null}).append(f("<a>",{href:"#","aria-controls":m.sTableId,"data-dt-idx":g,tabindex:m.iTabIndex}).html(i)).appendTo(w);m.oApi._fnBindAction(z,{action:x},B);g++}}}};var l;try{l=f(u).find(a.activeElement).data("dt-idx")}catch(q){}o(f(u).empty().html('<ul class="pagination"/>').children("ul"),s);if(l){f(u).find("[data-dt-idx="+l+"]").focus()}};if(e.TableTools){f.extend(true,e.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}});f.extend(true,e.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}})}};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],b)}else{if(typeof exports==="object"){b(require("jquery"),require("datatables"))}else{if(jQuery){b(jQuery,jQuery.fn.dataTable)}}}})(window,document);
/*! Responsive 1.0.2
 * 2014 SpryMedia Ltd - datatables.net/license
 */
(function(c,a,d){var b=function(h,g){var f=function(i,j){if(!g.versionCheck||!g.versionCheck("1.10.1")){throw"DataTables Responsive requires DataTables 1.10.1 or newer"}this.s={dt:new g.Api(i),columns:[]};if(this.s.dt.settings()[0].responsive){return}if(j&&typeof j.details==="string"){j.details={type:j.details}}this.c=h.extend(true,{},f.defaults,g.defaults.responsive,j);i.responsive=this;this._constructor()};f.prototype={_constructor:function(){var k=this;var j=this.s.dt;j.settings()[0]._responsive=this;h(c).on("resize.dtr orientationchange.dtr",j.settings()[0].oApi._fnThrottle(function(){k._resize()}));j.on("destroy.dtr",function(){h(c).off("resize.dtr orientationchange.dtr")});this.c.breakpoints.sort(function(m,l){return m.width<l.width?1:m.width>l.width?-1:0});this._classLogic();this._resizeAuto();this._resize();var i=this.c.details;if(i.type){k._detailsInit();this._detailsVis();j.on("column-visibility.dtr",function(){k._detailsVis()});h(j.table().node()).addClass("dtr-"+i.type)}},_columnsVisiblity:function(q){var j=this.s.dt;var m=this.s.columns;var n,s;var p=h.map(m,function(i){return i.auto&&i.minWidth===null?false:i.auto===true?"-":h.inArray(q,i.includeIn)!==-1});var r=0;for(n=0,s=p.length;n<s;n++){if(p[n]===true){r+=m[n].minWidth}}var o=j.table().container().offsetWidth;var k=o-r;for(n=0,s=p.length;n<s;n++){if(m[n].control){k-=m[n].minWidth}else{if(p[n]==="-"){p[n]=k-m[n].minWidth<0?false:true;k-=m[n].minWidth}}}var l=false;for(n=0,s=m.length;n<s;n++){if(!m[n].control&&!m[n].never&&!p[n]){l=true;break}}for(n=0,s=m.length;n<s;n++){if(m[n].control){p[n]=l}}if(h.inArray(true,p)===-1){p[0]=true}return p},_classLogic:function(){var m=this;var i={};var l=this.c.breakpoints;var j=this.s.dt.columns().eq(0).map(function(o){var p=this.column(o).header().className;return{className:p,includeIn:[],auto:false,control:false,never:p.match(/\bnever\b/)?true:false}});var n=function(q,o){var p=j[q].includeIn;if(h.inArray(o,p)===-1){p.push(o)}};var k=function(u,r,q,o){var t,s,p;if(!q){j[u].includeIn.push(r)}else{if(q==="max-"){t=m._find(r).width;for(s=0,p=l.length;s<p;s++){if(l[s].width<=t){n(u,l[s].name)}}}else{if(q==="min-"){t=m._find(r).width;for(s=0,p=l.length;s<p;s++){if(l[s].width>=t){n(u,l[s].name)}}}else{if(q==="not-"){for(s=0,p=l.length;s<p;s++){if(l[s].name.indexOf(o)===-1){n(u,l[s].name)}}}}}}};j.each(function(p,s){var u=p.className.split(" ");var r=false;for(var o=0,q=u.length;o<q;o++){var t=h.trim(u[o]);if(t==="all"){r=true;p.includeIn=h.map(l,function(v){return v.name});return}else{if(t==="none"||t==="never"){r=true;return}else{if(t==="control"){r=true;p.control=true;return}}}h.each(l,function(y,v){var x=v.name.split("-");var z=new RegExp("(min\\-|max\\-|not\\-)?("+x[0]+")(\\-[_a-zA-Z0-9])?");var w=t.match(z);if(w){r=true;if(w[2]===x[0]&&w[3]==="-"+x[1]){k(s,v.name,w[1],w[2]+w[3])}else{if(w[2]===x[0]&&!w[3]){k(s,v.name,w[1],w[2])}}}})}if(!r){p.auto=true}});this.s.columns=j},_detailsInit:function(){var l=this;var k=this.s.dt;var j=this.c.details;if(j.type==="inline"){j.target="td:first-child"}var m=j.target;var i=typeof m==="string"?m:"td";h(k.table().body()).on("click",i,function(p){if(!h(k.table().node()).hasClass("collapsed")){return}if(!k.row(h(this).closest("tr")).length){return}if(typeof m==="number"){var n=m<0?k.columns().eq(0).length+m:m;if(k.cell(this).index().column!==n){return}}var q=k.row(h(this).closest("tr"));if(q.child.isShown()){q.child(false);h(q.node()).removeClass("parent")}else{var o=l.c.details.renderer(k,q[0]);q.child(o,"child").show();h(q.node()).addClass("parent")}})},_detailsVis:function(){var k=this;var j=this.s.dt;var l=j.columns().indexes().filter(function(m){var n=j.column(m);if(n.visible()){return null}return h(n.header()).hasClass("never")?null:m});var i=true;if(l.length===0||(l.length===1&&this.s.columns[l[0]].control)){i=false}if(i){h(j.table().node()).addClass("collapsed");j.rows().eq(0).each(function(m){var o=j.row(m);if(o.child()){var n=k.c.details.renderer(j,o[0]);if(n===false){o.child.hide()}else{o.child(n,"child").show()}}})}else{h(j.table().node()).removeClass("collapsed");j.rows().eq(0).each(function(m){j.row(m).child.hide()})}},_find:function(k){var m=this.c.breakpoints;for(var l=0,j=m.length;l<j;l++){if(m[l].name===k){return m[l]}}},_resize:function(){var o=this.s.dt;var m=h(c).width();var n=this.c.breakpoints;var j=n[0].name;for(var l=n.length-1;l>=0;l--){if(m<=n[l].width){j=n[l].name;break}}var k=this._columnsVisiblity(j);o.columns().eq(0).each(function(q,p){o.column(q).visible(k[p])})},_resizeAuto:function(){var j=this.s.dt;var l=this.s.columns;if(!this.c.auto){return}if(h.inArray(true,h.map(l,function(r){return r.auto}))===-1){return}var o=j.table().node().offsetWidth;var i=j.columns;var q=j.table().node().cloneNode(false);var n=h(j.table().header().cloneNode(false)).appendTo(q);var k=h(j.table().body().cloneNode(false)).appendTo(q);j.rows({page:"current"}).indexes().flatten().each(function(r){var s=j.row(r).node().cloneNode(true);if(j.columns(":hidden").flatten().length){h(s).append(j.cells(r,":hidden").nodes().to$().clone())}h(s).appendTo(k)});var p=j.columns().header().to$().clone(false).wrapAll("tr").appendTo(n);var m=h("<div/>").css({width:1,height:1,overflow:"hidden"}).append(q).insertBefore(j.table().node());j.columns().eq(0).each(function(r){l[r].minWidth=p[r].offsetWidth||0});m.remove()}};f.breakpoints=[{name:"desktop",width:Infinity},{name:"tablet-l",width:1024},{name:"tablet-p",width:768},{name:"mobile-l",width:480},{name:"mobile-p",width:320}];f.defaults={breakpoints:f.breakpoints,auto:true,details:{renderer:function(i,j){var k=i.cells(j,":hidden").eq(0).map(function(m){var p=h(i.column(m.column).header());var l=i.cell(m).index();if(p.hasClass("control")||p.hasClass("never")){return""}var o=i.settings()[0];var n=o.oApi._fnGetCellData(o,l.row,l.column,"display");return'<li data-dtr-index="'+l.column+'"><span class="dtr-title">'+p.text()+':</span> <span class="dtr-data">'+n+"</span></li>"}).toArray().join("");return k?h('<ul data-dtr-index="'+j+'"/>').append(k):false},target:0,type:"inline"}};var e=h.fn.dataTable.Api;e.register("responsive()",function(){return this});e.register("responsive.recalc()",function(){this.iterator("table",function(i){if(i._responsive){i._responsive._resizeAuto();i._responsive._resize()}})});e.register("responsive.index()",function(i){i=h(i);return{column:i.data("dtr-index"),row:i.parent().data("dtr-index")}});f.version="1.0.2";h.fn.dataTable.Responsive=f;h.fn.DataTable.Responsive=f;h(a).on("init.dt.dtr",function(k,j,i){if(h(j.nTable).hasClass("responsive")||h(j.nTable).hasClass("dt-responsive")||j.oInit.responsive||g.defaults.responsive){var l=j.oInit.responsive;if(l!==false){new f(j,h.isPlainObject(l)?l:{})}}});return f};if(typeof define==="function"&&define.amd){define(["jquery","datatables"],b)}else{if(typeof exports==="object"){b(require("jquery"),require("datatables"))}else{if(jQuery&&!jQuery.fn.dataTable.Responsive){b(jQuery,jQuery.fn.dataTable)}}}})(window,document);
/*!
 TableTools 2.2.4
 2009-2015 SpryMedia Ltd - datatables.net/license

 ZeroClipboard 1.0.4
 Author: Joseph Huckaby - MIT licensed
*/
;var TableTools;(function(d,a,b){var c=function(f,j){var h={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(e){"string"==typeof e&&(e=a.getElementById(e));e.addClass||(e.hide=function(){this.style.display="none"},e.show=function(){this.style.display=""},e.addClass=function(g){this.removeClass(g);this.className+=" "+g},e.removeClass=function(g){this.className=this.className.replace(RegExp("\\s*"+g+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},e.hasClass=function(g){return !!this.className.match(RegExp("\\s*"+g+"\\s*"))});return e},setMoviePath:function(e){this.moviePath=e},dispatch:function(g,e,k){(g=this.clients[g])&&g.receiveEvent(e,k)},register:function(g,e){this.clients[g]=e},getDOMObjectPosition:function(g){var e={left:0,top:0,width:g.width?g.width:g.offsetWidth,height:g.height?g.height:g.offsetHeight};""!==g.style.width&&(e.width=g.style.width.replace("px",""));""!==g.style.height&&(e.height=g.style.height.replace("px",""));for(;g;){e.left+=g.offsetLeft,e.top+=g.offsetTop,g=g.offsetParent}return e},Client:function(e){this.handlers={};this.id=h.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;h.register(this.id,this);e&&this.glue(e)}};h.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(g,e){this.domElement=h.$(g);var m=99;this.domElement.style.zIndex&&(m=parseInt(this.domElement.style.zIndex,10)+1);var l=h.getDOMObjectPosition(this.domElement);this.div=a.createElement("div");var k=this.div.style;k.position="absolute";k.left="0px";k.top="0px";k.width=l.width+"px";k.height=l.height+"px";k.zIndex=m;"undefined"!=typeof e&&""!==e&&(this.div.title=e);0!==l.width&&0!==l.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(l.width,l.height).replace(/&/g,"&amp;"))},positionElement:function(){var g=h.getDOMObjectPosition(this.domElement),e=this.div.style;e.position="absolute";e.width=g.width+"px";e.height=g.height+"px";0!==g.width&&0!==g.height&&(this.sized=!0,e=this.div.childNodes[0],e.width=g.width,e.height=g.height)},getHTML:function(g,e){var m="",l="id="+this.id+"&width="+g+"&height="+e;if(navigator.userAgent.match(/MSIE/)){var k=location.href.match(/^https/i)?"https://":"http://",m=m+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+k+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+g+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+h.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+l+'"/><param name="wmode" value="transparent"/></object>')}else{m+='<embed id="'+this.movieId+'" src="'+h.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+g+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+l+'" wmode="transparent" />'}return m},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var g=a.getElementsByTagName("body")[0];try{g.removeChild(this.div)}catch(e){}this.div=this.domElement=null}},reposition:function(g){g&&((this.domElement=h.$(g))||this.hide());if(this.domElement&&this.div){var g=h.getDOMObjectPosition(this.domElement),e=this.div.style;e.left=""+g.left+"px";e.top=""+g.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(e){this.clipText+=e;this.ready&&this.movie.appendText(e)},setText:function(e){this.clipText=e;this.ready&&this.movie.setText(e)},setCharSet:function(e){this.charSet=e;this.ready&&this.movie.setCharSet(e)},setBomInc:function(e){this.incBom=e;this.ready&&this.movie.setBomInc(e)},setFileName:function(e){this.fileName=e;this.ready&&this.movie.setFileName(e)},setAction:function(e){this.action=e;this.ready&&this.movie.setAction(e)},addEventListener:function(g,e){g=g.toString().toLowerCase().replace(/^on/,"");this.handlers[g]||(this.handlers[g]=[]);this.handlers[g].push(e)},setHandCursor:function(e){this.handCursorEnabled=e;this.ready&&this.movie.setHandCursor(e)},setCSSEffects:function(e){this.cssEffects=!!e},receiveEvent:function(k,g){var o,k=k.toString().toLowerCase().replace(/^on/,"");switch(k){case"load":this.movie=a.getElementById(this.movieId);if(!this.movie){o=this;setTimeout(function(){o.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){o=this;setTimeout(function(){o.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[k]){for(var n=0,l=this.handlers[k].length;n<l;n++){var m=this.handlers[k][n];if("function"==typeof m){m(this,g)}else{if("object"==typeof m&&2==m.length){m[0][m[1]](this,g)}else{if("string"==typeof m){d[m](this,g)}}}}}}};d.ZeroClipboard_TableTools=h;var i=jQuery;TableTools=function(g,e){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:i.fn.dataTable.Api?(new i.fn.dataTable.Api(g)).settings()[0]:g.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}};this.classes=i.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&i.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof e&&(e={});TableTools._aInstances.push(this);this._fnConstruct(e);return this};TableTools.prototype={fnGetSelected:function(g){var e=[],m=this.s.dt.aoData,l=this.s.dt.aiDisplay,k;if(g){g=0;for(k=l.length;g<k;g++){m[l[g]]._DTTT_selected&&e.push(m[l[g]].nTr)}}else{g=0;for(k=m.length;g<k;g++){m[g]._DTTT_selected&&e.push(m[g].nTr)}}return e},fnGetSelectedData:function(){var g=[],e=this.s.dt.aoData,l,k;l=0;for(k=e.length;l<k;l++){e[l]._DTTT_selected&&g.push(this.s.dt.oInstance.fnGetData(l))}return g},fnGetSelectedIndexes:function(g){var e=[],m=this.s.dt.aoData,l=this.s.dt.aiDisplay,k;if(g){g=0;for(k=l.length;g<k;g++){m[l[g]]._DTTT_selected&&e.push(l[g])}}else{g=0;for(k=m.length;g<k;g++){m[g]._DTTT_selected&&e.push(g)}}return e},fnIsSelected:function(e){e=this.s.dt.oInstance.fnGetPosition(e);return !0===this.s.dt.aoData[e]._DTTT_selected?!0:!1},fnSelectAll:function(e){this._fnRowSelect(e?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(e){this._fnRowDeselect(this.fnGetSelectedIndexes(e))},fnSelect:function(e){"single"==this.s.select.type&&this.fnSelectNone();this._fnRowSelect(e)},fnDeselect:function(e){this._fnRowDeselect(e)},fnGetTitle:function(g){var e="";"undefined"!=typeof g.sTitle&&""!==g.sTitle?e=g.sTitle:(g=a.getElementsByTagName("title"),0<g.length&&(e=g[0].innerHTML));return 4>"¡".toString().length?e.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):e.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(k){var g=this.s.dt.aoColumns,k=this._fnColumnTargets(k.mColumns),p=[],o=0,m=0,n,l;n=0;for(l=k.length;n<l;n++){k[n]&&(o=g[n].nTh.offsetWidth,m+=o,p.push(o))}n=0;for(l=p.length;n<l;n++){p[n]/=m}return p.join("\t")},fnGetTableData:function(e){if(this.s.dt){return this._fnGetDataTablesData(e)}},fnSetText:function(g,e){this._fnFlashSetText(g,e)},fnResizeButtons:function(){for(var g in h.clients){if(g){var e=h.clients[g];"undefined"!=typeof e.domElement&&e.domElement.parentNode&&e.positionElement()}}},fnResizeRequired:function(){for(var g in h.clients){if(g){var e=h.clients[g];if("undefined"!=typeof e.domElement&&e.domElement.parentNode==this.dom.container&&!1===e.sized){return !0}}}return !1},fnPrint:function(g,e){e===b&&(e={});g===b||g?this._fnPrintStart(e):this._fnPrintEnd()},fnInfo:function(g,e){var k=i("<div/>").addClass(this.classes.print.info).html(g).appendTo("body");setTimeout(function(){k.fadeOut("normal",function(){k.remove()})},e)},fnContainer:function(){return this.dom.container},_fnConstruct:function(g){var e=this;this._fnCustomiseSettings(g);this.dom.container=a.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){i(e.s.dt.nTBody).off("click.DTTT_Select",e.s.custom.sRowSelector).off("mousedown.DTTT_Select","tr").off("mouseup.DTTT_Select","tr");i(e.dom.container).empty();var k=i.inArray(e,TableTools._aInstances);-1!==k&&TableTools._aInstances.splice(k,1)}})},_fnCustomiseSettings:function(e){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0);this.dom.table=this.s.dt.nTable;this.s.custom=i.extend({},TableTools.DEFAULTS,e);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof h&&(h.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(g,e){for(var m,l=0,k=g.length;l<k;l++){if("string"==typeof g[l]){if("undefined"==typeof TableTools.BUTTONS[g[l]]){alert("TableTools: Warning - unknown button type: "+g[l]);continue}m=i.extend({},TableTools.BUTTONS[g[l]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[g[l].sExtends]){alert("TableTools: Warning - unknown button type: "+g[l].sExtends);continue}m=i.extend({},TableTools.BUTTONS[g[l].sExtends],!0);m=i.extend(m,g[l],!0)}(m=this._fnCreateButton(m,i(e).hasClass(this.classes.collection.container)))&&e.appendChild(m)}},_fnCreateButton:function(g,e){var k=this._fnButtonBase(g,e);if(g.sAction.match(/flash/)){if(!this._fnHasFlash()){return !1}this._fnFlashConfig(k,g)}else{"text"==g.sAction?this._fnTextConfig(k,g):"div"==g.sAction?this._fnTextConfig(k,g):"collection"==g.sAction&&(this._fnTextConfig(k,g),this._fnCollectionConfig(k,g))}if(-1!==this.s.dt.iTabIndex){i(k).attr("tabindex",this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(l){13===l.keyCode&&(l.stopPropagation(),i(this).trigger("click"))}).on("mousedown.DTTT",function(l){g.sAction.match(/flash/)||l.preventDefault()})}return k},_fnButtonBase:function(k,g){var o,n,l;g?(o=k.sTag&&"default"!==k.sTag?k.sTag:this.s.tags.collection.button,n=k.sLinerTag&&"default"!==k.sLinerTag?k.sLiner:this.s.tags.collection.liner,l=this.classes.collection.buttons.normal):(o=k.sTag&&"default"!==k.sTag?k.sTag:this.s.tags.button,n=k.sLinerTag&&"default"!==k.sLinerTag?k.sLiner:this.s.tags.liner,l=this.classes.buttons.normal);o=a.createElement(o);n=a.createElement(n);var m=this._fnGetMasterSettings();o.className=l+" "+k.sButtonClass;o.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+m.buttonCounter);o.appendChild(n);n.innerHTML=k.sButtonText;m.buttonCounter++;return o},_fnGetMasterSettings:function(){if(this.s.master){return this.s}for(var g=TableTools._aInstances,e=0,k=g.length;e<k;e++){if(this.dom.table==g[e].s.dt.nTable){return g[e].s}}},_fnCollectionConfig:function(g,e){var k=a.createElement(this.s.tags.collection.container);k.style.display="none";k.className=this.classes.collection.container;e._collection=k;a.body.appendChild(k);this._fnButtonDefinations(e.aButtons,k)},_fnCollectionShow:function(v,u){var t=this,s=i(v).offset(),r=u._collection,m=s.left,s=s.top+i(v).outerHeight(),n=i(d).height(),p=i(a).height(),e=i(d).width(),q=i(a).width();r.style.position="absolute";r.style.left=m+"px";r.style.top=s+"px";r.style.display="block";i(r).css("opacity",0);var k=a.createElement("div");k.style.position="absolute";k.style.left="0px";k.style.top="0px";k.style.height=(n>p?n:p)+"px";k.style.width=(e>q?e:q)+"px";k.className=this.classes.collection.background;i(k).css("opacity",0);a.body.appendChild(k);a.body.appendChild(r);n=i(r).outerWidth();e=i(r).outerHeight();m+n>q&&(r.style.left=q-n+"px");s+e>p&&(r.style.top=s-e-i(v).outerHeight()+"px");this.dom.collection.collection=r;this.dom.collection.background=k;setTimeout(function(){i(r).animate({opacity:1},500);i(k).animate({opacity:0.25},500)},10);this.fnResizeButtons();i(k).click(function(){t._fnCollectionHide.call(t,null,null)})},_fnCollectionHide:function(g,e){!(null!==e&&"collection"==e.sExtends)&&null!==this.dom.collection.collection&&(i(this.dom.collection.collection).animate({opacity:0},500,function(){this.style.display="none"}),i(this.dom.collection.background).animate({opacity:0},500,function(){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var g=this,e=this.s.dt;i(e.nTable).addClass(this.classes.select.table);"os"===this.s.select.type&&(i(e.nTBody).on("mousedown.DTTT_Select","tr",function(k){if(k.shiftKey){i(e.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return !1})}}),i(e.nTBody).on("mouseup.DTTT_Select","tr",function(){i(e.nTBody).css("-moz-user-select","")}));i(e.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,function(s){var r=this.nodeName.toLowerCase()==="tr"?this:i(this).parents("tr")[0],p=g.s.select,k=g.s.dt.oInstance.fnGetPosition(r);if(r.parentNode==e.nTBody&&e.oInstance.fnGetData(r)!==null){if(p.type=="os"){if(s.ctrlKey||s.metaKey){g.fnIsSelected(r)?g._fnRowDeselect(r,s):g._fnRowSelect(r,s)}else{if(s.shiftKey){var l=g.s.dt.aiDisplay.slice(),m=i.inArray(p.lastRow,l),q=i.inArray(k,l);if(g.fnGetSelected().length===0||m===-1){l.splice(i.inArray(k,l)+1,l.length)}else{if(m>q){var n=q,q=m,m=n}l.splice(q+1,l.length);l.splice(0,m)}if(g.fnIsSelected(r)){l.splice(i.inArray(k,l),1);g._fnRowDeselect(l,s)}else{g._fnRowSelect(l,s)}}else{if(g.fnIsSelected(r)&&g.fnGetSelected().length===1){g._fnRowDeselect(r,s)}else{g.fnSelectNone();g._fnRowSelect(r,s)}}}}else{if(g.fnIsSelected(r)){g._fnRowDeselect(r,s)}else{if(p.type=="single"){g.fnSelectNone();g._fnRowSelect(r,s)}else{p.type=="multi"&&g._fnRowSelect(r,s)}}}p.lastRow=k}});e.oApi._fnCallbackReg(e,"aoRowCreatedCallback",function(m,l,k){e.aoData[k]._DTTT_selected&&i(m).addClass(g.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(g,e){var n=this._fnSelectData(g),m=[],l,k;l=0;for(k=n.length;l<k;l++){n[l].nTr&&m.push(n[l].nTr)}if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,e,m,!0)){l=0;for(k=n.length;l<k;l++){n[l]._DTTT_selected=!0,n[l].nTr&&i(n[l].nTr).addClass(this.classes.select.row)}null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,m);TableTools._fnEventDispatch(this,"select",m,!0)}},_fnRowDeselect:function(g,e){var n=this._fnSelectData(g),m=[],l,k;l=0;for(k=n.length;l<k;l++){n[l].nTr&&m.push(n[l].nTr)}if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,e,m,!1)){l=0;for(k=n.length;l<k;l++){n[l]._DTTT_selected=!1,n[l].nTr&&i(n[l].nTr).removeClass(this.classes.select.row)}null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,m);TableTools._fnEventDispatch(this,"select",m,!1)}},_fnSelectData:function(g){var e=[],m,l,k;if(g.nodeName){m=this.s.dt.oInstance.fnGetPosition(g),e.push(this.s.dt.aoData[m])}else{if("undefined"!==typeof g.length){l=0;for(k=g.length;l<k;l++){g[l].nodeName?(m=this.s.dt.oInstance.fnGetPosition(g[l]),e.push(this.s.dt.aoData[m])):"number"===typeof g[l]?e.push(this.s.dt.aoData[g[l]]):e.push(g[l])}}else{"number"===typeof g?e.push(this.s.dt.aoData[g]):e.push(g)}}return e},_fnTextConfig:function(g,e){var k=this;null!==e.fnInit&&e.fnInit.call(this,g,e);""!==e.sToolTip&&(g.title=e.sToolTip);i(g).hover(function(){e.fnMouseover!==null&&e.fnMouseover.call(this,g,e,null)},function(){e.fnMouseout!==null&&e.fnMouseout.call(this,g,e,null)});null!==e.fnSelect&&TableTools._fnEventListen(this,"select",function(l){e.fnSelect.call(k,g,e,l)});i(g).click(function(l){e.fnClick!==null&&e.fnClick.call(k,g,e,null,l);e.fnComplete!==null&&e.fnComplete.call(k,g,e,null,null);k._fnCollectionHide(g,e)})},_fnHasFlash:function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){return !0}}catch(e){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==b&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin){return !0}}return !1},_fnFlashConfig:function(g,e){var l=this,k=new h.Client;null!==e.fnInit&&e.fnInit.call(this,g,e);k.setHandCursor(!0);"flash_save"==e.sAction?(k.setAction("save"),k.setCharSet("utf16le"==e.sCharSet?"UTF16LE":"UTF8"),k.setBomInc(e.bBomInc),k.setFileName(e.sFileName.replace("*",this.fnGetTitle(e)))):"flash_pdf"==e.sAction?(k.setAction("pdf"),k.setFileName(e.sFileName.replace("*",this.fnGetTitle(e)))):k.setAction("copy");k.addEventListener("mouseOver",function(){e.fnMouseover!==null&&e.fnMouseover.call(l,g,e,k)});k.addEventListener("mouseOut",function(){e.fnMouseout!==null&&e.fnMouseout.call(l,g,e,k)});k.addEventListener("mouseDown",function(){e.fnClick!==null&&e.fnClick.call(l,g,e,k)});k.addEventListener("complete",function(m,n){e.fnComplete!==null&&e.fnComplete.call(l,g,e,k,n);l._fnCollectionHide(g,e)});null!==e.fnSelect&&TableTools._fnEventListen(this,"select",function(m){e.fnSelect.call(l,g,e,m)});this._fnFlashGlue(k,g,e.sToolTip)},_fnFlashGlue:function(g,e,m){var l=this,k=e.getAttribute("id");a.getElementById(k)?g.glue(e,m):setTimeout(function(){l._fnFlashGlue(g,e,m)},100)},_fnFlashSetText:function(g,e){var m=this._fnChunkData(e,8192);g.clearText();for(var l=0,k=m.length;l<k;l++){g.appendText(m[l])}},_fnColumnTargets:function(g){var e=[],m=this.s.dt,l,k=m.aoColumns;l=k.length;if("function"==typeof g){g=g.call(this,m);for(m=0;m<l;m++){e.push(-1!==i.inArray(m,g)?!0:!1)}}else{if("object"==typeof g){for(m=0;m<l;m++){e.push(!1)}m=0;for(l=g.length;m<l;m++){e[g[m]]=!0}}else{if("visible"==g){for(m=0;m<l;m++){e.push(k[m].bVisible?!0:!1)}}else{if("hidden"==g){for(m=0;m<l;m++){e.push(k[m].bVisible?!1:!0)}}else{if("sortable"==g){for(m=0;m<l;m++){e.push(k[m].bSortable?!0:!1)}}else{for(m=0;m<l;m++){e.push(!0)}}}}}}return e},_fnNewline:function(e){return"auto"==e.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":e.sNewLine},_fnGetDataTablesData:function(z){var y,x,w,v,r,s=[],t="",u=this.s.dt,q,p=RegExp(z.sFieldBoundary,"g"),e=this._fnColumnTargets(z.mColumns);w="undefined"!=typeof z.bSelectedOnly?z.bSelectedOnly:!1;if(z.bHeader){r=[];y=0;for(x=u.aoColumns.length;y<x;y++){e[y]&&(t=u.aoColumns[y].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),t=this._fnHtmlDecode(t),r.push(this._fnBoundData(t,z.sFieldBoundary,p)))}s.push(r.join(z.sFieldSeperator))}w=!0;var o;v=this.fnGetSelectedIndexes();o=(w="none"!==this.s.select.type&&w&&0!==v.length)?v:j.Api?(new j.Api(u)).rows(z.oSelectorOpts).indexes().flatten().toArray():u.oInstance.$("tr",z.oSelectorOpts).map(function(k,g){return u.oInstance.fnGetPosition(g)}).get();w=0;for(v=o.length;w<v;w++){q=u.aoData[o[w]].nTr;r=[];y=0;for(x=u.aoColumns.length;y<x;y++){e[y]&&(t=u.oApi._fnGetCellData(u,o[w],y,"display"),z.fnCellRender?t=z.fnCellRender(t,y,q,o[w])+"":"string"==typeof t?(t=t.replace(/\n/g," "),t=t.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),t=t.replace(/<.*?>/g,"")):t+="",t=t.replace(/^\s+/,"").replace(/\s+$/,""),t=this._fnHtmlDecode(t),r.push(this._fnBoundData(t,z.sFieldBoundary,p)))}s.push(r.join(z.sFieldSeperator));z.bOpenRows&&(y=i.grep(u.aoOpenRows,function(g){return g.nParent===q}),1===y.length&&(t=this._fnBoundData(i("td",y[0].nTr).html(),z.sFieldBoundary,p),s.push(t)))}if(z.bFooter&&null!==u.nTFoot){r=[];y=0;for(x=u.aoColumns.length;y<x;y++){e[y]&&null!==u.aoColumns[y].nTf&&(t=u.aoColumns[y].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),t=this._fnHtmlDecode(t),r.push(this._fnBoundData(t,z.sFieldBoundary,p)))}s.push(r.join(z.sFieldSeperator))}return s.join(this._fnNewline(z))},_fnBoundData:function(g,e,k){return""===e?g:e+g.replace(k,e+e)+e},_fnChunkData:function(g,e){for(var m=[],l=g.length,k=0;k<l;k+=e){k+e<l?m.push(g.substring(k,k+e)):m.push(g.substring(k,l))}return m},_fnHtmlDecode:function(g){if(-1===g.indexOf("&")){return g}var e=a.createElement("div");return g.replace(/&([^\s]*?);/g,function(k,l){if("#"===k.substr(1,1)){return String.fromCharCode(Number(l.substr(1)))}e.innerHTML=k;return e.childNodes[0].nodeValue})},_fnPrintStart:function(k){var e=this,p=this.s.dt;this._fnPrintHideNodes(p.nTable);this.s.print.saveStart=p._iDisplayStart;this.s.print.saveLength=p._iDisplayLength;k.bShowAll&&(p._iDisplayStart=0,p._iDisplayLength=-1,p.oApi._fnCalculateEnd&&p.oApi._fnCalculateEnd(p),p.oApi._fnDraw(p));if(""!==p.oScroll.sX||""!==p.oScroll.sY){this._fnPrintScrollStart(p),i(this.s.dt.nTable).bind("draw.DTTT_Print",function(){e._fnPrintScrollStart(p)})}var o=p.aanFeatures,n;for(n in o){if("i"!=n&&"t"!=n&&1==n.length){for(var m=0,l=o[n].length;m<l;m++){this.dom.print.hidden.push({node:o[n][m],display:"block"}),o[n][m].style.display="none"}}}i(a.body).addClass(this.classes.print.body);""!==k.sInfo&&this.fnInfo(k.sInfo,3000);k.sMessage&&i("<div/>").addClass(this.classes.print.message).html(k.sMessage).prependTo("body");this.s.print.saveScroll=i(d).scrollTop();d.scrollTo(0,0);i(a).bind("keydown.DTTT",function(g){if(g.keyCode==27){g.preventDefault();e._fnPrintEnd.call(e,g)}})},_fnPrintEnd:function(){var g=this.s.dt,e=this.s.print;this._fnPrintShowNodes();if(""!==g.oScroll.sX||""!==g.oScroll.sY){i(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd()}d.scrollTo(0,e.saveScroll);i("div."+this.classes.print.message).remove();i(a.body).removeClass("DTTT_Print");g._iDisplayStart=e.saveStart;g._iDisplayLength=e.saveLength;g.oApi._fnCalculateEnd&&g.oApi._fnCalculateEnd(g);g.oApi._fnDraw(g);i(a).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var g=this.s.dt;g.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var e=g.nTable.parentNode,k;k=g.nTable.getElementsByTagName("thead");0<k.length&&g.nTable.removeChild(k[0]);null!==g.nTFoot&&(k=g.nTable.getElementsByTagName("tfoot"),0<k.length&&g.nTable.removeChild(k[0]));k=g.nTHead.cloneNode(!0);g.nTable.insertBefore(k,g.nTable.childNodes[0]);null!==g.nTFoot&&(k=g.nTFoot.cloneNode(!0),g.nTable.insertBefore(k,g.nTable.childNodes[1]));""!==g.oScroll.sX&&(g.nTable.style.width=i(g.nTable).outerWidth()+"px",e.style.width=i(g.nTable).outerWidth()+"px",e.style.overflow="visible");""!==g.oScroll.sY&&(e.style.height=i(g.nTable).outerHeight()+"px",e.style.overflow="visible")},_fnPrintScrollEnd:function(){var g=this.s.dt,e=g.nTable.parentNode;""!==g.oScroll.sX&&(e.style.width=g.oApi._fnStringToCss(g.oScroll.sX),e.style.overflow="auto");""!==g.oScroll.sY&&(e.style.height=g.oApi._fnStringToCss(g.oScroll.sY),e.style.overflow="auto")},_fnPrintShowNodes:function(){for(var g=this.dom.print.hidden,e=0,k=g.length;e<k;e++){g[e].node.style.display=g[e].display}g.splice(0,g.length)},_fnPrintHideNodes:function(k){for(var e=this.dom.print.hidden,p=k.parentNode,o=p.childNodes,n=0,m=o.length;n<m;n++){if(o[n]!=k&&1==o[n].nodeType){var l=i(o[n]).css("display");"none"!=l&&(e.push({node:o[n],display:l}),o[n].style.display="none")}}"BODY"!=p.nodeName.toUpperCase()&&this._fnPrintHideNodes(p)}};TableTools._aInstances=[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var g=[],e=0,k=TableTools._aInstances.length;e<k;e++){TableTools._aInstances[e].s.master&&g.push(TableTools._aInstances[e])}return g};TableTools.fnGetInstance=function(g){"object"!=typeof g&&(g=a.getElementById(g));for(var e=0,k=TableTools._aInstances.length;e<k;e++){if(TableTools._aInstances[e].s.master&&TableTools._aInstances[e].dom.table==g){return TableTools._aInstances[e]}}return null};TableTools._fnEventListen=function(g,e,k){TableTools._aListeners.push({that:g,type:e,fn:k})};TableTools._fnEventDispatch=function(l,k,q,p){for(var n=TableTools._aListeners,o=0,m=n.length;o<m;o++){l.dom.table==n[o].that.dom.table&&n[o].type==k&&n[o].fn(q,p)}};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,oSelectorOpts:b,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:i.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(g,e,k){this.fnSetText(k,this.fnGetTableData(e))}}),xls:i.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(g,e,k){this.fnSetText(k,this.fnGetTableData(e))}}),copy:i.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(g,e,k){this.fnSetText(k,this.fnGetTableData(e))},fnComplete:function(g,e,l,k){g=k.split("\n").length;e.bHeader&&g--;null!==this.s.dt.nTFoot&&e.bFooter&&g--;this.fnInfo("<h6>Table copied</h6><p>Copied "+g+" row"+(1==g?"":"s")+" to the clipboard.</p>",1500)}}),pdf:i.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(g,e,k){this.fnSetText(k,"title:"+this.fnGetTitle(e)+"\nmessage:"+e.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(e)+"\norientation:"+e.sPdfOrientation+"\nsize:"+e.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(e))}}),print:i.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(g,e){this.fnPrint(!0,e)}}),text:i.extend({},TableTools.buttonBase),select:i.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(e){0!==this.fnGetSelected().length?i(e).removeClass(this.classes.buttons.disabled):i(e).addClass(this.classes.buttons.disabled)},fnInit:function(e){i(e).addClass(this.classes.buttons.disabled)}}),select_single:i.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(e){1==this.fnGetSelected().length?i(e).removeClass(this.classes.buttons.disabled):i(e).addClass(this.classes.buttons.disabled)},fnInit:function(e){i(e).addClass(this.classes.buttons.disabled)}}),select_all:i.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(){this.fnSelectAll()},fnSelect:function(e){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?i(e).addClass(this.classes.buttons.disabled):i(e).removeClass(this.classes.buttons.disabled)}}),select_none:i.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(){this.fnSelectNone()},fnSelect:function(e){0!==this.fnGetSelected().length?i(e).removeClass(this.classes.buttons.disabled):i(e).addClass(this.classes.buttons.disabled)},fnInit:function(e){i(e).addClass(this.classes.buttons.disabled)}}),ajax:i.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(g,e){var k=this.fnGetTableData(e);i.ajax({url:e.sAjaxUrl,data:[{name:"tableData",value:k}],success:e.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(){alert("Ajax complete")}}),div:i.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:i.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(g,e){this._fnCollectionShow(g,e)}})};TableTools.buttons=TableTools.BUTTONS;TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.defaults=TableTools.DEFAULTS;TableTools.prototype.CLASS="TableTools";TableTools.version="2.2.4";i.fn.dataTable.Api&&i.fn.dataTable.Api.register("tabletools()",function(){var e=null;0<this.context.length&&(e=TableTools.fnGetInstance(this.context[0].nTable));return e});"function"==typeof i.fn.dataTable&&"function"==typeof i.fn.dataTableExt.fnVersionCheck&&i.fn.dataTableExt.fnVersionCheck("1.9.0")?i.fn.dataTableExt.aoFeatures.push({fnInit:function(g){var e=g.oInit;return(new TableTools(g.oInstance,e?e.tableTools||e.oTableTools||{}:{})).dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download");i.fn.DataTable.TableTools=TableTools;"function"==typeof f.fn.dataTable&&"function"==typeof f.fn.dataTableExt.fnVersionCheck&&f.fn.dataTableExt.fnVersionCheck("1.9.0")?f.fn.dataTableExt.aoFeatures.push({fnInit:function(e){e=new TableTools(e.oInstance,"undefined"!=typeof e.oInit.oTableTools?e.oInit.oTableTools:{});TableTools._aInstances.push(e);return e.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");f.fn.dataTable.TableTools=TableTools;return f.fn.DataTable.TableTools=TableTools};"function"===typeof define&&define.amd?define(["jquery","datatables"],c):"object"===typeof exports?c(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.TableTools&&c(jQuery,jQuery.fn.dataTable)})(window,document);
$(document).ready(function(){var a=$.parseJSON($("body #hiddendata #datatables").text());if($(".dataTable").length){var b=$("html").attr("lang");$(".dataTable").each(function(c){$(this).DataTable({responsive:true,language:a,stateSave:true})})}$("body .reset_search").hide();$(".footable").each(function(d){console.log("• Loading : ","Footables");$(this).footable();var c=this;$($(this).attr("data-reset-filter")).hide();$($(this).attr("data-reset-filter")).on("click",function(f){f.preventDefault();$(c).data("footable-filter").clearFilter();$($(c).attr("data-filter")).val("");$($(c).attr("data-reset-filter")).hide()});$($(this).attr("data-filter")).on("keyup",function(f){if($($(c).attr("data-filter")).val()!=""){$($(c).attr("data-reset-filter")).show()}else{$($(c).attr("data-reset-filter")).hide()}})})});
/*! jsTree - v3.0.9 - 2015-01-05 - (MIT) */
;!function(b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):jQuery)}(function(J,I){if(!J.jstree){var H=0,G=!1,F=!1,E=!1,D=[],C=J("script:last").attr("src"),B=document,A=B.createElement("LI"),z,y;A.setAttribute("role","treeitem"),z=B.createElement("I"),z.className="jstree-icon jstree-ocl",z.setAttribute("role","presentation"),A.appendChild(z),z=B.createElement("A"),z.className="jstree-anchor",z.setAttribute("href","#"),z.setAttribute("tabindex","-1"),y=B.createElement("I"),y.className="jstree-icon jstree-themeicon",y.setAttribute("role","presentation"),z.appendChild(y),A.appendChild(z),z=y=null,J.jstree={version:"3.0.9",defaults:{plugins:[]},plugins:{},path:C&&-1!==C.indexOf("/")?C.replace(/\/[^\/]+$/,""):"",idregex:/[\\:&!^|()\[\]<>@*'+~#";.,=\- \/${}%?`]/g},J.jstree.create=function(a,h){var g=new J.jstree.core(++H),c=h;return h=J.extend(!0,{},J.jstree.defaults,h),c&&c.plugins&&(h.plugins=c.plugins),J.each(h.plugins,function(e,d){"core"!==e&&(g=g.plugin(d,h[d]))}),g.init(a,h),g},J.jstree.destroy=function(){J(".jstree:jstree").jstree("destroy"),J(document).off(".jstree")},J.jstree.core=function(b){this._id=b,this._cnt=0,this._wrk=null,this._data={core:{themes:{name:!1,dots:!1,icons:!1},selected:[],last_error:{},working:!1,worker_queue:[],focused:null}}},J.jstree.reference=function(a){var h=null,g=null;if(a&&a.id&&(a=a.id),!g||!g.length){try{g=J(a)}catch(f){}}if(!g||!g.length){try{g=J("#"+a.replace(J.jstree.idregex,"\\$&"))}catch(f){}}return g&&g.length&&(g=g.closest(".jstree")).length&&(g=g.data("jstree"))?h=g:J(".jstree").each(function(){var b=J(this).data("jstree");return b&&b._model.data[a]?(h=b,!1):void 0}),h},J.fn.jstree=function(h){var g="string"==typeof h,b=Array.prototype.slice.call(arguments,1),a=null;return h!==!0||this.length?(this.each(function(){var d=J.jstree.reference(this),c=g&&d?d[h]:null;return a=g&&c?c.apply(d,b):null,d||g||h!==I&&!J.isPlainObject(h)||J(this).data("jstree",new J.jstree.create(this,h)),(d&&!g||h===!0)&&(a=d||!1),null!==a&&a!==I?!1:void 0}),null!==a&&a!==I?a:this):!1},J.expr[":"].jstree=J.expr.createPseudo(function(a){return function(b){return J(b).hasClass("jstree")&&J(b).data("jstree")!==I}}),J.jstree.defaults.core={data:!1,strings:!1,check_callback:!1,error:J.noop,animation:200,multiple:!0,themes:{name:!1,url:!1,dir:!1,dots:!0,icons:!0,stripes:!1,variant:!1,responsive:!1},expand_selected_onload:!0,worker:!0,force_text:!1,dblclick_toggle:!0},J.jstree.core.prototype={plugin:function(a,f){var e=J.jstree.plugins[a];return e?(this._data[a]={},e.prototype=this,new e(f,this)):this},init:function(a,d){this._model={data:{"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}},changed:[],force_full_redraw:!1,redraw_timeout:!1,default_state:{loaded:!0,opened:!1,selected:!1,disabled:!1}},this.element=J(a).addClass("jstree jstree-"+this._id),this.settings=d,this._data.core.ready=!1,this._data.core.loaded=!1,this._data.core.rtl="rtl"===this.element.css("direction"),this.element[this._data.core.rtl?"addClass":"removeClass"]("jstree-rtl"),this.element.attr("role","tree"),this.settings.core.multiple&&this.element.attr("aria-multiselectable",!0),this.element.attr("tabindex")||this.element.attr("tabindex","0"),this.bind(),this.trigger("init"),this._data.core.original_container_html=this.element.find(" > ul > li").clone(!0),this._data.core.original_container_html.find("li").addBack().contents().filter(function(){return 3===this.nodeType&&(!this.nodeValue||/^\s+$/.test(this.nodeValue))}).remove(),this.element.html("<ul class='jstree-container-ul jstree-children' role='group'><li id='j"+this._id+"_loading' class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='tree-item'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading"),this._data.core.li_height=this.get_container_ul().children("li").first().height()||24,this.trigger("loading"),this.load_node("#")},destroy:function(d){if(this._wrk){try{window.URL.revokeObjectURL(this._wrk),this._wrk=null}catch(c){}}d||this.element.empty(),this.teardown()},teardown:function(){this.unbind(),this.element.removeClass("jstree").removeData("jstree").find("[class^='jstree']").addBack().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),this.element=null},bind:function(){var a="",f=null,e=0;this.element.on("dblclick.jstree",function(){if(document.selection&&document.selection.empty){document.selection.empty()}else{if(window.getSelection){var d=window.getSelection();try{d.removeAllRanges(),d.collapse()}catch(c){}}}}).on("mousedown.jstree",J.proxy(function(b){b.target===this.element[0]&&(b.preventDefault(),e=+new Date)},this)).on("mousedown.jstree",".jstree-ocl",function(b){b.preventDefault()}).on("click.jstree",".jstree-ocl",J.proxy(function(b){this.toggle_node(b.target)},this)).on("dblclick.jstree",".jstree-anchor",J.proxy(function(b){this.settings.core.dblclick_toggle&&this.toggle_node(b.target)},this)).on("click.jstree",".jstree-anchor",J.proxy(function(c){c.preventDefault(),c.currentTarget!==document.activeElement&&J(c.currentTarget).focus(),this.activate_node(c.currentTarget,c)},this)).on("keydown.jstree",".jstree-anchor",J.proxy(function(d){if("INPUT"===d.target.tagName){return !0}var g=null;switch(this._data.core.rtl&&(37===d.which?d.which=39:39===d.which&&(d.which=37)),d.which){case 32:d.ctrlKey&&(d.type="click",J(d.currentTarget).trigger(d));break;case 13:d.type="click",J(d.currentTarget).trigger(d);break;case 37:d.preventDefault(),this.is_open(d.currentTarget)?this.close_node(d.currentTarget):(g=this.get_parent(d.currentTarget),g&&"#"!==g.id&&this.get_node(g,!0).children(".jstree-anchor").focus());break;case 38:d.preventDefault(),g=this.get_prev_dom(d.currentTarget),g&&g.length&&g.children(".jstree-anchor").focus();break;case 39:d.preventDefault(),this.is_closed(d.currentTarget)?this.open_node(d.currentTarget,function(b){this.get_node(b,!0).children(".jstree-anchor").focus()}):this.is_open(d.currentTarget)&&(g=this.get_node(d.currentTarget,!0).children(".jstree-children")[0],g&&J(this._firstChild(g)).children(".jstree-anchor").focus());break;case 40:d.preventDefault(),g=this.get_next_dom(d.currentTarget),g&&g.length&&g.children(".jstree-anchor").focus();break;case 106:this.open_all();break;case 36:d.preventDefault(),g=this._firstChild(this.get_container_ul()[0]),g&&J(g).children(".jstree-anchor").filter(":visible").focus();break;case 35:d.preventDefault(),this.element.find(".jstree-anchor").filter(":visible").last().focus()}},this)).on("load_node.jstree",J.proxy(function(d,g){g.status&&("#"!==g.node.id||this._data.core.loaded||(this._data.core.loaded=!0,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.trigger("loaded")),this._data.core.ready||setTimeout(J.proxy(function(){if(!this.get_container_ul().find(".jstree-loading").length){if(this._data.core.ready=!0,this._data.core.selected.length){if(this.settings.core.expand_selected_onload){var h=[],j,i;for(j=0,i=this._data.core.selected.length;i>j;j++){h=h.concat(this._model.data[this._data.core.selected[j]].parents)}for(h=J.vakata.array_unique(h),j=0,i=h.length;i>j;j++){this.open_node(h[j],!1,0)}}this.trigger("changed",{action:"ready",selected:this._data.core.selected})}this.trigger("ready")}},this),0))},this)).on("keypress.jstree",J.proxy(function(k){if("INPUT"===k.target.tagName){return !0}f&&clearTimeout(f),f=setTimeout(function(){a=""},500);var j=String.fromCharCode(k.which).toLowerCase(),i=this.element.find(".jstree-anchor").filter(":visible"),c=i.index(document.activeElement)||0,b=!1;if(a+=j,a.length>1){if(i.slice(c).each(J.proxy(function(h,g){return 0===J(g).text().toLowerCase().indexOf(a)?(J(g).focus(),b=!0,!1):void 0},this)),b){return}if(i.slice(0,c).each(J.proxy(function(h,g){return 0===J(g).text().toLowerCase().indexOf(a)?(J(g).focus(),b=!0,!1):void 0},this)),b){return}}if(new RegExp("^"+j+"+$").test(a)){if(i.slice(c+1).each(J.proxy(function(d,g){return J(g).text().toLowerCase().charAt(0)===j?(J(g).focus(),b=!0,!1):void 0},this)),b){return}if(i.slice(0,c+1).each(J.proxy(function(d,g){return J(g).text().toLowerCase().charAt(0)===j?(J(g).focus(),b=!0,!1):void 0},this)),b){return}}},this)).on("init.jstree",J.proxy(function(){var b=this.settings.core.themes;this._data.core.themes.dots=b.dots,this._data.core.themes.stripes=b.stripes,this._data.core.themes.icons=b.icons,this.set_theme(b.name||"default",b.url),this.set_theme_variant(b.variant)},this)).on("loading.jstree",J.proxy(function(){this[this._data.core.themes.dots?"show_dots":"hide_dots"](),this[this._data.core.themes.icons?"show_icons":"hide_icons"](),this[this._data.core.themes.stripes?"show_stripes":"hide_stripes"]()},this)).on("blur.jstree",".jstree-anchor",J.proxy(function(c){this._data.core.focused=null,J(c.currentTarget).filter(".jstree-hovered").mouseleave(),this.element.attr("tabindex","0")},this)).on("focus.jstree",".jstree-anchor",J.proxy(function(d){var g=this.get_node(d.currentTarget);g&&g.id&&(this._data.core.focused=g.id),this.element.find(".jstree-hovered").not(d.currentTarget).mouseleave(),J(d.currentTarget).mouseenter(),this.element.attr("tabindex","-1")},this)).on("focus.jstree",J.proxy(function(){+new Date-e>500&&!this._data.core.focused&&(e=0,this.get_node(this.element.attr("aria-activedescendant"),!0).find("> .jstree-anchor").focus())},this)).on("mouseenter.jstree",".jstree-anchor",J.proxy(function(b){this.hover_node(b.currentTarget)},this)).on("mouseleave.jstree",".jstree-anchor",J.proxy(function(b){this.dehover_node(b.currentTarget)},this))},unbind:function(){this.element.off(".jstree"),J(document).off(".jstree-"+this._id)},trigger:function(d,c){c||(c={}),c.instance=this,this.element.triggerHandler(d.replace(".jstree","")+".jstree",c)},get_container:function(){return this.element},get_container_ul:function(){return this.element.children(".jstree-children").first()},get_string:function(a){var d=this.settings.core.strings;return J.isFunction(d)?d.call(this,a):d&&d[a]?d[a]:a},_firstChild:function(b){b=b?b.firstChild:null;while(null!==b&&1!==b.nodeType){b=b.nextSibling}return b},_nextSibling:function(b){b=b?b.nextSibling:null;while(null!==b&&1!==b.nodeType){b=b.nextSibling}return b},_previousSibling:function(b){b=b?b.previousSibling:null;while(null!==b&&1!==b.nodeType){b=b.previousSibling}return b},get_node:function(a,h){a&&a.id&&(a=a.id);var g;try{if(this._model.data[a]){a=this._model.data[a]}else{if("string"==typeof a&&this._model.data[a.replace(/^#/,"")]){a=this._model.data[a.replace(/^#/,"")]}else{if("string"==typeof a&&(g=J("#"+a.replace(J.jstree.idregex,"\\$&"),this.element)).length&&this._model.data[g.closest(".jstree-node").attr("id")]){a=this._model.data[g.closest(".jstree-node").attr("id")]}else{if((g=J(a,this.element)).length&&this._model.data[g.closest(".jstree-node").attr("id")]){a=this._model.data[g.closest(".jstree-node").attr("id")]}else{if(!(g=J(a,this.element)).length||!g.hasClass("jstree")){return !1}a=this._model.data["#"]}}}}return h&&(a="#"===a.id?this.element:J("#"+a.id.replace(J.jstree.idregex,"\\$&"),this.element)),a}catch(f){return !1}},get_path:function(h,g,l){if(h=h.parents?h:this.get_node(h),!h||"#"===h.id||!h.parents){return !1}var k,j,i=[];for(i.push(l?h.id:h.text),k=0,j=h.parents.length;j>k;k++){i.push(l?h.parents[k]:this.get_text(h.parents[k]))}return i=i.reverse().slice(1),g?i.join(g):i},get_next_dom:function(a,f){var e;if(a=this.get_node(a,!0),a[0]===this.element[0]){e=this._firstChild(this.get_container_ul()[0]);while(e&&0===e.offsetHeight){e=this._nextSibling(e)}return e?J(e):!1}if(!a||!a.length){return !1}if(f){e=a[0];do{e=this._nextSibling(e)}while(e&&0===e.offsetHeight);return e?J(e):!1}if(a.hasClass("jstree-open")){e=this._firstChild(a.children(".jstree-children")[0]);while(e&&0===e.offsetHeight){e=this._nextSibling(e)}if(null!==e){return J(e)}}e=a[0];do{e=this._nextSibling(e)}while(e&&0===e.offsetHeight);return null!==e?J(e):a.parentsUntil(".jstree",".jstree-node").next(".jstree-node:visible").first()},get_prev_dom:function(a,f){var e;if(a=this.get_node(a,!0),a[0]===this.element[0]){e=this.get_container_ul()[0].lastChild;while(e&&0===e.offsetHeight){e=this._previousSibling(e)}return e?J(e):!1}if(!a||!a.length){return !1}if(f){e=a[0];do{e=this._previousSibling(e)}while(e&&0===e.offsetHeight);return e?J(e):!1}e=a[0];do{e=this._previousSibling(e)}while(e&&0===e.offsetHeight);if(null!==e){a=J(e);while(a.hasClass("jstree-open")){a=a.children(".jstree-children").first().children(".jstree-node:visible:last")}return a}return e=a[0].parentNode.parentNode,e&&e.className&&-1!==e.className.indexOf("jstree-node")?J(e):!1},get_parent:function(b){return b=this.get_node(b),b&&"#"!==b.id?b.parent:!1},get_children_dom:function(b){return b=this.get_node(b,!0),b[0]===this.element[0]?this.get_container_ul().children(".jstree-node"):b&&b.length?b.children(".jstree-children").children(".jstree-node"):!1},is_parent:function(b){return b=this.get_node(b),b&&(b.state.loaded===!1||b.children.length>0)},is_loaded:function(b){return b=this.get_node(b),b&&b.state.loaded},is_loading:function(b){return b=this.get_node(b),b&&b.state&&b.state.loading},is_open:function(b){return b=this.get_node(b),b&&b.state.opened},is_closed:function(b){return b=this.get_node(b),b&&this.is_parent(b)&&!b.state.opened},is_leaf:function(b){return !this.is_parent(b)},load_node:function(a,n){var m,l,k,j,i;if(J.isArray(a)){return this._load_nodes(a.slice(),n),!0}if(a=this.get_node(a),!a){return n&&n.call(this,a,!1),!1}if(a.state.loaded){for(a.state.loaded=!1,m=0,l=a.children_d.length;l>m;m++){for(k=0,j=a.parents.length;j>k;k++){this._model.data[a.parents[k]].children_d=J.vakata.array_remove_item(this._model.data[a.parents[k]].children_d,a.children_d[m])}this._model.data[a.children_d[m]].state.selected&&(i=!0,this._data.core.selected=J.vakata.array_remove_item(this._data.core.selected,a.children_d[m])),delete this._model.data[a.children_d[m]]}a.children=[],a.children_d=[],i&&this.trigger("changed",{action:"load_node",node:a,selected:this._data.core.selected})}return a.state.loading=!0,this.get_node(a,!0).addClass("jstree-loading").attr("aria-busy",!0),this._load_node(a,J.proxy(function(b){a=this._model.data[a.id],a.state.loading=!1,a.state.loaded=b;var c=this.get_node(a,!0);a.state.loaded&&!a.children.length&&c&&c.length&&!c.hasClass("jstree-leaf")&&c.removeClass("jstree-closed jstree-open").addClass("jstree-leaf"),c.removeClass("jstree-loading").attr("aria-busy",!1),this.trigger("load_node",{node:a,status:b}),n&&n.call(this,a,b)},this)),!0},_load_nodes:function(j,i,p){var o=!0,n=function(){this._load_nodes(j,i,!0)},m=this._model.data,l,k;for(l=0,k=j.length;k>l;l++){!m[j[l]]||m[j[l]].state.loaded&&p||(this.is_loading(j[l])||this.load_node(j[l],n),o=!1)}o&&i&&!i.done&&(i.call(this,j),i.done=!0)},load_all:function(i,h){if(i||(i="#"),i=this.get_node(i),!i){return !1}var n=[],m=this._model.data,l=m[i.id].children_d,k,j;for(i.state&&!i.state.loaded&&n.push(i.id),k=0,j=l.length;j>k;k++){m[l[k]]&&m[l[k]].state&&!m[l[k]].state.loaded&&n.push(l[k])}n.length?this._load_nodes(n,function(){this.load_all(i,h)}):(h&&h.call(this,i),this.trigger("load_all",{node:i}))},_load_node:function(a,h){var g=this.settings.core.data,f;return g?J.isFunction(g)?g.call(this,a,J.proxy(function(b){b===!1&&h.call(this,!1),this["string"==typeof b?"_append_html_data":"_append_json_data"](a,"string"==typeof b?J(b):b,function(c){h.call(this,c)})},this)):"object"==typeof g?g.url?(g=J.extend(!0,{},g),J.isFunction(g.url)&&(g.url=g.url.call(this,a)),J.isFunction(g.data)&&(g.data=g.data.call(this,a)),J.ajax(g).done(J.proxy(function(j,i,c){var b=c.getResponseHeader("Content-Type");return -1!==b.indexOf("json")||"object"==typeof j?this._append_json_data(a,j,function(d){h.call(this,d)}):-1!==b.indexOf("html")||"string"==typeof j?this._append_html_data(a,J(j),function(d){h.call(this,d)}):(this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:c})},this.settings.core.error.call(this,this._data.core.last_error),h.call(this,!1))},this)).fail(J.proxy(function(b){h.call(this,!1),this._data.core.last_error={error:"ajax",plugin:"core",id:"core_04",reason:"Could not load node",data:JSON.stringify({id:a.id,xhr:b})},this.settings.core.error.call(this,this._data.core.last_error)},this))):(f=J.isArray(g)||J.isPlainObject(g)?JSON.parse(JSON.stringify(g)):g,"#"===a.id?this._append_json_data(a,f,function(b){h.call(this,b)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_05",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),h.call(this,!1))):"string"==typeof g?"#"===a.id?this._append_html_data(a,J(g),function(b){h.call(this,b)}):(this._data.core.last_error={error:"nodata",plugin:"core",id:"core_06",reason:"Could not load node",data:JSON.stringify({id:a.id})},this.settings.core.error.call(this,this._data.core.last_error),h.call(this,!1)):h.call(this,!1):"#"===a.id?this._append_html_data(a,this._data.core.original_container_html.clone(!0),function(b){h.call(this,b)}):h.call(this,!1)},_node_changed:function(b){b=this.get_node(b),b&&this._model.changed.push(b.id)},_append_html_data:function(R,Q,P){R=this.get_node(R),R.children=[],R.children_d=[];var O=Q.is("ul")?Q.children():Q,N=R.id,M=[],L=[],K=this._model.data,r=K[N],q=this._data.core.selected.length,p,o,a;for(O.each(J.proxy(function(d,e){p=this._parse_model_from_html(J(e),N,r.parents.concat()),p&&(M.push(p),L.push(p),K[p].children_d.length&&(L=L.concat(K[p].children_d)))},this)),r.children=M,r.children_d=L,o=0,a=r.parents.length;a>o;o++){K[r.parents[o]].children_d=K[r.parents[o]].children_d.concat(L)}this.trigger("model",{nodes:L,parent:N}),"#"!==N?(this._node_changed(N),this.redraw()):(this.get_container_ul().children(".jstree-initial-node").remove(),this.redraw(!0)),this._data.core.selected.length!==q&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),P.call(this,!0)},_append_json_data:function(r,q,p,o){r=this.get_node(r),r.children=[],r.children_d=[],q.d&&(q=q.d,"string"==typeof q&&(q=JSON.parse(q))),J.isArray(q)||(q=[q]);var n=null,m={df:this._model.default_state,dat:q,par:r.id,m:this._model.data,t_id:this._id,t_cnt:this._cnt,sel:this._data.core.selected},l=function(ac,ab){ac.data&&(ac=ac.data);var aa=ac.dat,Z=ac.par,Y=[],X=[],W=[],V=ac.df,U=ac.t_id,T=ac.t_cnt,S=ac.m,R=S[Z],Q=ac.sel,P,O,N,M,L=function(ai,ah,ag){ag=ag?ag.concat():[],ah&&ag.unshift(ah);var af=ai.id.toString(),ae,ad,h,g,b={id:af,text:ai.text||"",icon:ai.icon!==ab?ai.icon:!0,parent:ah,parents:ag,children:ai.children||[],children_d:ai.children_d||[],data:ai.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(ae in V){V.hasOwnProperty(ae)&&(b.state[ae]=V[ae])}if(ai&&ai.data&&ai.data.jstree&&ai.data.jstree.icon&&(b.icon=ai.data.jstree.icon),ai&&ai.data&&(b.data=ai.data,ai.data.jstree)){for(ae in ai.data.jstree){ai.data.jstree.hasOwnProperty(ae)&&(b.state[ae]=ai.data.jstree[ae])}}if(ai&&"object"==typeof ai.state){for(ae in ai.state){ai.state.hasOwnProperty(ae)&&(b.state[ae]=ai.state[ae])}}if(ai&&"object"==typeof ai.li_attr){for(ae in ai.li_attr){ai.li_attr.hasOwnProperty(ae)&&(b.li_attr[ae]=ai.li_attr[ae])}}if(b.li_attr.id||(b.li_attr.id=af),ai&&"object"==typeof ai.a_attr){for(ae in ai.a_attr){ai.a_attr.hasOwnProperty(ae)&&(b.a_attr[ae]=ai.a_attr[ae])}}for(ai&&ai.children&&ai.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),S[b.id]=b,ae=0,ad=b.children.length;ad>ae;ae++){h=L(S[b.children[ae]],b.id,ag),g=S[h],b.children_d.push(h),g.children_d.length&&(b.children_d=b.children_d.concat(g.children_d))}return delete ai.data,delete ai.children,S[b.id].original=ai,b.state.selected&&W.push(b.id),b.id},K=function(ag,af,ae){ae=ae?ae.concat():[],af&&ae.unshift(af);var ad=!1,j,i,h,g,b;do{ad="j"+U+"_"+ ++T}while(S[ad]);b={id:!1,text:"string"==typeof ag?ag:"",icon:"object"==typeof ag&&ag.icon!==ab?ag.icon:!0,parent:af,parents:ae,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(j in V){V.hasOwnProperty(j)&&(b.state[j]=V[j])}if(ag&&ag.id&&(b.id=ag.id.toString()),ag&&ag.text&&(b.text=ag.text),ag&&ag.data&&ag.data.jstree&&ag.data.jstree.icon&&(b.icon=ag.data.jstree.icon),ag&&ag.data&&(b.data=ag.data,ag.data.jstree)){for(j in ag.data.jstree){ag.data.jstree.hasOwnProperty(j)&&(b.state[j]=ag.data.jstree[j])}}if(ag&&"object"==typeof ag.state){for(j in ag.state){ag.state.hasOwnProperty(j)&&(b.state[j]=ag.state[j])}}if(ag&&"object"==typeof ag.li_attr){for(j in ag.li_attr){ag.li_attr.hasOwnProperty(j)&&(b.li_attr[j]=ag.li_attr[j])}}if(b.li_attr.id&&!b.id&&(b.id=b.li_attr.id.toString()),b.id||(b.id=ad),b.li_attr.id||(b.li_attr.id=b.id),ag&&"object"==typeof ag.a_attr){for(j in ag.a_attr){ag.a_attr.hasOwnProperty(j)&&(b.a_attr[j]=ag.a_attr[j])}}if(ag&&ag.children&&ag.children.length){for(j=0,i=ag.children.length;i>j;j++){h=K(ag.children[j],b.id,ae),g=S[h],b.children.push(h),g.children_d.length&&(b.children_d=b.children_d.concat(g.children_d))}b.children_d=b.children_d.concat(b.children)}return ag&&ag.children&&ag.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),delete ag.data,delete ag.children,b.original=ag,S[b.id]=b,b.state.selected&&W.push(b.id),b.id};if(aa.length&&aa[0].id!==ab&&aa[0].parent!==ab){for(O=0,N=aa.length;N>O;O++){aa[O].children||(aa[O].children=[]),S[aa[O].id.toString()]=aa[O]}for(O=0,N=aa.length;N>O;O++){S[aa[O].parent.toString()].children.push(aa[O].id.toString()),R.children_d.push(aa[O].id.toString())}for(O=0,N=R.children.length;N>O;O++){P=L(S[R.children[O]],Z,R.parents.concat()),X.push(P),S[P].children_d.length&&(X=X.concat(S[P].children_d))}for(O=0,N=R.parents.length;N>O;O++){S[R.parents[O]].children_d=S[R.parents[O]].children_d.concat(X)}M={cnt:T,mod:S,sel:Q,par:Z,dpc:X,add:W}}else{for(O=0,N=aa.length;N>O;O++){P=K(aa[O],Z,R.parents.concat()),P&&(Y.push(P),X.push(P),S[P].children_d.length&&(X=X.concat(S[P].children_d)))}for(R.children=Y,R.children_d=X,O=0,N=R.parents.length;N>O;O++){S[R.parents[O]].children_d=S[R.parents[O]].children_d.concat(X)}M={cnt:T,mod:S,sel:Q,par:Z,dpc:X,add:W}}return"undefined"!=typeof window&&"undefined"!=typeof window.document?M:void postMessage(M)},k=function(d,Q){if(this._cnt=d.cnt,this._model.data=d.mod,Q){var P,O,N=d.add,M=d.sel,L=this._data.core.selected.slice(),K=this._model.data;if(M.length!==L.length||J.vakata.array_unique(M.concat(L)).length!==M.length){for(P=0,O=M.length;O>P;P++){-1===J.inArray(M[P],N)&&-1===J.inArray(M[P],L)&&(K[M[P]].state.selected=!1)}for(P=0,O=L.length;O>P;P++){-1===J.inArray(L[P],M)&&(K[L[P]].state.selected=!0)}}}d.add.length&&(this._data.core.selected=this._data.core.selected.concat(d.add)),this.trigger("model",{nodes:d.dpc,parent:d.par}),"#"!==d.par?(this._node_changed(d.par),this.redraw()):this.redraw(!0),d.add.length&&this.trigger("changed",{action:"model",selected:this._data.core.selected}),p.call(this,!0)};if(this.settings.core.worker&&window.Blob&&window.URL&&window.Worker){try{null===this._wrk&&(this._wrk=window.URL.createObjectURL(new window.Blob(["self.onmessage = "+l.toString()],{type:"text/javascript"}))),!this._data.core.working||o?(this._data.core.working=!0,n=new window.Worker(this._wrk),n.onmessage=J.proxy(function(d){k.call(this,d.data,!0);try{n.terminate(),n=null}catch(c){}this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1},this),m.par?n.postMessage(m):this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1):this._data.core.worker_queue.push([r,q,p,!0])}catch(a){k.call(this,l(m),!1),this._data.core.worker_queue.length?this._append_json_data.apply(this,this._data.core.worker_queue.shift()):this._data.core.working=!1}}else{k.call(this,l(m),!1)}},_parse_model_from_html:function(L,K,r){r=r?[].concat(r):[],K&&r.unshift(K);var q,p,o=this._model.data,n={id:!1,text:!1,icon:!0,parent:K,parents:r,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1},m,l,a;for(m in this._model.default_state){this._model.default_state.hasOwnProperty(m)&&(n.state[m]=this._model.default_state[m])}if(l=J.vakata.attributes(L,!0),J.each(l,function(d,e){return e=J.trim(e),e.length?(n.li_attr[d]=e,void ("id"===d&&(n.id=e.toString()))):!0}),l=L.children("a").first(),l.length&&(l=J.vakata.attributes(l,!0),J.each(l,function(d,e){e=J.trim(e),e.length&&(n.a_attr[d]=e)})),l=L.children("a").first().length?L.children("a").first().clone():L.clone(),l.children("ins, i, ul").remove(),l=l.html(),l=J("<div />").html(l),n.text=this.settings.core.force_text?l.text():l.html(),l=L.data(),n.data=l?J.extend(!0,{},l):null,n.state.opened=L.hasClass("jstree-open"),n.state.selected=L.children("a").hasClass("jstree-clicked"),n.state.disabled=L.children("a").hasClass("jstree-disabled"),n.data&&n.data.jstree){for(m in n.data.jstree){n.data.jstree.hasOwnProperty(m)&&(n.state[m]=n.data.jstree[m])}}l=L.children("a").children(".jstree-themeicon"),l.length&&(n.icon=l.hasClass("jstree-themeicon-hidden")?!1:l.attr("rel")),n.state.icon&&(n.icon=n.state.icon),l=L.children("ul").children("li");do{a="j"+this._id+"_"+ ++this._cnt}while(o[a]);return n.id=n.li_attr.id?n.li_attr.id.toString():a,l.length?(l.each(J.proxy(function(d,e){q=this._parse_model_from_html(J(e),n.id,r),p=this._model.data[q],n.children.push(q),p.children_d.length&&(n.children_d=n.children_d.concat(p.children_d))},this)),n.children_d=n.children_d.concat(n.children)):L.hasClass("jstree-closed")&&(n.state.loaded=!1),n.li_attr["class"]&&(n.li_attr["class"]=n.li_attr["class"].replace("jstree-closed","").replace("jstree-open","")),n.a_attr["class"]&&(n.a_attr["class"]=n.a_attr["class"].replace("jstree-clicked","").replace("jstree-disabled","")),o[n.id]=n,n.state.selected&&this._data.core.selected.push(n.id),n.id},_parse_model_from_flat_json:function(N,M,L){L=L?L.concat():[],M&&L.unshift(M);var K=N.id.toString(),r=this._model.data,q=this._model.default_state,p,o,n,m,b={id:K,text:N.text||"",icon:N.icon!==I?N.icon:!0,parent:M,parents:L,children:N.children||[],children_d:N.children_d||[],data:N.data,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(p in q){q.hasOwnProperty(p)&&(b.state[p]=q[p])}if(N&&N.data&&N.data.jstree&&N.data.jstree.icon&&(b.icon=N.data.jstree.icon),N&&N.data&&(b.data=N.data,N.data.jstree)){for(p in N.data.jstree){N.data.jstree.hasOwnProperty(p)&&(b.state[p]=N.data.jstree[p])}}if(N&&"object"==typeof N.state){for(p in N.state){N.state.hasOwnProperty(p)&&(b.state[p]=N.state[p])}}if(N&&"object"==typeof N.li_attr){for(p in N.li_attr){N.li_attr.hasOwnProperty(p)&&(b.li_attr[p]=N.li_attr[p])}}if(b.li_attr.id||(b.li_attr.id=K),N&&"object"==typeof N.a_attr){for(p in N.a_attr){N.a_attr.hasOwnProperty(p)&&(b.a_attr[p]=N.a_attr[p])}}for(N&&N.children&&N.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),r[b.id]=b,p=0,o=b.children.length;o>p;p++){n=this._parse_model_from_flat_json(r[b.children[p]],b.id,L),m=r[n],b.children_d.push(n),m.children_d.length&&(b.children_d=b.children_d.concat(m.children_d))}return delete N.data,delete N.children,r[b.id].original=N,b.state.selected&&this._data.core.selected.push(b.id),b.id},_parse_model_from_json:function(N,M,L){L=L?L.concat():[],M&&L.unshift(M);var K=!1,r,q,p,o,n=this._model.data,m=this._model.default_state,b;do{K="j"+this._id+"_"+ ++this._cnt}while(n[K]);b={id:!1,text:"string"==typeof N?N:"",icon:"object"==typeof N&&N.icon!==I?N.icon:!0,parent:M,parents:L,children:[],children_d:[],data:null,state:{},li_attr:{id:!1},a_attr:{href:"#"},original:!1};for(r in m){m.hasOwnProperty(r)&&(b.state[r]=m[r])}if(N&&N.id&&(b.id=N.id.toString()),N&&N.text&&(b.text=N.text),N&&N.data&&N.data.jstree&&N.data.jstree.icon&&(b.icon=N.data.jstree.icon),N&&N.data&&(b.data=N.data,N.data.jstree)){for(r in N.data.jstree){N.data.jstree.hasOwnProperty(r)&&(b.state[r]=N.data.jstree[r])}}if(N&&"object"==typeof N.state){for(r in N.state){N.state.hasOwnProperty(r)&&(b.state[r]=N.state[r])}}if(N&&"object"==typeof N.li_attr){for(r in N.li_attr){N.li_attr.hasOwnProperty(r)&&(b.li_attr[r]=N.li_attr[r])}}if(b.li_attr.id&&!b.id&&(b.id=b.li_attr.id.toString()),b.id||(b.id=K),b.li_attr.id||(b.li_attr.id=b.id),N&&"object"==typeof N.a_attr){for(r in N.a_attr){N.a_attr.hasOwnProperty(r)&&(b.a_attr[r]=N.a_attr[r])}}if(N&&N.children&&N.children.length){for(r=0,q=N.children.length;q>r;r++){p=this._parse_model_from_json(N.children[r],b.id,L),o=n[p],b.children.push(p),o.children_d.length&&(b.children_d=b.children_d.concat(o.children_d))}b.children_d=b.children_d.concat(b.children)}return N&&N.children&&N.children===!0&&(b.state.loaded=!1,b.children=[],b.children_d=[]),delete N.data,delete N.children,b.original=N,n[b.id]=b,b.state.selected&&this._data.core.selected.push(b.id),b.id},_redraw:function(){var h=this._model.force_full_redraw?this._model.data["#"].children.concat([]):this._model.changed.concat([]),g=document.createElement("UL"),l,k,j,i=this._data.core.focused;for(k=0,j=h.length;j>k;k++){l=this.redraw_node(h[k],!0,this._model.force_full_redraw),l&&this._model.force_full_redraw&&g.appendChild(l)}this._model.force_full_redraw&&(g.className=this.get_container_ul()[0].className,g.setAttribute("role","group"),this.element.empty().append(g)),null!==i&&(l=this.get_node(i,!0),l&&l.length&&l.children(".jstree-anchor")[0]!==document.activeElement?l.children(".jstree-anchor").focus():this._data.core.focused=null),this._model.force_full_redraw=!1,this._model.changed=[],this.trigger("redraw",{nodes:h})},redraw:function(b){b&&(this._model.force_full_redraw=!0),this._redraw()},draw_children:function(h){var g=this.get_node(h),l=!1,k=!1,j=!1,i=document;if(!g){return !1}if("#"===g.id){return this.redraw(!0)}if(h=this.get_node(h,!0),!h||!h.length){return !1}if(h.children(".jstree-children").remove(),h=h[0],g.children.length&&g.state.loaded){for(j=i.createElement("UL"),j.setAttribute("role","group"),j.className="jstree-children",l=0,k=g.children.length;k>l;l++){j.appendChild(this.redraw_node(g.children[l],!0,!0))}h.appendChild(j)}},redraw_node:function(aa,Z,Y,X){var W=this.get_node(aa),V=!1,U=!1,T=!1,S=!1,R=!1,Q=!1,P="",O=document,N=this._model.data,M=!1,L=!1,K=null,j=0,a=0;if(!W){return !1}if("#"===W.id){return this.redraw(!0)}if(Z=Z||0===W.children.length,aa=document.querySelector?this.element[0].querySelector("#"+(-1!=="0123456789".indexOf(W.id[0])?"\\3"+W.id[0]+" "+W.id.substr(1).replace(J.jstree.idregex,"\\$&"):W.id.replace(J.jstree.idregex,"\\$&"))):document.getElementById(W.id)){aa=J(aa),Y||(V=aa.parent().parent()[0],V===this.element[0]&&(V=null),U=aa.index()),Z||!W.children.length||aa.children(".jstree-children").length||(Z=!0),Z||(T=aa.children(".jstree-children")[0]),M=aa.children(".jstree-anchor")[0]===document.activeElement,aa.remove()}else{if(Z=!0,!Y){if(V="#"!==W.parent?J("#"+W.parent.replace(J.jstree.idregex,"\\$&"),this.element)[0]:null,!(null===V||V&&N[W.parent].state.opened)){return !1}U=J.inArray(W.id,null===V?N["#"].children:N[W.parent].children)}}aa=A.cloneNode(!0),P="jstree-node ";for(S in W.li_attr){if(W.li_attr.hasOwnProperty(S)){if("id"===S){continue}"class"!==S?aa.setAttribute(S,W.li_attr[S]):P+=W.li_attr[S]}}W.a_attr.id||(W.a_attr.id=W.id+"_anchor"),aa.setAttribute("aria-selected",!!W.state.selected),aa.setAttribute("aria-level",W.parents.length),aa.setAttribute("aria-labelledby",W.a_attr.id),W.state.disabled&&aa.setAttribute("aria-disabled",!0),W.state.loaded&&!W.children.length?P+=" jstree-leaf":(P+=W.state.opened&&W.state.loaded?" jstree-open":" jstree-closed",aa.setAttribute("aria-expanded",W.state.opened&&W.state.loaded)),null!==W.parent&&N[W.parent].children[N[W.parent].children.length-1]===W.id&&(P+=" jstree-last"),aa.id=W.id,aa.className=P,P=(W.state.selected?" jstree-clicked":"")+(W.state.disabled?" jstree-disabled":"");for(R in W.a_attr){if(W.a_attr.hasOwnProperty(R)){if("href"===R&&"#"===W.a_attr[R]){continue}"class"!==R?aa.childNodes[1].setAttribute(R,W.a_attr[R]):P+=" "+W.a_attr[R]}}if(P.length&&(aa.childNodes[1].className="jstree-anchor "+P),(W.icon&&W.icon!==!0||W.icon===!1)&&(W.icon===!1?aa.childNodes[1].childNodes[0].className+=" jstree-themeicon-hidden":-1===W.icon.indexOf("/")&&-1===W.icon.indexOf(".")?aa.childNodes[1].childNodes[0].className+=" "+W.icon+" jstree-themeicon-custom":(aa.childNodes[1].childNodes[0].style.backgroundImage="url("+W.icon+")",aa.childNodes[1].childNodes[0].style.backgroundPosition="center center",aa.childNodes[1].childNodes[0].style.backgroundSize="auto",aa.childNodes[1].childNodes[0].className+=" jstree-themeicon-custom")),this.settings.core.force_text?aa.childNodes[1].appendChild(O.createTextNode(W.text)):aa.childNodes[1].innerHTML+=W.text,Z&&W.children.length&&(W.state.opened||X)&&W.state.loaded){for(Q=O.createElement("UL"),Q.setAttribute("role","group"),Q.className="jstree-children",S=0,R=W.children.length;R>S;S++){Q.appendChild(this.redraw_node(W.children[S],Z,!0))}aa.appendChild(Q)}if(T&&aa.appendChild(T),!Y){for(V||(V=this.element[0]),S=0,R=V.childNodes.length;R>S;S++){if(V.childNodes[S]&&V.childNodes[S].className&&-1!==V.childNodes[S].className.indexOf("jstree-children")){K=V.childNodes[S];break}}K||(K=O.createElement("UL"),K.setAttribute("role","group"),K.className="jstree-children",V.appendChild(K)),V=K,U<V.childNodes.length?V.insertBefore(aa,V.childNodes[U]):V.appendChild(aa),M&&(j=this.element[0].scrollTop,a=this.element[0].scrollLeft,aa.childNodes[1].focus(),this.element[0].scrollTop=j,this.element[0].scrollLeft=a)}return W.state.opened&&!W.state.loaded&&(W.state.opened=!1,setTimeout(J.proxy(function(){this.open_node(W.id,!1,0)},this),0)),aa},open_node:function(n,m,l){var k,j,b,a;if(J.isArray(n)){for(n=n.slice(),k=0,j=n.length;j>k;k++){this.open_node(n[k],m,l)}return !0}if(n=this.get_node(n),!n||"#"===n.id){return !1}if(l=l===I?this.settings.core.animation:l,!this.is_closed(n)){return m&&m.call(this,n,!1),!1}if(this.is_loaded(n)){b=this.get_node(n,!0),a=this,b.length&&(l&&b.children(".jstree-children").length&&b.children(".jstree-children").stop(!0,!0),n.children.length&&!this._firstChild(b.children(".jstree-children")[0])&&this.draw_children(n),l?(this.trigger("before_open",{node:n}),b.children(".jstree-children").css("display","none").end().removeClass("jstree-closed").addClass("jstree-open").attr("aria-expanded",!0).children(".jstree-children").stop(!0,!0).slideDown(l,function(){this.style.display="",a.trigger("after_open",{node:n})})):(this.trigger("before_open",{node:n}),b[0].className=b[0].className.replace("jstree-closed","jstree-open"),b[0].setAttribute("aria-expanded",!0))),n.state.opened=!0,m&&m.call(this,n,!0),b.length||this.trigger("before_open",{node:n}),this.trigger("open_node",{node:n}),l&&b.length||this.trigger("after_open",{node:n})}else{if(this.is_loading(n)){return setTimeout(J.proxy(function(){this.open_node(n,m,l)},this),500)}this.load_node(n,function(d,c){return c?this.open_node(d,m,l):m?m.call(this,d,!1):!1})}},_open_to:function(a){if(a=this.get_node(a),!a||"#"===a.id){return !1}var h,g,f=a.parents;for(h=0,g=f.length;g>h;h+=1){"#"!==h&&this.open_node(f[h],!1,0)}return J("#"+a.id.replace(J.jstree.idregex,"\\$&"),this.element)},close_node:function(l,k){var j,i,b,a;if(J.isArray(l)){for(l=l.slice(),j=0,i=l.length;i>j;j++){this.close_node(l[j],k)}return !0}return l=this.get_node(l),l&&"#"!==l.id?this.is_closed(l)?!1:(k=k===I?this.settings.core.animation:k,b=this,a=this.get_node(l,!0),a.length&&(k?a.children(".jstree-children").attr("style","display:block !important").end().removeClass("jstree-open").addClass("jstree-closed").attr("aria-expanded",!1).children(".jstree-children").stop(!0,!0).slideUp(k,function(){this.style.display="",a.children(".jstree-children").remove(),b.trigger("after_close",{node:l})}):(a[0].className=a[0].className.replace("jstree-open","jstree-closed"),a.attr("aria-expanded",!1).children(".jstree-children").remove())),l.state.opened=!1,this.trigger("close_node",{node:l}),void (k&&a.length||this.trigger("after_close",{node:l}))):!1},toggle_node:function(a){var f,e;if(J.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.toggle_node(a[f])}return !0}return this.is_closed(a)?this.open_node(a):this.is_open(a)?this.close_node(a):void 0},open_all:function(i,h,n){if(i||(i="#"),i=this.get_node(i),!i){return !1}var m="#"===i.id?this.get_container_ul():this.get_node(i,!0),l,k,j;if(!m.length){for(l=0,k=i.children_d.length;k>l;l++){this.is_closed(this._model.data[i.children_d[l]])&&(this._model.data[i.children_d[l]].state.opened=!0)}return this.trigger("open_all",{node:i})}n=n||m,j=this,m=this.is_closed(i)?m.find(".jstree-closed").addBack():m.find(".jstree-closed"),m.each(function(){j.open_node(this,function(b,c){c&&this.is_parent(b)&&this.open_all(b,h,n)},h||0)}),0===n.find(".jstree-closed").length&&this.trigger("open_all",{node:this.get_node(n)})},close_all:function(a,l){if(a||(a="#"),a=this.get_node(a),!a){return !1}var k="#"===a.id?this.get_container_ul():this.get_node(a,!0),j=this,i,h;if(!k.length){for(i=0,h=a.children_d.length;h>i;i++){this._model.data[a.children_d[i]].state.opened=!1}return this.trigger("close_all",{node:a})}k=this.is_open(a)?k.find(".jstree-open").addBack():k.find(".jstree-open"),J(k.get().reverse()).each(function(){j.close_node(this,l||0)}),this.trigger("close_all",{node:a})},is_disabled:function(b){return b=this.get_node(b),b&&b.state&&b.state.disabled},enable_node:function(a){var f,e;if(J.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.enable_node(a[f])}return !0}return a=this.get_node(a),a&&"#"!==a.id?(a.state.disabled=!1,this.get_node(a,!0).children(".jstree-anchor").removeClass("jstree-disabled").attr("aria-disabled",!1),void this.trigger("enable_node",{node:a})):!1},disable_node:function(a){var f,e;if(J.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.disable_node(a[f])}return !0}return a=this.get_node(a),a&&"#"!==a.id?(a.state.disabled=!0,this.get_node(a,!0).children(".jstree-anchor").addClass("jstree-disabled").attr("aria-disabled",!0),void this.trigger("disable_node",{node:a})):!1},activate_node:function(b,p){if(this.is_disabled(b)){return !1}if(this._data.core.last_clicked=this._data.core.last_clicked&&this._data.core.last_clicked.id!==I?this.get_node(this._data.core.last_clicked.id):null,this._data.core.last_clicked&&!this._data.core.last_clicked.state.selected&&(this._data.core.last_clicked=null),!this._data.core.last_clicked&&this._data.core.selected.length&&(this._data.core.last_clicked=this.get_node(this._data.core.selected[this._data.core.selected.length-1])),this.settings.core.multiple&&(p.metaKey||p.ctrlKey||p.shiftKey)&&(!p.shiftKey||this._data.core.last_clicked&&this.get_parent(b)&&this.get_parent(b)===this._data.core.last_clicked.parent)){if(p.shiftKey){var o=this.get_node(b).id,n=this._data.core.last_clicked.id,m=this.get_node(this._data.core.last_clicked.parent).children,l=!1,k,j;for(k=0,j=m.length;j>k;k+=1){m[k]===o&&(l=!l),m[k]===n&&(l=!l),l||m[k]===o||m[k]===n?this.select_node(m[k],!0,!1,p):this.deselect_node(m[k],!0,p)}this.trigger("changed",{action:"select_node",node:this.get_node(b),selected:this._data.core.selected,event:p})}else{this.is_selected(b)?this.deselect_node(b,!1,p):this.select_node(b,!1,!1,p)}}else{!this.settings.core.multiple&&(p.metaKey||p.ctrlKey||p.shiftKey)&&this.is_selected(b)?this.deselect_node(b,!1,p):(this.deselect_all(!0),this.select_node(b,!1,!1,p),this._data.core.last_clicked=this.get_node(b))}this.trigger("activate_node",{node:this.get_node(b)})},hover_node:function(e){if(e=this.get_node(e,!0),!e||!e.length||e.children(".jstree-hovered").length){return !1}var d=this.element.find(".jstree-hovered"),f=this.element;d&&d.length&&this.dehover_node(d),e.children(".jstree-anchor").addClass("jstree-hovered"),this.trigger("hover_node",{node:this.get_node(e)}),setTimeout(function(){f.attr("aria-activedescendant",e[0].id)},0)},dehover_node:function(b){return b=this.get_node(b,!0),b&&b.length&&b.children(".jstree-hovered").length?(b.children(".jstree-anchor").removeClass("jstree-hovered"),void this.trigger("dehover_node",{node:this.get_node(b)})):!1},select_node:function(a,p,o,n){var m,l,k,j;if(J.isArray(a)){for(a=a.slice(),l=0,k=a.length;k>l;l++){this.select_node(a[l],p,o,n)}return !0}return a=this.get_node(a),a&&"#"!==a.id?(m=this.get_node(a,!0),void (a.state.selected||(a.state.selected=!0,this._data.core.selected.push(a.id),o||(m=this._open_to(a)),m&&m.length&&m.attr("aria-selected",!0).children(".jstree-anchor").addClass("jstree-clicked"),this.trigger("select_node",{node:a,selected:this._data.core.selected,event:n}),p||this.trigger("changed",{action:"select_node",node:a,selected:this._data.core.selected,event:n})))):!1},deselect_node:function(a,l,k){var j,i,h;if(J.isArray(a)){for(a=a.slice(),j=0,i=a.length;i>j;j++){this.deselect_node(a[j],l,k)}return !0}return a=this.get_node(a),a&&"#"!==a.id?(h=this.get_node(a,!0),void (a.state.selected&&(a.state.selected=!1,this._data.core.selected=J.vakata.array_remove_item(this._data.core.selected,a.id),h.length&&h.attr("aria-selected",!1).children(".jstree-anchor").removeClass("jstree-clicked"),this.trigger("deselect_node",{node:a,selected:this._data.core.selected,event:k}),l||this.trigger("changed",{action:"deselect_node",node:a,selected:this._data.core.selected,event:k})))):!1},select_all:function(f){var e=this._data.core.selected.concat([]),h,g;for(this._data.core.selected=this._model.data["#"].children_d.concat(),h=0,g=this._data.core.selected.length;g>h;h++){this._model.data[this._data.core.selected[h]]&&(this._model.data[this._data.core.selected[h]].state.selected=!0)}this.redraw(!0),this.trigger("select_all",{selected:this._data.core.selected}),f||this.trigger("changed",{action:"select_all",selected:this._data.core.selected,old_selection:e})},deselect_all:function(f){var e=this._data.core.selected.concat([]),h,g;for(h=0,g=this._data.core.selected.length;g>h;h++){this._model.data[this._data.core.selected[h]]&&(this._model.data[this._data.core.selected[h]].state.selected=!1)}this._data.core.selected=[],this.element.find(".jstree-clicked").removeClass("jstree-clicked").parent().attr("aria-selected",!1),this.trigger("deselect_all",{selected:this._data.core.selected,node:e}),f||this.trigger("changed",{action:"deselect_all",selected:this._data.core.selected,old_selection:e})},is_selected:function(b){return b=this.get_node(b),b&&"#"!==b.id?b.state.selected:!1},get_selected:function(a){return a?J.map(this._data.core.selected,J.proxy(function(b){return this.get_node(b)},this)):this._data.core.selected.slice()},get_top_selected:function(a){var n=this.get_selected(!0),m={},l,k,j,i;for(l=0,k=n.length;k>l;l++){m[n[l].id]=n[l]}for(l=0,k=n.length;k>l;l++){for(j=0,i=n[l].children_d.length;i>j;j++){m[n[l].children_d[j]]&&delete m[n[l].children_d[j]]}}n=[];for(l in m){m.hasOwnProperty(l)&&n.push(l)}return a?J.map(n,J.proxy(function(b){return this.get_node(b)},this)):n},get_bottom_selected:function(a){var j=this.get_selected(!0),i=[],h,g;for(h=0,g=j.length;g>h;h++){j[h].children.length||i.push(j[h].id)}return a?J.map(i,J.proxy(function(b){return this.get_node(b)},this)):i},get_state:function(){var d={core:{open:[],scroll:{left:this.element.scrollLeft(),top:this.element.scrollTop()},selected:[]}},c;for(c in this._model.data){this._model.data.hasOwnProperty(c)&&"#"!==c&&(this._model.data[c].state.opened&&d.core.open.push(c),this._model.data[c].state.selected&&d.core.selected.push(c))}return d},set_state:function(l,k){if(l){if(l.core){var j,i,b,a;if(l.core.open){return J.isArray(l.core.open)?(j=!0,i=!1,b=this,J.each(l.core.open.concat([]),function(c,d){i=b.get_node(d),i&&(b.is_loaded(d)?(b.is_closed(d)&&b.open_node(d,!1,0),l&&l.core&&l.core.open&&J.vakata.array_remove_item(l.core.open,d)):(b.is_loading(d)||b.open_node(d,J.proxy(function(f,g){!g&&l&&l.core&&l.core.open&&J.vakata.array_remove_item(l.core.open,f.id),this.set_state(l,k)},b),0),j=!1))}),j&&(delete l.core.open,this.set_state(l,k)),!1):(delete l.core.open,this.set_state(l,k),!1)}if(l.core.scroll){return l.core.scroll&&l.core.scroll.left!==I&&this.element.scrollLeft(l.core.scroll.left),l.core.scroll&&l.core.scroll.top!==I&&this.element.scrollTop(l.core.scroll.top),delete l.core.scroll,this.set_state(l,k),!1}if(l.core.selected){return a=this,this.deselect_all(),J.each(l.core.selected,function(d,c){a.select_node(c)}),delete l.core.selected,this.set_state(l,k),!1}if(J.isEmptyObject(l.core)){return delete l.core,this.set_state(l,k),!1}}return J.isEmptyObject(l)?(l=null,k&&k.call(this),this.trigger("set_state"),!1):!0}return !1},refresh:function(a,f){this._data.core.state=f===!0?{}:this.get_state(),f&&J.isFunction(f)&&(this._data.core.state=f.call(this,this._data.core.state)),this._cnt=0,this._model.data={"#":{id:"#",parent:null,parents:[],children:[],children_d:[],state:{loaded:!1}}};var e=this.get_container_ul()[0].className;a||(this.element.html("<ul class='"+e+"' role='group'><li class='jstree-initial-node jstree-loading jstree-leaf jstree-last' role='treeitem' id='j"+this._id+"_loading'><i class='jstree-icon jstree-ocl'></i><a class='jstree-anchor' href='#'><i class='jstree-icon jstree-themeicon-hidden'></i>"+this.get_string("Loading ...")+"</a></li></ul>"),this.element.attr("aria-activedescendant","j"+this._id+"_loading")),this.load_node("#",function(d,g){g&&(this.get_container_ul()[0].className=e,this._firstChild(this.get_container_ul()[0])&&this.element.attr("aria-activedescendant",this._firstChild(this.get_container_ul()[0]).id),this.set_state(J.extend(!0,{},this._data.core.state),function(){this.trigger("refresh")})),this._data.core.state=null})},refresh_node:function(a){if(a=this.get_node(a),!a||"#"===a.id){return !1}var h=[],g=[],f=this._data.core.selected.concat([]);g.push(a.id),a.state.opened===!0&&h.push(a.id),this.get_node(a,!0).find(".jstree-open").each(function(){h.push(this.id)}),this._load_nodes(g,J.proxy(function(b){this.open_node(h,!1,0),this.select_node(this._data.core.selected),this.trigger("refresh_node",{node:a,nodes:b})},this))},set_id:function(a,j){if(a=this.get_node(a),!a||"#"===a.id){return !1}var i,h,g=this._model.data;for(j=j.toString(),g[a.parent].children[J.inArray(a.id,g[a.parent].children)]=j,i=0,h=a.parents.length;h>i;i++){g[a.parents[i]].children_d[J.inArray(a.id,g[a.parents[i]].children_d)]=j}for(i=0,h=a.children.length;h>i;i++){g[a.children[i]].parent=j}for(i=0,h=a.children_d.length;h>i;i++){g[a.children_d[i]].parents[J.inArray(a.id,g[a.children_d[i]].parents)]=j}return i=J.inArray(a.id,this._data.core.selected),-1!==i&&(this._data.core.selected[i]=j),i=this.get_node(a.id,!0),i&&i.attr("id",j),delete g[a.id],a.id=j,g[j]=a,!0},get_text:function(b){return b=this.get_node(b),b&&"#"!==b.id?b.text:!1},set_text:function(a,h){var g,f;if(J.isArray(a)){for(a=a.slice(),g=0,f=a.length;f>g;g++){this.set_text(a[g],h)}return !0}return a=this.get_node(a),a&&"#"!==a.id?(a.text=h,this.get_node(a,!0).length&&this.redraw_node(a.id),this.trigger("set_text",{obj:a,text:h}),!0):!1},get_json:function(a,l,k){if(a=this.get_node(a||"#"),!a){return !1}l&&l.flat&&!k&&(k=[]);var j={id:a.id,text:a.text,icon:this.get_icon(a),li_attr:J.extend(!0,{},a.li_attr),a_attr:J.extend(!0,{},a.a_attr),state:{},data:l&&l.no_data?!1:J.extend(!0,{},a.data)},i,h;if(l&&l.flat?j.parent=a.parent:j.children=[],!l||!l.no_state){for(i in a.state){a.state.hasOwnProperty(i)&&(j.state[i]=a.state[i])}}if(l&&l.no_id&&(delete j.id,j.li_attr&&j.li_attr.id&&delete j.li_attr.id,j.a_attr&&j.a_attr.id&&delete j.a_attr.id),l&&l.flat&&"#"!==a.id&&k.push(j),!l||!l.no_children){for(i=0,h=a.children.length;h>i;i++){l&&l.flat?this.get_json(a.children[i],l,k):j.children.push(this.get_json(a.children[i],l))}}return l&&l.flat?k:"#"===a.id?j.children:j},create_node:function(r,q,p,o,n){if(null===r&&(r="#"),r=this.get_node(r),!r){return !1}if(p=p===I?"last":p,!p.toString().match(/^(before|after)$/)&&!n&&!this.is_loaded(r)){return this.load_node(r,function(){this.create_node(r,q,p,o,!0)})}q||(q={text:this.get_string("New node")}),"string"==typeof q&&(q={text:q}),q.text===I&&(q.text=this.get_string("New node"));var m,l,b,a;switch("#"===r.id&&("before"===p&&(p="first"),"after"===p&&(p="last")),p){case"before":m=this.get_node(r.parent),p=J.inArray(r.id,m.children),r=m;break;case"after":m=this.get_node(r.parent),p=J.inArray(r.id,m.children)+1,r=m;break;case"inside":case"first":p=0;break;case"last":p=r.children.length;break;default:p||(p=0)}if(p>r.children.length&&(p=r.children.length),q.id||(q.id=!0),!this.check("create_node",q,r,p)){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(q.id===!0&&delete q.id,q=this._parse_model_from_json(q,r.id,r.parents.concat()),!q){return !1}for(m=this.get_node(q),l=[],l.push(q),l=l.concat(m.children_d),this.trigger("model",{nodes:l,parent:r.id}),r.children_d=r.children_d.concat(l),b=0,a=r.parents.length;a>b;b++){this._model.data[r.parents[b]].children_d=this._model.data[r.parents[b]].children_d.concat(l)}for(q=m,m=[],b=0,a=r.children.length;a>b;b++){m[b>=p?b+1:b]=r.children[b]}return m[p]=q.id,r.children=m,this.redraw_node(r,!0),o&&o.call(this,this.get_node(q)),this.trigger("create_node",{node:this.get_node(q),parent:r.id,position:p}),q.id},rename_node:function(a,j){var i,h,g;if(J.isArray(a)){for(a=a.slice(),i=0,h=a.length;h>i;i++){this.rename_node(a[i],j)}return !0}return a=this.get_node(a),a&&"#"!==a.id?(g=a.text,this.check("rename_node",a,this.get_parent(a),j)?(this.set_text(a,j),this.trigger("rename_node",{node:a,text:j,old:g}),!0):(this.settings.core.error.call(this,this._data.core.last_error),!1)):!1},delete_node:function(N){var M,L,K,r,q,p,o,n,m,a;if(J.isArray(N)){for(N=N.slice(),M=0,L=N.length;L>M;M++){this.delete_node(N[M])}return !0}if(N=this.get_node(N),!N||"#"===N.id){return !1}if(K=this.get_node(N.parent),r=J.inArray(N.id,K.children),a=!1,!this.check("delete_node",N,K,r)){return this.settings.core.error.call(this,this._data.core.last_error),!1}for(-1!==r&&(K.children=J.vakata.array_remove(K.children,r)),q=N.children_d.concat([]),q.push(N.id),n=0,m=q.length;m>n;n++){for(p=0,o=N.parents.length;o>p;p++){r=J.inArray(q[n],this._model.data[N.parents[p]].children_d),-1!==r&&(this._model.data[N.parents[p]].children_d=J.vakata.array_remove(this._model.data[N.parents[p]].children_d,r))}this._model.data[q[n]].state.selected&&(a=!0,r=J.inArray(q[n],this._data.core.selected),-1!==r&&(this._data.core.selected=J.vakata.array_remove(this._data.core.selected,r)))}for(this.trigger("delete_node",{node:N,parent:K.id}),a&&this.trigger("changed",{action:"delete_node",node:N,selected:this._data.core.selected,parent:K.id}),n=0,m=q.length;m>n;n++){delete this._model.data[q[n]]}return this.redraw_node(K,!0),!0},check:function(a,n,m,l,k){n=n&&n.id?n:this.get_node(n),m=m&&m.id?m:this.get_node(m);var j=a.match(/^move_node|copy_node|create_node$/i)?m:n,i=this.settings.core.check_callback;return"move_node"!==a&&"copy_node"!==a||k&&k.is_multi||n.id!==m.id&&J.inArray(n.id,m.children)!==l&&-1===J.inArray(m.id,n.children_d)?(j&&j.data&&(j=j.data),j&&j.functions&&(j.functions[a]===!1||j.functions[a]===!0)?(j.functions[a]===!1&&(this._data.core.last_error={error:"check",plugin:"core",id:"core_02",reason:"Node data prevents function: "+a,data:JSON.stringify({chk:a,pos:l,obj:n&&n.id?n.id:!1,par:m&&m.id?m.id:!1})}),j.functions[a]):i===!1||J.isFunction(i)&&i.call(this,a,n,m,l,k)===!1||i&&i[a]===!1?(this._data.core.last_error={error:"check",plugin:"core",id:"core_03",reason:"User config for core.check_callback prevents function: "+a,data:JSON.stringify({chk:a,pos:l,obj:n&&n.id?n.id:!1,par:m&&m.id?m.id:!1})},!1):!0):(this._data.core.last_error={error:"check",plugin:"core",id:"core_01",reason:"Moving parent inside child",data:JSON.stringify({chk:a,pos:l,obj:n&&n.id?n.id:!1,par:m&&m.id?m.id:!1})},!1)},last_error:function(){return this._data.core.last_error},move_node:function(ab,aa,Z,Y,X,W){var V,U,T,S,R,Q,P,O,N,M,L,K,b,a;if(aa=this.get_node(aa),Z=Z===I?0:Z,!aa){return !1}if(!Z.toString().match(/^(before|after)$/)&&!X&&!this.is_loaded(aa)){return this.load_node(aa,function(){this.move_node(ab,aa,Z,Y,!0)})}if(J.isArray(ab)){for(ab=ab.slice(),V=0,U=ab.length;U>V;V++){this.move_node(ab[V],aa,Z,Y,X,!0)&&(aa=ab[V],Z="after")}return this.redraw(),!0}if(ab=ab&&ab.id?ab:this.get_node(ab),!ab||"#"===ab.id){return !1}if(T=(ab.parent||"#").toString(),R=Z.toString().match(/^(before|after)$/)&&"#"!==aa.id?this.get_node(aa.parent):aa,Q=ab.instance?ab.instance:this._model.data[ab.id]?this:J.jstree.reference(ab.id),P=!Q||!Q._id||this._id!==Q._id,S=Q&&Q._id&&T&&Q._model.data[T]&&Q._model.data[T].children?J.inArray(ab.id,Q._model.data[T].children):-1,P){return this.copy_node(ab,aa,Z,Y,X)?(Q&&Q.delete_node(ab),!0):!1}switch("#"===aa.id&&("before"===Z&&(Z="first"),"after"===Z&&(Z="last")),Z){case"before":Z=J.inArray(aa.id,R.children);break;case"after":Z=J.inArray(aa.id,R.children)+1;break;case"inside":case"first":Z=0;break;case"last":Z=R.children.length;break;default:Z||(Z=0)}if(Z>R.children.length&&(Z=R.children.length),!this.check("move_node",ab,R,Z,{core:!0,is_multi:Q&&Q._id&&Q._id!==this._id,is_foreign:!Q||!Q._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(ab.parent===R.id){for(O=R.children.concat(),N=J.inArray(ab.id,O),-1!==N&&(O=J.vakata.array_remove(O,N),Z>N&&Z--),N=[],M=0,L=O.length;L>M;M++){N[M>=Z?M+1:M]=O[M]}N[Z]=ab.id,R.children=N,this._node_changed(R.id),this.redraw("#"===R.id)}else{for(N=ab.children_d.concat(),N.push(ab.id),M=0,L=ab.parents.length;L>M;M++){for(O=[],a=Q._model.data[ab.parents[M]].children_d,K=0,b=a.length;b>K;K++){-1===J.inArray(a[K],N)&&O.push(a[K])}Q._model.data[ab.parents[M]].children_d=O}for(Q._model.data[T].children=J.vakata.array_remove_item(Q._model.data[T].children,ab.id),M=0,L=R.parents.length;L>M;M++){this._model.data[R.parents[M]].children_d=this._model.data[R.parents[M]].children_d.concat(N)}for(O=[],M=0,L=R.children.length;L>M;M++){O[M>=Z?M+1:M]=R.children[M]}for(O[Z]=ab.id,R.children=O,R.children_d.push(ab.id),R.children_d=R.children_d.concat(ab.children_d),ab.parent=R.id,N=R.parents.concat(),N.unshift(R.id),a=ab.parents.length,ab.parents=N,N=N.concat(),M=0,L=ab.children_d.length;L>M;M++){this._model.data[ab.children_d[M]].parents=this._model.data[ab.children_d[M]].parents.slice(0,-1*a),Array.prototype.push.apply(this._model.data[ab.children_d[M]].parents,N)}("#"===T||"#"===R.id)&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||(this._node_changed(T),this._node_changed(R.id)),W||this.redraw()}return Y&&Y.call(this,ab,R,Z),this.trigger("move_node",{node:ab,parent:R.id,position:Z,old_parent:T,old_position:S,is_multi:Q&&Q._id&&Q._id!==this._id,is_foreign:!Q||!Q._id,old_instance:Q,new_instance:this}),!0},copy_node:function(X,W,V,U,T,S){var R,Q,P,O,N,M,L,K,b,a,Y;if(W=this.get_node(W),V=V===I?0:V,!W){return !1}if(!V.toString().match(/^(before|after)$/)&&!T&&!this.is_loaded(W)){return this.load_node(W,function(){this.copy_node(X,W,V,U,!0)})}if(J.isArray(X)){for(X=X.slice(),R=0,Q=X.length;Q>R;R++){O=this.copy_node(X[R],W,V,U,T,!0),O&&(W=O,V="after")}return this.redraw(),!0}if(X=X&&X.id?X:this.get_node(X),!X||"#"===X.id){return !1}switch(K=(X.parent||"#").toString(),b=V.toString().match(/^(before|after)$/)&&"#"!==W.id?this.get_node(W.parent):W,a=X.instance?X.instance:this._model.data[X.id]?this:J.jstree.reference(X.id),Y=!a||!a._id||this._id!==a._id,"#"===W.id&&("before"===V&&(V="first"),"after"===V&&(V="last")),V){case"before":V=J.inArray(W.id,b.children);break;case"after":V=J.inArray(W.id,b.children)+1;break;case"inside":case"first":V=0;break;case"last":V=b.children.length;break;default:V||(V=0)}if(V>b.children.length&&(V=b.children.length),!this.check("copy_node",X,b,V,{core:!0,is_multi:a&&a._id&&a._id!==this._id,is_foreign:!a||!a._id})){return this.settings.core.error.call(this,this._data.core.last_error),!1}if(L=a?a.get_json(X,{no_id:!0,no_data:!0,no_state:!0}):X,!L){return !1}if(L.id===!0&&delete L.id,L=this._parse_model_from_json(L,b.id,b.parents.concat()),!L){return !1}for(O=this.get_node(L),X&&X.state&&X.state.loaded===!1&&(O.state.loaded=!1),P=[],P.push(L),P=P.concat(O.children_d),this.trigger("model",{nodes:P,parent:b.id}),N=0,M=b.parents.length;M>N;N++){this._model.data[b.parents[N]].children_d=this._model.data[b.parents[N]].children_d.concat(P)}for(P=[],N=0,M=b.children.length;M>N;N++){P[N>=V?N+1:N]=b.children[N]}return P[V]=O.id,b.children=P,b.children_d.push(O.id),b.children_d=b.children_d.concat(O.children_d),"#"===b.id&&(this._model.force_full_redraw=!0),this._model.force_full_redraw||this._node_changed(b.id),S||this.redraw("#"===b.id),U&&U.call(this,O,b,V),this.trigger("copy_node",{node:O,original:X,parent:b.id,position:V,old_parent:K,old_position:a&&a._id&&K&&a._model.data[K]&&a._model.data[K].children?J.inArray(X.id,a._model.data[K].children):-1,is_multi:a&&a._id&&a._id!==this._id,is_foreign:!a||!a._id,old_instance:a,new_instance:this}),O.id},cut:function(a){if(a||(a=this._data.core.selected.concat()),J.isArray(a)||(a=[a]),!a.length){return !1}var j=[],f,e,d;for(e=0,d=a.length;d>e;e++){f=this.get_node(a[e]),f&&f.id&&"#"!==f.id&&j.push(f)}return j.length?(G=j,E=this,F="move_node",void this.trigger("cut",{node:a})):!1},copy:function(a){if(a||(a=this._data.core.selected.concat()),J.isArray(a)||(a=[a]),!a.length){return !1}var j=[],f,e,d;for(e=0,d=a.length;d>e;e++){f=this.get_node(a[e]),f&&f.id&&"#"!==f.id&&j.push(f)}return j.length?(G=j,E=this,F="copy_node",void this.trigger("copy",{node:a})):!1},get_buffer:function(){return{mode:F,node:G,inst:E}},can_paste:function(){return F!==!1&&G!==!1},paste:function(d,c){return d=this.get_node(d),d&&F&&F.match(/^(copy_node|move_node)$/)&&G?(this[F](G,d,c)&&this.trigger("paste",{parent:d.id,node:G,mode:F}),G=!1,F=!1,void (E=!1)):!1},clear_buffer:function(){G=!1,F=!1,E=!1,this.trigger("clear_buffer")},edit:function(L,K){if(L=this.get_node(L),!L){return !1}if(this.settings.core.check_callback===!1){return this._data.core.last_error={error:"check",plugin:"core",id:"core_07",reason:"Could not edit node because of check_callback"},this.settings.core.error.call(this,this._data.core.last_error),!1}K="string"==typeof K?K:L.text,this.set_text(L,""),L=this._open_to(L);var r=this._data.core.rtl,q=this.element.width(),p=L.children(".jstree-anchor"),o=J("<span>"),n=K,m=J("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),l=J("<input />",{value:n,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver","box-sizing":"border-box",display:"inline-block",height:this._data.core.li_height+"px",lineHeight:this._data.core.li_height+"px",width:"150px"},blur:J.proxy(function(){var e=o.children(".jstree-rename-input"),b=e.val();""===b&&(b=n),m.remove(),o.replaceWith(p),o.remove(),this.set_text(L,n),this.rename_node(L,J("<div></div>").text(b)[this.settings.core.force_text?"text":"html"]())===!1&&this.set_text(L,n)},this),keydown:function(d){var c=d.which;27===c&&(this.value=n),(27===c||13===c||37===c||38===c||39===c||40===c||32===c)&&d.stopImmediatePropagation(),(27===c||13===c)&&(d.preventDefault(),this.blur())},click:function(b){b.stopImmediatePropagation()},mousedown:function(b){b.stopImmediatePropagation()},keyup:function(b){l.width(Math.min(m.text("pW"+this.value).width(),q))},keypress:function(b){return 13===b.which?!1:void 0}}),a={fontFamily:p.css("fontFamily")||"",fontSize:p.css("fontSize")||"",fontWeight:p.css("fontWeight")||"",fontStyle:p.css("fontStyle")||"",fontStretch:p.css("fontStretch")||"",fontVariant:p.css("fontVariant")||"",letterSpacing:p.css("letterSpacing")||"",wordSpacing:p.css("wordSpacing")||""};o.attr("class",p.attr("class")).append(p.contents().clone()).append(l),p.replaceWith(o),m.css(a),l.css(a).width(Math.min(m.text("pW"+l[0].value).width(),q))[0].select()},set_theme:function(a,f){if(!a){return !1}if(f===!0){var e=this.settings.core.themes.dir;e||(e=J.jstree.path+"/themes"),f=e+"/"+a+"/style.css"}f&&-1===J.inArray(f,D)&&(J("head").append('<link rel="stylesheet" href="'+f+'" type="text/css" />'),D.push(f)),this._data.core.themes.name&&this.element.removeClass("jstree-"+this._data.core.themes.name),this._data.core.themes.name=a,this.element.addClass("jstree-"+a),this.element[this.settings.core.themes.responsive?"addClass":"removeClass"]("jstree-"+a+"-responsive"),this.trigger("set_theme",{theme:a})},get_theme:function(){return this._data.core.themes.name},set_theme_variant:function(b){this._data.core.themes.variant&&this.element.removeClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant),this._data.core.themes.variant=b,b&&this.element.addClass("jstree-"+this._data.core.themes.name+"-"+this._data.core.themes.variant)},get_theme_variant:function(){return this._data.core.themes.variant},show_stripes:function(){this._data.core.themes.stripes=!0,this.get_container_ul().addClass("jstree-striped")},hide_stripes:function(){this._data.core.themes.stripes=!1,this.get_container_ul().removeClass("jstree-striped")},toggle_stripes:function(){this._data.core.themes.stripes?this.hide_stripes():this.show_stripes()},show_dots:function(){this._data.core.themes.dots=!0,this.get_container_ul().removeClass("jstree-no-dots")},hide_dots:function(){this._data.core.themes.dots=!1,this.get_container_ul().addClass("jstree-no-dots")},toggle_dots:function(){this._data.core.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this._data.core.themes.icons=!0,this.get_container_ul().removeClass("jstree-no-icons")},hide_icons:function(){this._data.core.themes.icons=!1,this.get_container_ul().addClass("jstree-no-icons")},toggle_icons:function(){this._data.core.themes.icons?this.hide_icons():this.show_icons()},set_icon:function(a,l){var k,j,i,h;if(J.isArray(a)){for(a=a.slice(),k=0,j=a.length;j>k;k++){this.set_icon(a[k],l)}return !0}return a=this.get_node(a),a&&"#"!==a.id?(h=a.icon,a.icon=l,i=this.get_node(a,!0).children(".jstree-anchor").children(".jstree-themeicon"),l===!1?this.hide_icon(a):l===!0?(i.removeClass("jstree-themeicon-custom "+h).css("background","").removeAttr("rel"),h===!1&&this.show_icon(a)):-1===l.indexOf("/")&&-1===l.indexOf(".")?(i.removeClass(h).css("background",""),i.addClass(l+" jstree-themeicon-custom").attr("rel",l),h===!1&&this.show_icon(a)):(i.removeClass(h).css("background",""),i.addClass("jstree-themeicon-custom").css("background","url('"+l+"') center center no-repeat").attr("rel",l),h===!1&&this.show_icon(a)),!0):!1},get_icon:function(b){return b=this.get_node(b),b&&"#"!==b.id?b.icon:!1},hide_icon:function(a){var f,e;if(J.isArray(a)){for(a=a.slice(),f=0,e=a.length;e>f;f++){this.hide_icon(a[f])}return !0}return a=this.get_node(a),a&&"#"!==a?(a.icon=!1,this.get_node(a,!0).children(".jstree-anchor").children(".jstree-themeicon").addClass("jstree-themeicon-hidden"),!0):!1},show_icon:function(a){var h,g,f;if(J.isArray(a)){for(a=a.slice(),h=0,g=a.length;g>h;h++){this.show_icon(a[h])}return !0}return a=this.get_node(a),a&&"#"!==a?(f=this.get_node(a,!0),a.icon=f.length?f.children(".jstree-anchor").children(".jstree-themeicon").attr("rel"):!0,a.icon||(a.icon=!0),f.children(".jstree-anchor").children(".jstree-themeicon").removeClass("jstree-themeicon-hidden"),!0):!1}},J.vakata={},J.vakata.attributes=function(a,f){a=J(a)[0];var e=f?{}:[];return a&&a.attributes&&J.each(a.attributes,function(c,d){-1===J.inArray(d.name.toLowerCase(),["style","contenteditable","hasfocus","tabindex"])&&null!==d.value&&""!==J.trim(d.value)&&(f?e[d.name]=d.value:e.push(d.name))}),e},J.vakata.array_unique=function(g){var f=[],j,i,h;for(j=0,h=g.length;h>j;j++){for(i=0;j>=i;i++){if(g[j]===g[i]){break}}i===j&&f.push(g[j])}return f},J.vakata.array_remove=function(f,e,h){var g=f.slice((h||e)+1||f.length);return f.length=0>e?f.length+e:e,f.push.apply(f,g),f},J.vakata.array_remove_item=function(a,f){var e=J.inArray(f,a);return -1!==e?J.vakata.array_remove(a,e):a};var x=document.createElement("I");x.className="jstree-icon jstree-checkbox",x.setAttribute("role","presentation"),J.jstree.defaults.checkbox={visible:!0,three_state:!0,whole_node:!0,keep_selected_style:!0,cascade:"",tie_selection:!0},J.jstree.plugins.checkbox=function(a,d){this.bind=function(){d.bind.call(this),this._data.checkbox.uto=!1,this._data.checkbox.selected=[],this.settings.checkbox.three_state&&(this.settings.checkbox.cascade="up+down+undetermined"),this.element.on("init.jstree",J.proxy(function(){this._data.checkbox.visible=this.settings.checkbox.visible,this.settings.checkbox.keep_selected_style||this.element.addClass("jstree-checkbox-no-clicked"),this.settings.checkbox.tie_selection&&this.element.addClass("jstree-checkbox-selection")},this)).on("loading.jstree",J.proxy(function(){this[this._data.checkbox.visible?"show_checkboxes":"hide_checkboxes"]()},this)),-1!==this.settings.checkbox.cascade.indexOf("undetermined")&&this.element.on("changed.jstree uncheck_node.jstree check_node.jstree uncheck_all.jstree check_all.jstree move_node.jstree copy_node.jstree redraw.jstree open_node.jstree",J.proxy(function(){this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(J.proxy(this._undetermined,this),50)},this)),this.settings.checkbox.tie_selection||this.element.on("model.jstree",J.proxy(function(i,h){var n=this._model.data,m=n[h.parent],l=h.nodes,k,j;for(k=0,j=l.length;j>k;k++){n[l[k]].state.checked=n[l[k]].original&&n[l[k]].original.state&&n[l[k]].original.state.checked,n[l[k]].state.checked&&this._data.checkbox.selected.push(l[k])}},this)),(-1!==this.settings.checkbox.cascade.indexOf("up")||-1!==this.settings.checkbox.cascade.indexOf("down"))&&this.element.on("model.jstree",J.proxy(function(U,T){var S=this._model.data,R=S[T.parent],Q=T.nodes,P=[],O,N,M,L,K,r,q=this.settings.checkbox.cascade,p=this.settings.checkbox.tie_selection;if(-1!==q.indexOf("down")){if(R.state[p?"selected":"checked"]){for(N=0,M=Q.length;M>N;N++){S[Q[N]].state[p?"selected":"checked"]=!0}this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(Q)}else{for(N=0,M=Q.length;M>N;N++){if(S[Q[N]].state[p?"selected":"checked"]){for(L=0,K=S[Q[N]].children_d.length;K>L;L++){S[S[Q[N]].children_d[L]].state[p?"selected":"checked"]=!0}this._data[p?"core":"checkbox"].selected=this._data[p?"core":"checkbox"].selected.concat(S[Q[N]].children_d)}}}}if(-1!==q.indexOf("up")){for(N=0,M=R.children_d.length;M>N;N++){S[R.children_d[N]].children.length||P.push(S[R.children_d[N]].parent)}for(P=J.vakata.array_unique(P),L=0,K=P.length;K>L;L++){R=S[P[L]];while(R&&"#"!==R.id){for(O=0,N=0,M=R.children.length;M>N;N++){O+=S[R.children[N]].state[p?"selected":"checked"]}if(O!==M){break}R.state[p?"selected":"checked"]=!0,this._data[p?"core":"checkbox"].selected.push(R.id),r=this.get_node(R,!0),r&&r.length&&r.attr("aria-selected",!0).children(".jstree-anchor").addClass(p?"jstree-clicked":"jstree-checked"),R=this.get_node(R.parent)}}}this._data[p?"core":"checkbox"].selected=J.vakata.array_unique(this._data[p?"core":"checkbox"].selected)},this)).on(this.settings.checkbox.tie_selection?"select_node.jstree":"check_node.jstree",J.proxy(function(Q,P){var O=P.node,N=this._model.data,M=this.get_node(O.parent),L=this.get_node(O,!0),K,r,q,p,o=this.settings.checkbox.cascade,n=this.settings.checkbox.tie_selection;if(-1!==o.indexOf("down")){for(this._data[n?"core":"checkbox"].selected=J.vakata.array_unique(this._data[n?"core":"checkbox"].selected.concat(O.children_d)),K=0,r=O.children_d.length;r>K;K++){p=N[O.children_d[K]],p.state[n?"selected":"checked"]=!0,p&&p.original&&p.original.state&&p.original.state.undetermined&&(p.original.state.undetermined=!1)}}if(-1!==o.indexOf("up")){while(M&&"#"!==M.id){for(q=0,K=0,r=M.children.length;r>K;K++){q+=N[M.children[K]].state[n?"selected":"checked"]}if(q!==r){break}M.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(M.id),p=this.get_node(M,!0),p&&p.length&&p.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"),M=this.get_node(M.parent)}}-1!==o.indexOf("down")&&L.length&&L.find(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!0)},this)).on(this.settings.checkbox.tie_selection?"deselect_all.jstree":"uncheck_all.jstree",J.proxy(function(i,h){var n=this.get_node("#"),m=this._model.data,l,k,j;for(l=0,k=n.children_d.length;k>l;l++){j=m[n.children_d[l]],j&&j.original&&j.original.state&&j.original.state.undetermined&&(j.original.state.undetermined=!1)}},this)).on(this.settings.checkbox.tie_selection?"deselect_node.jstree":"uncheck_node.jstree",J.proxy(function(K,r){var q=r.node,p=this.get_node(q,!0),o,n,m,l=this.settings.checkbox.cascade,k=this.settings.checkbox.tie_selection;if(q&&q.original&&q.original.state&&q.original.state.undetermined&&(q.original.state.undetermined=!1),-1!==l.indexOf("down")){for(o=0,n=q.children_d.length;n>o;o++){m=this._model.data[q.children_d[o]],m.state[k?"selected":"checked"]=!1,m&&m.original&&m.original.state&&m.original.state.undetermined&&(m.original.state.undetermined=!1)}}if(-1!==l.indexOf("up")){for(o=0,n=q.parents.length;n>o;o++){m=this._model.data[q.parents[o]],m.state[k?"selected":"checked"]=!1,m&&m.original&&m.original.state&&m.original.state.undetermined&&(m.original.state.undetermined=!1),m=this.get_node(q.parents[o],!0),m&&m.length&&m.attr("aria-selected",!1).children(".jstree-anchor").removeClass(k?"jstree-clicked":"jstree-checked")}}for(m=[],o=0,n=this._data[k?"core":"checkbox"].selected.length;n>o;o++){-1!==l.indexOf("down")&&-1!==J.inArray(this._data[k?"core":"checkbox"].selected[o],q.children_d)||-1!==l.indexOf("up")&&-1!==J.inArray(this._data[k?"core":"checkbox"].selected[o],q.parents)||m.push(this._data[k?"core":"checkbox"].selected[o])}this._data[k?"core":"checkbox"].selected=J.vakata.array_unique(m),-1!==l.indexOf("down")&&p.length&&p.find(".jstree-anchor").removeClass(k?"jstree-clicked":"jstree-checked").parent().attr("aria-selected",!1)},this)),-1!==this.settings.checkbox.cascade.indexOf("up")&&this.element.on("delete_node.jstree",J.proxy(function(r,q){var p=this.get_node(q.parent),o=this._model.data,n,m,l,k,j=this.settings.checkbox.tie_selection;while(p&&"#"!==p.id){for(l=0,n=0,m=p.children.length;m>n;n++){l+=o[p.children[n]].state[j?"selected":"checked"]}if(l!==m){break}p.state[j?"selected":"checked"]=!0,this._data[j?"core":"checkbox"].selected.push(p.id),k=this.get_node(p,!0),k&&k.length&&k.attr("aria-selected",!0).children(".jstree-anchor").addClass(j?"jstree-clicked":"jstree-checked"),p=this.get_node(p.parent)}},this)).on("move_node.jstree",J.proxy(function(Q,P){var O=P.is_multi,N=P.old_parent,M=this.get_node(P.parent),L=this._model.data,K,r,q,p,o,n=this.settings.checkbox.tie_selection;if(!O){K=this.get_node(N);while(K&&"#"!==K.id){for(r=0,q=0,p=K.children.length;p>q;q++){r+=L[K.children[q]].state[n?"selected":"checked"]}if(r!==p){break}K.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"),K=this.get_node(K.parent)}}K=M;while(K&&"#"!==K.id){for(r=0,q=0,p=K.children.length;p>q;q++){r+=L[K.children[q]].state[n?"selected":"checked"]}if(r===p){K.state[n?"selected":"checked"]||(K.state[n?"selected":"checked"]=!0,this._data[n?"core":"checkbox"].selected.push(K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!0).children(".jstree-anchor").addClass(n?"jstree-clicked":"jstree-checked"))}else{if(!K.state[n?"selected":"checked"]){break}K.state[n?"selected":"checked"]=!1,this._data[n?"core":"checkbox"].selected=J.vakata.array_remove_item(this._data[n?"core":"checkbox"].selected,K.id),o=this.get_node(K,!0),o&&o.length&&o.attr("aria-selected",!1).children(".jstree-anchor").removeClass(n?"jstree-clicked":"jstree-checked")}K=this.get_node(K.parent)}},this))},this._undetermined=function(){var i,o,n=this._model.data,m=this.settings.checkbox.tie_selection,l=this._data[m?"core":"checkbox"].selected,k=[],j=this;for(i=0,o=l.length;o>i;i++){n[l[i]]&&n[l[i]].parents&&(k=k.concat(n[l[i]].parents))}for(this.element.find(".jstree-closed").not(":has(.jstree-children)").each(function(){var b=j.get_node(this),c;if(b.state.loaded){for(i=0,o=b.children_d.length;o>i;i++){c=n[b.children_d[i]],!c.state.loaded&&c.original&&c.original.state&&c.original.state.undetermined&&c.original.state.undetermined===!0&&(k.push(c.id),k=k.concat(c.parents))}}else{b.original&&b.original.state&&b.original.state.undetermined&&b.original.state.undetermined===!0&&(k.push(b.id),k=k.concat(b.parents))}}),k=J.vakata.array_unique(k),k=J.vakata.array_remove_item(k,"#"),this.element.find(".jstree-undetermined").removeClass("jstree-undetermined"),i=0,o=k.length;o>i;i++){n[k[i]].state[m?"selected":"checked"]||(l=this.get_node(k[i],!0),l&&l.length&&l.children(".jstree-anchor").children(".jstree-checkbox").addClass("jstree-undetermined"))}},this.redraw_node=function(c,o,n,m){if(c=d.redraw_node.apply(this,arguments)){var l,k,j=null;for(l=0,k=c.childNodes.length;k>l;l++){if(c.childNodes[l]&&c.childNodes[l].className&&-1!==c.childNodes[l].className.indexOf("jstree-anchor")){j=c.childNodes[l];break}}j&&(!this.settings.checkbox.tie_selection&&this._model.data[c.id].state.checked&&(j.className+=" jstree-checked"),j.insertBefore(x.cloneNode(!1),j.childNodes[0]))}return n||-1===this.settings.checkbox.cascade.indexOf("undetermined")||(this._data.checkbox.uto&&clearTimeout(this._data.checkbox.uto),this._data.checkbox.uto=setTimeout(J.proxy(this._undetermined,this),50)),c},this.show_checkboxes=function(){this._data.core.themes.checkboxes=!0,this.get_container_ul().removeClass("jstree-no-checkboxes")},this.hide_checkboxes=function(){this._data.core.themes.checkboxes=!1,this.get_container_ul().addClass("jstree-no-checkboxes")},this.toggle_checkboxes=function(){this._data.core.themes.checkboxes?this.hide_checkboxes():this.show_checkboxes()},this.is_undetermined=function(i){i=this.get_node(i);var o=this.settings.checkbox.cascade,n,m,l=this.settings.checkbox.tie_selection,k=this._data[l?"core":"checkbox"].selected,j=this._model.data;if(!i||i.state[l?"selected":"checked"]===!0||-1===o.indexOf("undetermined")||-1===o.indexOf("down")&&-1===o.indexOf("up")){return !1}if(!i.state.loaded&&i.original.state.undetermined===!0){return !0}for(n=0,m=i.children_d.length;m>n;n++){if(-1!==J.inArray(i.children_d[n],k)||!j[i.children_d[n]].state.loaded&&j[i.children_d[n]].original.state.undetermined){return !0}}return !1},this.activate_node=function(c,e){return this.settings.checkbox.tie_selection&&(this.settings.checkbox.whole_node||J(e.target).hasClass("jstree-checkbox"))&&(e.ctrlKey=!0),this.settings.checkbox.tie_selection||!this.settings.checkbox.whole_node&&!J(e.target).hasClass("jstree-checkbox")?d.activate_node.call(this,c,e):this.is_disabled(c)?!1:(this.is_checked(c)?this.uncheck_node(c,e):this.check_node(c,e),void this.trigger("activate_node",{node:this.get_node(c)}))},this.check_node=function(h,m){if(this.settings.checkbox.tie_selection){return this.select_node(h,!1,!0,m)}var l,k,j,i;if(J.isArray(h)){for(h=h.slice(),k=0,j=h.length;j>k;k++){this.check_node(h[k],m)}return !0}return h=this.get_node(h),h&&"#"!==h.id?(l=this.get_node(h,!0),void (h.state.checked||(h.state.checked=!0,this._data.checkbox.selected.push(h.id),l&&l.length&&l.children(".jstree-anchor").addClass("jstree-checked"),this.trigger("check_node",{node:h,selected:this._data.checkbox.selected,event:m})))):!1},this.uncheck_node=function(g,k){if(this.settings.checkbox.tie_selection){return this.deselect_node(g,!1,k)}var j,i,h;if(J.isArray(g)){for(g=g.slice(),j=0,i=g.length;i>j;j++){this.uncheck_node(g[j],k)}return !0}return g=this.get_node(g),g&&"#"!==g.id?(h=this.get_node(g,!0),void (g.state.checked&&(g.state.checked=!1,this._data.checkbox.selected=J.vakata.array_remove_item(this._data.checkbox.selected,g.id),h.length&&h.children(".jstree-anchor").removeClass("jstree-checked"),this.trigger("uncheck_node",{node:g,selected:this._data.checkbox.selected,event:k})))):!1},this.check_all=function(){if(this.settings.checkbox.tie_selection){return this.select_all()}var f=this._data.checkbox.selected.concat([]),e,g;for(this._data.checkbox.selected=this._model.data["#"].children_d.concat(),e=0,g=this._data.checkbox.selected.length;g>e;e++){this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!0)}this.redraw(!0),this.trigger("check_all",{selected:this._data.checkbox.selected})},this.uncheck_all=function(){if(this.settings.checkbox.tie_selection){return this.deselect_all()}var f=this._data.checkbox.selected.concat([]),e,g;for(e=0,g=this._data.checkbox.selected.length;g>e;e++){this._model.data[this._data.checkbox.selected[e]]&&(this._model.data[this._data.checkbox.selected[e]].state.checked=!1)}this._data.checkbox.selected=[],this.element.find(".jstree-checked").removeClass("jstree-checked"),this.trigger("uncheck_all",{selected:this._data.checkbox.selected,node:f})},this.is_checked=function(b){return this.settings.checkbox.tie_selection?this.is_selected(b):(b=this.get_node(b),b&&"#"!==b.id?b.state.checked:!1)},this.get_checked=function(c){return this.settings.checkbox.tie_selection?this.get_selected(c):c?J.map(this._data.checkbox.selected,J.proxy(function(b){return this.get_node(b)},this)):this._data.checkbox.selected},this.get_top_checked=function(i){if(this.settings.checkbox.tie_selection){return this.get_top_selected(i)}var o=this.get_checked(!0),n={},m,l,k,j;for(m=0,l=o.length;l>m;m++){n[o[m].id]=o[m]}for(m=0,l=o.length;l>m;m++){for(k=0,j=o[m].children_d.length;j>k;k++){n[o[m].children_d[k]]&&delete n[o[m].children_d[k]]}}o=[];for(m in n){n.hasOwnProperty(m)&&o.push(m)}return i?J.map(o,J.proxy(function(b){return this.get_node(b)},this)):o},this.get_bottom_checked=function(g){if(this.settings.checkbox.tie_selection){return this.get_bottom_selected(g)}var k=this.get_checked(!0),j=[],i,h;for(i=0,h=k.length;h>i;i++){k[i].children.length||j.push(k[i].id)}return g?J.map(j,J.proxy(function(b){return this.get_node(b)},this)):j},this.load_node=function(c,q){var p,o,n,m,l,k;if(!J.isArray(c)&&!this.settings.checkbox.tie_selection&&(k=this.get_node(c),k&&k.state.loaded)){for(p=0,o=k.children_d.length;o>p;p++){this._model.data[k.children_d[p]].state.checked&&(l=!0,this._data.checkbox.selected=J.vakata.array_remove_item(this._data.checkbox.selected,k.children_d[p]))}}return d.load_node.apply(this,arguments)},this.get_state=function(){var b=d.get_state.apply(this,arguments);return this.settings.checkbox.tie_selection?b:(b.checkbox=this._data.checkbox.selected.slice(),b)},this.set_state=function(c,i){var h=d.set_state.apply(this,arguments);if(h&&c.checkbox){if(!this.settings.checkbox.tie_selection){this.uncheck_all();var g=this;J.each(c.checkbox,function(f,e){g.check_node(e)})}return delete c.checkbox,!1}return h}};var w=null,v,u;J.jstree.defaults.contextmenu={select_node:!0,show_at_node:!0,items:function(a,d){return{create:{separator_before:!1,separator_after:!0,_disabled:!1,label:"Create",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.create_node(f,{},"last",function(b){setTimeout(function(){g.edit(b)},0)})}},rename:{separator_before:!1,separator_after:!1,_disabled:!1,label:"Rename",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.edit(f)}},remove:{separator_before:!1,icon:!1,separator_after:!1,_disabled:!1,label:"Delete",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.delete_node(g.is_selected(f)?g.get_selected():f)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.cut(g.is_selected(f)?g.get_selected():f)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.copy(g.is_selected(f)?g.get_selected():f)}},paste:{separator_before:!1,icon:!1,_disabled:function(c){return !J.jstree.reference(c.reference).can_paste()},separator_after:!1,label:"Paste",action:function(e){var g=J.jstree.reference(e.reference),f=g.get_node(e.reference);g.paste(f)}}}}}}},J.jstree.plugins.contextmenu=function(b,a){this.bind=function(){a.bind.call(this);var c=0;this.element.on("contextmenu.jstree",".jstree-anchor",J.proxy(function(d,e){d.preventDefault(),c=d.ctrlKey?+new Date:0,(e||w)&&(c=+new Date+10000),w&&clearTimeout(w),this.is_loading(d.currentTarget)||this.show_contextmenu(d.currentTarget,d.pageX,d.pageY,d)},this)).on("click.jstree",".jstree-anchor",J.proxy(function(d){this._data.contextmenu.visible&&(!c||+new Date-c>250)&&J.vakata.context.hide(),c=0},this)).on("touchstart.jstree",".jstree-anchor",function(d){d.originalEvent&&d.originalEvent.changedTouches&&d.originalEvent.changedTouches[0]&&(v=d.pageX,u=d.pageY,w=setTimeout(function(){J(d.currentTarget).trigger("contextmenu",!0)},750))}),J(document).on("context_hide.vakata.jstree",J.proxy(function(){this._data.contextmenu.visible=!1},this))},this.teardown=function(){this._data.contextmenu.visible&&J.vakata.context.hide(),a.teardown.call(this)},this.show_contextmenu=function(L,K,r,q){if(L=this.get_node(L),!L||"#"===L.id){return !1}var p=this.settings.contextmenu,o=this.get_node(L,!0),n=o.children(".jstree-anchor"),m=!1,l=!1;(p.show_at_node||K===I||r===I)&&(m=n.offset(),K=m.left,r=m.top+this._data.core.li_height),this.settings.contextmenu.select_node&&!this.is_selected(L)&&this.activate_node(L,q),l=p.items,J.isFunction(l)&&(l=l.call(this,L,J.proxy(function(c){this._show_contextmenu(L,K,r,c)},this))),J.isPlainObject(l)&&this._show_contextmenu(L,K,r,l)},this._show_contextmenu=function(h,m,l,k){var j=this.get_node(h,!0),i=j.children(".jstree-anchor");J(document).one("context_show.vakata.jstree",J.proxy(function(e,g){var f="jstree-contextmenu jstree-"+this.get_theme()+"-contextmenu";J(g.element).addClass(f)},this)),this._data.contextmenu.visible=!0,J.vakata.context.show(i,{x:m,y:l},k),this.trigger("show_contextmenu",{node:h,x:m,y:l})}},J(function(){J(document).on("touchmove.vakata.jstree",function(b){w&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(Math.abs(v-b.pageX)>50||Math.abs(u-b.pageY)>50)&&clearTimeout(w)}).on("touchend.vakata.jstree",function(b){w&&clearTimeout(w)})}),function(e){var d=!1,f={element:!1,reference:!1,position_x:0,position_y:0,items:[],html:"",is_visible:!1};e.vakata.context={settings:{hide_onmouseleave:0,icons:!0},_trigger:function(a){e(document).triggerHandler("context_"+a+".vakata",{reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}})},_execute:function(a){return a=f.items[a],a&&(!a._disabled||e.isFunction(a._disabled)&&!a._disabled({item:a,reference:f.reference,element:f.element}))&&a.action?a.action.call(null,{item:a,reference:f.reference,element:f.element,position:{x:f.position_x,y:f.position_y}}):!1},_parse:function(a,j){if(!a){return !1}j||(f.html="",f.items=[]);var i="",h=!1,c;return j&&(i+="<ul>"),e.each(a,function(g,k){return k?(f.items.push(k),!h&&k.separator_before&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>"),h=!1,i+="<li class='"+(k._class||"")+(k._disabled===!0||e.isFunction(k._disabled)&&k._disabled({item:k,reference:f.reference,element:f.element})?" vakata-contextmenu-disabled ":"")+"' "+(k.shortcut?" data-shortcut='"+k.shortcut+"' ":"")+">",i+="<a href='#' rel='"+(f.items.length-1)+"'>",e.vakata.context.settings.icons&&(i+="<i ",k.icon&&(i+=-1!==k.icon.indexOf("/")||-1!==k.icon.indexOf(".")?" style='background:url(\""+k.icon+"\") center center no-repeat' ":" class='"+k.icon+"' "),i+="></i><span class='vakata-contextmenu-sep'>&#160;</span>"),i+=(e.isFunction(k.label)?k.label({item:g,reference:f.reference,element:f.element}):k.label)+(k.shortcut?' <span class="vakata-contextmenu-shortcut vakata-contextmenu-shortcut-'+k.shortcut+'">'+(k.shortcut_label||"")+"</span>":"")+"</a>",k.submenu&&(c=e.vakata.context._parse(k.submenu,!0),c&&(i+=c)),i+="</li>",void (k.separator_after&&(i+="<li class='vakata-context-separator'><a href='#' "+(e.vakata.context.settings.icons?"":'style="margin-left:0px;"')+">&#160;</a></li>",h=!0))):!0}),i=i.replace(/<li class\='vakata-context-separator'\><\/li\>$/,""),j&&(i+="</ul>"),j||(f.html=i,e.vakata.context._trigger("parse")),i.length>10?i:!1},_show_submenu:function(p){if(p=e(p),p.length&&p.children("ul").length){var o=p.children("ul"),n=p.offset().left+p.outerWidth(),m=p.offset().top,l=o.width(),k=o.height(),b=e(window).width()+e(window).scrollLeft(),a=e(window).height()+e(window).scrollTop();d?p[n-(l+10+p.outerWidth())<0?"addClass":"removeClass"]("vakata-context-left"):p[n+l+10>b?"addClass":"removeClass"]("vakata-context-right"),m+k+10>a&&o.css("bottom","-1px"),o.show()}},show:function(P,O,N){var M,L,K,r,q,p,c,b,a=!0;switch(f.element&&f.element.length&&f.element.width(""),a){case !O&&!P:return !1;case !!O&&!!P:f.reference=P,f.position_x=O.x,f.position_y=O.y;break;case !O&&!!P:f.reference=P,M=P.offset(),f.position_x=M.left+P.outerHeight(),f.position_y=M.top;break;case !!O&&!P:f.position_x=O.x,f.position_y=O.y}P&&!N&&e(P).data("vakata_contextmenu")&&(N=e(P).data("vakata_contextmenu")),e.vakata.context._parse(N)&&f.element.html(f.html),f.items.length&&(f.element.appendTo("body"),L=f.element,K=f.position_x,r=f.position_y,q=L.width(),p=L.height(),c=e(window).width()+e(window).scrollLeft(),b=e(window).height()+e(window).scrollTop(),d&&(K-=L.outerWidth()-e(P).outerWidth(),K<e(window).scrollLeft()+20&&(K=e(window).scrollLeft()+20)),K+q+20>c&&(K=c-(q+20)),r+p+20>b&&(r=b-(p+20)),f.element.css({left:K,top:r}).show().find("a").first().focus().parent().addClass("vakata-context-hover"),f.is_visible=!0,e.vakata.context._trigger("show"))},hide:function(){f.is_visible&&(f.element.hide().find("ul").hide().end().find(":focus").blur().end().detach(),f.is_visible=!1,e.vakata.context._trigger("hide"))}},e(function(){d="rtl"===e("body").css("direction");var a=!1;f.element=e("<ul class='vakata-context'></ul>"),f.element.on("mouseenter","li",function(c){c.stopImmediatePropagation(),e.contains(this,c.relatedTarget)||(a&&clearTimeout(a),f.element.find(".vakata-context-hover").removeClass("vakata-context-hover").end(),e(this).siblings().find("ul").hide().end().end().parentsUntil(".vakata-context","li").addBack().addClass("vakata-context-hover"),e.vakata.context._show_submenu(this))}).on("mouseleave","li",function(c){e.contains(this,c.relatedTarget)||e(this).find(".vakata-context-hover").addBack().removeClass("vakata-context-hover")}).on("mouseleave",function(c){e(this).find(".vakata-context-hover").removeClass("vakata-context-hover"),e.vakata.context.settings.hide_onmouseleave&&(a=setTimeout(function(g){return function(){e.vakata.context.hide()}}(this),e.vakata.context.settings.hide_onmouseleave))}).on("click","a",function(c){c.preventDefault(),e(this).blur().parent().hasClass("vakata-context-disabled")||e.vakata.context._execute(e(this).attr("rel"))===!1||e.vakata.context.hide()}).on("keydown","a",function(c){var g=null;switch(c.which){case 13:case 32:c.type="mouseup",c.preventDefault(),e(c.currentTarget).trigger(c);break;case 37:f.is_visible&&(f.element.find(".vakata-context-hover").last().closest("li").first().find("ul").hide().find(".vakata-context-hover").removeClass("vakata-context-hover").end().end().children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 38:f.is_visible&&(g=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").prevAll("li:not(.vakata-context-separator)").first(),g.length||(g=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").last()),g.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 39:f.is_visible&&(f.element.find(".vakata-context-hover").last().children("ul").show().children("li:not(.vakata-context-separator)").removeClass("vakata-context-hover").first().addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 40:f.is_visible&&(g=f.element.find("ul:visible").addBack().last().children(".vakata-context-hover").removeClass("vakata-context-hover").nextAll("li:not(.vakata-context-separator)").first(),g.length||(g=f.element.find("ul:visible").addBack().last().children("li:not(.vakata-context-separator)").first()),g.addClass("vakata-context-hover").children("a").focus(),c.stopImmediatePropagation(),c.preventDefault());break;case 27:e.vakata.context.hide(),c.preventDefault()}}).on("keydown",function(g){g.preventDefault();var c=f.element.find(".vakata-contextmenu-shortcut-"+g.which).parent();c.parent().not(".vakata-context-disabled")&&c.click()}),e(document).on("mousedown.vakata.jstree",function(c){f.is_visible&&!e.contains(f.element[0],c.target)&&e.vakata.context.hide()}).on("context_show.vakata.jstree",function(b,c){f.element.find("li:has(ul)").children("a").addClass("vakata-context-parent"),d&&f.element.addClass("vakata-context-rtl").css("direction","rtl"),f.element.find("ul").hide().end()})})}(J),J.jstree.defaults.dnd={copy:!0,open_timeout:500,is_draggable:!0,check_while_dragging:!0,always_copy:!1,inside_pos:0,drag_selection:!0,touch:!0},J.jstree.plugins.dnd=function(a,d){this.bind=function(){d.bind.call(this),this.element.on("mousedown.jstree touchstart.jstree",".jstree-anchor",J.proxy(function(f){if("touchstart"===f.type&&(!this.settings.dnd.touch||"selected"===this.settings.dnd.touch&&!J(f.currentTarget).hasClass("jstree-clicked"))){return !0}var i=this.get_node(f.target),h=this.is_selected(i)&&this.settings.drag_selection?this.get_selected().length:1,g=h>1?h+" "+this.get_string("nodes"):this.get_text(f.currentTarget);return this.settings.core.force_text&&(g=J("<div />").text(g).html()),i&&i.id&&"#"!==i.id&&(1===f.which||"touchstart"===f.type)&&(this.settings.dnd.is_draggable===!0||J.isFunction(this.settings.dnd.is_draggable)&&this.settings.dnd.is_draggable.call(this,h>1?this.get_selected(!0):[i]))?(this.element.trigger("mousedown.jstree"),J.vakata.dnd.start(f,{jstree:!0,origin:this,obj:this.get_node(i,!0),nodes:h>1?this.get_selected():[i.id]},'<div id="jstree-dnd" class="jstree-'+this.get_theme()+" jstree-"+this.get_theme()+"-"+this.get_theme_variant()+" "+(this.settings.core.themes.responsive?" jstree-dnd-responsive":"")+'"><i class="jstree-icon jstree-er"></i>'+g+'<ins class="jstree-copy" style="display:none;">+</ins></div>')):void 0},this))}},J(function(){var a=!1,h=!1,g=!1,f=J('<div id="jstree-marker">&#160;</div>').hide();J(document).on("dnd_start.vakata.jstree",function(b,d){a=!1,d&&d.data&&d.data.jstree&&f.appendTo("body")}).on("dnd_move.vakata.jstree",function(Z,Y){if(g&&clearTimeout(g),Y&&Y.data&&Y.data.jstree&&(!Y.event.target.id||"jstree-marker"!==Y.event.target.id)){var X=J.jstree.reference(Y.event.target),W=!1,V=!1,U=!1,T,S,R,Q,P,O,N,M,L,K,e,d,c,b;if(X&&X._data&&X._data.dnd){if(f.attr("class","jstree-"+X.get_theme()+(X.settings.core.themes.responsive?" jstree-dnd-responsive":"")),Y.helper.children().attr("class","jstree-"+X.get_theme()+" jstree-"+X.get_theme()+"-"+X.get_theme_variant()+" "+(X.settings.core.themes.responsive?" jstree-dnd-responsive":"")).find(".jstree-copy").first()[Y.data.origin&&(Y.data.origin.settings.dnd.always_copy||Y.data.origin.settings.dnd.copy&&(Y.event.metaKey||Y.event.ctrlKey))?"show":"hide"](),Y.event.target!==X.element[0]&&Y.event.target!==X.get_container_ul()[0]||0!==X.get_container_ul().children().length){if(W=J(Y.event.target).closest(".jstree-anchor"),W&&W.length&&W.parent().is(".jstree-closed, .jstree-open, .jstree-leaf")&&(V=W.offset(),U=Y.event.pageY-V.top,R=W.height(),O=R/3>U?["b","i","a"]:U>R-R/3?["a","i","b"]:U>R/2?["i","a","b"]:["i","b","a"],J.each(O,function(j,i){switch(i){case"b":T=V.left-6,S=V.top,Q=X.get_parent(W),P=W.parent().index();break;case"i":c=X.settings.dnd.inside_pos,b=X.get_node(W.parent()),T=V.left-2,S=V.top+R/2+1,Q=b.id,P="first"===c?0:"last"===c?b.children.length:Math.min(c,b.children.length);break;case"a":T=V.left-6,S=V.top+R,Q=X.get_parent(W),P=W.parent().index()+1}for(N=!0,M=0,L=Y.data.nodes.length;L>M;M++){if(K=Y.data.origin&&(Y.data.origin.settings.dnd.always_copy||Y.data.origin.settings.dnd.copy&&(Y.event.metaKey||Y.event.ctrlKey))?"copy_node":"move_node",e=P,"move_node"===K&&"a"===i&&Y.data.origin&&Y.data.origin===X&&Q===X.get_parent(Y.data.nodes[M])&&(d=X.get_node(Q),e>J.inArray(Y.data.nodes[M],d.children)&&(e-=1)),N=N&&(X&&X.settings&&X.settings.dnd&&X.settings.dnd.check_while_dragging===!1||X.check(K,Y.data.origin&&Y.data.origin!==X?Y.data.origin.get_node(Y.data.nodes[M]):Y.data.nodes[M],Q,e,{dnd:!0,ref:X.get_node(W.parent()),pos:i,is_multi:Y.data.origin&&Y.data.origin!==X,is_foreign:!Y.data.origin})),!N){X&&X.last_error&&(h=X.last_error());break}}return"i"===i&&W.parent().is(".jstree-closed")&&X.settings.dnd.open_timeout&&(g=setTimeout(function(l,k){return function(){l.open_node(k)}}(X,W),X.settings.dnd.open_timeout)),N?(a={ins:X,par:Q,pos:"i"!==i||"last"!==c||0!==P||X.is_loaded(b)?P:"last"},f.css({left:T+"px",top:S+"px"}).show(),Y.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok"),h={},O=!0,!1):void 0}),O===!0)){return}}else{for(N=!0,M=0,L=Y.data.nodes.length;L>M;M++){if(N=N&&X.check(Y.data.origin&&(Y.data.origin.settings.dnd.always_copy||Y.data.origin.settings.dnd.copy&&(Y.event.metaKey||Y.event.ctrlKey))?"copy_node":"move_node",Y.data.origin&&Y.data.origin!==X?Y.data.origin.get_node(Y.data.nodes[M]):Y.data.nodes[M],"#","last",{dnd:!0,ref:X.get_node("#"),pos:"i",is_multi:Y.data.origin&&Y.data.origin!==X,is_foreign:!Y.data.origin}),!N){break}}if(N){return a={ins:X,par:"#",pos:"last"},f.hide(),void Y.helper.find(".jstree-icon").first().removeClass("jstree-er").addClass("jstree-ok")}}}a=!1,Y.helper.find(".jstree-icon").removeClass("jstree-ok").addClass("jstree-er"),f.hide()}}).on("dnd_scroll.vakata.jstree",function(b,d){d&&d.data&&d.data.jstree&&(f.hide(),a=!1,d.helper.find(".jstree-icon").first().removeClass("jstree-ok").addClass("jstree-er"))}).on("dnd_stop.vakata.jstree",function(k,e){if(g&&clearTimeout(g),e&&e.data&&e.data.jstree){f.hide().detach();var d,c,b=[];if(a){for(d=0,c=e.data.nodes.length;c>d;d++){b[d]=e.data.origin?e.data.origin.get_node(e.data.nodes[d]):e.data.nodes[d],e.data.origin&&(b[d].instance=e.data.origin)}for(a.ins[e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(e.event.metaKey||e.event.ctrlKey))?"copy_node":"move_node"](b,a.par,a.pos),d=0,c=b.length;c>d;d++){b[d].instance&&(b[d].instance=null)}}else{d=J(e.event.target).closest(".jstree"),d.length&&h&&h.error&&"check"===h.error&&(d=d.jstree(!0),d&&d.settings.core.error.call(this,h))}}}).on("keyup.jstree keydown.jstree",function(d,e){e=J.vakata.dnd._get(),e&&e.data&&e.data.jstree&&e.helper.find(".jstree-copy").first()[e.data.origin&&(e.data.origin.settings.dnd.always_copy||e.data.origin.settings.dnd.copy&&(d.metaKey||d.ctrlKey))?"show":"hide"]()})}),function(d){var c={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1};d.vakata.dnd={settings:{scroll_speed:10,scroll_proximity:20,helper_left:5,helper_top:10,threshold:5,threshold_touch:50},_trigger:function(a,f){var e=d.vakata.dnd._get();e.event=f,d(document).triggerHandler("dnd_"+a+".vakata",e)},_get:function(){return{data:c.data,element:c.element,helper:c.helper}},_clean:function(){c.helper&&c.helper.remove(),c.scroll_i&&(clearInterval(c.scroll_i),c.scroll_i=!1),c={element:!1,target:!1,is_down:!1,is_drag:!1,helper:!1,helper_w:0,data:!1,init_x:0,init_y:0,scroll_l:0,scroll_t:0,scroll_e:!1,scroll_i:!1,is_touch:!1},d(document).off("mousemove.vakata.jstree touchmove.vakata.jstree",d.vakata.dnd.drag),d(document).off("mouseup.vakata.jstree touchend.vakata.jstree",d.vakata.dnd.stop)},_scroll:function(f){if(!c.scroll_e||!c.scroll_l&&!c.scroll_t){return c.scroll_i&&(clearInterval(c.scroll_i),c.scroll_i=!1),!1}if(!c.scroll_i){return c.scroll_i=setInterval(d.vakata.dnd._scroll,100),!1}if(f===!0){return !1}var b=c.scroll_e.scrollTop(),a=c.scroll_e.scrollLeft();c.scroll_e.scrollTop(b+c.scroll_t*d.vakata.dnd.settings.scroll_speed),c.scroll_e.scrollLeft(a+c.scroll_l*d.vakata.dnd.settings.scroll_speed),(b!==c.scroll_e.scrollTop()||a!==c.scroll_e.scrollLeft())&&d.vakata.dnd._trigger("scroll",c.scroll_e)},start:function(h,g,b){"touchstart"===h.type&&h.originalEvent&&h.originalEvent.changedTouches&&h.originalEvent.changedTouches[0]&&(h.pageX=h.originalEvent.changedTouches[0].pageX,h.pageY=h.originalEvent.changedTouches[0].pageY,h.target=document.elementFromPoint(h.originalEvent.changedTouches[0].pageX-window.pageXOffset,h.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_drag&&d.vakata.dnd.stop({});try{h.currentTarget.unselectable="on",h.currentTarget.onselectstart=function(){return !1},h.currentTarget.style&&(h.currentTarget.style.MozUserSelect="none")}catch(a){}return c.init_x=h.pageX,c.init_y=h.pageY,c.data=g,c.is_down=!0,c.element=h.currentTarget,c.target=h.target,c.is_touch="touchstart"===h.type,b!==!1&&(c.helper=d("<div id='vakata-dnd'></div>").html(b).css({display:"block",margin:"0",padding:"0",position:"absolute",top:"-2000px",lineHeight:"16px",zIndex:"10000"})),d(document).on("mousemove.vakata.jstree touchmove.vakata.jstree",d.vakata.dnd.drag),d(document).on("mouseup.vakata.jstree touchend.vakata.jstree",d.vakata.dnd.stop),!1},drag:function(N){if("touchmove"===N.type&&N.originalEvent&&N.originalEvent.changedTouches&&N.originalEvent.changedTouches[0]&&(N.pageX=N.originalEvent.changedTouches[0].pageX,N.pageY=N.originalEvent.changedTouches[0].pageY,N.target=document.elementFromPoint(N.originalEvent.changedTouches[0].pageX-window.pageXOffset,N.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_down){if(!c.is_drag){if(!(Math.abs(N.pageX-c.init_x)>(c.is_touch?d.vakata.dnd.settings.threshold_touch:d.vakata.dnd.settings.threshold)||Math.abs(N.pageY-c.init_y)>(c.is_touch?d.vakata.dnd.settings.threshold_touch:d.vakata.dnd.settings.threshold))){return}c.helper&&(c.helper.appendTo("body"),c.helper_w=c.helper.outerWidth()),c.is_drag=!0,d.vakata.dnd._trigger("start",N)}var M=!1,L=!1,K=!1,r=!1,q=!1,p=!1,o=!1,n=!1,b=!1,a=!1;return c.scroll_t=0,c.scroll_l=0,c.scroll_e=!1,d(d(N.target).parentsUntil("body").addBack().get().reverse()).filter(function(){return/^auto|scroll$/.test(d(this).css("overflow"))&&(this.scrollHeight>this.offsetHeight||this.scrollWidth>this.offsetWidth)}).each(function(){var g=d(this),f=g.offset();return this.scrollHeight>this.offsetHeight&&(f.top+g.height()-N.pageY<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=1),N.pageY-f.top<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=-1)),this.scrollWidth>this.offsetWidth&&(f.left+g.width()-N.pageX<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=1),N.pageX-f.left<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=-1)),c.scroll_t||c.scroll_l?(c.scroll_e=d(this),!1):void 0}),c.scroll_e||(M=d(document),L=d(window),K=M.height(),r=L.height(),q=M.width(),p=L.width(),o=M.scrollTop(),n=M.scrollLeft(),K>r&&N.pageY-o<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=-1),K>r&&r-(N.pageY-o)<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_t=1),q>p&&N.pageX-n<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=-1),q>p&&p-(N.pageX-n)<d.vakata.dnd.settings.scroll_proximity&&(c.scroll_l=1),(c.scroll_t||c.scroll_l)&&(c.scroll_e=M)),c.scroll_e&&d.vakata.dnd._scroll(!0),c.helper&&(b=parseInt(N.pageY+d.vakata.dnd.settings.helper_top,10),a=parseInt(N.pageX+d.vakata.dnd.settings.helper_left,10),K&&b+25>K&&(b=K-50),q&&a+c.helper_w>q&&(a=q-(c.helper_w+2)),c.helper.css({left:a+"px",top:b+"px"})),d.vakata.dnd._trigger("move",N),!1}},stop:function(b){if("touchend"===b.type&&b.originalEvent&&b.originalEvent.changedTouches&&b.originalEvent.changedTouches[0]&&(b.pageX=b.originalEvent.changedTouches[0].pageX,b.pageY=b.originalEvent.changedTouches[0].pageY,b.target=document.elementFromPoint(b.originalEvent.changedTouches[0].pageX-window.pageXOffset,b.originalEvent.changedTouches[0].pageY-window.pageYOffset)),c.is_drag){d.vakata.dnd._trigger("stop",b)}else{if("touchend"===b.type&&b.target===c.target){var a=setTimeout(function(){d(b.target).click()},100);d(b.target).one("click",function(){a&&clearTimeout(a)})}}return d.vakata.dnd._clean(),!1}}}(J),J.jstree.defaults.search={ajax:!1,fuzzy:!1,case_sensitive:!1,show_only_matches:!1,close_opened_onclear:!0,search_leaves_only:!1,search_callback:!1},J.jstree.plugins.search=function(b,a){this.bind=function(){a.bind.call(this),this._data.search.str="",this._data.search.dom=J(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=!1,this.element.on("before_open.jstree",J.proxy(function(j,q){var p,o,n,m=this._data.search.res,l=[],k=J();if(m&&m.length&&(this._data.search.dom=J(this.element[0].querySelectorAll("#"+J.map(m,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(J.jstree.idregex,"\\$&"):c.replace(J.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.dom.children(".jstree-anchor").addClass("jstree-search"),this._data.search.som&&this._data.search.res.length)){for(p=0,o=m.length;o>p;p++){l=l.concat(this.get_node(m[p]).parents)}l=J.vakata.array_remove_item(J.vakata.array_unique(l),"#"),k=l.length?J(this.element[0].querySelectorAll("#"+J.map(l,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(J.jstree.idregex,"\\$&"):c.replace(J.jstree.idregex,"\\$&")}).join(", #"))):J(),this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),k=k.add(this._data.search.dom),k.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){J(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")})}},this)).on("search.jstree",J.proxy(function(d,e){this._data.search.som&&e.nodes.length&&(this.element.find(".jstree-node").hide().filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last"),e.nodes.parentsUntil(".jstree").addBack().show().filter(".jstree-children").each(function(){J(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last")}))},this)).on("clear_search.jstree",J.proxy(function(d,c){this._data.search.som&&c.nodes.length&&this.element.find(".jstree-node").css("display","").filter(".jstree-last").filter(function(){return this.nextSibling}).removeClass("jstree-last")},this))},this.search=function(N,M,L){if(N===!1||""===J.trim(N.toString())){return this.clear_search()}N=N.toString();var K=this.settings.search,r=K.ajax?K.ajax:!1,q=null,p=[],o=[],n,m;return this._data.search.res.length&&this.clear_search(),L===I&&(L=K.show_only_matches),M||r===!1?(this._data.search.str=N,this._data.search.dom=J(),this._data.search.res=[],this._data.search.opn=[],this._data.search.som=L,q=new J.vakata.search(N,!0,{caseSensitive:K.case_sensitive,fuzzy:K.fuzzy}),J.each(this._model.data,function(d,c){c.text&&(K.search_callback&&K.search_callback.call(this,N,c)||!K.search_callback&&q.search(c.text).isMatch)&&(!K.search_leaves_only||c.state.loaded&&0===c.children.length)&&(p.push(d),o=o.concat(c.parents))}),p.length&&(o=J.vakata.array_unique(o),this._search_open(o),this._data.search.dom=J(this.element[0].querySelectorAll("#"+J.map(p,function(c){return -1!=="0123456789".indexOf(c[0])?"\\3"+c[0]+" "+c.substr(1).replace(J.jstree.idregex,"\\$&"):c.replace(J.jstree.idregex,"\\$&")}).join(", #"))),this._data.search.res=p,this._data.search.dom.children(".jstree-anchor").addClass("jstree-search")),void this.trigger("search",{nodes:this._data.search.dom,str:N,res:this._data.search.res,show_only_matches:L})):J.isFunction(r)?r.call(this,N,J.proxy(function(c){c&&c.d&&(c=c.d),this._load_nodes(J.isArray(c)?J.vakata.array_unique(c):[],function(){this.search(N,!0,L)},!0)},this)):(r=J.extend({},r),r.data||(r.data={}),r.data.str=N,J.ajax(r).fail(J.proxy(function(){this._data.core.last_error={error:"ajax",plugin:"search",id:"search_01",reason:"Could not load search parents",data:JSON.stringify(r)},this.settings.core.error.call(this,this._data.core.last_error)},this)).done(J.proxy(function(c){c&&c.d&&(c=c.d),this._load_nodes(J.isArray(c)?J.vakata.array_unique(c):[],function(){this.search(N,!0,L)},!0)},this)))},this.clear_search=function(){this._data.search.dom.children(".jstree-anchor").removeClass("jstree-search"),this.settings.search.close_opened_onclear&&this.close_node(this._data.search.opn,0),this.trigger("clear_search",{nodes:this._data.search.dom,str:this._data.search.str,res:this._data.search.res}),this._data.search.str="",this._data.search.res=[],this._data.search.opn=[],this._data.search.dom=J()},this._search_open=function(d){var e=this;J.each(d.concat([]),function(h,g){if("#"===g){return !0}try{g=J("#"+g.replace(J.jstree.idregex,"\\$&"),e.element)}catch(c){}g&&g.length&&e.is_closed(g)&&(e._data.search.opn.push(g[0].id),e.open_node(g,function(){e._search_open(d)},0))})}},function(b){b.vakata.search=function(N,M,L){L=L||{},L.fuzzy!==!1&&(L.fuzzy=!0),N=L.caseSensitive?N:N.toLowerCase();var K=L.location||0,r=L.distance||100,q=L.threshold||0.6,p=N.length,o,n,m,l;return p>32&&(L.fuzzy=!1),L.fuzzy&&(o=1<<p-1,n=function(){var a={},d=0;for(d=0;p>d;d++){a[N.charAt(d)]=0}for(d=0;p>d;d++){a[N.charAt(d)]|=1<<p-d-1}return a}(),m=function(e,d){var h=e/p,g=Math.abs(K-d);return r?h+g/r:g?1:h}),l=function(P){if(P=L.caseSensitive?P:P.toLowerCase(),N===P||-1!==P.indexOf(N)){return{isMatch:!0,score:0}}if(!L.fuzzy){return{isMatch:!1,score:1}}var O,j,i=P.length,h=q,g=P.indexOf(N,K),f,d,c=p+i,a,V,U,T,S,R=1,Q=[];for(-1!==g&&(h=Math.min(m(0,g),h),g=P.lastIndexOf(N,K+p),-1!==g&&(h=Math.min(m(0,g),h))),g=-1,O=0;p>O;O++){f=0,d=c;while(d>f){m(O,K+d)<=h?f=d:c=d,d=Math.floor((c-f)/2+f)}for(c=d,V=Math.max(1,K-d+1),U=Math.min(K+d,i)+p,T=new Array(U+2),T[U+1]=(1<<O)-1,j=U;j>=V;j--){if(S=n[P.charAt(j-1)],T[j]=0===O?(T[j+1]<<1|1)&S:(T[j+1]<<1|1)&S|((a[j+1]|a[j])<<1|1)|a[j+1],T[j]&o&&(R=m(O,j-1),h>=R)){if(h=R,g=j-1,Q.push(g),!(g>K)){break}V=Math.max(1,2*K-g)}}if(m(O+1,K)>h){break}a=T}return{isMatch:g>=0,score:R}},M===!0?{search:l}:l(M)}}(J),J.jstree.defaults.sort=function(d,c){return this.get_text(d)>this.get_text(c)?1:-1},J.jstree.plugins.sort=function(a,d){this.bind=function(){d.bind.call(this),this.element.on("model.jstree",J.proxy(function(e,c){this.sort(c.parent,!0)},this)).on("rename_node.jstree create_node.jstree",J.proxy(function(e,c){this.sort(c.parent||c.node.parent,!1),this.redraw_node(c.parent||c.node.parent,!0)},this)).on("move_node.jstree copy_node.jstree",J.proxy(function(e,c){this.sort(c.parent,!1),this.redraw_node(c.parent,!0)},this))},this.sort=function(f,i){var h,g;if(f=this.get_node(f),f&&f.children&&f.children.length&&(f.children.sort(J.proxy(this.settings.sort,this)),i)){for(h=0,g=f.children_d.length;g>h;h++){this.sort(f.children_d[h],!1)}}}};var t=!1;J.jstree.defaults.state={key:"jstree",events:"changed.jstree open_node.jstree close_node.jstree check_node.jstree uncheck_node.jstree",ttl:!1,filter:!1},J.jstree.plugins.state=function(a,d){this.bind=function(){d.bind.call(this);var c=J.proxy(function(){this.element.on(this.settings.state.events,J.proxy(function(){t&&clearTimeout(t),t=setTimeout(J.proxy(function(){this.save_state()},this),100)},this)),this.trigger("state_ready")},this);this.element.on("ready.jstree",J.proxy(function(b,e){this.element.one("restore_state.jstree",c),this.restore_state()||c()},this))},this.save_state=function(){var c={state:this.get_state(),ttl:this.settings.state.ttl,sec:+new Date};J.vakata.storage.set(this.settings.state.key,JSON.stringify(c))},this.restore_state=function(){var e=J.vakata.storage.get(this.settings.state.key);if(e){try{e=JSON.parse(e)}catch(f){return !1}}return e&&e.ttl&&e.sec&&+new Date-e.sec>e.ttl?!1:(e&&e.state&&(e=e.state),e&&J.isFunction(this.settings.state.filter)&&(e=this.settings.state.filter.call(this,e)),e?(this.element.one("set_state.jstree",function(g,b){b.instance.trigger("restore_state",{state:J.extend(!0,{},e)})}),this.set_state(e),!0):!1)},this.clear_state=function(){return J.vakata.storage.del(this.settings.state.key)}},function(d,c){d.vakata.storage={set:function(f,e){return window.localStorage.setItem(f,e)},get:function(b){return window.localStorage.getItem(b)},del:function(b){return window.localStorage.removeItem(b)}}}(J),J.jstree.defaults.types={"#":{},"default":{}},J.jstree.plugins.types=function(b,a){this.init=function(d,i){var h,g;if(i&&i.types&&i.types["default"]){for(h in i.types){if("default"!==h&&"#"!==h&&i.types.hasOwnProperty(h)){for(g in i.types["default"]){i.types["default"].hasOwnProperty(g)&&i.types[h][g]===I&&(i.types[h][g]=i.types["default"][g])}}}}a.init.call(this,d,i),this._model.data["#"].type="#"},this.refresh=function(d,c){a.refresh.call(this,d,c),this._model.data["#"].type="#"},this.bind=function(){this.element.on("model.jstree",J.proxy(function(j,q){var p=this._model.data,o=q.nodes,n=this.settings.types,m,l,k="default";for(m=0,l=o.length;l>m;m++){k="default",p[o[m]].original&&p[o[m]].original.type&&n[p[o[m]].original.type]&&(k=p[o[m]].original.type),p[o[m]].data&&p[o[m]].data.jstree&&p[o[m]].data.jstree.type&&n[p[o[m]].data.jstree.type]&&(k=p[o[m]].data.jstree.type),p[o[m]].type=k,p[o[m]].icon===!0&&n[k].icon!==I&&(p[o[m]].icon=n[k].icon)}p["#"].type="#"},this)),a.bind.call(this)},this.get_json=function(d,q,p){var o,n,m=this._model.data,l=q?J.extend(!0,{},q,{no_id:!1}):{},k=a.get_json.call(this,d,l,p);if(k===!1){return !1}if(J.isArray(k)){for(o=0,n=k.length;n>o;o++){k[o].type=k[o].id&&m[k[o].id]&&m[k[o].id].type?m[k[o].id].type:"default",q&&q.no_id&&(delete k[o].id,k[o].li_attr&&k[o].li_attr.id&&delete k[o].li_attr.id,k[o].a_attr&&k[o].a_attr.id&&delete k[o].a_attr.id)}}else{k.type=k.id&&m[k.id]&&m[k.id].type?m[k.id].type:"default",q&&q.no_id&&(k=this._delete_ids(k))}return k},this._delete_ids=function(e){if(J.isArray(e)){for(var g=0,f=e.length;f>g;g++){e[g]=this._delete_ids(e[g])}return e}return delete e.id,e.li_attr&&e.li_attr.id&&delete e.li_attr.id,e.a_attr&&e.a_attr.id&&delete e.a_attr.id,e.children&&J.isArray(e.children)&&(e.children=this._delete_ids(e.children)),e},this.check=function(N,M,L,K,r){if(a.check.call(this,N,M,L,K,r)===!1){return !1}M=M&&M.id?M:this.get_node(M),L=L&&L.id?L:this.get_node(L);var q=M&&M.id?J.jstree.reference(M.id):null,p,o,n,d;switch(q=q&&q._model&&q._model.data?q._model.data:null,N){case"create_node":case"move_node":case"copy_node":if("move_node"!==N||-1===J.inArray(M.id,L.children)){if(p=this.get_rules(L),p.max_children!==I&&-1!==p.max_children&&p.max_children===L.children.length){return this._data.core.last_error={error:"check",plugin:"types",id:"types_01",reason:"max_children prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}if(p.valid_children!==I&&-1!==p.valid_children&&-1===J.inArray(M.type||"default",p.valid_children)){return this._data.core.last_error={error:"check",plugin:"types",id:"types_02",reason:"valid_children prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}if(q&&M.children_d&&M.parents){for(o=0,n=0,d=M.children_d.length;d>n;n++){o=Math.max(o,q[M.children_d[n]].parents.length)}o=o-M.parents.length+1}(0>=o||o===I)&&(o=1);do{if(p.max_depth!==I&&-1!==p.max_depth&&p.max_depth<o){return this._data.core.last_error={error:"check",plugin:"types",id:"types_03",reason:"max_depth prevents function: "+N,data:JSON.stringify({chk:N,pos:K,obj:M&&M.id?M.id:!1,par:L&&L.id?L.id:!1})},!1}L=this.get_node(L.parent),p=this.get_rules(L),o++}while(L)}}return !0},this.get_rules=function(d){if(d=this.get_node(d),!d){return !1}var e=this.get_type(d,!0);return e.max_depth===I&&(e.max_depth=-1),e.max_children===I&&(e.max_children=-1),e.valid_children===I&&(e.valid_children=-1),e},this.get_type=function(d,e){return d=this.get_node(d),d?e?J.extend({type:d.type},this.settings.types[d.type]):d.type:!1},this.set_type=function(p,o){var n,m,l,k,j;if(J.isArray(p)){for(p=p.slice(),m=0,l=p.length;l>m;m++){this.set_type(p[m],o)}return !0}return n=this.settings.types,p=this.get_node(p),n[o]&&p?(k=p.type,j=this.get_icon(p),p.type=o,(j===!0||n[k]&&n[k].icon!==I&&j===n[k].icon)&&this.set_icon(p,n[o].icon!==I?n[o].icon:!0),!0):!1}},J.jstree.defaults.unique={case_sensitive:!1,duplicate:function(d,c){return d+" ("+c+")"}},J.jstree.plugins.unique=function(b,a){this.check=function(O,N,M,L,K){if(a.check.call(this,O,N,M,L,K)===!1){return !1}if(N=N&&N.id?N:this.get_node(N),M=M&&M.id?M:this.get_node(M),!M||!M.children){return !0}var r="rename_node"===O?L:N.text,q=[],p=this.settings.unique.case_sensitive,o=this._model.data,n,d;for(n=0,d=M.children.length;d>n;n++){q.push(p?o[M.children[n]].text:o[M.children[n]].text.toLowerCase())}switch(p||(r=r.toLowerCase()),O){case"delete_node":return !0;case"rename_node":return n=-1===J.inArray(r,q)||N.text&&N.text[p?"toString":"toLowerCase"]()===r,n||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_01",reason:"Child with name "+r+" already exists. Preventing: "+O,data:JSON.stringify({chk:O,pos:L,obj:N&&N.id?N.id:!1,par:M&&M.id?M.id:!1})}),n;case"create_node":return n=-1===J.inArray(r,q),n||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_04",reason:"Child with name "+r+" already exists. Preventing: "+O,data:JSON.stringify({chk:O,pos:L,obj:N&&N.id?N.id:!1,par:M&&M.id?M.id:!1})}),n;case"copy_node":return n=-1===J.inArray(r,q),n||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_02",reason:"Child with name "+r+" already exists. Preventing: "+O,data:JSON.stringify({chk:O,pos:L,obj:N&&N.id?N.id:!1,par:M&&M.id?M.id:!1})}),n;case"move_node":return n=N.parent===M.id||-1===J.inArray(r,q),n||(this._data.core.last_error={error:"check",plugin:"unique",id:"unique_03",reason:"Child with name "+r+" already exists. Preventing: "+O,data:JSON.stringify({chk:O,pos:L,obj:N&&N.id?N.id:!1,par:M&&M.id?M.id:!1})}),n}return !0},this.create_node=function(T,S,R,Q,P){if(!S||S.text===I){if(null===T&&(T="#"),T=this.get_node(T),!T){return a.create_node.call(this,T,S,R,Q,P)}if(R=R===I?"last":R,!R.toString().match(/^(before|after)$/)&&!P&&!this.is_loaded(T)){return a.create_node.call(this,T,S,R,Q,P)}S||(S={});var O,N,M,L,K,r=this._model.data,q=this.settings.unique.case_sensitive,d=this.settings.unique.duplicate;for(N=O=this.get_string("New node"),M=[],L=0,K=T.children.length;K>L;L++){M.push(q?r[T.children[L]].text:r[T.children[L]].text.toLowerCase())}L=1;while(-1!==J.inArray(q?N:N.toLowerCase(),M)){N=d.call(this,O,++L).toString()}S.text=N}return a.create_node.call(this,T,S,R,Q,P)}};var s=document.createElement("DIV");s.setAttribute("unselectable","on"),s.setAttribute("role","presentation"),s.className="jstree-wholerow",s.innerHTML="&#160;",J.jstree.plugins.wholerow=function(a,d){this.bind=function(){d.bind.call(this),this.element.on("ready.jstree set_state.jstree",J.proxy(function(){this.hide_dots()},this)).on("init.jstree loading.jstree ready.jstree",J.proxy(function(){this.get_container_ul().addClass("jstree-wholerow-ul")},this)).on("deselect_all.jstree",J.proxy(function(e,c){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked")},this)).on("changed.jstree",J.proxy(function(g,f){this.element.find(".jstree-wholerow-clicked").removeClass("jstree-wholerow-clicked");var j=!1,i,h;for(i=0,h=f.selected.length;h>i;i++){j=this.get_node(f.selected[i],!0),j&&j.length&&j.children(".jstree-wholerow").addClass("jstree-wholerow-clicked")}},this)).on("open_node.jstree",J.proxy(function(e,c){this.get_node(c.node,!0).find(".jstree-clicked").parent().children(".jstree-wholerow").addClass("jstree-wholerow-clicked")},this)).on("hover_node.jstree dehover_node.jstree",J.proxy(function(e,c){"hover_node"===e.type&&this.is_disabled(c.node)||this.get_node(c.node,!0).children(".jstree-wholerow")["hover_node"===e.type?"addClass":"removeClass"]("jstree-wholerow-hovered")},this)).on("contextmenu.jstree",".jstree-wholerow",J.proxy(function(e){e.preventDefault();var f=J.Event("contextmenu",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,pageX:e.pageX,pageY:e.pageY});J(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f)},this)).on("click.jstree",".jstree-wholerow",function(e){e.stopImmediatePropagation();var f=J.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});J(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f).focus()}).on("click.jstree",".jstree-leaf > .jstree-ocl",J.proxy(function(e){e.stopImmediatePropagation();var f=J.Event("click",{metaKey:e.metaKey,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey});J(e.currentTarget).closest(".jstree-node").children(".jstree-anchor").first().trigger(f).focus()},this)).on("mouseover.jstree",".jstree-wholerow, .jstree-icon",J.proxy(function(b){return b.stopImmediatePropagation(),this.is_disabled(b.currentTarget)||this.hover_node(b.currentTarget),!1},this)).on("mouseleave.jstree",".jstree-node",J.proxy(function(b){this.dehover_node(b.currentTarget)},this))},this.teardown=function(){this.settings.wholerow&&this.element.find(".jstree-wholerow").remove(),d.teardown.call(this)},this.redraw_node=function(c,k,j,i){if(c=d.redraw_node.apply(this,arguments)){var h=s.cloneNode(!0);-1!==J.inArray(c.id,this._data.core.selected)&&(h.className+=" jstree-wholerow-clicked"),this._data.core.focused&&this._data.core.focused===c.id&&(h.className+=" jstree-wholerow-hovered"),c.insertBefore(h,c.childNodes[0])}return c}},function(e){if(document.registerElement&&Object&&Object.create){var d=Object.create(HTMLElement.prototype);d.createdCallback=function(){var a={core:{},plugins:[]},g;for(g in e.jstree.plugins){e.jstree.plugins.hasOwnProperty(g)&&this.attributes[g]&&(a.plugins.push(g),this.getAttribute(g)&&JSON.parse(this.getAttribute(g))&&(a[g]=JSON.parse(this.getAttribute(g))))}for(g in e.jstree.defaults.core){e.jstree.defaults.core.hasOwnProperty(g)&&this.attributes[g]&&(a.core[g]=JSON.parse(this.getAttribute(g))||this.getAttribute(g))}jQuery(this).jstree(a)};try{document.registerElement("vakata-jstree",{prototype:d})}catch(f){}}}(jQuery)}});
(function(a){if(typeof exports=="object"&&typeof module=="object"){module.exports=a()}else{if(typeof define=="function"&&define.amd){return define([],a)}else{this.CodeMirror=a()}}})(function(){var cn=/gecko\/\d/i.test(navigator.userAgent);var ey=/MSIE \d/.test(navigator.userAgent);var bH=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);var dz=ey||bH;var l=dz&&(ey?document.documentMode||6:bH[1]);var cU=/WebKit\//.test(navigator.userAgent);var dB=cU&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var c6=/Chrome\//.test(navigator.userAgent);var dQ=/Opera\//.test(navigator.userAgent);var aB=/Apple Computer/.test(navigator.vendor);var a7=/KHTML\//.test(navigator.userAgent);var c1=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var fi=/PhantomJS/.test(navigator.userAgent);var eP=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var d3=eP||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent);var b5=eP||/Mac/.test(navigator.platform);var aM=/win/i.test(navigator.platform);var aU=dQ&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);if(aU){aU=Number(aU[1])}if(aU&&aU>=15){dQ=false;cU=true}var bO=b5&&(dB||dQ&&(aU==null||aU<12.11));var fS=cn||(dz&&l>=9);var fV=false,a3=false;function J(f1,f2){if(!(this instanceof J)){return new J(f1,f2)}this.options=f2=f2?aK(f2):{};aK(eR,f2,false);cc(f2);var f6=f2.value;if(typeof f6=="string"){f6=new at(f6,f2.mode)}this.doc=f6;var f5=this.display=new ew(f1,f6);f5.wrapper.CodeMirror=this;dZ(this);cK(this);if(f2.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}if(f2.autofocus&&!d3){en(this)}this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,draggingText:false,highlight:new f0()};if(dz&&l<11){setTimeout(ct(fc,this,true),20)}fD(this);be();cE(this);this.curOp.forceUpdate=true;dY(this,f6);if((f2.autofocus&&!d3)||dC()==f5.input){setTimeout(ct(cy,this),20)}else{aR(this)}for(var f4 in ba){if(ba.hasOwnProperty(f4)){ba[f4](this,f2[f4],ca)}}dT(this);for(var f3=0;f3<a4.length;++f3){a4[f3](this)}al(this)}function ew(f1,f3){var f4=this;var f2=f4.input=fK("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");if(cU){f2.style.width="1000px"}else{f2.setAttribute("wrap","off")}if(eP){f2.style.border="1px solid black"}f2.setAttribute("autocorrect","off");f2.setAttribute("autocapitalize","off");f2.setAttribute("spellcheck","false");f4.inputDiv=fK("div",[f2],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");f4.scrollbarH=fK("div",[fK("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");f4.scrollbarV=fK("div",[fK("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");f4.scrollbarFiller=fK("div",null,"CodeMirror-scrollbar-filler");f4.gutterFiller=fK("div",null,"CodeMirror-gutter-filler");f4.lineDiv=fK("div",null,"CodeMirror-code");f4.selectionDiv=fK("div",null,null,"position: relative; z-index: 1");f4.cursorDiv=fK("div",null,"CodeMirror-cursors");f4.measure=fK("div",null,"CodeMirror-measure");f4.lineMeasure=fK("div",null,"CodeMirror-measure");f4.lineSpace=fK("div",[f4.measure,f4.lineMeasure,f4.selectionDiv,f4.cursorDiv,f4.lineDiv],null,"position: relative; outline: none");f4.mover=fK("div",[fK("div",[f4.lineSpace],"CodeMirror-lines")],null,"position: relative");f4.sizer=fK("div",[f4.mover],"CodeMirror-sizer");f4.heightForcer=fK("div",null,null,"position: absolute; height: "+bg+"px; width: 1px;");f4.gutters=fK("div",null,"CodeMirror-gutters");f4.lineGutter=null;f4.scroller=fK("div",[f4.sizer,f4.heightForcer,f4.gutters],"CodeMirror-scroll");f4.scroller.setAttribute("tabIndex","-1");f4.wrapper=fK("div",[f4.inputDiv,f4.scrollbarH,f4.scrollbarV,f4.scrollbarFiller,f4.gutterFiller,f4.scroller],"CodeMirror");if(dz&&l<8){f4.gutters.style.zIndex=-1;f4.scroller.style.paddingRight=0}if(eP){f2.style.width="0px"}if(!cU){f4.scroller.draggable=true}if(a7){f4.inputDiv.style.height="1px";f4.inputDiv.style.position="absolute"}if(dz&&l<8){f4.scrollbarH.style.minHeight=f4.scrollbarV.style.minWidth="18px"}if(f1.appendChild){f1.appendChild(f4.wrapper)}else{f1(f4.wrapper)}f4.viewFrom=f4.viewTo=f3.first;f4.view=[];f4.externalMeasured=null;f4.viewOffset=0;f4.lastSizeC=0;f4.updateLineNumbers=null;f4.lineNumWidth=f4.lineNumInnerWidth=f4.lineNumChars=null;f4.prevInput="";f4.alignWidgets=false;f4.pollingFast=false;f4.poll=new f0();f4.cachedCharWidth=f4.cachedTextHeight=f4.cachedPaddingH=null;f4.inaccurateSelection=false;f4.maxLine=null;f4.maxLineLength=0;f4.maxLineChanged=false;f4.wheelDX=f4.wheelDY=f4.wheelStartX=f4.wheelStartY=null;f4.shift=false;f4.selForContextMenu=null}function bp(f1){f1.doc.mode=J.getMode(f1.options,f1.doc.modeOption);d8(f1)}function d8(f1){f1.doc.iter(function(f2){if(f2.stateAfter){f2.stateAfter=null}if(f2.styles){f2.styles=null}});f1.doc.frontier=f1.doc.first;d2(f1,100);f1.state.modeGen++;if(f1.curOp){ag(f1)}}function eu(f1){if(f1.options.lineWrapping){fo(f1.display.wrapper,"CodeMirror-wrap");f1.display.sizer.style.minWidth=""}else{f(f1.display.wrapper,"CodeMirror-wrap");g(f1)}Y(f1);ag(f1);aj(f1);setTimeout(function(){eM(f1)},100)}function a9(f1){var f3=aT(f1.display),f2=f1.options.lineWrapping;var f4=f2&&Math.max(5,f1.display.scroller.clientWidth/dt(f1.display)-3);return function(f6){if(fk(f1.doc,f6)){return 0}var f5=0;if(f6.widgets){for(var f7=0;f7<f6.widgets.length;f7++){if(f6.widgets[f7].height){f5+=f6.widgets[f7].height}}}if(f2){return f5+(Math.ceil(f6.text.length/f4)||1)*f3}else{return f5+f3}}}function Y(f1){var f3=f1.doc,f2=a9(f1);f3.iter(function(f4){var f5=f2(f4);if(f5!=f4.height){fO(f4,f5)}})}function fY(f1){var f3=eX[f1.options.keyMap],f2=f3.style;f1.display.wrapper.className=f1.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(f2?" cm-keymap-"+f2:"")}function cK(f1){f1.display.wrapper.className=f1.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+f1.options.theme.replace(/(^|\s)\s*/g," cm-s-");aj(f1)}function dl(f1){dZ(f1);ag(f1);setTimeout(function(){es(f1)},20)}function dZ(f1){var f2=f1.display.gutters,f6=f1.options.gutters;dP(f2);for(var f3=0;f3<f6.length;++f3){var f4=f6[f3];var f5=f2.appendChild(fK("div",null,"CodeMirror-gutter "+f4));if(f4=="CodeMirror-linenumbers"){f1.display.lineGutter=f5;f5.style.width=(f1.display.lineNumWidth||1)+"px"}}f2.style.display=f3?"":"none";cY(f1)}function cY(f1){var f2=f1.display.gutters.offsetWidth;f1.display.sizer.style.marginLeft=f2+"px";f1.display.scrollbarH.style.left=f1.options.fixedGutter?f2+"px":0}function d9(f3){if(f3.height==0){return 0}var f2=f3.text.length,f1,f5=f3;while(f1=eC(f5)){var f4=f1.find(0,true);f5=f4.from.line;f2+=f4.from.ch-f4.to.ch}f5=f3;while(f1=ei(f5)){var f4=f1.find(0,true);f2-=f5.text.length-f4.from.ch;f5=f4.to.line;f2+=f5.text.length-f4.to.ch}return f2}function g(f1){var f3=f1.display,f2=f1.doc;f3.maxLine=e2(f2,f2.first);f3.maxLineLength=d9(f3.maxLine);f3.maxLineChanged=true;f2.iter(function(f5){var f4=d9(f5);if(f4>f3.maxLineLength){f3.maxLineLength=f4;f3.maxLine=f5}})}function cc(f1){var f2=db(f1.gutters,"CodeMirror-linenumbers");if(f2==-1&&f1.lineNumbers){f1.gutters=f1.gutters.concat(["CodeMirror-linenumbers"])}else{if(f2>-1&&!f1.lineNumbers){f1.gutters=f1.gutters.slice(0);f1.gutters.splice(f2,1)}}}function cM(f1){return f1.display.scroller.clientHeight-f1.display.wrapper.clientHeight<bg-3}function dq(f2){var f1=f2.display.scroller;return{clientHeight:f1.clientHeight,barHeight:f2.display.scrollbarV.clientHeight,scrollWidth:f1.scrollWidth,clientWidth:f1.clientWidth,hScrollbarTakesSpace:cM(f2),barWidth:f2.display.scrollbarH.clientWidth,docHeight:Math.round(f2.doc.height+bG(f2.display))}}function eM(f8,f1){if(!f1){f1=dq(f8)}var f5=f8.display,f2=k(f5.measure);var f9=f1.docHeight+bg;var f3=f1.scrollWidth>f1.clientWidth;if(f3&&f1.scrollWidth<=f1.clientWidth+1&&f2>0&&!f1.hScrollbarTakesSpace){f3=false}var f4=f9>f1.clientHeight;if(f4){f5.scrollbarV.style.display="block";f5.scrollbarV.style.bottom=f3?f2+"px":"0";f5.scrollbarV.firstChild.style.height=Math.max(0,f9-f1.clientHeight+(f1.barHeight||f5.scrollbarV.clientHeight))+"px"}else{f5.scrollbarV.style.display="";f5.scrollbarV.firstChild.style.height="0"}if(f3){f5.scrollbarH.style.display="block";f5.scrollbarH.style.right=f4?f2+"px":"0";f5.scrollbarH.firstChild.style.width=(f1.scrollWidth-f1.clientWidth+(f1.barWidth||f5.scrollbarH.clientWidth))+"px"}else{f5.scrollbarH.style.display="";f5.scrollbarH.firstChild.style.width="0"}if(f3&&f4){f5.scrollbarFiller.style.display="block";f5.scrollbarFiller.style.height=f5.scrollbarFiller.style.width=f2+"px"}else{f5.scrollbarFiller.style.display=""}if(f3&&f8.options.coverGutterNextToScrollbar&&f8.options.fixedGutter){f5.gutterFiller.style.display="block";f5.gutterFiller.style.height=f2+"px";f5.gutterFiller.style.width=f5.gutters.offsetWidth+"px"}else{f5.gutterFiller.style.display=""}if(!f8.state.checkedOverlayScrollbar&&f1.clientHeight>0){if(f2===0){var f7=b5&&!c1?"12px":"18px";f5.scrollbarV.style.minWidth=f5.scrollbarH.style.minHeight=f7;var f6=function(ga){if(M(ga)!=f5.scrollbarV&&M(ga)!=f5.scrollbarH){cW(f8,eg)(ga)}};bV(f5.scrollbarV,"mousedown",f6);bV(f5.scrollbarH,"mousedown",f6)}f8.state.checkedOverlayScrollbar=true}}function b4(f4,f8,f3){var f5=f3&&f3.top!=null?Math.max(0,f3.top):f4.scroller.scrollTop;f5=Math.floor(f5-eV(f4));var f1=f3&&f3.bottom!=null?f3.bottom:f5+f4.wrapper.clientHeight;var f6=bE(f8,f5),f7=bE(f8,f1);if(f3&&f3.ensure){var f2=f3.ensure.from.line,f9=f3.ensure.to.line;if(f2<f6){return{from:f2,to:bE(f8,bK(e2(f8,f2))+f4.wrapper.clientHeight)}}if(Math.min(f9,f8.lastLine())>=f7){return{from:bE(f8,bK(e2(f8,f9))-f4.wrapper.clientHeight),to:f9}}}return{from:f6,to:Math.max(f7,f6+1)}}function es(f9){var f7=f9.display,f8=f7.view;if(!f7.alignWidgets&&(!f7.gutters.firstChild||!f9.options.fixedGutter)){return}var f5=dL(f7)-f7.scroller.scrollLeft+f9.doc.scrollLeft;var f1=f7.gutters.offsetWidth,f2=f5+"px";for(var f4=0;f4<f8.length;f4++){if(!f8[f4].hidden){if(f9.options.fixedGutter&&f8[f4].gutter){f8[f4].gutter.style.left=f2}var f6=f8[f4].alignable;if(f6){for(var f3=0;f3<f6.length;f3++){f6[f3].style.left=f2}}}}if(f9.options.fixedGutter){f7.gutters.style.left=(f5+f1)+"px"}}function dT(f1){if(!f1.options.lineNumbers){return false}var f6=f1.doc,f2=ef(f1.options,f6.first+f6.size-1),f5=f1.display;if(f2.length!=f5.lineNumChars){var f7=f5.measure.appendChild(fK("div",[fK("div",f2)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var f3=f7.firstChild.offsetWidth,f4=f7.offsetWidth-f3;f5.lineGutter.style.width="";f5.lineNumInnerWidth=Math.max(f3,f5.lineGutter.offsetWidth-f4);f5.lineNumWidth=f5.lineNumInnerWidth+f4;f5.lineNumChars=f5.lineNumInnerWidth?f2.length:-1;f5.lineGutter.style.width=f5.lineNumWidth+"px";cY(f1);return true}return false}function ef(f1,f2){return String(f1.lineNumberFormatter(f2+f1.firstLineNumber))}function dL(f1){return f1.scroller.getBoundingClientRect().left-f1.sizer.getBoundingClientRect().left}function aG(f2,f1,f3){var f4=f2.display;this.viewport=f1;this.visible=b4(f4,f2.doc,f1);this.editorIsHidden=!f4.wrapper.offsetWidth;this.wrapperHeight=f4.wrapper.clientHeight;this.oldViewFrom=f4.viewFrom;this.oldViewTo=f4.viewTo;this.oldScrollerWidth=f4.scroller.clientWidth;this.force=f3;this.dims=e0(f2)}function D(ga,f4){var f5=ga.display,f9=ga.doc;if(f4.editorIsHidden){ek(ga);return false}if(!f4.force&&f4.visible.from>=f5.viewFrom&&f4.visible.to<=f5.viewTo&&(f5.updateLineNumbers==null||f5.updateLineNumbers>=f5.viewTo)&&c5(ga)==0){return false}if(dT(ga)){ek(ga);f4.dims=e0(ga)}var f3=f9.first+f9.size;var f7=Math.max(f4.visible.from-ga.options.viewportMargin,f9.first);var f8=Math.min(f3,f4.visible.to+ga.options.viewportMargin);if(f5.viewFrom<f7&&f7-f5.viewFrom<20){f7=Math.max(f9.first,f5.viewFrom)}if(f5.viewTo>f8&&f5.viewTo-f8<20){f8=Math.min(f3,f5.viewTo)}if(a3){f7=aS(ga.doc,f7);f8=dR(ga.doc,f8)}var f2=f7!=f5.viewFrom||f8!=f5.viewTo||f5.lastSizeC!=f4.wrapperHeight;cN(ga,f7,f8);f5.viewOffset=bK(e2(ga.doc,f5.viewFrom));ga.display.mover.style.top=f5.viewOffset+"px";var f1=c5(ga);if(!f2&&f1==0&&!f4.force&&(f5.updateLineNumbers==null||f5.updateLineNumbers>=f5.viewTo)){return false}var f6=dC();if(f1>4){f5.lineDiv.style.display="none"}cl(ga,f5.updateLineNumbers,f4.dims);if(f1>4){f5.lineDiv.style.display=""}if(f6&&dC()!=f6&&f6.offsetHeight){f6.focus()}dP(f5.cursorDiv);dP(f5.selectionDiv);if(f2){f5.lastSizeC=f4.wrapperHeight;d2(ga,400)}f5.updateLineNumbers=null;return true}function ci(f2,f6){var f4=f6.force,f1=f6.viewport;for(var f5=true;;f5=false){if(f5&&f2.options.lineWrapping&&f6.oldScrollerWidth!=f2.display.scroller.clientWidth){f4=true}else{f4=false;if(f1&&f1.top!=null){f1={top:Math.min(f2.doc.height+bG(f2.display)-bg-f2.display.scroller.clientHeight,f1.top)}}f6.visible=b4(f2.display,f2.doc,f1);if(f6.visible.from>=f2.display.viewFrom&&f6.visible.to<=f2.display.viewTo){break}}if(!D(f2,f6)){break}a5(f2);var f3=dq(f2);bA(f2);dp(f2,f3);eM(f2,f3)}ad(f2,"update",f2);if(f2.display.viewFrom!=f6.oldViewFrom||f2.display.viewTo!=f6.oldViewTo){ad(f2,"viewportChange",f2,f2.display.viewFrom,f2.display.viewTo)}}function dH(f2,f1){var f4=new aG(f2,f1);if(D(f2,f4)){a5(f2);ci(f2,f4);var f3=dq(f2);bA(f2);dp(f2,f3);eM(f2,f3)}}function dp(f1,f2){f1.display.sizer.style.minHeight=f1.display.heightForcer.style.top=f2.docHeight+"px";f1.display.gutters.style.height=Math.max(f2.docHeight,f2.clientHeight-bg)+"px"}function fN(f1,f2){if(f1.display.sizer.offsetWidth+f1.display.gutters.offsetWidth<f1.display.scroller.clientWidth-1){f1.display.sizer.style.minHeight=f1.display.heightForcer.style.top="0px";f1.display.gutters.style.height=f2.docHeight+"px"}}function a5(f8){var f6=f8.display;var f2=f6.lineDiv.offsetTop;for(var f3=0;f3<f6.view.length;f3++){var f9=f6.view[f3],ga;if(f9.hidden){continue}if(dz&&l<8){var f5=f9.node.offsetTop+f9.node.offsetHeight;ga=f5-f2;f2=f5}else{var f4=f9.node.getBoundingClientRect();ga=f4.bottom-f4.top}var f7=f9.line.height-ga;if(ga<2){ga=aT(f6)}if(f7>0.001||f7<-0.001){fO(f9.line,ga);b9(f9.line);if(f9.rest){for(var f1=0;f1<f9.rest.length;f1++){b9(f9.rest[f1])}}}}}function b9(f1){if(f1.widgets){for(var f2=0;f2<f1.widgets.length;++f2){f1.widgets[f2].height=f1.widgets[f2].node.offsetHeight}}}function e0(f1){var f6=f1.display,f4={},f3={};var f5=f6.gutters.clientLeft;for(var f7=f6.gutters.firstChild,f2=0;f7;f7=f7.nextSibling,++f2){f4[f1.options.gutters[f2]]=f7.offsetLeft+f7.clientLeft+f5;f3[f1.options.gutters[f2]]=f7.clientWidth}return{fixedPos:dL(f6),gutterTotalWidth:f6.gutters.offsetWidth,gutterLeft:f4,gutterWidth:f3,wrapperWidth:f6.wrapper.clientWidth}}function cl(gc,f3,gb){var f8=gc.display,ge=gc.options.lineNumbers;var f1=f8.lineDiv,gd=f1.firstChild;function f7(gg){var gf=gg.nextSibling;if(cU&&b5&&gc.display.currentWheelTarget==gg){gg.style.display="none"}else{gg.parentNode.removeChild(gg)}return gf}var f9=f8.view,f6=f8.viewFrom;for(var f4=0;f4<f9.length;f4++){var f5=f9[f4];if(f5.hidden){}else{if(!f5.node){var f2=aD(gc,f5,f6,gb);f1.insertBefore(f2,gd)}else{while(gd!=f5.node){gd=f7(gd)}var ga=ge&&f3!=null&&f3<=f6&&f5.lineNumber;if(f5.changes){if(db(f5.changes,"gutter")>-1){ga=false}aa(gc,f5,f6,gb)}if(ga){dP(f5.lineNumber);f5.lineNumber.appendChild(document.createTextNode(ef(gc.options,f6)))}gd=f5.node.nextSibling}}f6+=f5.size}while(gd){gd=f7(gd)}}function aa(f1,f3,f5,f6){for(var f2=0;f2<f3.changes.length;f2++){var f4=f3.changes[f2];if(f4=="text"){e8(f1,f3)}else{if(f4=="gutter"){c9(f1,f3,f5,f6)}else{if(f4=="class"){dw(f3)}else{if(f4=="widget"){an(f3,f6)}}}}}f3.changes=null}function fw(f1){if(f1.node==f1.text){f1.node=fK("div",null,null,"position: relative");if(f1.text.parentNode){f1.text.parentNode.replaceChild(f1.node,f1.text)}f1.node.appendChild(f1.text);if(dz&&l<8){f1.node.style.zIndex=2}}return f1.node}function eh(f2){var f1=f2.bgClass?f2.bgClass+" "+(f2.line.bgClass||""):f2.line.bgClass;if(f1){f1+=" CodeMirror-linebackground"}if(f2.background){if(f1){f2.background.className=f1}else{f2.background.parentNode.removeChild(f2.background);f2.background=null}}else{if(f1){var f3=fw(f2);f2.background=f3.insertBefore(fK("div",null,f1),f3.firstChild)}}}function dJ(f1,f2){var f3=f1.display.externalMeasured;if(f3&&f3.line==f2.line){f1.display.externalMeasured=null;f2.measure=f3.measure;return f3.built}return eF(f1,f2)}function e8(f1,f4){var f2=f4.text.className;var f3=dJ(f1,f4);if(f4.text==f4.node){f4.node=f3.pre}f4.text.parentNode.replaceChild(f3.pre,f4.text);f4.text=f3.pre;if(f3.bgClass!=f4.bgClass||f3.textClass!=f4.textClass){f4.bgClass=f3.bgClass;f4.textClass=f3.textClass;dw(f4)}else{if(f2){f4.text.className=f2}}}function dw(f2){eh(f2);if(f2.line.wrapClass){fw(f2).className=f2.line.wrapClass}else{if(f2.node!=f2.text){f2.node.className=""}}var f1=f2.textClass?f2.textClass+" "+(f2.line.textClass||""):f2.line.textClass;f2.text.className=f1||""}function c9(f9,f7,f6,f8){if(f7.gutter){f7.node.removeChild(f7.gutter);f7.gutter=null}var f4=f7.line.gutterMarkers;if(f9.options.lineNumbers||f4){var f2=fw(f7);var f5=f7.gutter=f2.insertBefore(fK("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(f9.options.fixedGutter?f8.fixedPos:-f8.gutterTotalWidth)+"px"),f7.text);if(f9.options.lineNumbers&&(!f4||!f4["CodeMirror-linenumbers"])){f7.lineNumber=f5.appendChild(fK("div",ef(f9.options,f6),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+f8.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f9.display.lineNumInnerWidth+"px"))}if(f4){for(var f3=0;f3<f9.options.gutters.length;++f3){var f1=f9.options.gutters[f3],ga=f4.hasOwnProperty(f1)&&f4[f1];if(ga){f5.appendChild(fK("div",[ga],"CodeMirror-gutter-elt","left: "+f8.gutterLeft[f1]+"px; width: "+f8.gutterWidth[f1]+"px"))}}}}}function an(f1,f4){if(f1.alignable){f1.alignable=null}for(var f3=f1.node.firstChild,f2;f3;f3=f2){var f2=f3.nextSibling;if(f3.className=="CodeMirror-linewidget"){f1.node.removeChild(f3)}}fh(f1,f4)}function aD(f1,f3,f4,f5){var f2=dJ(f1,f3);f3.text=f3.node=f2.pre;if(f2.bgClass){f3.bgClass=f2.bgClass}if(f2.textClass){f3.textClass=f2.textClass}dw(f3);c9(f1,f3,f4,f5);fh(f3,f5);return f3.node}function fh(f2,f3){fP(f2.line,f2,f3,true);if(f2.rest){for(var f1=0;f1<f2.rest.length;f1++){fP(f2.rest[f1],f2,f3,false)}}}function fP(f9,f6,f8,f4){if(!f9.widgets){return}var f1=fw(f6);for(var f3=0,f7=f9.widgets;f3<f7.length;++f3){var f5=f7[f3],f2=fK("div",[f5.node],"CodeMirror-linewidget");if(!f5.handleMouseEvents){f2.ignoreEvents=true}bD(f5,f2,f6,f8);if(f4&&f5.above){f1.insertBefore(f2,f6.gutter||f6.text)}else{f1.appendChild(f2)}ad(f5,"redraw")}}function bD(f4,f3,f1,f5){if(f4.noHScroll){(f1.alignable||(f1.alignable=[])).push(f3);var f2=f5.wrapperWidth;f3.style.left=f5.fixedPos+"px";if(!f4.coverGutter){f2-=f5.gutterTotalWidth;f3.style.paddingLeft=f5.gutterTotalWidth+"px"}f3.style.width=f2+"px"}if(f4.coverGutter){f3.style.zIndex=5;f3.style.position="relative";if(!f4.noHScroll){f3.style.marginLeft=-f5.gutterTotalWidth+"px"}}}var X=J.Pos=function(f1,f2){if(!(this instanceof X)){return new X(f1,f2)}this.line=f1;this.ch=f2};var cd=J.cmpPos=function(f2,f1){return f2.line-f1.line||f2.ch-f1.ch};function ch(f1){return X(f1.line,f1.ch)}function bv(f2,f1){return cd(f2,f1)<0?f1:f2}function aq(f2,f1){return cd(f2,f1)<0?f2:f1}function fL(f1,f2){this.ranges=f1;this.primIndex=f2}fL.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(f1){if(f1==this){return true}if(f1.primIndex!=this.primIndex||f1.ranges.length!=this.ranges.length){return false}for(var f3=0;f3<this.ranges.length;f3++){var f2=this.ranges[f3],f4=f1.ranges[f3];if(cd(f2.anchor,f4.anchor)!=0||cd(f2.head,f4.head)!=0){return false}}return true},deepCopy:function(){for(var f1=[],f2=0;f2<this.ranges.length;f2++){f1[f2]=new dM(ch(this.ranges[f2].anchor),ch(this.ranges[f2].head))}return new fL(f1,this.primIndex)},somethingSelected:function(){for(var f1=0;f1<this.ranges.length;f1++){if(!this.ranges[f1].empty()){return true}}return false},contains:function(f4,f1){if(!f1){f1=f4}for(var f3=0;f3<this.ranges.length;f3++){var f2=this.ranges[f3];if(cd(f1,f2.from())>=0&&cd(f4,f2.to())<=0){return f3}}return -1}};function dM(f1,f2){this.anchor=f1;this.head=f2}dM.prototype={from:function(){return aq(this.anchor,this.head)},to:function(){return bv(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};function cu(f1,f8){var f3=f1[f8];f1.sort(function(gb,ga){return cd(gb.from(),ga.from())});f8=db(f1,f3);for(var f5=1;f5<f1.length;f5++){var f9=f1[f5],f2=f1[f5-1];if(cd(f2.to(),f9.from())>=0){var f6=aq(f2.from(),f9.from()),f7=bv(f2.to(),f9.to());var f4=f2.empty()?f9.from()==f9.head:f2.from()==f2.head;if(f5<=f8){--f8}f1.splice(--f5,2,new dM(f4?f7:f6,f4?f6:f7))}}return new fL(f1,f8)}function eG(f1,f2){return new fL([new dM(f1,f2||f1)],0)}function cZ(f1,f2){return Math.max(f1.first,Math.min(f2,f1.first+f1.size-1))}function fx(f2,f3){if(f3.line<f2.first){return X(f2.first,0)}var f1=f2.first+f2.size-1;if(f3.line>f1){return X(f1,e2(f2,f1).text.length)}return fg(f3,e2(f2,f3.line).text.length)}function fg(f3,f2){var f1=f3.ch;if(f1==null||f1>f2){return X(f3.line,f2)}else{if(f1<0){return X(f3.line,0)}else{return f3}}}function b7(f2,f1){return f1>=f2.first&&f1<f2.first+f2.size}function dN(f3,f4){for(var f1=[],f2=0;f2<f4.length;f2++){f1[f2]=fx(f3,f4[f2])}return f1}function fj(f6,f2,f5,f1){if(f6.cm&&f6.cm.display.shift||f6.extend){var f4=f2.anchor;if(f1){var f3=cd(f5,f4)<0;if(f3!=(cd(f1,f4)<0)){f4=f5;f5=f1}else{if(f3!=(cd(f5,f1)<0)){f5=f1}}}return new dM(f4,f5)}else{return new dM(f1||f5,f5)}}function fH(f4,f3,f1,f2){bS(f4,new fL([fj(f4,f4.sel.primary(),f3,f1)],0),f2)}function aw(f6,f5,f3){for(var f2=[],f4=0;f4<f6.sel.ranges.length;f4++){f2[f4]=fj(f6,f6.sel.ranges[f4],f5[f4],null)}var f1=cu(f2,f6.sel.primIndex);bS(f6,f1,f3)}function e(f5,f4,f2,f3){var f1=f5.sel.ranges.slice(0);f1[f4]=f2;bS(f5,cu(f1,f5.sel.primIndex),f3)}function H(f4,f2,f3,f1){bS(f4,eG(f2,f3),f1)}function c(f3,f1){var f2={ranges:f1.ranges,update:function(f4){this.ranges=[];for(var f5=0;f5<f4.length;f5++){this.ranges[f5]=new dM(fx(f3,f4[f5].anchor),fx(f3,f4[f5].head))}}};aC(f3,"beforeSelectionChange",f3,f2);if(f3.cm){aC(f3.cm,"beforeSelectionChange",f3.cm,f2)}if(f2.ranges!=f1.ranges){return cu(f2.ranges,f2.ranges.length-1)}else{return f1}}function eU(f5,f4,f2){var f1=f5.history.done,f3=fv(f1);if(f3&&f3.ranges){f1[f1.length-1]=f4;ec(f5,f4,f2)}else{bS(f5,f4,f2)}}function bS(f3,f2,f1){ec(f3,f2,f1);fU(f3,f3.sel,f3.cm?f3.cm.curOp.id:NaN,f1)}function ec(f4,f3,f2){if(e5(f4,"beforeSelectionChange")||f4.cm&&e5(f4.cm,"beforeSelectionChange")){f3=c(f4,f3)}var f1=f2&&f2.bias||(cd(f3.primary().head,f4.sel.primary().head)<0?-1:1);c3(f4,o(f4,f3,f1,true));if(!(f2&&f2.scroll===false)&&f4.cm){fu(f4.cm)}}function c3(f2,f1){if(f1.equals(f2.sel)){return}f2.sel=f1;if(f2.cm){f2.cm.curOp.updateInput=f2.cm.curOp.selectionChanged=true;W(f2.cm)}ad(f2,"cursorActivity",f2)}function el(f1){c3(f1,o(f1,f1.sel,null,false),Z)}function o(f9,f1,f6,f7){var f3;for(var f4=0;f4<f1.ranges.length;f4++){var f5=f1.ranges[f4];var f8=bT(f9,f5.anchor,f6,f7);var f2=bT(f9,f5.head,f6,f7);if(f3||f8!=f5.anchor||f2!=f5.head){if(!f3){f3=f1.ranges.slice(0,f4)}f3[f4]=new dM(f8,f2)}}return f3?cu(f3,f1.primIndex):f1}function bT(ga,f9,f6,f7){var gb=false,f3=f9;var f4=f6||1;ga.cantEdit=false;search:for(;;){var gc=e2(ga,f3.line);if(gc.markedSpans){for(var f5=0;f5<gc.markedSpans.length;++f5){var f1=gc.markedSpans[f5],f2=f1.marker;if((f1.from==null||(f2.inclusiveLeft?f1.from<=f3.ch:f1.from<f3.ch))&&(f1.to==null||(f2.inclusiveRight?f1.to>=f3.ch:f1.to>f3.ch))){if(f7){aC(f2,"beforeCursorEnter");if(f2.explicitlyCleared){if(!gc.markedSpans){break}else{--f5;continue}}}if(!f2.atomic){continue}var f8=f2.find(f4<0?-1:1);if(cd(f8,f3)==0){f8.ch+=f4;if(f8.ch<0){if(f8.line>ga.first){f8=fx(ga,X(f8.line-1))}else{f8=null}}else{if(f8.ch>gc.text.length){if(f8.line<ga.first+ga.size-1){f8=X(f8.line+1,0)}else{f8=null}}}if(!f8){if(gb){if(!f7){return bT(ga,f9,f6,true)}ga.cantEdit=true;return X(ga.first,0)}gb=true;f8=f9;f4=-f4}}f3=f8;continue search}}}return f3}}function bj(gb){var f7=gb.display,ga=gb.doc,gc={};var f9=gc.cursors=document.createDocumentFragment();var f3=gc.selection=document.createDocumentFragment();for(var f5=0;f5<ga.sel.ranges.length;f5++){var f6=ga.sel.ranges[f5];var f4=f6.empty();if(f4||gb.options.showCursorWhenSelecting){B(gb,f6,f9)}if(!f4){bB(gb,f6,f3)}}if(gb.options.moveInputWithCursor){var f8=dI(gb,ga.sel.primary().head,"div");var f1=f7.wrapper.getBoundingClientRect(),f2=f7.lineDiv.getBoundingClientRect();gc.teTop=Math.max(0,Math.min(f7.wrapper.clientHeight-10,f8.top+f2.top-f1.top));gc.teLeft=Math.max(0,Math.min(f7.wrapper.clientWidth-10,f8.left+f2.left-f1.left))}return gc}function ak(f1,f2){bP(f1.display.cursorDiv,f2.cursors);bP(f1.display.selectionDiv,f2.selection);if(f2.teTop!=null){f1.display.inputDiv.style.top=f2.teTop+"px";f1.display.inputDiv.style.left=f2.teLeft+"px"}}function bA(f1){ak(f1,bj(f1))}function B(f1,f4,f3){var f6=dI(f1,f4.head,"div",null,null,!f1.options.singleCursorHeightPerLine);var f5=f3.appendChild(fK("div","\u00a0","CodeMirror-cursor"));f5.style.left=f6.left+"px";f5.style.top=f6.top+"px";f5.style.height=Math.max(0,f6.bottom-f6.top)*f1.options.cursorHeight+"px";if(f6.other){var f2=f3.appendChild(fK("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));f2.style.display="";f2.style.left=f6.other.left+"px";f2.style.top=f6.other.top+"px";f2.style.height=(f6.other.bottom-f6.other.top)*0.85+"px"}}function bB(f5,gb,f6){var ge=f5.display,gi=f5.doc;var f1=document.createDocumentFragment();var ga=eS(f5.display),f4=ga.left,gf=ge.lineSpace.offsetWidth-ga.right;function gc(gm,gl,gk,gj){if(gl<0){gl=0}gl=Math.round(gl);gj=Math.round(gj);f1.appendChild(fK("div",null,"CodeMirror-selected","position: absolute; left: "+gm+"px; top: "+gl+"px; width: "+(gk==null?gf-gm:gk)+"px; height: "+(gj-gl)+"px"))}function f2(gk,gm,gp){var gl=e2(gi,gk);var gn=gl.text.length;var gq,gj;function go(gs,gr){return cF(f5,X(gk,gs),"div",gl,gr)}dS(a(gl),gm||0,gp==null?gn:gp,function(gy,gx,gr){var gu=go(gy,"left"),gv,gw,gt;if(gy==gx){gv=gu;gw=gt=gu.left}else{gv=go(gx-1,"right");if(gr=="rtl"){var gs=gu;gu=gv;gv=gs}gw=gu.left;gt=gv.right}if(gm==null&&gy==0){gw=f4}if(gv.top-gu.top>3){gc(gw,gu.top,null,gu.bottom);gw=f4;if(gu.bottom<gv.top){gc(gw,gu.bottom,null,gv.top)}}if(gp==null&&gx==gn){gt=gf}if(!gq||gu.top<gq.top||gu.top==gq.top&&gu.left<gq.left){gq=gu}if(!gj||gv.bottom>gj.bottom||gv.bottom==gj.bottom&&gv.right>gj.right){gj=gv}if(gw<f4+1){gw=f4}gc(gw,gv.top,gt-gw,gv.bottom)});return{start:gq,end:gj}}var gh=gb.from(),gg=gb.to();if(gh.line==gg.line){f2(gh.line,gh.ch,gg.ch)}else{var f3=e2(gi,gh.line),f8=e2(gi,gg.line);var f7=z(f3)==z(f8);var f9=f2(gh.line,gh.ch,f7?f3.text.length+1:null).end;var gd=f2(gg.line,f7?0:null,gg.ch).start;if(f7){if(f9.top<gd.top-2){gc(f9.right,f9.top,null,f9.bottom);gc(f4,gd.top,gd.left,gd.bottom)}else{gc(f9.right,f9.top,gd.left-f9.right,f9.bottom)}}if(f9.bottom<gd.top){gc(f4,f9.bottom,null,gd.top)}}f6.appendChild(f1)}function p(f1){if(!f1.state.focused){return}var f3=f1.display;clearInterval(f3.blinker);var f2=true;f3.cursorDiv.style.visibility="";if(f1.options.cursorBlinkRate>0){f3.blinker=setInterval(function(){f3.cursorDiv.style.visibility=(f2=!f2)?"":"hidden"},f1.options.cursorBlinkRate)}else{if(f1.options.cursorBlinkRate<0){f3.cursorDiv.style.visibility="hidden"}}}function d2(f1,f2){if(f1.doc.mode.startState&&f1.doc.frontier<f1.display.viewTo){f1.state.highlight.set(f2,ct(cL,f1))}}function cL(f1){var f5=f1.doc;if(f5.frontier<f5.first){f5.frontier=f5.first}if(f5.frontier>=f1.display.viewTo){return}var f3=+new Date+f1.options.workTime;var f4=b1(f5.mode,dr(f1,f5.frontier));var f2=[];f5.iter(f5.frontier,Math.min(f5.first+f5.size,f1.display.viewTo+500),function(f6){if(f5.frontier>=f1.display.viewFrom){var f9=f6.styles;var gb=fn(f1,f6,f4,true);f6.styles=gb.styles;var f8=f6.styleClasses,ga=gb.classes;if(ga){f6.styleClasses=ga}else{if(f8){f6.styleClasses=null}}var gc=!f9||f9.length!=f6.styles.length||f8!=ga&&(!f8||!ga||f8.bgClass!=ga.bgClass||f8.textClass!=ga.textClass);for(var f7=0;!gc&&f7<f9.length;++f7){gc=f9[f7]!=f6.styles[f7]}if(gc){f2.push(f5.frontier)}f6.stateAfter=b1(f5.mode,f4)}else{dm(f1,f6.text,f4);f6.stateAfter=f5.frontier%5==0?b1(f5.mode,f4):null}++f5.frontier;if(+new Date>f3){d2(f1,f1.options.workDelay);return true}});if(f2.length){cI(f1,function(){for(var f6=0;f6<f2.length;f6++){S(f1,f2[f6],"text")}})}}function cw(f7,f1,f4){var f2,f5,f6=f7.doc;var f3=f4?-1:f1-(f7.doc.mode.innerMode?1000:100);for(var ga=f1;ga>f3;--ga){if(ga<=f6.first){return f6.first}var f9=e2(f6,ga-1);if(f9.stateAfter&&(!f4||ga<=f6.frontier)){return ga}var f8=bR(f9.text,null,f7.options.tabSize);if(f5==null||f2>f8){f5=ga-1;f2=f8}}return f5}function dr(f1,f7,f2){var f5=f1.doc,f4=f1.display;if(!f5.mode.startState){return true}var f6=cw(f1,f7,f2),f3=f6>f5.first&&e2(f5,f6-1).stateAfter;if(!f3){f3=bY(f5.mode)}else{f3=b1(f5.mode,f3)}f5.iter(f6,f7,function(f8){dm(f1,f8.text,f3);var f9=f6==f7-1||f6%5==0||f6>=f4.viewFrom&&f6<f4.viewTo;f8.stateAfter=f9?b1(f5.mode,f3):null;++f6});if(f2){f5.frontier=f6}return f3}function eV(f1){return f1.lineSpace.offsetTop}function bG(f1){return f1.mover.offsetHeight-f1.lineSpace.offsetHeight}function eS(f4){if(f4.cachedPaddingH){return f4.cachedPaddingH}var f3=bP(f4.measure,fK("pre","x"));var f1=window.getComputedStyle?window.getComputedStyle(f3):f3.currentStyle;var f2={left:parseInt(f1.paddingLeft),right:parseInt(f1.paddingRight)};if(!isNaN(f2.left)&&!isNaN(f2.right)){f4.cachedPaddingH=f2}return f2}function cg(f8,f4,f7){var f3=f8.options.lineWrapping;var f5=f3&&f8.display.scroller.clientWidth;if(!f4.measure.heights||f3&&f4.measure.width!=f5){var f6=f4.measure.heights=[];if(f3){f4.measure.width=f5;var ga=f4.text.firstChild.getClientRects();for(var f1=0;f1<ga.length-1;f1++){var f9=ga[f1],f2=ga[f1+1];if(Math.abs(f9.bottom-f2.bottom)>2){f6.push((f9.bottom+f2.top)/2-f7.top)}}}f6.push(f7.bottom-f7.top)}}function cr(f3,f1,f4){if(f3.line==f1){return{map:f3.measure.map,cache:f3.measure.cache}}for(var f2=0;f2<f3.rest.length;f2++){if(f3.rest[f2]==f1){return{map:f3.measure.maps[f2],cache:f3.measure.caches[f2]}}}for(var f2=0;f2<f3.rest.length;f2++){if(bL(f3.rest[f2])>f4){return{map:f3.measure.maps[f2],cache:f3.measure.caches[f2],before:true}}}}function cV(f1,f3){f3=z(f3);var f5=bL(f3);var f2=f1.display.externalMeasured=new bt(f1.doc,f3,f5);f2.lineN=f5;var f4=f2.built=eF(f1,f2);f2.text=f4.pre;bP(f1.display.lineMeasure,f4.pre);return f2}function d4(f1,f2,f4,f3){return E(f1,a0(f1,f2),f4,f3)}function eY(f1,f3){if(f3>=f1.display.viewFrom&&f3<f1.display.viewTo){return f1.display.view[dh(f1,f3)]}var f2=f1.display.externalMeasured;if(f2&&f3>=f2.lineN&&f3<f2.lineN+f2.size){return f2}}function a0(f1,f3){var f4=bL(f3);var f2=eY(f1,f4);if(f2&&!f2.text){f2=null}else{if(f2&&f2.changes){aa(f1,f2,f4,e0(f1))}}if(!f2){f2=cV(f1,f3)}var f5=cr(f2,f3,f4);return{line:f3,view:f2,rect:null,map:f5.map,cache:f5.cache,before:f5.before,hasHeights:false}}function E(f1,f7,f5,f2,f4){if(f7.before){f5=-1}var f3=f5+(f2||""),f6;if(f7.cache.hasOwnProperty(f3)){f6=f7.cache[f3]}else{if(!f7.rect){f7.rect=f7.view.text.getBoundingClientRect()}if(!f7.hasHeights){cg(f1,f7.view,f7.rect);f7.hasHeights=true}f6=j(f1,f7,f5,f2);if(!f6.bogus){f7.cache[f3]=f6}}return{left:f6.left,right:f6.right,top:f4?f6.rtop:f6.top,bottom:f4?f6.rbottom:f6.bottom}}var eo={left:0,right:0,top:0,bottom:0};function j(f8,gi,ga,f6){var gm=gi.map;var gf,f5,f4,f1;for(var gh=0;gh<gm.length;gh+=3){var gk=gm[gh],gg=gm[gh+1];if(ga<gk){f5=0;f4=1;f1="left"}else{if(ga<gg){f5=ga-gk;f4=f5+1}else{if(gh==gm.length-3||ga==gg&&gm[gh+3]>ga){f4=gg-gk;f5=f4-1;if(ga>=gg){f1="right"}}}}if(f5!=null){gf=gm[gh+2];if(gk==gg&&f6==(gf.insertLeft?"left":"right")){f1=f6}if(f6=="left"&&f5==0){while(gh&&gm[gh-2]==gm[gh-3]&&gm[gh-1].insertLeft){gf=gm[(gh-=3)+2];f1="left"}}if(f6=="right"&&f5==gg-gk){while(gh<gm.length-3&&gm[gh+3]==gm[gh+4]&&!gm[gh+5].insertLeft){gf=gm[(gh+=3)+2];f1="right"}}break}}var f2;if(gf.nodeType==3){for(var gh=0;gh<4;gh++){while(f5&&fd(gi.line.text.charAt(gk+f5))){--f5}while(gk+f4<gg&&fd(gi.line.text.charAt(gk+f4))){++f4}if(dz&&l<9&&f5==0&&f4==gg-gk){f2=gf.parentNode.getBoundingClientRect()}else{if(dz&&f8.options.lineWrapping){var f3=ck(gf,f5,f4).getClientRects();if(f3.length){f2=f3[f6=="right"?f3.length-1:0]}else{f2=eo}}else{f2=ck(gf,f5,f4).getBoundingClientRect()||eo}}if(f2.left||f2.right||f5==0){break}f4=f5;f5=f5-1;f1="right"}if(dz&&l<11){f2=eB(f8.display.measure,f2)}}else{if(f5>0){f1=f6="right"}var f3;if(f8.options.lineWrapping&&(f3=gf.getClientRects()).length>1){f2=f3[f6=="right"?f3.length-1:0]}else{f2=gf.getBoundingClientRect()}}if(dz&&l<9&&!f5&&(!f2||!f2.left&&!f2.right)){var f7=gf.parentNode.getClientRects()[0];if(f7){f2={left:f7.left,right:f7.left+dt(f8.display),top:f7.top,bottom:f7.bottom}}else{f2=eo}}var gd=f2.top-gi.rect.top,gb=f2.bottom-gi.rect.top;var gl=(gd+gb)/2;var gj=gi.view.measure.heights;for(var gh=0;gh<gj.length-1;gh++){if(gl<gj[gh]){break}}var ge=gh?gj[gh-1]:0,gc=gj[gh];var f9={left:(f1=="right"?f2.right:f2.left)-gi.rect.left,right:(f1=="left"?f2.left:f2.right)-gi.rect.left,top:ge,bottom:gc};if(!f2.left&&!f2.right){f9.bogus=true}if(!f8.options.singleCursorHeightPerLine){f9.rtop=gd;f9.rbottom=gb}return f9}function eB(f3,f4){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aI(f3)){return f4}var f2=screen.logicalXDPI/screen.deviceXDPI;var f1=screen.logicalYDPI/screen.deviceYDPI;return{left:f4.left*f2,right:f4.right*f2,top:f4.top*f1,bottom:f4.bottom*f1}}function au(f2){if(f2.measure){f2.measure.cache={};f2.measure.heights=null;if(f2.rest){for(var f1=0;f1<f2.rest.length;f1++){f2.measure.caches[f1]={}}}}}function aL(f1){f1.display.externalMeasure=null;dP(f1.display.lineMeasure);for(var f2=0;f2<f1.display.view.length;f2++){au(f1.display.view[f2])}}function aj(f1){aL(f1);f1.display.cachedCharWidth=f1.display.cachedTextHeight=f1.display.cachedPaddingH=null;if(!f1.options.lineWrapping){f1.display.maxLineChanged=true}f1.display.lineNumChars=null}function cs(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cq(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function eE(f7,f4,f6,f2){if(f4.widgets){for(var f3=0;f3<f4.widgets.length;++f3){if(f4.widgets[f3].above){var f9=cS(f4.widgets[f3]);f6.top+=f9;f6.bottom+=f9}}}if(f2=="line"){return f6}if(!f2){f2="local"}var f5=bK(f4);if(f2=="local"){f5+=eV(f7.display)}else{f5-=f7.display.viewOffset}if(f2=="page"||f2=="window"){var f1=f7.display.lineSpace.getBoundingClientRect();f5+=f1.top+(f2=="window"?0:cq());var f8=f1.left+(f2=="window"?0:cs());f6.left+=f8;f6.right+=f8}f6.top+=f5;f6.bottom+=f5;return f6}function fX(f2,f5,f3){if(f3=="div"){return f5}var f7=f5.left,f6=f5.top;if(f3=="page"){f7-=cs();f6-=cq()}else{if(f3=="local"||!f3){var f4=f2.display.sizer.getBoundingClientRect();f7+=f4.left;f6+=f4.top}}var f1=f2.display.lineSpace.getBoundingClientRect();return{left:f7-f1.left,top:f6-f1.top}}function cF(f1,f5,f4,f3,f2){if(!f3){f3=e2(f1.doc,f5.line)}return eE(f1,f3,d4(f1,f3,f5.ch,f2),f4)}function dI(ga,f9,f3,f7,gc,f8){f7=f7||e2(ga.doc,f9.line);if(!gc){gc=a0(ga,f7)}function f5(gf,ge){var gd=E(ga,gc,gf,ge?"right":"left",f8);if(ge){gd.left=gd.right}else{gd.right=gd.left}return eE(ga,f7,gd,f3)}function gb(gg,gd){var ge=f6[gd],gf=ge.level%2;if(gg==dn(ge)&&gd&&ge.level<f6[gd-1].level){ge=f6[--gd];gg=fW(ge)-(ge.level%2?0:1);gf=true}else{if(gg==fW(ge)&&gd<f6.length-1&&ge.level<f6[gd+1].level){ge=f6[++gd];gg=dn(ge)-ge.level%2;gf=false}}if(gf&&gg==ge.to&&gg>ge.from){return f5(gg-1)}return f5(gg,gf)}var f6=a(f7),f1=f9.ch;if(!f6){return f5(f1)}var f2=aE(f6,f1);var f4=gb(f1,f2);if(eQ!=null){f4.other=gb(f1,eQ)}return f4}function dx(f1,f5){var f4=0,f5=fx(f1.doc,f5);if(!f1.options.lineWrapping){f4=dt(f1.display)*f5.ch}var f2=e2(f1.doc,f5.line);var f3=bK(f2)+eV(f1.display);return{left:f4,right:f4,top:f3,bottom:f3+f2.height}}function fJ(f1,f2,f3,f5){var f4=X(f1,f2);f4.xRel=f5;if(f3){f4.outside=true}return f4}function fC(f8,f5,f4){var f7=f8.doc;f4+=f8.display.viewOffset;if(f4<0){return fJ(f7.first,0,true,-1)}var f3=bE(f7,f4),f9=f7.first+f7.size-1;if(f3>f9){return fJ(f7.first+f7.size-1,e2(f7,f9).text.length,true,1)}if(f5<0){f5=0}var f2=e2(f7,f3);for(;;){var ga=cT(f8,f2,f3,f5,f4);var f6=ei(f2);var f1=f6&&f6.find(0,true);if(f6&&(ga.ch>f1.from.ch||ga.ch==f1.from.ch&&ga.xRel>0)){f3=bL(f2=f1.to.line)}else{return ga}}}function cT(gb,f3,ge,gd,gc){var ga=gc-bK(f3);var f7=false,gk=2*gb.display.wrapper.clientWidth;var gh=a0(gb,f3);function go(gq){var gr=dI(gb,X(ge,gq),"line",f3,gh);f7=true;if(ga>gr.bottom){return gr.left-gk}else{if(ga<gr.top){return gr.left+gk}else{f7=false}}return gr.left}var gg=a(f3),gj=f3.text.length;var gl=cB(f3),f4=cO(f3);var gi=go(gl),f1=f7,f2=go(f4),f6=f7;if(gd>f2){return fJ(ge,f4,f6,1)}for(;;){if(gg?f4==gl||f4==v(f3,gl,1):f4-gl<=1){var gf=gd<gi||gd-gi<=f2-gd?gl:f4;var gn=gd-(gf==gl?gi:f2);while(fd(f3.text.charAt(gf))){++gf}var f9=fJ(ge,gf,gf==gl?f1:f6,gn<-1?-1:gn>1?1:0);return f9}var f8=Math.ceil(gj/2),gp=gl+f8;if(gg){gp=gl;for(var gm=0;gm<f8;++gm){gp=v(f3,gp,1)}}var f5=go(gp);if(f5>gd){f4=gp;f2=f5;if(f6=f7){f2+=1000}gj=f8}else{gl=gp;gi=f5;f1=f7;gj-=f8}}}var aF;function aT(f3){if(f3.cachedTextHeight!=null){return f3.cachedTextHeight}if(aF==null){aF=fK("pre");for(var f2=0;f2<49;++f2){aF.appendChild(document.createTextNode("x"));aF.appendChild(fK("br"))}aF.appendChild(document.createTextNode("x"))}bP(f3.measure,aF);var f1=aF.offsetHeight/50;if(f1>3){f3.cachedTextHeight=f1}dP(f3.measure);return f1||1}function dt(f5){if(f5.cachedCharWidth!=null){return f5.cachedCharWidth}var f1=fK("span","xxxxxxxxxx");var f4=fK("pre",[f1]);bP(f5.measure,f4);var f3=f1.getBoundingClientRect(),f2=(f3.right-f3.left)/10;if(f2>2){f5.cachedCharWidth=f2}return f2||10}var bn=null;var dW=0;function cE(f1){f1.curOp={cm:f1,viewChanged:false,startHeight:f1.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++dW};if(bn){bn.ops.push(f1.curOp)}else{f1.curOp.ownsGroup=bn={ops:[f1.curOp],delayedCallbacks:[]}}}function cP(f4){var f3=f4.delayedCallbacks,f2=0;do{for(;f2<f3.length;f2++){f3[f2]()}for(var f1=0;f1<f4.ops.length;f1++){var f5=f4.ops[f1];if(f5.cursorActivityHandlers){while(f5.cursorActivityCalled<f5.cursorActivityHandlers.length){f5.cursorActivityHandlers[f5.cursorActivityCalled++](f5.cm)}}}}while(f2<f3.length)}function al(f1){var f4=f1.curOp,f3=f4.ownsGroup;if(!f3){return}try{cP(f3)}finally{bn=null;for(var f2=0;f2<f3.ops.length;f2++){f3.ops[f2].cm.curOp=null}cG(f3)}}function cG(f3){var f2=f3.ops;for(var f1=0;f1<f2.length;f1++){b3(f2[f1])}for(var f1=0;f1<f2.length;f1++){ap(f2[f1])}for(var f1=0;f1<f2.length;f1++){b0(f2[f1])}for(var f1=0;f1<f2.length;f1++){ao(f2[f1])}for(var f1=0;f1<f2.length;f1++){eO(f2[f1])}}function b3(f3){var f1=f3.cm,f2=f1.display;if(f3.updateMaxLine){g(f1)}f3.mustUpdate=f3.viewChanged||f3.forceUpdate||f3.scrollTop!=null||f3.scrollToPos&&(f3.scrollToPos.from.line<f2.viewFrom||f3.scrollToPos.to.line>=f2.viewTo)||f2.maxLineChanged&&f1.options.lineWrapping;f3.update=f3.mustUpdate&&new aG(f1,f3.mustUpdate&&{top:f3.scrollTop,ensure:f3.scrollToPos},f3.forceUpdate)}function ap(f1){f1.updatedDisplay=f1.mustUpdate&&D(f1.cm,f1.update)}function b0(f3){var f1=f3.cm,f2=f1.display;if(f3.updatedDisplay){a5(f1)}f3.barMeasure=dq(f1);if(f2.maxLineChanged&&!f1.options.lineWrapping){f3.adjustWidthTo=d4(f1,f2.maxLine,f2.maxLine.text.length).left+3;f3.maxScrollLeft=Math.max(0,f2.sizer.offsetLeft+f3.adjustWidthTo+bg-f2.scroller.clientWidth)}if(f3.updatedDisplay||f3.selectionChanged){f3.newSelectionNodes=bj(f1)}}function ao(f2){var f1=f2.cm;if(f2.adjustWidthTo!=null){f1.display.sizer.style.minWidth=f2.adjustWidthTo+"px";if(f2.maxScrollLeft<f1.doc.scrollLeft){bC(f1,Math.min(f1.display.scroller.scrollLeft,f2.maxScrollLeft),true)}f1.display.maxLineChanged=false}if(f2.newSelectionNodes){ak(f1,f2.newSelectionNodes)}if(f2.updatedDisplay){dp(f1,f2.barMeasure)}if(f2.updatedDisplay||f2.startHeight!=f1.doc.height){eM(f1,f2.barMeasure)}if(f2.selectionChanged){p(f1)}if(f1.state.focused&&f2.updateInput){fc(f1,f2.typing)}}function eO(f4){var ga=f4.cm,f6=ga.display,f9=ga.doc;if(f4.adjustWidthTo!=null&&Math.abs(f4.barMeasure.scrollWidth-ga.display.scroller.scrollWidth)>1){eM(ga)}if(f4.updatedDisplay){ci(ga,f4.update)}if(f6.wheelStartX!=null&&(f4.scrollTop!=null||f4.scrollLeft!=null||f4.scrollToPos)){f6.wheelStartX=f6.wheelStartY=null}if(f4.scrollTop!=null&&(f6.scroller.scrollTop!=f4.scrollTop||f4.forceScroll)){var f7=Math.max(0,Math.min(f6.scroller.scrollHeight-f6.scroller.clientHeight,f4.scrollTop));f6.scroller.scrollTop=f6.scrollbarV.scrollTop=f9.scrollTop=f7}if(f4.scrollLeft!=null&&(f6.scroller.scrollLeft!=f4.scrollLeft||f4.forceScroll)){var f2=Math.max(0,Math.min(f6.scroller.scrollWidth-f6.scroller.clientWidth,f4.scrollLeft));f6.scroller.scrollLeft=f6.scrollbarH.scrollLeft=f9.scrollLeft=f2;es(ga)}if(f4.scrollToPos){var f8=F(ga,fx(f9,f4.scrollToPos.from),fx(f9,f4.scrollToPos.to),f4.scrollToPos.margin);if(f4.scrollToPos.isCursor&&ga.state.focused){dU(ga,f8)}}var f5=f4.maybeHiddenMarkers,f1=f4.maybeUnhiddenMarkers;if(f5){for(var f3=0;f3<f5.length;++f3){if(!f5[f3].lines.length){aC(f5[f3],"hide")}}}if(f1){for(var f3=0;f3<f1.length;++f3){if(f1[f3].lines.length){aC(f1[f3],"unhide")}}}if(f6.wrapper.offsetHeight){f9.scrollTop=ga.display.scroller.scrollTop}if(f4.updatedDisplay&&cU){if(ga.options.lineWrapping){fN(ga,f4.barMeasure)}if(f4.barMeasure.scrollWidth>f4.barMeasure.clientWidth&&f4.barMeasure.scrollWidth<f4.barMeasure.clientWidth+1&&!cM(ga)){eM(ga)}}if(f4.changeObjs){aC(ga,"changes",ga,f4.changeObjs)}}function cI(f1,f2){if(f1.curOp){return f2()}cE(f1);try{return f2()}finally{al(f1)}}function cW(f1,f2){return function(){if(f1.curOp){return f2.apply(f1,arguments)}cE(f1);try{return f2.apply(f1,arguments)}finally{al(f1)}}}function c2(f1){return function(){if(this.curOp){return f1.apply(this,arguments)}cE(this);try{return f1.apply(this,arguments)}finally{al(this)}}}function cA(f1){return function(){var f2=this.cm;if(!f2||f2.curOp){return f1.apply(this,arguments)}cE(f2);try{return f1.apply(this,arguments)}finally{al(f2)}}}function bt(f3,f1,f2){this.line=f1;this.rest=h(f1);this.size=this.rest?bL(fv(this.rest))-f2+1:1;this.node=this.text=null;this.hidden=fk(f3,f1)}function eJ(f1,f7,f6){var f5=[],f3;for(var f4=f7;f4<f6;f4=f3){var f2=new bt(f1.doc,e2(f1.doc,f4),f4);f3=f4+f2.size;f5.push(f2)}return f5}function ag(f8,f6,f7,f9){if(f6==null){f6=f8.doc.first}if(f7==null){f7=f8.doc.first+f8.doc.size}if(!f9){f9=0}var f3=f8.display;if(f9&&f7<f3.viewTo&&(f3.updateLineNumbers==null||f3.updateLineNumbers>f6)){f3.updateLineNumbers=f6}f8.curOp.viewChanged=true;if(f6>=f3.viewTo){if(a3&&aS(f8.doc,f6)<f3.viewTo){ek(f8)}}else{if(f7<=f3.viewFrom){if(a3&&dR(f8.doc,f7+f9)>f3.viewFrom){ek(f8)}else{f3.viewFrom+=f9;f3.viewTo+=f9}}else{if(f6<=f3.viewFrom&&f7>=f3.viewTo){ek(f8)}else{if(f6<=f3.viewFrom){var f5=c8(f8,f7,f7+f9,1);if(f5){f3.view=f3.view.slice(f5.index);f3.viewFrom=f5.lineN;f3.viewTo+=f9}else{ek(f8)}}else{if(f7>=f3.viewTo){var f5=c8(f8,f6,f6,-1);if(f5){f3.view=f3.view.slice(0,f5.index);f3.viewTo=f5.lineN}else{ek(f8)}}else{var f4=c8(f8,f6,f6,-1);var f2=c8(f8,f7,f7+f9,1);if(f4&&f2){f3.view=f3.view.slice(0,f4.index).concat(eJ(f8,f4.lineN,f2.lineN)).concat(f3.view.slice(f2.index));f3.viewTo+=f9}else{ek(f8)}}}}}}var f1=f3.externalMeasured;if(f1){if(f7<f1.lineN){f1.lineN+=f9}else{if(f6<f1.lineN+f1.size){f3.externalMeasured=null}}}}function S(f2,f3,f6){f2.curOp.viewChanged=true;var f7=f2.display,f5=f2.display.externalMeasured;if(f5&&f3>=f5.lineN&&f3<f5.lineN+f5.size){f7.externalMeasured=null}if(f3<f7.viewFrom||f3>=f7.viewTo){return}var f4=f7.view[dh(f2,f3)];if(f4.node==null){return}var f1=f4.changes||(f4.changes=[]);if(db(f1,f6)==-1){f1.push(f6)}}function ek(f1){f1.display.viewFrom=f1.display.viewTo=f1.doc.first;f1.display.view=[];f1.display.viewOffset=0}function dh(f1,f4){if(f4>=f1.display.viewTo){return null}f4-=f1.display.viewFrom;if(f4<0){return null}var f2=f1.display.view;for(var f3=0;f3<f2.length;f3++){f4-=f2[f3].size;if(f4<0){return f3}}}function c8(f9,f3,f5,f2){var f6=dh(f9,f3),f8,f7=f9.display.view;if(!a3||f5==f9.doc.first+f9.doc.size){return{index:f6,lineN:f5}}for(var f4=0,f1=f9.display.viewFrom;f4<f6;f4++){f1+=f7[f4].size}if(f1!=f3){if(f2>0){if(f6==f7.length-1){return null}f8=(f1+f7[f6].size)-f3;f6++}else{f8=f1-f3}f3+=f8;f5+=f8}while(aS(f9.doc,f5)!=f5){if(f6==(f2<0?0:f7.length-1)){return null}f5+=f2*f7[f6-(f2<0?1:0)].size;f6+=f2}return{index:f6,lineN:f5}}function cN(f1,f5,f4){var f3=f1.display,f2=f3.view;if(f2.length==0||f5>=f3.viewTo||f4<=f3.viewFrom){f3.view=eJ(f1,f5,f4);f3.viewFrom=f5}else{if(f3.viewFrom>f5){f3.view=eJ(f1,f5,f3.viewFrom).concat(f3.view)}else{if(f3.viewFrom<f5){f3.view=f3.view.slice(dh(f1,f5))}}f3.viewFrom=f5;if(f3.viewTo<f4){f3.view=f3.view.concat(eJ(f1,f3.viewTo,f4))}else{if(f3.viewTo>f4){f3.view=f3.view.slice(0,dh(f1,f4))}}}f3.viewTo=f4}function c5(f1){var f2=f1.display.view,f5=0;for(var f4=0;f4<f2.length;f4++){var f3=f2[f4];if(!f3.hidden&&(!f3.node||f3.changes)){++f5}}return f5}function bk(f1){if(f1.display.pollingFast){return}f1.display.poll.set(f1.options.pollInterval,function(){cf(f1);if(f1.state.focused){bk(f1)}})}function C(f1){var f2=false;f1.display.pollingFast=true;function f3(){var f4=cf(f1);if(!f4&&!f2){f2=true;f1.display.poll.set(60,f3)}else{f1.display.pollingFast=false;bk(f1)}}f1.display.poll.set(20,f3)}var bi=null;function cf(f5){var f6=f5.display.input,f9=f5.display.prevInput,gk=f5.doc;if(!f5.state.focused||(bq(f6)&&!f9)||ai(f5)||f5.options.disableInput){return false}if(f5.state.pasteIncoming&&f5.state.fakedLastChar){f6.value=f6.value.substring(0,f6.value.length-1);f5.state.fakedLastChar=false}var f8=f6.value;if(f8==f9&&!f5.somethingSelected()){return false}if(dz&&l>=9&&f5.display.inputHasSelection===f8||b5&&/[\uf700-\uf7ff]/.test(f8)){fc(f5);return false}var gg=!f5.curOp;if(gg){cE(f5)}f5.display.shift=false;if(f8.charCodeAt(0)==8203&&gk.sel==f5.display.selForContextMenu&&!f9){f9="\u200b"}var gf=0,gc=Math.min(f9.length,f8.length);while(gf<gc&&f9.charCodeAt(gf)==f8.charCodeAt(gf)){++gf}var f2=f8.slice(gf),ga=aW(f2);var gj=null;if(f5.state.pasteIncoming&&gk.sel.ranges.length>1){if(bi&&bi.join("\n")==f2){gj=gk.sel.ranges.length%bi.length==0&&bQ(bi,aW)}else{if(ga.length==gk.sel.ranges.length){gj=bQ(ga,function(gl){return[gl]})}}}for(var gh=gk.sel.ranges.length-1;gh>=0;gh--){var gb=gk.sel.ranges[gh];var gd=gb.from(),f1=gb.to();if(gf<f9.length){gd=X(gd.line,gd.ch-(f9.length-gf))}else{if(f5.state.overwrite&&gb.empty()&&!f5.state.pasteIncoming){f1=X(f1.line,Math.min(e2(gk,f1.line).text.length,f1.ch+fv(ga).length))}}var f4=f5.curOp.updateInput;var gi={from:gd,to:f1,text:gj?gj[gh%gj.length]:ga,origin:f5.state.pasteIncoming?"paste":f5.state.cutIncoming?"cut":"+input"};bb(f5.doc,gi);ad(f5,"inputRead",f5,gi);if(f2&&!f5.state.pasteIncoming&&f5.options.electricChars&&f5.options.smartIndent&&gb.head.ch<100&&(!gh||gk.sel.ranges[gh-1].head.line!=gb.head.line)){var f7=f5.getModeAt(gb.head);var f3=cR(gi);if(f7.electricChars){for(var ge=0;ge<f7.electricChars.length;ge++){if(f2.indexOf(f7.electricChars.charAt(ge))>-1){ac(f5,f3.line,"smart");break}}}else{if(f7.electricInput){if(f7.electricInput.test(e2(gk,f3.line).text.slice(0,f3.ch))){ac(f5,f3.line,"smart")}}}}}fu(f5);f5.curOp.updateInput=f4;f5.curOp.typing=true;if(f8.length>1000||f8.indexOf("\n")>-1){f6.value=f5.display.prevInput=""}else{f5.display.prevInput=f8}if(gg){al(f5)}f5.state.pasteIncoming=f5.state.cutIncoming=false;return true}function fc(f1,f5){var f2,f4,f7=f1.doc;if(f1.somethingSelected()){f1.display.prevInput="";var f3=f7.sel.primary();f2=c4&&(f3.to().line-f3.from().line>100||(f4=f1.getSelection()).length>1000);var f6=f2?"-":f4||f1.getSelection();f1.display.input.value=f6;if(f1.state.focused){dA(f1.display.input)}if(dz&&l>=9){f1.display.inputHasSelection=f6}}else{if(!f5){f1.display.prevInput=f1.display.input.value="";if(dz&&l>=9){f1.display.inputHasSelection=null}}}f1.display.inaccurateSelection=f2}function en(f1){if(f1.options.readOnly!="nocursor"&&(!d3||dC()!=f1.display.input)){f1.display.input.focus()}}function s(f1){if(!f1.state.focused){en(f1);cy(f1)}}function ai(f1){return f1.options.readOnly||f1.doc.cantEdit}function fD(f1){var f3=f1.display;bV(f3.scroller,"mousedown",cW(f1,eg));if(dz&&l<11){bV(f3.scroller,"dblclick",cW(f1,function(f7){if(aO(f1,f7)){return}var f8=cm(f1,f7);if(!f8||m(f1,f7)||a6(f1.display,f7)){return}cC(f7);var f6=f1.findWordAt(f8);fH(f1.doc,f6.anchor,f6.head)}))}else{bV(f3.scroller,"dblclick",function(f6){aO(f1,f6)||cC(f6)})}bV(f3.lineSpace,"selectstart",function(f6){if(!a6(f3,f6)){cC(f6)}});if(!fS){bV(f3.scroller,"contextmenu",function(f6){ay(f1,f6)})}bV(f3.scroller,"scroll",function(){if(f3.scroller.clientHeight){O(f1,f3.scroller.scrollTop);bC(f1,f3.scroller.scrollLeft,true);aC(f1,"scroll",f1)}});bV(f3.scrollbarV,"scroll",function(){if(f3.scroller.clientHeight){O(f1,f3.scrollbarV.scrollTop)}});bV(f3.scrollbarH,"scroll",function(){if(f3.scroller.clientHeight){bC(f1,f3.scrollbarH.scrollLeft)}});bV(f3.scroller,"mousewheel",function(f6){b(f1,f6)});bV(f3.scroller,"DOMMouseScroll",function(f6){b(f1,f6)});function f5(){if(f1.state.focused){setTimeout(ct(en,f1),0)}}bV(f3.scrollbarH,"mousedown",f5);bV(f3.scrollbarV,"mousedown",f5);bV(f3.wrapper,"scroll",function(){f3.wrapper.scrollTop=f3.wrapper.scrollLeft=0});bV(f3.input,"keyup",function(f6){bd.call(f1,f6)});bV(f3.input,"input",function(){if(dz&&l>=9&&f1.display.inputHasSelection){f1.display.inputHasSelection=null}C(f1)});bV(f3.input,"keydown",cW(f1,q));bV(f3.input,"keypress",cW(f1,cv));bV(f3.input,"focus",ct(cy,f1));bV(f3.input,"blur",ct(aR,f1));function f2(f6){if(!aO(f1,f6)){ee(f6)}}if(f1.options.dragDrop){bV(f3.scroller,"dragstart",function(f6){R(f1,f6)});bV(f3.scroller,"dragenter",f2);bV(f3.scroller,"dragover",f2);bV(f3.scroller,"drop",cW(f1,bf))}bV(f3.scroller,"paste",function(f6){if(a6(f3,f6)){return}f1.state.pasteIncoming=true;en(f1);C(f1)});bV(f3.input,"paste",function(){if(cU&&!f1.state.fakedLastChar&&!(new Date-f1.state.lastMiddleDown<200)){var f7=f3.input.selectionStart,f6=f3.input.selectionEnd;f3.input.value+="$";f3.input.selectionEnd=f6;f3.input.selectionStart=f7;f1.state.fakedLastChar=true}f1.state.pasteIncoming=true;C(f1)});function f4(ga){if(f1.somethingSelected()){bi=f1.getSelections();if(f3.inaccurateSelection){f3.prevInput="";f3.inaccurateSelection=false;f3.input.value=bi.join("\n");dA(f3.input)}}else{var gb=[],f7=[];for(var f8=0;f8<f1.doc.sel.ranges.length;f8++){var f6=f1.doc.sel.ranges[f8].head.line;var f9={anchor:X(f6,0),head:X(f6+1,0)};f7.push(f9);gb.push(f1.getRange(f9.anchor,f9.head))}if(ga.type=="cut"){f1.setSelections(f7,null,Z)}else{f3.prevInput="";f3.input.value=gb.join("\n");dA(f3.input)}bi=gb}if(ga.type=="cut"){f1.state.cutIncoming=true}}bV(f3.input,"cut",f4);bV(f3.input,"copy",f4);if(a7){bV(f3.sizer,"mouseup",function(){if(dC()==f3.input){f3.input.blur()}en(f1)})}}function aQ(f1){var f2=f1.display;f2.cachedCharWidth=f2.cachedTextHeight=f2.cachedPaddingH=null;f1.setSize()}function a6(f2,f1){for(var f3=M(f1);f3!=f2.wrapper;f3=f3.parentNode){if(!f3||f3.ignoreEvents||f3.parentNode==f2.sizer&&f3!=f2.mover){return true}}}function cm(gb,f5,f2,f3){var f7=gb.display;if(!f2){var f6=M(f5);if(f6==f7.scrollbarH||f6==f7.scrollbarV||f6==f7.scrollbarFiller||f6==f7.gutterFiller){return null}}var ga,f8,f1=f7.lineSpace.getBoundingClientRect();try{ga=f5.clientX-f1.left;f8=f5.clientY-f1.top}catch(f5){return null}var f9=fC(gb,ga,f8),gc;if(f3&&f9.xRel==1&&(gc=e2(gb.doc,f9.line).text).length==f9.ch){var f4=bR(gc,gc.length,gb.options.tabSize)-gc.length;f9=X(f9.line,Math.max(0,Math.round((ga-eS(gb.display).left)/dt(gb.display))-f4))}return f9}function eg(f3){if(aO(this,f3)){return}var f1=this,f2=f1.display;f2.shift=f3.shiftKey;if(a6(f2,f3)){if(!cU){f2.scroller.draggable=false;setTimeout(function(){f2.scroller.draggable=true},100)}return}if(m(f1,f3)){return}var f4=cm(f1,f3);window.focus();switch(fB(f3)){case 1:if(f4){ax(f1,f3,f4)}else{if(M(f3)==f2.scroller){cC(f3)}}break;case 2:if(cU){f1.state.lastMiddleDown=+new Date}if(f4){fH(f1.doc,f4)}setTimeout(ct(en,f1),20);cC(f3);break;case 3:if(fS){ay(f1,f3)}break}}var de,c7;function ax(f2,f6,f7){setTimeout(ct(s,f2),0);var f3=+new Date,f4;if(c7&&c7.time>f3-400&&cd(c7.pos,f7)==0){f4="triple"}else{if(de&&de.time>f3-400&&cd(de.pos,f7)==0){f4="double";c7={time:f3,pos:f7}}else{f4="single";de={time:f3,pos:f7}}}var f5=f2.doc.sel,f1=b5?f6.metaKey:f6.ctrlKey;if(f2.options.dragDrop&&ez&&!ai(f2)&&f4=="single"&&f5.contains(f7)>-1&&f5.somethingSelected()){aZ(f2,f6,f7,f1)}else{n(f2,f6,f7,f4,f1)}}function aZ(f3,f5,f6,f2){var f4=f3.display;var f1=cW(f3,function(f7){if(cU){f4.scroller.draggable=false}f3.state.draggingText=false;d0(document,"mouseup",f1);d0(f4.scroller,"drop",f1);if(Math.abs(f5.clientX-f7.clientX)+Math.abs(f5.clientY-f7.clientY)<10){cC(f7);if(!f2){fH(f3.doc,f6)}en(f3);if(dz&&l==9){setTimeout(function(){document.body.focus();en(f3)},20)}}});if(cU){f4.scroller.draggable=true}f3.state.draggingText=f1;if(f4.scroller.dragDrop){f4.scroller.dragDrop()}bV(document,"mouseup",f1);bV(f4.scroller,"drop",f1)}function n(f4,gi,f3,f1,f6){var gf=f4.display,gk=f4.doc;cC(gi);var f2,gj,f5=gk.sel;if(f6&&!gi.shiftKey){gj=gk.sel.contains(f3);if(gj>-1){f2=gk.sel.ranges[gj]}else{f2=new dM(f3,f3)}}else{f2=gk.sel.primary()}if(gi.altKey){f1="rect";if(!f6){f2=new dM(f3,f3)}f3=cm(f4,gi,true,true);gj=-1}else{if(f1=="double"){var gg=f4.findWordAt(f3);if(f4.display.shift||gk.extend){f2=fj(gk,f2,gg.anchor,gg.head)}else{f2=gg}}else{if(f1=="triple"){var f9=new dM(X(f3.line,0),fx(gk,X(f3.line+1,0)));if(f4.display.shift||gk.extend){f2=fj(gk,f2,f9.anchor,f9.head)}else{f2=f9}}else{f2=fj(gk,f2,f3)}}}if(!f6){gj=0;bS(gk,new fL([f2],0),N);f5=gk.sel}else{if(gj>-1){e(gk,gj,f2,N)}else{gj=gk.sel.ranges.length;bS(gk,cu(gk.sel.ranges.concat([f2]),gj),{scroll:false,origin:"*mouse"})}}var ge=f3;function gd(gv){if(cd(ge,gv)==0){return}ge=gv;if(f1=="rect"){var gm=[],gs=f4.options.tabSize;var gl=bR(e2(gk,f3.line).text,f3.ch,gs);var gy=bR(e2(gk,gv.line).text,gv.ch,gs);var gn=Math.min(gl,gy),gw=Math.max(gl,gy);for(var gz=Math.min(f3.line,gv.line),gp=Math.min(f4.lastLine(),Math.max(f3.line,gv.line));gz<=gp;gz++){var gx=e2(gk,gz).text,go=ed(gx,gn,gs);if(gn==gw){gm.push(new dM(X(gz,go),X(gz,go)))}else{if(gx.length>go){gm.push(new dM(X(gz,go),X(gz,ed(gx,gw,gs))))}}}if(!gm.length){gm.push(new dM(f3,f3))}bS(gk,cu(f5.ranges.slice(0,gj).concat(gm),gj),{origin:"*mouse",scroll:false});f4.scrollIntoView(gv)}else{var gt=f2;var gq=gt.anchor,gu=gv;if(f1!="single"){if(f1=="double"){var gr=f4.findWordAt(gv)}else{var gr=new dM(X(gv.line,0),fx(gk,X(gv.line+1,0)))}if(cd(gr.anchor,gq)>0){gu=gr.head;gq=aq(gt.from(),gr.anchor)}else{gu=gr.anchor;gq=bv(gt.to(),gr.head)}}var gm=f5.ranges.slice(0);gm[gj]=new dM(fx(gk,gq),gu);bS(gk,cu(gm,gj),N)}}var gb=gf.wrapper.getBoundingClientRect();var f7=0;function gh(gn){var gl=++f7;var gp=cm(f4,gn,true,f1=="rect");if(!gp){return}if(cd(gp,ge)!=0){s(f4);gd(gp);var go=b4(gf,gk);if(gp.line>=go.to||gp.line<go.from){setTimeout(cW(f4,function(){if(f7==gl){gh(gn)}}),150)}}else{var gm=gn.clientY<gb.top?-20:gn.clientY>gb.bottom?20:0;if(gm){setTimeout(cW(f4,function(){if(f7!=gl){return}gf.scroller.scrollTop+=gm;gh(gn)}),50)}}}function ga(gl){f7=Infinity;cC(gl);en(f4);d0(document,"mousemove",gc);d0(document,"mouseup",f8);gk.history.lastSelOrigin=null}var gc=cW(f4,function(gl){if(!fB(gl)){ga(gl)}else{gh(gl)}});var f8=cW(f4,ga);bV(document,"mousemove",gc);bV(document,"mouseup",f8)}function fZ(gc,f8,ga,gb,f4){try{var f2=f8.clientX,f1=f8.clientY}catch(f8){return false}if(f2>=Math.floor(gc.display.gutters.getBoundingClientRect().right)){return false}if(gb){cC(f8)}var f9=gc.display;var f7=f9.lineDiv.getBoundingClientRect();if(f1>f7.bottom||!e5(gc,ga)){return bJ(f8)}f1-=f7.top-f9.viewOffset;for(var f5=0;f5<gc.options.gutters.length;++f5){var f6=f9.gutters.childNodes[f5];if(f6&&f6.getBoundingClientRect().right>=f2){var gd=bE(gc.doc,f1);var f3=gc.options.gutters[f5];f4(gc,ga,gc,gd,f3,f8);return bJ(f8)}}}function m(f1,f2){return fZ(f1,f2,"gutterClick",true,ad)}var af=0;function bf(f7){var f9=this;if(aO(f9,f7)||a6(f9.display,f7)){return}cC(f7);if(dz){af=+new Date}var f8=cm(f9,f7,true),f1=f7.dataTransfer.files;if(!f8||ai(f9)){return}if(f1&&f1.length&&window.FileReader&&window.File){var f3=f1.length,ga=Array(f3),f2=0;var f5=function(gd,gc){var gb=new FileReader;gb.onload=cW(f9,function(){ga[gc]=gb.result;if(++f2==f3){f8=fx(f9.doc,f8);var ge={from:f8,to:f8,text:aW(ga.join("\n")),origin:"paste"};bb(f9.doc,ge);eU(f9.doc,eG(f8,cR(ge)))}});gb.readAsText(gd)};for(var f6=0;f6<f3;++f6){f5(f1[f6],f6)}}else{if(f9.state.draggingText&&f9.doc.sel.contains(f8)>-1){f9.state.draggingText(f7);setTimeout(ct(en,f9),20);return}try{var ga=f7.dataTransfer.getData("Text");if(ga){if(f9.state.draggingText&&!(b5?f7.metaKey:f7.ctrlKey)){var f4=f9.listSelections()}ec(f9.doc,eG(f8,f8));if(f4){for(var f6=0;f6<f4.length;++f6){aX(f9.doc,"",f4[f6].anchor,f4[f6].head,"drag")}}f9.replaceSelection(ga,"around","paste");en(f9)}}catch(f7){}}}function R(f1,f3){if(dz&&(!f1.state.draggingText||+new Date-af<100)){ee(f3);return}if(aO(f1,f3)||a6(f1.display,f3)){return}f3.dataTransfer.setData("Text",f1.getSelection());if(f3.dataTransfer.setDragImage&&!aB){var f2=fK("img",null,null,"position: fixed; left: 0; top: 0;");f2.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(dQ){f2.width=f2.height=1;f1.display.wrapper.appendChild(f2);f2._top=f2.offsetTop}f3.dataTransfer.setDragImage(f2,0,0);if(dQ){f2.parentNode.removeChild(f2)}}}function O(f1,f2){if(Math.abs(f1.doc.scrollTop-f2)<2){return}f1.doc.scrollTop=f2;if(!cn){dH(f1,{top:f2})}if(f1.display.scroller.scrollTop!=f2){f1.display.scroller.scrollTop=f2}if(f1.display.scrollbarV.scrollTop!=f2){f1.display.scrollbarV.scrollTop=f2}if(cn){dH(f1)}d2(f1,100)}function bC(f1,f3,f2){if(f2?f3==f1.doc.scrollLeft:Math.abs(f1.doc.scrollLeft-f3)<2){return}f3=Math.min(f3,f1.display.scroller.scrollWidth-f1.display.scroller.clientWidth);f1.doc.scrollLeft=f3;es(f1);if(f1.display.scroller.scrollLeft!=f3){f1.display.scroller.scrollLeft=f3}if(f1.display.scrollbarH.scrollLeft!=f3){f1.display.scrollbarH.scrollLeft=f3}}var e9=0,ce=null;if(dz){ce=-0.53}else{if(cn){ce=15}else{if(c6){ce=-0.7}else{if(aB){ce=-1/3}}}}function b(f9,f3){var gc=f3.wheelDeltaX,gb=f3.wheelDeltaY;if(gc==null&&f3.detail&&f3.axis==f3.HORIZONTAL_AXIS){gc=f3.detail}if(gb==null&&f3.detail&&f3.axis==f3.VERTICAL_AXIS){gb=f3.detail}else{if(gb==null){gb=f3.wheelDelta}}var f5=f9.display,f8=f5.scroller;if(!(gc&&f8.scrollWidth>f8.clientWidth||gb&&f8.scrollHeight>f8.clientHeight)){return}if(gb&&b5&&cU){outer:for(var ga=f3.target,f7=f5.view;ga!=f8;ga=ga.parentNode){for(var f2=0;f2<f7.length;f2++){if(f7[f2].node==ga){f9.display.currentWheelTarget=ga;break outer}}}}if(gc&&!cn&&!dQ&&ce!=null){if(gb){O(f9,Math.max(0,Math.min(f8.scrollTop+gb*ce,f8.scrollHeight-f8.clientHeight)))}bC(f9,Math.max(0,Math.min(f8.scrollLeft+gc*ce,f8.scrollWidth-f8.clientWidth)));cC(f3);f5.wheelStartX=null;return}if(gb&&ce!=null){var f1=gb*ce;var f6=f9.doc.scrollTop,f4=f6+f5.wrapper.clientHeight;if(f1<0){f6=Math.max(0,f6+f1-50)}else{f4=Math.min(f9.doc.height,f4+f1+50)}dH(f9,{top:f6,bottom:f4})}if(e9<20){if(f5.wheelStartX==null){f5.wheelStartX=f8.scrollLeft;f5.wheelStartY=f8.scrollTop;f5.wheelDX=gc;f5.wheelDY=gb;setTimeout(function(){if(f5.wheelStartX==null){return}var gd=f8.scrollLeft-f5.wheelStartX;var gf=f8.scrollTop-f5.wheelStartY;var ge=(gf&&f5.wheelDY&&gf/f5.wheelDY)||(gd&&f5.wheelDX&&gd/f5.wheelDX);f5.wheelStartX=f5.wheelStartY=null;if(!ge){return}ce=(ce*e9+ge)/(e9+1);++e9},200)}else{f5.wheelDX+=gc;f5.wheelDY+=gb}}}function fE(f2,f5,f1){if(typeof f5=="string"){f5=er[f5];if(!f5){return false}}if(f2.display.pollingFast&&cf(f2)){f2.display.pollingFast=false}var f4=f2.display.shift,f3=false;try{if(ai(f2)){f2.state.suppressEdits=true}if(f1){f2.display.shift=false}f3=f5(f2)!=b8}finally{f2.display.shift=f4;f2.state.suppressEdits=false}return f3}function dj(f1){var f2=f1.state.keyMaps.slice(0);if(f1.options.extraKeys){f2.push(f1.options.extraKeys)}f2.push(f1.options.keyMap);return f2}var ar;function e6(f1,f7){var f2=fI(f1.options.keyMap),f5=f2.auto;clearTimeout(ar);if(f5&&!eq(f7)){ar=setTimeout(function(){if(fI(f1.options.keyMap)==f2){f1.options.keyMap=(f5.call?f5.call(null,f1):f5);fY(f1)}},50)}var f4=ff(f7,true),f6=false;if(!f4){return false}var f3=dj(f1);if(f7.shiftKey){f6=i("Shift-"+f4,f3,function(f8){return fE(f1,f8,true)})||i(f4,f3,function(f8){if(typeof f8=="string"?/^go[A-Z]/.test(f8):f8.motion){return fE(f1,f8)}})}else{f6=i(f4,f3,function(f8){return fE(f1,f8)})}if(f6){cC(f7);p(f1);ad(f1,"keyHandled",f1,f4,f7)}return f6}function d6(f1,f4,f2){var f3=i("'"+f2+"'",dj(f1),function(f5){return fE(f1,f5,true)});if(f3){cC(f4);p(f1);ad(f1,"keyHandled",f1,"'"+f2+"'",f4)}return f3}var dd=null;function q(f4){var f1=this;s(f1);if(aO(f1,f4)){return}if(dz&&l<11&&f4.keyCode==27){f4.returnValue=false}var f2=f4.keyCode;f1.display.shift=f2==16||f4.shiftKey;var f3=e6(f1,f4);if(dQ){dd=f3?f2:null;if(!f3&&f2==88&&!c4&&(b5?f4.metaKey:f4.ctrlKey)){f1.replaceSelection("",null,"cut")}}if(f2==18&&!/\bCodeMirror-crosshair\b/.test(f1.display.lineDiv.className)){av(f1)}}function av(f2){var f3=f2.display.lineDiv;fo(f3,"CodeMirror-crosshair");function f1(f4){if(f4.keyCode==18||!f4.altKey){f(f3,"CodeMirror-crosshair");d0(document,"keyup",f1);d0(document,"mouseover",f1)}}bV(document,"keyup",f1);bV(document,"mouseover",f1)}function bd(f1){if(f1.keyCode==16){this.doc.sel.shift=false}aO(this,f1)}function cv(f5){var f1=this;if(aO(f1,f5)||f5.ctrlKey&&!f5.altKey||b5&&f5.metaKey){return}var f4=f5.keyCode,f2=f5.charCode;if(dQ&&f4==dd){dd=null;cC(f5);return}if(((dQ&&(!f5.which||f5.which<10))||a7)&&e6(f1,f5)){return}var f3=String.fromCharCode(f2==null?f4:f2);if(d6(f1,f5,f3)){return}if(dz&&l>=9){f1.display.inputHasSelection=null}C(f1)}function cy(f1){if(f1.options.readOnly=="nocursor"){return}if(!f1.state.focused){aC(f1,"focus",f1);f1.state.focused=true;fo(f1.display.wrapper,"CodeMirror-focused");if(!f1.curOp&&f1.display.selForContextMenu!=f1.doc.sel){fc(f1);if(cU){setTimeout(ct(fc,f1,true),0)}}}bk(f1);p(f1)}function aR(f1){if(f1.state.focused){aC(f1,"blur",f1);f1.state.focused=false;f(f1.display.wrapper,"CodeMirror-focused")}clearInterval(f1.display.blinker);setTimeout(function(){if(!f1.state.focused){f1.display.shift=false}},150)}function ay(ga,f5){if(aO(ga,f5,"contextmenu")){return}var f7=ga.display;if(a6(f7,f5)||da(ga,f5)){return}var f9=cm(ga,f5),f1=f7.scroller.scrollTop;if(!f9||dQ){return}var f4=ga.options.resetSelectionOnContextMenu;if(f4&&ga.doc.sel.contains(f9)==-1){cW(ga,bS)(ga.doc,eG(f9),Z)}var f6=f7.input.style.cssText;f7.inputDiv.style.position="absolute";f7.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(f5.clientY-5)+"px; left: "+(f5.clientX-5)+"px; z-index: 1000; background: "+(dz?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(cU){var gb=window.scrollY}en(ga);if(cU){window.scrollTo(null,gb)}fc(ga);if(!ga.somethingSelected()){f7.input.value=f7.prevInput=" "}f7.selForContextMenu=ga.doc.sel;clearTimeout(f7.detectingSelectAll);function f3(){if(f7.input.selectionStart!=null){var gc=ga.somethingSelected();var gd=f7.input.value="\u200b"+(gc?f7.input.value:"");f7.prevInput=gc?"":"\u200b";f7.input.selectionStart=1;f7.input.selectionEnd=gd.length;f7.selForContextMenu=ga.doc.sel}}function f8(){f7.inputDiv.style.position="relative";f7.input.style.cssText=f6;if(dz&&l<9){f7.scrollbarV.scrollTop=f7.scroller.scrollTop=f1}bk(ga);if(f7.input.selectionStart!=null){if(!dz||(dz&&l<9)){f3()}var gc=0,gd=function(){if(f7.selForContextMenu==ga.doc.sel&&f7.input.selectionStart==0){cW(ga,er.selectAll)(ga)}else{if(gc++<10){f7.detectingSelectAll=setTimeout(gd,500)}else{fc(ga)}}};f7.detectingSelectAll=setTimeout(gd,200)}}if(dz&&l>=9){f3()}if(fS){ee(f5);var f2=function(){d0(window,"mouseup",f2);setTimeout(f8,20)};bV(window,"mouseup",f2)}else{setTimeout(f8,50)}}function da(f1,f2){if(!e5(f1,"gutterContextMenu")){return false}return fZ(f1,f2,"gutterContextMenu",false,aC)}var cR=J.changeEnd=function(f1){if(!f1.text){return f1.to}return X(f1.from.line+f1.text.length-1,fv(f1.text).length+(f1.text.length==1?f1.from.ch:0))};function bX(f4,f3){if(cd(f4,f3.from)<0){return f4}if(cd(f4,f3.to)<=0){return cR(f3)}var f1=f4.line+f3.text.length-(f3.to.line-f3.from.line)-1,f2=f4.ch;if(f4.line==f3.to.line){f2+=cR(f3).ch-f3.to.ch}return X(f1,f2)}function e7(f4,f5){var f2=[];for(var f3=0;f3<f4.sel.ranges.length;f3++){var f1=f4.sel.ranges[f3];f2.push(new dM(bX(f1.anchor,f5),bX(f1.head,f5)))}return cu(f2,f4.sel.primIndex)}function bs(f3,f2,f1){if(f3.line==f2.line){return X(f1.line,f3.ch-f2.ch+f1.ch)}else{return X(f1.line+(f3.line-f2.line),f3.ch)}}function ae(gb,f8,f2){var f3=[];var f1=X(gb.first,0),gc=f1;for(var f5=0;f5<f8.length;f5++){var f7=f8[f5];var ga=bs(f7.from,f1,gc);var f9=bs(cR(f7),f1,gc);f1=f7.to;gc=f9;if(f2=="around"){var f6=gb.sel.ranges[f5],f4=cd(f6.head,f6.anchor)<0;f3[f5]=new dM(f4?f9:ga,f4?ga:f9)}else{f3[f5]=new dM(ga,ga)}}return new fL(f3,gb.sel.primIndex)}function dF(f2,f4,f3){var f1={canceled:false,from:f4.from,to:f4.to,text:f4.text,origin:f4.origin,cancel:function(){this.canceled=true}};if(f3){f1.update=function(f8,f7,f6,f5){if(f8){this.from=fx(f2,f8)}if(f7){this.to=fx(f2,f7)}if(f6){this.text=f6}if(f5!==undefined){this.origin=f5}}}aC(f2,"beforeChange",f2,f1);if(f2.cm){aC(f2.cm,"beforeChange",f2.cm,f1)}if(f1.canceled){return null}return{from:f1.from,to:f1.to,text:f1.text,origin:f1.origin}}function bb(f4,f5,f3){if(f4.cm){if(!f4.cm.curOp){return cW(f4.cm,bb)(f4,f5,f3)}if(f4.cm.state.suppressEdits){return}}if(e5(f4,"beforeChange")||f4.cm&&e5(f4.cm,"beforeChange")){f5=dF(f4,f5,true);if(!f5){return}}var f2=fV&&!f3&&cD(f4,f5.from,f5.to);if(f2){for(var f1=f2.length-1;f1>=0;--f1){L(f4,{from:f2[f1].from,to:f2[f1].to,text:f1?[""]:f5.text})}}else{L(f4,f5)}}function L(f3,f4){if(f4.text.length==1&&f4.text[0]==""&&cd(f4.from,f4.to)==0){return}var f2=e7(f3,f4);fA(f3,f4,f2,f3.cm?f3.cm.curOp.id:NaN);d1(f3,f4,f2,d7(f3,f4));var f1=[];dV(f3,function(f6,f5){if(!f5&&db(f1,f6.history)==-1){du(f6.history,f4);f1.push(f6.history)}d1(f6,f4,null,d7(f6,f4))})}function b6(gc,ga,ge){if(gc.cm&&gc.cm.state.suppressEdits){return}var f9=gc.history,f3,f5=gc.sel;var f1=ga=="undo"?f9.done:f9.undone,gd=ga=="undo"?f9.undone:f9.done;for(var f6=0;f6<f1.length;f6++){f3=f1[f6];if(ge?f3.ranges&&!f3.equals(gc.sel):!f3.ranges){break}}if(f6==f1.length){return}f9.lastOrigin=f9.lastSelOrigin=null;for(;;){f3=f1.pop();if(f3.ranges){cJ(f3,gd);if(ge&&!f3.equals(gc.sel)){bS(gc,f3,{clearRedo:false});return}f5=f3}else{break}}var f8=[];cJ(f5,gd);gd.push({changes:f8,generation:f9.generation});f9.generation=f3.generation||++f9.maxGeneration;var f4=e5(gc,"beforeChange")||gc.cm&&e5(gc.cm,"beforeChange");for(var f6=f3.changes.length-1;f6>=0;--f6){var gb=f3.changes[f6];gb.origin=ga;if(f4&&!dF(gc,gb,false)){f1.length=0;return}f8.push(dk(gc,gb));var f2=f6?e7(gc,gb):fv(f1);d1(gc,gb,f2,dX(gc,gb));if(!f6&&gc.cm){gc.cm.scrollIntoView({from:gb.from,to:cR(gb)})}var f7=[];dV(gc,function(gg,gf){if(!gf&&db(f7,gg.history)==-1){du(gg.history,gb);f7.push(gg.history)}d1(gg,gb,null,dX(gg,gb))})}}function fa(f2,f4){if(f4==0){return}f2.first+=f4;f2.sel=new fL(bQ(f2.sel.ranges,function(f5){return new dM(X(f5.anchor.line+f4,f5.anchor.ch),X(f5.head.line+f4,f5.head.ch))}),f2.sel.primIndex);if(f2.cm){ag(f2.cm,f2.first,f2.first-f4,f4);for(var f3=f2.cm.display,f1=f3.viewFrom;f1<f3.viewTo;f1++){S(f2.cm,f1,"gutter")}}}function d1(f5,f6,f4,f2){if(f5.cm&&!f5.cm.curOp){return cW(f5.cm,d1)(f5,f6,f4,f2)}if(f6.to.line<f5.first){fa(f5,f6.text.length-1-(f6.to.line-f6.from.line));return}if(f6.from.line>f5.lastLine()){return}if(f6.from.line<f5.first){var f1=f6.text.length-1-(f5.first-f6.from.line);fa(f5,f1);f6={from:X(f5.first,0),to:X(f6.to.line+f1,f6.to.ch),text:[fv(f6.text)],origin:f6.origin}}var f3=f5.lastLine();if(f6.to.line>f3){f6={from:f6.from,to:X(f3,e2(f5,f3).text.length),text:[f6.text[0]],origin:f6.origin}}f6.removed=fM(f5,f6.from,f6.to);if(!f4){f4=e7(f5,f6)}if(f5.cm){aH(f5.cm,f6,f2)}else{fm(f5,f6,f2)}ec(f5,f4,Z)}function aH(gc,f8,f6){var gb=gc.doc,f7=gc.display,f9=f8.from,ga=f8.to;var f1=false,f5=f9.line;if(!gc.options.lineWrapping){f5=bL(z(e2(gb,f9.line)));gb.iter(f5,ga.line+1,function(ge){if(ge==f7.maxLine){f1=true;return true}})}if(gb.sel.contains(f8.from,f8.to)>-1){W(gc)}fm(gb,f8,f6,a9(gc));if(!gc.options.lineWrapping){gb.iter(f5,f9.line+f8.text.length,function(gf){var ge=d9(gf);if(ge>f7.maxLineLength){f7.maxLine=gf;f7.maxLineLength=ge;f7.maxLineChanged=true;f1=false}});if(f1){gc.curOp.updateMaxLine=true}}gb.frontier=Math.min(gb.frontier,f9.line);d2(gc,400);var gd=f8.text.length-(ga.line-f9.line)-1;if(f9.line==ga.line&&f8.text.length==1&&!dG(gc.doc,f8)){S(gc,f9.line,"text")}else{ag(gc,f9.line,ga.line+1,gd)}var f3=e5(gc,"changes"),f4=e5(gc,"change");if(f4||f3){var f2={from:f9,to:ga,text:f8.text,removed:f8.removed,origin:f8.origin};if(f4){ad(gc,"change",gc,f2)}if(f3){(gc.curOp.changeObjs||(gc.curOp.changeObjs=[])).push(f2)}}gc.display.selForContextMenu=null}function aX(f4,f3,f6,f5,f1){if(!f5){f5=f6}if(cd(f5,f6)<0){var f2=f5;f5=f6;f6=f2}if(typeof f3=="string"){f3=aW(f3)}bb(f4,{from:f6,to:f5,text:f3,origin:f1})}function dU(f2,f5){var f6=f2.display,f3=f6.sizer.getBoundingClientRect(),f1=null;if(f5.top+f3.top<0){f1=true}else{if(f5.bottom+f3.top>(window.innerHeight||document.documentElement.clientHeight)){f1=false}}if(f1!=null&&!fi){var f4=fK("div","\u200b",null,"position: absolute; top: "+(f5.top-f6.viewOffset-eV(f2.display))+"px; height: "+(f5.bottom-f5.top+bg)+"px; left: "+f5.left+"px; width: 2px;");f2.display.lineSpace.appendChild(f4);f4.scrollIntoView(f1);f2.display.lineSpace.removeChild(f4)}}function F(gb,f9,f5,f4){if(f4==null){f4=0}for(var f6=0;f6<5;f6++){var f7=false,ga=dI(gb,f9);var f1=!f5||f5==f9?ga:dI(gb,f5);var f3=I(gb,Math.min(ga.left,f1.left),Math.min(ga.top,f1.top)-f4,Math.max(ga.left,f1.left),Math.max(ga.bottom,f1.bottom)+f4);var f8=gb.doc.scrollTop,f2=gb.doc.scrollLeft;if(f3.scrollTop!=null){O(gb,f3.scrollTop);if(Math.abs(gb.doc.scrollTop-f8)>1){f7=true}}if(f3.scrollLeft!=null){bC(gb,f3.scrollLeft);if(Math.abs(gb.doc.scrollLeft-f2)>1){f7=true}}if(!f7){return ga}}}function G(f1,f3,f5,f2,f4){var f6=I(f1,f3,f5,f2,f4);if(f6.scrollTop!=null){O(f1,f6.scrollTop)}if(f6.scrollLeft!=null){bC(f1,f6.scrollLeft)}}function I(gd,f4,gc,f2,gb){var f9=gd.display,f7=aT(gd.display);if(gc<0){gc=0}var f5=gd.curOp&&gd.curOp.scrollTop!=null?gd.curOp.scrollTop:f9.scroller.scrollTop;var gf=f9.scroller.clientHeight-bg,gh={};if(gb-gc>gf){gb=gc+gf}var f3=gd.doc.height+bG(f9);var f1=gc<f7,f8=gb>f3-f7;if(gc<f5){gh.scrollTop=f1?0:gc}else{if(gb>f5+gf){var ga=Math.min(gc,(f8?f3:gb)-gf);if(ga!=f5){gh.scrollTop=ga}}}var gg=gd.curOp&&gd.curOp.scrollLeft!=null?gd.curOp.scrollLeft:f9.scroller.scrollLeft;var ge=f9.scroller.clientWidth-bg-f9.gutters.offsetWidth;var f6=f2-f4>ge;if(f6){f2=f4+ge}if(f4<10){gh.scrollLeft=0}else{if(f4<gg){gh.scrollLeft=Math.max(0,f4-(f6?0:10))}else{if(f2>ge+gg-3){gh.scrollLeft=f2+(f6?0:10)-ge}}}return gh}function cH(f1,f3,f2){if(f3!=null||f2!=null){fq(f1)}if(f3!=null){f1.curOp.scrollLeft=(f1.curOp.scrollLeft==null?f1.doc.scrollLeft:f1.curOp.scrollLeft)+f3}if(f2!=null){f1.curOp.scrollTop=(f1.curOp.scrollTop==null?f1.doc.scrollTop:f1.curOp.scrollTop)+f2}}function fu(f1){fq(f1);var f2=f1.getCursor(),f4=f2,f3=f2;if(!f1.options.lineWrapping){f4=f2.ch?X(f2.line,f2.ch-1):f2;f3=X(f2.line,f2.ch+1)}f1.curOp.scrollToPos={from:f4,to:f3,margin:f1.options.cursorScrollMargin,isCursor:true}}function fq(f1){var f3=f1.curOp.scrollToPos;if(f3){f1.curOp.scrollToPos=null;var f5=dx(f1,f3.from),f4=dx(f1,f3.to);var f2=I(f1,Math.min(f5.left,f4.left),Math.min(f5.top,f4.top)-f3.margin,Math.max(f5.right,f4.right),Math.max(f5.bottom,f4.bottom)+f3.margin);f1.scrollTo(f2.scrollLeft,f2.scrollTop)}}function ac(ge,f4,gd,f3){var gc=ge.doc,f2;if(gd==null){gd="add"}if(gd=="smart"){if(!gc.mode.indent){gd="prev"}else{f2=dr(ge,f4)}}var f8=ge.options.tabSize;var gf=e2(gc,f4),f7=bR(gf.text,null,f8);if(gf.stateAfter){gf.stateAfter=null}var f1=gf.text.match(/^\s*/)[0],ga;if(!f3&&!/\S/.test(gf.text)){ga=0;gd="not"}else{if(gd=="smart"){ga=gc.mode.indent(f2,gf.text.slice(f1.length),gf.text);if(ga==b8||ga>150){if(!f3){return}gd="prev"}}}if(gd=="prev"){if(f4>gc.first){ga=bR(e2(gc,f4-1).text,null,f8)}else{ga=0}}else{if(gd=="add"){ga=f7+ge.options.indentUnit}else{if(gd=="subtract"){ga=f7-ge.options.indentUnit}else{if(typeof gd=="number"){ga=f7+gd}}}}ga=Math.max(0,ga);var gb="",f9=0;if(ge.options.indentWithTabs){for(var f5=Math.floor(ga/f8);f5;--f5){f9+=f8;gb+="\t"}}if(f9<ga){gb+=co(ga-f9)}if(gb!=f1){aX(gc,gb,X(f4,0),X(f4,f1.length),"+input")}else{for(var f5=0;f5<gc.sel.ranges.length;f5++){var f6=gc.sel.ranges[f5];if(f6.head.line==f4&&f6.head.ch<f1.length){var f9=X(f4,f1.length);e(gc,f5,new dM(f9,f9));break}}}gf.stateAfter=null}function em(f4,f3,f1,f6){var f5=f3,f2=f3;if(typeof f3=="number"){f2=e2(f4,cZ(f4,f3))}else{f5=bL(f3)}if(f5==null){return null}if(f6(f2,f5)&&f4.cm){S(f4.cm,f5,f1)}return f2}function eL(f1,f7){var f2=f1.doc.sel.ranges,f5=[];for(var f4=0;f4<f2.length;f4++){var f3=f7(f2[f4]);while(f5.length&&cd(f3.from,fv(f5).to)<=0){var f6=f5.pop();if(cd(f6.from,f3.from)<0){f3.from=f6.from;break}}f5.push(f3)}cI(f1,function(){for(var f8=f5.length-1;f8>=0;f8--){aX(f1.doc,"",f5[f8].from,f5[f8].to,"+delete")}fu(f1)})}function bu(gj,f5,gd,gc,f7){var ga=f5.line,gb=f5.ch,gi=gd;var f2=e2(gj,ga);var gg=true;function gh(){var gk=ga+gd;if(gk<gj.first||gk>=gj.first+gj.size){return(gg=false)}ga=gk;return f2=e2(gj,gk)}function gf(gl){var gk=(f7?v:ah)(f2,gb,gd,true);if(gk==null){if(!gl&&gh()){if(f7){gb=(gd<0?cO:cB)(f2)}else{gb=gd<0?f2.text.length:0}}else{return(gg=false)}}else{gb=gk}return true}if(gc=="char"){gf()}else{if(gc=="column"){gf(true)}else{if(gc=="word"||gc=="group"){var ge=null,f8=gc=="group";var f1=gj.cm&&gj.cm.getHelper(f5,"wordChars");for(var f6=true;;f6=false){if(gd<0&&!gf(!f6)){break}var f3=f2.text.charAt(gb)||"\n";var f4=cx(f3,f1)?"w":f8&&f3=="\n"?"n":!f8||/\s/.test(f3)?null:"p";if(f8&&!f6&&!f4){f4="s"}if(ge&&ge!=f4){if(gd<0){gd=1;gf()}break}if(f4){ge=f4}if(gd>0&&!gf(!f6)){break}}}}}var f9=bT(gj,X(ga,gb),gi,true);if(!gg){f9.hitSide=true}return f9}function bo(f9,f4,f1,f8){var f7=f9.doc,f6=f4.left,f5;if(f8=="page"){var f3=Math.min(f9.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);f5=f4.top+f1*(f3-(f1<0?1.5:0.5)*aT(f9.display))}else{if(f8=="line"){f5=f1>0?f4.bottom+3:f4.top-3}}for(;;){var f2=fC(f9,f6,f5);if(!f2.outside){break}if(f1<0?f5<=0:f5>=f7.height){f2.hitSide=true;break}f5+=f1*5}return f2}J.prototype={constructor:J,focus:function(){window.focus();en(this);C(this)},setOption:function(f3,f4){var f2=this.options,f1=f2[f3];if(f2[f3]==f4&&f3!="mode"){return}f2[f3]=f4;if(ba.hasOwnProperty(f3)){cW(this,ba[f3])(this,f4,f1)}},getOption:function(f1){return this.options[f1]},getDoc:function(){return this.doc},addKeyMap:function(f2,f1){this.state.keyMaps[f1?"push":"unshift"](f2)},removeKeyMap:function(f2){var f3=this.state.keyMaps;for(var f1=0;f1<f3.length;++f1){if(f3[f1]==f2||(typeof f3[f1]!="string"&&f3[f1].name==f2)){f3.splice(f1,1);return true}}},addOverlay:c2(function(f1,f2){var f3=f1.token?f1:J.getMode(this.options,f1);if(f3.startState){throw new Error("Overlays may not be stateful.")}this.state.overlays.push({mode:f3,modeSpec:f1,opaque:f2&&f2.opaque});this.state.modeGen++;ag(this)}),removeOverlay:c2(function(f1){var f3=this.state.overlays;for(var f2=0;f2<f3.length;++f2){var f4=f3[f2].modeSpec;if(f4==f1||typeof f1=="string"&&f4.name==f1){f3.splice(f2,1);this.state.modeGen++;ag(this);return}}}),indentLine:c2(function(f3,f1,f2){if(typeof f1!="string"&&typeof f1!="number"){if(f1==null){f1=this.options.smartIndent?"smart":"prev"}else{f1=f1?"add":"subtract"}}if(b7(this.doc,f3)){ac(this,f3,f1,f2)}}),indentSelection:c2(function(ga){var f1=this.doc.sel.ranges,f4=-1;for(var f6=0;f6<f1.length;f6++){var f7=f1[f6];if(!f7.empty()){var f8=f7.from(),f9=f7.to();var f2=Math.max(f4,f8.line);f4=Math.min(this.lastLine(),f9.line-(f9.ch?0:1))+1;for(var f5=f2;f5<f4;++f5){ac(this,f5,ga)}var f3=this.doc.sel.ranges;if(f8.ch==0&&f1.length==f3.length&&f3[f6].from().ch>0){e(this.doc,f6,new dM(f8,f3[f6].to()),Z)}}else{if(f7.head.line>f4){ac(this,f7.head.line,ga,true);f4=f7.head.line;if(f6==this.doc.sel.primIndex){fu(this)}}}}}),getTokenAt:function(f8,f2){var f5=this.doc;f8=fx(f5,f8);var f4=dr(this,f8.line,f2),f7=this.doc.mode;var f1=e2(f5,f8.line);var f6=new eH(f1.text,this.options.tabSize);while(f6.pos<f8.ch&&!f6.eol()){f6.start=f6.pos;var f3=ep(f7,f6,f4)}return{start:f6.start,end:f6.pos,string:f6.current(),type:f3||null,state:f4}},getTokenTypeAt:function(f8){f8=fx(this.doc,f8);var f4=c0(this,e2(this.doc,f8.line));var f6=0,f7=(f4.length-1)/2,f3=f8.ch;var f2;if(f3==0){f2=f4[2]}else{for(;;){var f1=(f6+f7)>>1;if((f1?f4[f1*2-1]:0)>=f3){f7=f1}else{if(f4[f1*2+1]<f3){f6=f1+1}else{f2=f4[f1*2+2];break}}}}var f5=f2?f2.indexOf("cm-overlay "):-1;return f5<0?f2:f5==0?null:f2.slice(0,f5-1)},getModeAt:function(f2){var f1=this.doc.mode;if(!f1.innerMode){return f1}return J.innerMode(f1,this.getTokenAt(f2).state).mode},getHelper:function(f2,f1){return this.getHelpers(f2,f1)[0]},getHelpers:function(f8,f3){var f4=[];if(!fb.hasOwnProperty(f3)){return fb}var f1=fb[f3],f7=this.getModeAt(f8);if(typeof f7[f3]=="string"){if(f1[f7[f3]]){f4.push(f1[f7[f3]])}}else{if(f7[f3]){for(var f2=0;f2<f7[f3].length;f2++){var f6=f1[f7[f3][f2]];if(f6){f4.push(f6)}}}else{if(f7.helperType&&f1[f7.helperType]){f4.push(f1[f7.helperType])}else{if(f1[f7.name]){f4.push(f1[f7.name])}}}}for(var f2=0;f2<f1._global.length;f2++){var f5=f1._global[f2];if(f5.pred(f7,this)&&db(f4,f5.val)==-1){f4.push(f5.val)}}return f4},getStateAfter:function(f2,f1){var f3=this.doc;f2=cZ(f3,f2==null?f3.first+f3.size-1:f2);return dr(this,f2+1,f1)},cursorCoords:function(f4,f2){var f3,f1=this.doc.sel.primary();if(f4==null){f3=f1.head}else{if(typeof f4=="object"){f3=fx(this.doc,f4)}else{f3=f4?f1.from():f1.to()}}return dI(this,f3,f2||"page")},charCoords:function(f2,f1){return cF(this,fx(this.doc,f2),f1||"page")},coordsChar:function(f1,f2){f1=fX(this,f1,f2||"page");return fC(this,f1.left,f1.top)},lineAtHeight:function(f1,f2){f1=fX(this,{top:f1,left:0},f2||"page").top;return bE(this.doc,f1+this.display.viewOffset)},heightAtLine:function(f2,f5){var f1=false,f4=this.doc.first+this.doc.size-1;if(f2<this.doc.first){f2=this.doc.first}else{if(f2>f4){f2=f4;f1=true}}var f3=e2(this.doc,f2);return eE(this,f3,{top:0,left:0},f5||"page").top+(f1?this.doc.height-bK(f3):0)},defaultTextHeight:function(){return aT(this.display)},defaultCharWidth:function(){return dt(this.display)},setGutterMarker:c2(function(f1,f2,f3){return em(this.doc,f1,"gutter",function(f4){var f5=f4.gutterMarkers||(f4.gutterMarkers={});f5[f2]=f3;if(!f3&&eI(f5)){f4.gutterMarkers=null}return true})}),clearGutter:c2(function(f3){var f1=this,f4=f1.doc,f2=f4.first;f4.iter(function(f5){if(f5.gutterMarkers&&f5.gutterMarkers[f3]){f5.gutterMarkers[f3]=null;S(f1,f2,"gutter");if(eI(f5.gutterMarkers)){f5.gutterMarkers=null}}++f2})}),addLineWidget:c2(function(f3,f2,f1){return bF(this,f3,f2,f1)}),removeLineWidget:function(f1){f1.clear()},lineInfo:function(f1){if(typeof f1=="number"){if(!b7(this.doc,f1)){return null}var f2=f1;f1=e2(this.doc,f1);if(!f1){return null}}else{var f2=bL(f1);if(f2==null){return null}}return{line:f2,handle:f1,text:f1.text,gutterMarkers:f1.gutterMarkers,textClass:f1.textClass,bgClass:f1.bgClass,wrapClass:f1.wrapClass,widgets:f1.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(f6,f3,f8,f4,ga){var f5=this.display;f6=dI(this,fx(this.doc,f6));var f7=f6.bottom,f2=f6.left;f3.style.position="absolute";f5.sizer.appendChild(f3);if(f4=="over"){f7=f6.top}else{if(f4=="above"||f4=="near"){var f1=Math.max(f5.wrapper.clientHeight,this.doc.height),f9=Math.max(f5.sizer.clientWidth,f5.lineSpace.clientWidth);if((f4=="above"||f6.bottom+f3.offsetHeight>f1)&&f6.top>f3.offsetHeight){f7=f6.top-f3.offsetHeight}else{if(f6.bottom+f3.offsetHeight<=f1){f7=f6.bottom}}if(f2+f3.offsetWidth>f9){f2=f9-f3.offsetWidth}}}f3.style.top=f7+"px";f3.style.left=f3.style.right="";if(ga=="right"){f2=f5.sizer.clientWidth-f3.offsetWidth;f3.style.right="0px"}else{if(ga=="left"){f2=0}else{if(ga=="middle"){f2=(f5.sizer.clientWidth-f3.offsetWidth)/2}}f3.style.left=f2+"px"}if(f8){G(this,f2,f7,f2+f3.offsetWidth,f7+f3.offsetHeight)}},triggerOnKeyDown:c2(q),triggerOnKeyPress:c2(cv),triggerOnKeyUp:bd,execCommand:function(f1){if(er.hasOwnProperty(f1)){return er[f1](this)}},findPosH:function(f7,f4,f5,f2){var f1=1;if(f4<0){f1=-1;f4=-f4}for(var f3=0,f6=fx(this.doc,f7);f3<f4;++f3){f6=bu(this.doc,f6,f1,f5,f2);if(f6.hitSide){break}}return f6},moveH:c2(function(f2,f3){var f1=this;f1.extendSelectionsBy(function(f4){if(f1.display.shift||f1.doc.extend||f4.empty()){return bu(f1.doc,f4.head,f2,f3,f1.options.rtlMoveVisually)}else{return f2<0?f4.from():f4.to()}},cQ)}),deleteH:c2(function(f1,f2){var f3=this.doc.sel,f4=this.doc;if(f3.somethingSelected()){f4.replaceSelection("",null,"+delete")}else{eL(this,function(f6){var f5=bu(f4,f6.head,f1,f2,false);return f1<0?{from:f5,to:f6.head}:{from:f6.head,to:f5}})}}),findPosV:function(f6,f3,f7,f9){var f1=1,f5=f9;if(f3<0){f1=-1;f3=-f3}for(var f2=0,f8=fx(this.doc,f6);f2<f3;++f2){var f4=dI(this,f8,"div");if(f5==null){f5=f4.left}else{f4.left=f5}f8=bo(this,f4,f1,f7);if(f8.hitSide){break}}return f8},moveV:c2(function(f2,f4){var f1=this,f6=this.doc,f5=[];var f7=!f1.display.shift&&!f6.extend&&f6.sel.somethingSelected();f6.extendSelectionsBy(function(f8){if(f7){return f2<0?f8.from():f8.to()}var ga=dI(f1,f8.head,"div");if(f8.goalColumn!=null){ga.left=f8.goalColumn}f5.push(ga.left);var f9=bo(f1,ga,f2,f4);if(f4=="page"&&f8==f6.sel.primary()){cH(f1,null,cF(f1,f9,"div").top-ga.top)}return f9},cQ);if(f5.length){for(var f3=0;f3<f6.sel.ranges.length;f3++){f6.sel.ranges[f3].goalColumn=f5[f3]}}}),findWordAt:function(f8){var f6=this.doc,f4=e2(f6,f8.line).text;var f7=f8.ch,f3=f8.ch;if(f4){var f5=this.getHelper(f8,"wordChars");if((f8.xRel<0||f3==f4.length)&&f7){--f7}else{++f3}var f2=f4.charAt(f7);var f1=cx(f2,f5)?function(f9){return cx(f9,f5)}:/\s/.test(f2)?function(f9){return/\s/.test(f9)}:function(f9){return !/\s/.test(f9)&&!cx(f9)};while(f7>0&&f1(f4.charAt(f7-1))){--f7}while(f3<f4.length&&f1(f4.charAt(f3))){++f3}}return new dM(X(f8.line,f7),X(f8.line,f3))},toggleOverwrite:function(f1){if(f1!=null&&f1==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){fo(this.display.cursorDiv,"CodeMirror-overwrite")}else{f(this.display.cursorDiv,"CodeMirror-overwrite")}aC(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return dC()==this.display.input},scrollTo:c2(function(f1,f2){if(f1!=null||f2!=null){fq(this)}if(f1!=null){this.curOp.scrollLeft=f1}if(f2!=null){this.curOp.scrollTop=f2}}),getScrollInfo:function(){var f1=this.display.scroller,f2=bg;return{left:f1.scrollLeft,top:f1.scrollTop,height:f1.scrollHeight-f2,width:f1.scrollWidth-f2,clientHeight:f1.clientHeight-f2,clientWidth:f1.clientWidth-f2}},scrollIntoView:c2(function(f2,f3){if(f2==null){f2={from:this.doc.sel.primary().head,to:null};if(f3==null){f3=this.options.cursorScrollMargin}}else{if(typeof f2=="number"){f2={from:X(f2,0),to:null}}else{if(f2.from==null){f2={from:f2,to:null}}}}if(!f2.to){f2.to=f2.from}f2.margin=f3||0;if(f2.from.line!=null){fq(this);this.curOp.scrollToPos=f2}else{var f1=I(this,Math.min(f2.from.left,f2.to.left),Math.min(f2.from.top,f2.to.top)-f2.margin,Math.max(f2.from.right,f2.to.right),Math.max(f2.from.bottom,f2.to.bottom)+f2.margin);this.scrollTo(f1.scrollLeft,f1.scrollTop)}}),setSize:c2(function(f4,f2){var f1=this;function f3(f6){return typeof f6=="number"||/^\d+$/.test(String(f6))?f6+"px":f6}if(f4!=null){f1.display.wrapper.style.width=f3(f4)}if(f2!=null){f1.display.wrapper.style.height=f3(f2)}if(f1.options.lineWrapping){aL(this)}var f5=f1.display.viewFrom;f1.doc.iter(f5,f1.display.viewTo,function(f6){if(f6.widgets){for(var f7=0;f7<f6.widgets.length;f7++){if(f6.widgets[f7].noHScroll){S(f1,f5,"widget");break}}}++f5});f1.curOp.forceUpdate=true;aC(f1,"refresh",this)}),operation:function(f1){return cI(this,f1)},refresh:c2(function(){var f1=this.display.cachedTextHeight;ag(this);this.curOp.forceUpdate=true;aj(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);cY(this);if(f1==null||Math.abs(f1-aT(this.display))>0.5){Y(this)}aC(this,"refresh",this)}),swapDoc:c2(function(f2){var f1=this.doc;f1.cm=null;dY(this,f2);aj(this);fc(this);this.scrollTo(f2.scrollLeft,f2.scrollTop);this.curOp.forceScroll=true;ad(this,"swapDoc",this,f1);return f1}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bw(J);var eR=J.defaults={};var ba=J.optionHandlers={};function t(f1,f4,f3,f2){J.defaults[f1]=f4;if(f3){ba[f1]=f2?function(f5,f7,f6){if(f6!=ca){f3(f5,f7,f6)}}:f3}}var ca=J.Init={toString:function(){return"CodeMirror.Init"}};t("value","",function(f1,f2){f1.setValue(f2)},true);t("mode",null,function(f1,f2){f1.doc.modeOption=f2;bp(f1)},true);t("indentUnit",2,bp,true);t("indentWithTabs",false);t("smartIndent",true);t("tabSize",4,function(f1){d8(f1);aj(f1);ag(f1)},true);t("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(f1,f2){f1.options.specialChars=new RegExp(f2.source+(f2.test("\t")?"":"|\t"),"g");f1.refresh()},true);t("specialCharPlaceholder",eZ,function(f1){f1.refresh()},true);t("electricChars",true);t("rtlMoveVisually",!aM);t("wholeLineUpdateBefore",true);t("theme","default",function(f1){cK(f1);dl(f1)},true);t("keyMap","default",fY);t("extraKeys",null);t("lineWrapping",false,eu,true);t("gutters",[],function(f1){cc(f1.options);dl(f1)},true);t("fixedGutter",true,function(f1,f2){f1.display.gutters.style.left=f2?dL(f1.display)+"px":"0";f1.refresh()},true);t("coverGutterNextToScrollbar",false,eM,true);t("lineNumbers",false,function(f1){cc(f1.options);dl(f1)},true);t("firstLineNumber",1,dl,true);t("lineNumberFormatter",function(f1){return f1},dl,true);t("showCursorWhenSelecting",false,bA,true);t("resetSelectionOnContextMenu",true);t("readOnly",false,function(f1,f2){if(f2=="nocursor"){aR(f1);f1.display.input.blur();f1.display.disabled=true}else{f1.display.disabled=false;if(!f2){fc(f1)}}});t("disableInput",false,function(f1,f2){if(!f2){fc(f1)}},true);t("dragDrop",true);t("cursorBlinkRate",530);t("cursorScrollMargin",0);t("cursorHeight",1,bA,true);t("singleCursorHeightPerLine",true,bA,true);t("workTime",100);t("workDelay",100);t("flattenSpans",true,d8,true);t("addModeClass",false,d8,true);t("pollInterval",100);t("undoDepth",200,function(f1,f2){f1.doc.history.undoDepth=f2});t("historyEventDelay",1250);t("viewportMargin",10,function(f1){f1.refresh()},true);t("maxHighlightLength",10000,d8,true);t("moveInputWithCursor",true,function(f1,f2){if(!f2){f1.display.inputDiv.style.top=f1.display.inputDiv.style.left=0}});t("tabindex",null,function(f1,f2){f1.display.input.tabIndex=f2||""});t("autofocus",null);var di=J.modes={},aP=J.mimeModes={};J.defineMode=function(f1,f2){if(!J.defaults.mode&&f1!="null"){J.defaults.mode=f1}if(arguments.length>2){f2.dependencies=Array.prototype.slice.call(arguments,2)}di[f1]=f2};J.defineMIME=function(f2,f1){aP[f2]=f1};J.resolveMode=function(f1){if(typeof f1=="string"&&aP.hasOwnProperty(f1)){f1=aP[f1]}else{if(f1&&typeof f1.name=="string"&&aP.hasOwnProperty(f1.name)){var f2=aP[f1.name];if(typeof f2=="string"){f2={name:f2}}f1=cj(f2,f1);f1.name=f2.name}else{if(typeof f1=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(f1)){return J.resolveMode("application/xml")}}}if(typeof f1=="string"){return{name:f1}}else{return f1||{name:"null"}}};J.getMode=function(f2,f1){var f1=J.resolveMode(f1);var f4=di[f1.name];if(!f4){return J.getMode(f2,"text/plain")}var f5=f4(f2,f1);if(df.hasOwnProperty(f1.name)){var f3=df[f1.name];for(var f6 in f3){if(!f3.hasOwnProperty(f6)){continue}if(f5.hasOwnProperty(f6)){f5["_"+f6]=f5[f6]}f5[f6]=f3[f6]}}f5.name=f1.name;if(f1.helperType){f5.helperType=f1.helperType}if(f1.modeProps){for(var f6 in f1.modeProps){f5[f6]=f1.modeProps[f6]}}return f5};J.defineMode("null",function(){return{token:function(f1){f1.skipToEnd()}}});J.defineMIME("text/plain","null");var df=J.modeExtensions={};J.extendMode=function(f3,f2){var f1=df.hasOwnProperty(f3)?df[f3]:(df[f3]={});aK(f2,f1)};J.defineExtension=function(f1,f2){J.prototype[f1]=f2};J.defineDocExtension=function(f1,f2){at.prototype[f1]=f2};J.defineOption=t;var a4=[];J.defineInitHook=function(f1){a4.push(f1)};var fb=J.helpers={};J.registerHelper=function(f2,f1,f3){if(!fb.hasOwnProperty(f2)){fb[f2]=J[f2]={_global:[]}}fb[f2][f1]=f3};J.registerGlobalHelper=function(f3,f2,f1,f4){J.registerHelper(f3,f2,f4);fb[f3]._global.push({pred:f1,val:f4})};var b1=J.copyState=function(f4,f1){if(f1===true){return f1}if(f4.copyState){return f4.copyState(f1)}var f3={};for(var f5 in f1){var f2=f1[f5];if(f2 instanceof Array){f2=f2.concat([])}f3[f5]=f2}return f3};var bY=J.startState=function(f3,f2,f1){return f3.startState?f3.startState(f2,f1):true};J.innerMode=function(f3,f1){while(f3.innerMode){var f2=f3.innerMode(f1);if(!f2||f2.mode==f3){break}f1=f2.state;f3=f2.mode}return f2||{mode:f3,state:f1}};var er=J.commands={selectAll:function(f1){f1.setSelection(X(f1.firstLine(),0),X(f1.lastLine()),Z)},singleSelection:function(f1){f1.setSelection(f1.getCursor("anchor"),f1.getCursor("head"),Z)},killLine:function(f1){eL(f1,function(f3){if(f3.empty()){var f2=e2(f1.doc,f3.head.line).text.length;if(f3.head.ch==f2&&f3.head.line<f1.lastLine()){return{from:f3.head,to:X(f3.head.line+1,0)}}else{return{from:f3.head,to:X(f3.head.line,f2)}}}else{return{from:f3.from(),to:f3.to()}}})},deleteLine:function(f1){eL(f1,function(f2){return{from:X(f2.from().line,0),to:fx(f1.doc,X(f2.to().line+1,0))}})},delLineLeft:function(f1){eL(f1,function(f2){return{from:X(f2.from().line,0),to:f2.from()}})},delWrappedLineLeft:function(f1){eL(f1,function(f2){var f4=f1.charCoords(f2.head,"div").top+5;var f3=f1.coordsChar({left:0,top:f4},"div");return{from:f3,to:f2.from()}})},delWrappedLineRight:function(f1){eL(f1,function(f2){var f4=f1.charCoords(f2.head,"div").top+5;var f3=f1.coordsChar({left:f1.display.lineDiv.offsetWidth+100,top:f4},"div");return{from:f2.from(),to:f3}})},undo:function(f1){f1.undo()},redo:function(f1){f1.redo()},undoSelection:function(f1){f1.undoSelection()},redoSelection:function(f1){f1.redoSelection()},goDocStart:function(f1){f1.extendSelection(X(f1.firstLine(),0))},goDocEnd:function(f1){f1.extendSelection(X(f1.lastLine()))},goLineStart:function(f1){f1.extendSelectionsBy(function(f2){return br(f1,f2.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(f1){f1.extendSelectionsBy(function(f2){return dy(f1,f2.head)},{origin:"+move",bias:1})},goLineEnd:function(f1){f1.extendSelectionsBy(function(f2){return dD(f1,f2.head.line)},{origin:"+move",bias:-1})},goLineRight:function(f1){f1.extendSelectionsBy(function(f2){var f3=f1.charCoords(f2.head,"div").top+5;return f1.coordsChar({left:f1.display.lineDiv.offsetWidth+100,top:f3},"div")},cQ)},goLineLeft:function(f1){f1.extendSelectionsBy(function(f2){var f3=f1.charCoords(f2.head,"div").top+5;return f1.coordsChar({left:0,top:f3},"div")},cQ)},goLineLeftSmart:function(f1){f1.extendSelectionsBy(function(f2){var f3=f1.charCoords(f2.head,"div").top+5;var f4=f1.coordsChar({left:0,top:f3},"div");if(f4.ch<f1.getLine(f4.line).search(/\S/)){return dy(f1,f2.head)}return f4},cQ)},goLineUp:function(f1){f1.moveV(-1,"line")},goLineDown:function(f1){f1.moveV(1,"line")},goPageUp:function(f1){f1.moveV(-1,"page")},goPageDown:function(f1){f1.moveV(1,"page")},goCharLeft:function(f1){f1.moveH(-1,"char")},goCharRight:function(f1){f1.moveH(1,"char")},goColumnLeft:function(f1){f1.moveH(-1,"column")},goColumnRight:function(f1){f1.moveH(1,"column")},goWordLeft:function(f1){f1.moveH(-1,"word")},goGroupRight:function(f1){f1.moveH(1,"group")},goGroupLeft:function(f1){f1.moveH(-1,"group")},goWordRight:function(f1){f1.moveH(1,"word")},delCharBefore:function(f1){f1.deleteH(-1,"char")},delCharAfter:function(f1){f1.deleteH(1,"char")},delWordBefore:function(f1){f1.deleteH(-1,"word")},delWordAfter:function(f1){f1.deleteH(1,"word")},delGroupBefore:function(f1){f1.deleteH(-1,"group")},delGroupAfter:function(f1){f1.deleteH(1,"group")},indentAuto:function(f1){f1.indentSelection("smart")},indentMore:function(f1){f1.indentSelection("add")},indentLess:function(f1){f1.indentSelection("subtract")},insertTab:function(f1){f1.replaceSelection("\t")},insertSoftTab:function(f1){var f3=[],f2=f1.listSelections(),f6=f1.options.tabSize;for(var f5=0;f5<f2.length;f5++){var f7=f2[f5].from();var f4=bR(f1.getLine(f7.line),f7.ch,f6);f3.push(new Array(f6-f4%f6+1).join(" "))}f1.replaceSelections(f3)},defaultTab:function(f1){if(f1.somethingSelected()){f1.indentSelection("add")}else{f1.execCommand("insertTab")}},transposeChars:function(f1){cI(f1,function(){var f4=f1.listSelections(),f3=[];for(var f5=0;f5<f4.length;f5++){var f7=f4[f5].head,f2=e2(f1.doc,f7.line).text;if(f2){if(f7.ch==f2.length){f7=new X(f7.line,f7.ch-1)}if(f7.ch>0){f7=new X(f7.line,f7.ch+1);f1.replaceRange(f2.charAt(f7.ch-1)+f2.charAt(f7.ch-2),X(f7.line,f7.ch-2),f7,"+transpose")}else{if(f7.line>f1.doc.first){var f6=e2(f1.doc,f7.line-1).text;if(f6){f1.replaceRange(f2.charAt(0)+"\n"+f6.charAt(f6.length-1),X(f7.line-1,f6.length-1),X(f7.line,1),"+transpose")}}}}f3.push(new dM(f7,f7))}f1.setSelections(f3)})},newlineAndIndent:function(f1){cI(f1,function(){var f2=f1.listSelections().length;for(var f4=0;f4<f2;f4++){var f3=f1.listSelections()[f4];f1.replaceRange("\n",f3.anchor,f3.head,"+input");f1.indentLine(f3.from().line+1,null,true);fu(f1)}})},toggleOverwrite:function(f1){f1.toggleOverwrite()}};var eX=J.keyMap={};eX.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};eX.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};eX.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};eX.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};eX["default"]=b5?eX.macDefault:eX.pcDefault;function fI(f1){if(typeof f1=="string"){return eX[f1]}else{return f1}}var i=J.lookupKey=function(f2,f6,f4){function f5(gb){gb=fI(gb);var ga=gb[f2];if(ga===false){return"stop"}if(ga!=null&&f4(ga)){return true}if(gb.nofallthrough){return"stop"}var f9=gb.fallthrough;if(f9==null){return false}if(Object.prototype.toString.call(f9)!="[object Array]"){return f5(f9)}for(var f8=0;f8<f9.length;++f8){var f7=f5(f9[f8]);if(f7){return f7}}return false}for(var f3=0;f3<f6.length;++f3){var f1=f5(f6[f3]);if(f1){return f1!="stop"}}};var eq=J.isModifierKey=function(f2){var f1=e3[f2.keyCode];return f1=="Ctrl"||f1=="Alt"||f1=="Shift"||f1=="Mod"};var ff=J.keyName=function(f2,f3){if(dQ&&f2.keyCode==34&&f2["char"]){return false}var f1=e3[f2.keyCode];if(f1==null||f2.altGraphKey){return false}if(f2.altKey){f1="Alt-"+f1}if(bO?f2.metaKey:f2.ctrlKey){f1="Ctrl-"+f1}if(bO?f2.ctrlKey:f2.metaKey){f1="Cmd-"+f1}if(!f3&&f2.shiftKey){f1="Shift-"+f1}return f1};J.fromTextArea=function(f8,f9){if(!f9){f9={}}f9.value=f8.value;if(!f9.tabindex&&f8.tabindex){f9.tabindex=f8.tabindex}if(!f9.placeholder&&f8.placeholder){f9.placeholder=f8.placeholder}if(f9.autofocus==null){var f1=dC();f9.autofocus=f1==f8||f8.getAttribute("autofocus")!=null&&f1==document.body}function f5(){f8.value=f7.getValue()}if(f8.form){bV(f8.form,"submit",f5);if(!f9.leaveSubmitMethodAlone){var f2=f8.form,f6=f2.submit;try{var f4=f2.submit=function(){f5();f2.submit=f6;f2.submit();f2.submit=f4}}catch(f3){}}}f8.style.display="none";var f7=J(function(ga){f8.parentNode.insertBefore(ga,f8.nextSibling)},f9);f7.save=f5;f7.getTextArea=function(){return f8};f7.toTextArea=function(){f7.toTextArea=isNaN;f5();f8.parentNode.removeChild(f7.getWrapperElement());f8.style.display="";if(f8.form){d0(f8.form,"submit",f5);if(typeof f8.form.submit=="function"){f8.form.submit=f6}}};return f7};var eH=J.StringStream=function(f1,f2){this.pos=this.start=0;this.string=f1;this.tabSize=f2||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};eH.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}},eat:function(f1){var f3=this.string.charAt(this.pos);if(typeof f1=="string"){var f2=f3==f1}else{var f2=f3&&(f1.test?f1.test(f3):f1(f3))}if(f2){++this.pos;return f3}},eatWhile:function(f1){var f2=this.pos;while(this.eat(f1)){}return this.pos>f2},eatSpace:function(){var f1=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos}return this.pos>f1},skipToEnd:function(){this.pos=this.string.length},skipTo:function(f1){var f2=this.string.indexOf(f1,this.pos);if(f2>-1){this.pos=f2;return true}},backUp:function(f1){this.pos-=f1},column:function(){if(this.lastColumnPos<this.start){this.lastColumnValue=bR(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?bR(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return bR(this.string,null,this.tabSize)-(this.lineStart?bR(this.string,this.lineStart,this.tabSize):0)},match:function(f5,f2,f1){if(typeof f5=="string"){var f6=function(f7){return f1?f7.toLowerCase():f7};var f4=this.string.substr(this.pos,f5.length);if(f6(f4)==f6(f5)){if(f2!==false){this.pos+=f5.length}return true}}else{var f3=this.string.slice(this.pos).match(f5);if(f3&&f3.index>0){return null}if(f3&&f2!==false){this.pos+=f3[0].length}return f3}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(f2,f1){this.lineStart+=f2;try{return f1()}finally{this.lineStart-=f2}}};var Q=J.TextMarker=function(f2,f1){this.lines=[];this.type=f1;this.doc=f2};bw(Q);Q.prototype.clear=function(){if(this.explicitlyCleared){return}var f8=this.doc.cm,f2=f8&&!f8.curOp;if(f2){cE(f8)}if(e5(this,"clear")){var f9=this.find();if(f9){ad(this,"clear",f9.from,f9.to)}}var f3=null,f6=null;for(var f4=0;f4<this.lines.length;++f4){var ga=this.lines[f4];var f7=eW(ga.markedSpans,this);if(f8&&!this.collapsed){S(f8,bL(ga),"text")}else{if(f8){if(f7.to!=null){f6=bL(ga)}if(f7.from!=null){f3=bL(ga)}}}ga.markedSpans=ev(ga.markedSpans,f7);if(f7.from==null&&this.collapsed&&!fk(this.doc,ga)&&f8){fO(ga,aT(f8.display))}}if(f8&&this.collapsed&&!f8.options.lineWrapping){for(var f4=0;f4<this.lines.length;++f4){var f1=z(this.lines[f4]),f5=d9(f1);if(f5>f8.display.maxLineLength){f8.display.maxLine=f1;f8.display.maxLineLength=f5;f8.display.maxLineChanged=true}}}if(f3!=null&&f8&&this.collapsed){ag(f8,f3,f6+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(f8){el(f8.doc)}}if(f8){ad(f8,"markerCleared",f8,this)}if(f2){al(f8)}if(this.parent){this.parent.clear()}};Q.prototype.find=function(f4,f2){if(f4==null&&this.type=="bookmark"){f4=1}var f7,f6;for(var f3=0;f3<this.lines.length;++f3){var f1=this.lines[f3];var f5=eW(f1.markedSpans,this);if(f5.from!=null){f7=X(f2?f1:bL(f1),f5.from);if(f4==-1){return f7}}if(f5.to!=null){f6=X(f2?f1:bL(f1),f5.to);if(f4==1){return f6}}}return f7&&{from:f7,to:f6}};Q.prototype.changed=function(){var f3=this.find(-1,true),f2=this,f1=this.doc.cm;if(!f3||!f1){return}cI(f1,function(){var f5=f3.line,f6=bL(f3.line);var f4=eY(f1,f6);if(f4){au(f4);f1.curOp.selectionChanged=f1.curOp.forceUpdate=true}f1.curOp.updateMaxLine=true;if(!fk(f2.doc,f5)&&f2.height!=null){var f8=f2.height;f2.height=null;var f7=cS(f2)-f8;if(f7){fO(f5,f5.height+f7)}}})};Q.prototype.attachLine=function(f1){if(!this.lines.length&&this.doc.cm){var f2=this.doc.cm.curOp;if(!f2.maybeHiddenMarkers||db(f2.maybeHiddenMarkers,this)==-1){(f2.maybeUnhiddenMarkers||(f2.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(f1)};Q.prototype.detachLine=function(f1){this.lines.splice(db(this.lines,f1),1);if(!this.lines.length&&this.doc.cm){var f2=this.doc.cm.curOp;(f2.maybeHiddenMarkers||(f2.maybeHiddenMarkers=[])).push(this)}};var a1=0;function et(f9,f7,f8,gb,f5){if(gb&&gb.shared){return P(f9,f7,f8,gb,f5)}if(f9.cm&&!f9.cm.curOp){return cW(f9.cm,et)(f9,f7,f8,gb,f5)}var f4=new Q(f9,f5),ga=cd(f7,f8);if(gb){aK(gb,f4,false)}if(ga>0||ga==0&&f4.clearWhenEmpty!==false){return f4}if(f4.replacedWith){f4.collapsed=true;f4.widgetNode=fK("span",[f4.replacedWith],"CodeMirror-widget");if(!gb.handleMouseEvents){f4.widgetNode.ignoreEvents=true}if(gb.insertLeft){f4.widgetNode.insertLeft=true}}if(f4.collapsed){if(A(f9,f7.line,f7,f8,f4)||f7.line!=f8.line&&A(f9,f8.line,f7,f8,f4)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}a3=true}if(f4.addToHistory){fA(f9,{from:f7,to:f8,origin:"markText"},f9.sel,NaN)}var f2=f7.line,f6=f9.cm,f1;f9.iter(f2,f8.line+1,function(gc){if(f6&&f4.collapsed&&!f6.options.lineWrapping&&z(gc)==f6.display.maxLine){f1=true}if(f4.collapsed&&f2!=f7.line){fO(gc,0)}cb(gc,new d5(f4,f2==f7.line?f7.ch:null,f2==f8.line?f8.ch:null));++f2});if(f4.collapsed){f9.iter(f7.line,f8.line+1,function(gc){if(fk(f9,gc)){fO(gc,0)}})}if(f4.clearOnEnter){bV(f4,"beforeCursorEnter",function(){f4.clear()})}if(f4.readOnly){fV=true;if(f9.history.done.length||f9.history.undone.length){f9.clearHistory()}}if(f4.collapsed){f4.id=++a1;f4.atomic=true}if(f6){if(f1){f6.curOp.updateMaxLine=true}if(f4.collapsed){ag(f6,f7.line,f8.line+1)}else{if(f4.className||f4.title||f4.startStyle||f4.endStyle){for(var f3=f7.line;f3<=f8.line;f3++){S(f6,f3,"text")}}}if(f4.atomic){el(f6.doc)}ad(f6,"markerAdded",f6,f4)}return f4}var y=J.SharedTextMarker=function(f3,f2){this.markers=f3;this.primary=f2;for(var f1=0;f1<f3.length;++f1){f3[f1].parent=this}};bw(y);y.prototype.clear=function(){if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var f1=0;f1<this.markers.length;++f1){this.markers[f1].clear()}ad(this,"clear")};y.prototype.find=function(f2,f1){return this.primary.find(f2,f1)};function P(f5,f8,f7,f1,f3){f1=aK(f1);f1.shared=false;var f6=[et(f5,f8,f7,f1,f3)],f2=f6[0];var f4=f1.widgetNode;dV(f5,function(ga){if(f4){f1.widgetNode=f4.cloneNode(true)}f6.push(et(ga,fx(ga,f8),fx(ga,f7),f1,f3));for(var f9=0;f9<ga.linked.length;++f9){if(ga.linked[f9].isParent){return}}f2=fv(f6)});return new y(f6,f2)}function eD(f1){return f1.findMarks(X(f1.first,0),f1.clipPos(X(f1.lastLine())),function(f2){return f2.parent})}function dv(f6,f7){for(var f4=0;f4<f7.length;f4++){var f2=f7[f4],f8=f2.find();var f1=f6.clipPos(f8.from),f5=f6.clipPos(f8.to);if(cd(f1,f5)){var f3=et(f6,f1,f5,f2.primary,f2.primary.type);f2.markers.push(f3);f3.parent=f2}}}function eb(f4){for(var f3=0;f3<f4.length;f3++){var f1=f4[f3],f6=[f1.primary.doc];dV(f1.primary.doc,function(f7){f6.push(f7)});for(var f2=0;f2<f1.markers.length;f2++){var f5=f1.markers[f2];if(db(f6,f5.doc)==-1){f5.parent=null;f1.markers.splice(f2--,1)}}}}function d5(f1,f3,f2){this.marker=f1;this.from=f3;this.to=f2}function eW(f3,f1){if(f3){for(var f2=0;f2<f3.length;++f2){var f4=f3[f2];if(f4.marker==f1){return f4}}}}function ev(f2,f3){for(var f4,f1=0;f1<f2.length;++f1){if(f2[f1]!=f3){(f4||(f4=[])).push(f2[f1])}}return f4}function cb(f1,f2){f1.markedSpans=f1.markedSpans?f1.markedSpans.concat([f2]):[f2];f2.marker.attachLine(f1)}function aN(f2,f3,f7){if(f2){for(var f5=0,f8;f5<f2.length;++f5){var f9=f2[f5],f6=f9.marker;var f1=f9.from==null||(f6.inclusiveLeft?f9.from<=f3:f9.from<f3);if(f1||f9.from==f3&&f6.type=="bookmark"&&(!f7||!f9.marker.insertLeft)){var f4=f9.to==null||(f6.inclusiveRight?f9.to>=f3:f9.to>f3);(f8||(f8=[])).push(new d5(f6,f9.from,f4?null:f9.to))}}}return f8}function aA(f2,f4,f7){if(f2){for(var f5=0,f8;f5<f2.length;++f5){var f9=f2[f5],f6=f9.marker;var f3=f9.to==null||(f6.inclusiveRight?f9.to>=f4:f9.to>f4);if(f3||f9.from==f4&&f6.type=="bookmark"&&(!f7||f9.marker.insertLeft)){var f1=f9.from==null||(f6.inclusiveLeft?f9.from<=f4:f9.from<f4);(f8||(f8=[])).push(new d5(f6,f1?null:f9.from-f4,f9.to==null?null:f9.to-f4))}}}return f8}function d7(gd,ga){var f9=b7(gd,ga.from.line)&&e2(gd,ga.from.line).markedSpans;var gg=b7(gd,ga.to.line)&&e2(gd,ga.to.line).markedSpans;if(!f9&&!gg){return null}var f2=ga.from.ch,f5=ga.to.ch,f8=cd(ga.from,ga.to)==0;var f7=aN(f9,f2,f8);var gf=aA(gg,f5,f8);var ge=ga.text.length==1,f3=fv(ga.text).length+(ge?f2:0);if(f7){for(var f4=0;f4<f7.length;++f4){var gc=f7[f4];if(gc.to==null){var gh=eW(gf,gc.marker);if(!gh){gc.to=f2}else{if(ge){gc.to=gh.to==null?null:gh.to+f3}}}}}if(gf){for(var f4=0;f4<gf.length;++f4){var gc=gf[f4];if(gc.to!=null){gc.to+=f3}if(gc.from==null){var gh=eW(f7,gc.marker);if(!gh){gc.from=f3;if(ge){(f7||(f7=[])).push(gc)}}}else{gc.from+=f3;if(ge){(f7||(f7=[])).push(gc)}}}}if(f7){f7=r(f7)}if(gf&&gf!=f7){gf=r(gf)}var f6=[f7];if(!ge){var gb=ga.text.length-2,f1;if(gb>0&&f7){for(var f4=0;f4<f7.length;++f4){if(f7[f4].to==null){(f1||(f1=[])).push(new d5(f7[f4].marker,null,null))}}}for(var f4=0;f4<gb;++f4){f6.push(f1)}f6.push(gf)}return f6}function r(f2){for(var f1=0;f1<f2.length;++f1){var f3=f2[f1];if(f3.from!=null&&f3.from==f3.to&&f3.marker.clearWhenEmpty!==false){f2.splice(f1--,1)}}if(!f2.length){return null}return f2}function dX(f9,f7){var f1=b2(f9,f7);var ga=d7(f9,f7);if(!f1){return ga}if(!ga){return f1}for(var f4=0;f4<f1.length;++f4){var f5=f1[f4],f6=ga[f4];if(f5&&f6){spans:for(var f3=0;f3<f6.length;++f3){var f8=f6[f3];for(var f2=0;f2<f5.length;++f2){if(f5[f2].marker==f8.marker){continue spans}}f5.push(f8)}}else{if(f6){f1[f4]=f6}}}return f1}function cD(gd,gb,gc){var f5=null;gd.iter(gb.line,gc.line+1,function(ge){if(ge.markedSpans){for(var gf=0;gf<ge.markedSpans.length;++gf){var gg=ge.markedSpans[gf].marker;if(gg.readOnly&&(!f5||db(f5,gg)==-1)){(f5||(f5=[])).push(gg)}}}});if(!f5){return null}var f6=[{from:gb,to:gc}];for(var f7=0;f7<f5.length;++f7){var f8=f5[f7],f3=f8.find(0);for(var f4=0;f4<f6.length;++f4){var f2=f6[f4];if(cd(f2.to,f3.from)<0||cd(f2.from,f3.to)>0){continue}var ga=[f4,1],f1=cd(f2.from,f3.from),f9=cd(f2.to,f3.to);if(f1<0||!f8.inclusiveLeft&&!f1){ga.push({from:f2.from,to:f3.from})}if(f9>0||!f8.inclusiveRight&&!f9){ga.push({from:f3.to,to:f2.to})}f6.splice.apply(f6,ga);f4+=ga.length-1}}return f6}function fR(f1){var f3=f1.markedSpans;if(!f3){return}for(var f2=0;f2<f3.length;++f2){f3[f2].marker.detachLine(f1)}f1.markedSpans=null}function cX(f1,f3){if(!f3){return}for(var f2=0;f2<f3.length;++f2){f3[f2].marker.attachLine(f1)}f1.markedSpans=f3}function w(f1){return f1.inclusiveLeft?-1:0}function bU(f1){return f1.inclusiveRight?1:0}function dE(f4,f2){var f6=f4.lines.length-f2.lines.length;if(f6!=0){return f6}var f3=f4.find(),f7=f2.find();var f1=cd(f3.from,f7.from)||w(f4)-w(f2);if(f1){return -f1}var f5=cd(f3.to,f7.to)||bU(f4)-bU(f2);if(f5){return f5}return f2.id-f4.id}function a2(f2,f6){var f1=a3&&f2.markedSpans,f5;if(f1){for(var f4,f3=0;f3<f1.length;++f3){f4=f1[f3];if(f4.marker.collapsed&&(f6?f4.from:f4.to)==null&&(!f5||dE(f5,f4.marker)<0)){f5=f4.marker}}}return f5}function eC(f1){return a2(f1,true)}function ei(f1){return a2(f1,false)}function A(f9,f3,f7,f8,f5){var gc=e2(f9,f3);var f1=a3&&gc.markedSpans;if(f1){for(var f4=0;f4<f1.length;++f4){var f2=f1[f4];if(!f2.marker.collapsed){continue}var gb=f2.marker.find(0);var ga=cd(gb.from,f7)||w(f2.marker)-w(f5);var f6=cd(gb.to,f8)||bU(f2.marker)-bU(f5);if(ga>=0&&f6<=0||ga<=0&&f6>=0){continue}if(ga<=0&&(cd(gb.to,f7)>0||(f2.marker.inclusiveRight&&f5.inclusiveLeft))||ga>=0&&(cd(gb.from,f8)<0||(f2.marker.inclusiveLeft&&f5.inclusiveRight))){return true}}}}function z(f2){var f1;while(f1=eC(f2)){f2=f1.find(-1,true).line}return f2}function h(f3){var f1,f2;while(f1=ei(f3)){f3=f1.find(1,true).line;(f2||(f2=[])).push(f3)}return f2}function aS(f4,f2){var f1=e2(f4,f2),f3=z(f1);if(f1==f3){return f2}return bL(f3)}function dR(f4,f3){if(f3>f4.lastLine()){return f3}var f2=e2(f4,f3),f1;if(!fk(f4,f2)){return f3}while(f1=ei(f2)){f2=f1.find(1,true).line}return bL(f2)+1}function fk(f5,f2){var f1=a3&&f2.markedSpans;if(f1){for(var f4,f3=0;f3<f1.length;++f3){f4=f1[f3];if(!f4.marker.collapsed){continue}if(f4.from==null){return true}if(f4.marker.widgetNode){continue}if(f4.from==0&&f4.marker.inclusiveLeft&&U(f5,f2,f4)){return true}}}}function U(f6,f2,f4){if(f4.to==null){var f1=f4.marker.find(1,true);return U(f6,f1.line,eW(f1.line.markedSpans,f4.marker))}if(f4.marker.inclusiveRight&&f4.to==f2.text.length){return true}for(var f5,f3=0;f3<f2.markedSpans.length;++f3){f5=f2.markedSpans[f3];if(f5.marker.collapsed&&!f5.marker.widgetNode&&f5.from==f4.to&&(f5.to==null||f5.to!=f4.from)&&(f5.marker.inclusiveLeft||f4.marker.inclusiveRight)&&U(f6,f2,f5)){return true}}}var ds=J.LineWidget=function(f1,f4,f2){if(f2){for(var f3 in f2){if(f2.hasOwnProperty(f3)){this[f3]=f2[f3]}}}this.cm=f1;this.node=f4};bw(ds);function dO(f1,f2,f3){if(bK(f2)<((f1.curOp&&f1.curOp.scrollTop)||f1.doc.scrollTop)){cH(f1,null,f3)}}ds.prototype.clear=function(){var f2=this.cm,f4=this.line.widgets,f3=this.line,f6=bL(f3);if(f6==null||!f4){return}for(var f5=0;f5<f4.length;++f5){if(f4[f5]==this){f4.splice(f5--,1)}}if(!f4.length){f3.widgets=null}var f1=cS(this);cI(f2,function(){dO(f2,f3,-f1);S(f2,f6,"widget");fO(f3,Math.max(0,f3.height-f1))})};ds.prototype.changed=function(){var f2=this.height,f1=this.cm,f3=this.line;this.height=null;var f4=cS(this)-f2;if(!f4){return}cI(f1,function(){f1.curOp.forceUpdate=true;dO(f1,f3,f4);fO(f3,f3.height+f4)})};function cS(f2){if(f2.height!=null){return f2.height}if(!fT(document.body,f2.node)){var f1="position: relative;";if(f2.coverGutter){f1+="margin-left: -"+f2.cm.getGutterElement().offsetWidth+"px;"}bP(f2.cm.display.measure,fK("div",[f2.node],null,f1))}return f2.height=f2.node.offsetHeight}function bF(f1,f5,f3,f2){var f4=new ds(f1,f3,f2);if(f4.noHScroll){f1.display.alignWidgets=true}em(f1.doc,f5,"widget",function(f7){var f8=f7.widgets||(f7.widgets=[]);if(f4.insertAt==null){f8.push(f4)}else{f8.splice(Math.min(f8.length-1,Math.max(0,f4.insertAt)),0,f4)}f4.line=f7;if(!fk(f1.doc,f7)){var f6=bK(f7)<f1.doc.scrollTop;fO(f7,f7.height+cS(f4));if(f6){cH(f1,null,f4.height)}f1.curOp.forceUpdate=true}return true});return f4}var fQ=J.Line=function(f3,f2,f1){this.text=f3;cX(this,f2);this.height=f1?f1(this):1};bw(fQ);fQ.prototype.lineNo=function(){return bL(this)};function ea(f2,f5,f3,f1){f2.text=f5;if(f2.stateAfter){f2.stateAfter=null}if(f2.styles){f2.styles=null}if(f2.order!=null){f2.order=null}fR(f2);cX(f2,f3);var f4=f1?f1(f2):1;if(f4!=f2.height){fO(f2,f4)}}function bz(f1){f1.parent=null;fR(f1)}function dc(f3,f2){if(f3){for(;;){var f1=f3.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!f1){break}f3=f3.slice(0,f1.index)+f3.slice(f1.index+f1[0].length);var f4=f1[1]?"bgClass":"textClass";if(f2[f4]==null){f2[f4]=f1[2]}else{if(!(new RegExp("(?:^|s)"+f1[2]+"(?:$|s)")).test(f2[f4])){f2[f4]+=" "+f1[2]}}}}return f3}function fe(f3,f2){if(f3.blankLine){return f3.blankLine(f2)}if(!f3.innerMode){return}var f1=J.innerMode(f3,f2);if(f1.mode.blankLine){return f1.mode.blankLine(f1.state)}}function ep(f5,f4,f3){for(var f1=0;f1<10;f1++){var f2=f5.token(f4,f3);if(f4.pos>f4.start){return f2}}throw new Error("Mode "+f5.name+" failed to advance stream.")}function x(gb,gd,f6,f2,f7,f4,f5){var f3=f6.flattenSpans;if(f3==null){f3=gb.options.flattenSpans}var f9=0,f8=null;var gc=new eH(gd,gb.options.tabSize),f1;if(gd==""){dc(fe(f6,f2),f4)}while(!gc.eol()){if(gc.pos>gb.options.maxHighlightLength){f3=false;if(f5){dm(gb,gd,f2,gc.pos)}gc.pos=gd.length;f1=null}else{f1=dc(ep(f6,gc,f2),f4)}if(gb.options.addModeClass){var ge=J.innerMode(f6,f2).mode.name;if(ge){f1="m-"+(f1?ge+" "+f1:ge)}}if(!f3||f8!=f1){if(f9<gc.start){f7(gc.start,f8)}f9=gc.start;f8=f1}gc.start=gc.pos}while(f9<gc.pos){var ga=Math.min(gc.pos,f9+50000);f7(ga,f8);f9=ga}}function fn(f8,ga,f1,f5){var f9=[f8.state.modeGen],f4={};x(f8,ga.text,f8.doc.mode,f1,function(gb,gc){f9.push(gb,gc)},f4,f5);for(var f2=0;f2<f8.state.overlays.length;++f2){var f6=f8.state.overlays[f2],f7=1,f3=0;x(f8,ga.text,f6.mode,true,function(gb,gd){var gf=f7;while(f3<gb){var gc=f9[f7];if(gc>gb){f9.splice(f7,1,gb,f9[f7+1],gc)}f7+=2;f3=Math.min(gb,gc)}if(!gd){return}if(f6.opaque){f9.splice(gf,f7-gf,gb,"cm-overlay "+gd);f7=gf+2}else{for(;gf<f7;gf+=2){var ge=f9[gf+1];f9[gf+1]=(ge?ge+" ":"")+"cm-overlay "+gd}}},f4)}return{styles:f9,classes:f4.bgClass||f4.textClass?f4:null}}function c0(f2,f3){if(!f3.styles||f3.styles[0]!=f2.state.modeGen){var f1=fn(f2,f3,f3.stateAfter=dr(f2,bL(f3)));f3.styles=f1.styles;if(f1.classes){f3.styleClasses=f1.classes}else{if(f3.styleClasses){f3.styleClasses=null}}}return f3.styles}function dm(f1,f6,f3,f2){var f5=f1.doc.mode;var f4=new eH(f6,f1.options.tabSize);f4.start=f4.pos=f2||0;if(f6==""){fe(f5,f3)}while(!f4.eol()&&f4.pos<=f1.options.maxHighlightLength){ep(f5,f4,f3);f4.start=f4.pos}}var dK={},bZ={};function eK(f3,f2){if(!f3||/^\s*$/.test(f3)){return null}var f1=f2.addModeClass?bZ:dK;return f1[f3]||(f1[f3]=f3.replace(/\S+/g,"cm-$&"))}function eF(f2,f6){var f7=fK("span",null,null,cU?"padding-right: .1px":null);var f4={pre:fK("pre",[f7]),content:f7,col:0,pos:0,cm:f2};f6.measure={};for(var f5=0;f5<=(f6.rest?f6.rest.length:0);f5++){var f3=f5?f6.rest[f5-1]:f6.line,f1;f4.pos=0;f4.addToken=u;if((dz||cU)&&f2.getOption("lineWrapping")){f4.addToken=ft(f4.addToken)}if(bM(f2.display.measure)&&(f1=a(f3))){f4.addToken=V(f4.addToken,f1)}f4.map=[];bm(f3,f4,c0(f2,f3));if(f3.styleClasses){if(f3.styleClasses.bgClass){f4.bgClass=fF(f3.styleClasses.bgClass,f4.bgClass||"")}if(f3.styleClasses.textClass){f4.textClass=fF(f3.styleClasses.textClass,f4.textClass||"")}}if(f4.map.length==0){f4.map.push(0,0,f4.content.appendChild(bl(f2.display.measure)))}if(f5==0){f6.measure.map=f4.map;f6.measure.cache={}}else{(f6.measure.maps||(f6.measure.maps=[])).push(f4.map);(f6.measure.caches||(f6.measure.caches=[])).push({})}}aC(f2,"renderLine",f2,f6.line,f4.pre);if(f4.pre.className){f4.textClass=fF(f4.pre.className,f4.textClass||"")}return f4}function eZ(f2){var f1=fK("span","\u2022","cm-invalidchar");f1.title="\\u"+f2.charCodeAt(0).toString(16);return f1}function u(f6,gg,f1,f4,gh,gf){if(!gg){return}var gb=f6.cm.options.specialChars,ga=false;if(!gb.test(gg)){f6.col+=gg.length;var f9=document.createTextNode(gg);f6.map.push(f6.pos,f6.pos+gg.length,f9);if(dz&&l<9){ga=true}f6.pos+=gg.length}else{var f9=document.createDocumentFragment(),gd=0;while(true){gb.lastIndex=gd;var f2=gb.exec(gg);var f8=f2?f2.index-gd:gg.length-gd;if(f8){var f5=document.createTextNode(gg.slice(gd,gd+f8));if(dz&&l<9){f9.appendChild(fK("span",[f5]))}else{f9.appendChild(f5)}f6.map.push(f6.pos,f6.pos+f8,f5);f6.col+=f8;f6.pos+=f8}if(!f2){break}gd+=f8+1;if(f2[0]=="\t"){var f7=f6.cm.options.tabSize,gc=f7-f6.col%f7;var f5=f9.appendChild(fK("span",co(gc),"cm-tab"));f6.col+=gc}else{var f5=f6.cm.options.specialCharPlaceholder(f2[0]);if(dz&&l<9){f9.appendChild(fK("span",[f5]))}else{f9.appendChild(f5)}f6.col+=1}f6.map.push(f6.pos,f6.pos+1,f5);f6.pos++}}if(f1||f4||gh||ga){var ge=f1||"";if(f4){ge+=f4}if(gh){ge+=gh}var f3=fK("span",[f9],ge);if(gf){f3.title=gf}return f6.content.appendChild(f3)}f6.content.appendChild(f9)}function ft(f1){function f2(f3){var f4=" ";for(var f5=0;f5<f3.length-2;++f5){f4+=f5%2?" ":"\u00a0"}f4+=" ";return f4}return function(f4,f8,f5,f3,f7,f6){f1(f4,f8.replace(/ {3,}/g,f2),f5,f3,f7,f6)}}function V(f2,f1){return function(f9,gb,f3,f7,gc,ga){f3=f3?f3+" cm-force-border":"cm-force-border";var f4=f9.pos,f6=f4+gb.length;for(;;){for(var f8=0;f8<f1.length;f8++){var f5=f1[f8];if(f5.to>f4&&f5.from<=f4){break}}if(f5.to>=f6){return f2(f9,gb,f3,f7,gc,ga)}f2(f9,gb.slice(0,f5.to-f4),f3,f7,null,ga);f7=null;gb=gb.slice(f5.to-f4);f4=f5.to}}}function ab(f2,f4,f1,f3){var f5=!f3&&f1.widgetNode;if(f5){f2.map.push(f2.pos,f2.pos+f4,f5);f2.content.appendChild(f5)}f2.pos+=f4}function bm(ga,gg,f9){var f6=ga.markedSpans,f8=ga.text,ge=0;if(!f6){for(var gj=1;gj<f9.length;gj+=2){gg.addToken(gg,f8.slice(ge,ge=f9[gj]),eK(f9[gj+1],gg.cm.options))}return}var gk=f8.length,f5=0,gj=1,gc="",gl;var gn=0,f1,gm,gd,go,f3;for(;;){if(gn==f5){f1=gm=gd=go="";f3=null;gn=Infinity;var f7=[];for(var gh=0;gh<f6.length;++gh){var gi=f6[gh],gf=gi.marker;if(gi.from<=f5&&(gi.to==null||gi.to>f5)){if(gi.to!=null&&gn>gi.to){gn=gi.to;gm=""}if(gf.className){f1+=" "+gf.className}if(gf.startStyle&&gi.from==f5){gd+=" "+gf.startStyle}if(gf.endStyle&&gi.to==gn){gm+=" "+gf.endStyle}if(gf.title&&!go){go=gf.title}if(gf.collapsed&&(!f3||dE(f3.marker,gf)<0)){f3=gi}}else{if(gi.from>f5&&gn>gi.from){gn=gi.from}}if(gf.type=="bookmark"&&gi.from==f5&&gf.widgetNode){f7.push(gf)}}if(f3&&(f3.from||0)==f5){ab(gg,(f3.to==null?gk+1:f3.to)-f5,f3.marker,f3.from==null);if(f3.to==null){return}}if(!f3&&f7.length){for(var gh=0;gh<f7.length;++gh){ab(gg,0,f7[gh])}}}if(f5>=gk){break}var gb=Math.min(gk,gn);while(true){if(gc){var f2=f5+gc.length;if(!f3){var f4=f2>gb?gc.slice(0,gb-f5):gc;gg.addToken(gg,f4,gl?gl+f1:f1,gd,f5+f4.length==gn?gm:"",go)}if(f2>=gb){gc=gc.slice(gb-f5);f5=gb;break}f5=f2;gd=""}gc=f8.slice(ge,ge=f9[gj++]);gl=eK(f9[gj++],gg.cm.options)}}}function dG(f1,f2){return f2.from.ch==0&&f2.to.ch==0&&fv(f2.text)==""&&(!f1.cm||f1.cm.options.wholeLineUpdateBefore)}function fm(ge,f9,f1,f5){function gf(gh){return f1?f1[gh]:null}function f2(gh,gj,gi){ea(gh,gj,gi,f5);ad(gh,"change",gh,f9)}var gc=f9.from,gd=f9.to,gg=f9.text;var ga=e2(ge,gc.line),gb=e2(ge,gd.line);var f8=fv(gg),f4=gf(gg.length-1),f7=gd.line-gc.line;if(dG(ge,f9)){for(var f3=0,f6=[];f3<gg.length-1;++f3){f6.push(new fQ(gg[f3],gf(f3),f5))}f2(gb,gb.text,f4);if(f7){ge.remove(gc.line,f7)}if(f6.length){ge.insert(gc.line,f6)}}else{if(ga==gb){if(gg.length==1){f2(ga,ga.text.slice(0,gc.ch)+f8+ga.text.slice(gd.ch),f4)}else{for(var f6=[],f3=1;f3<gg.length-1;++f3){f6.push(new fQ(gg[f3],gf(f3),f5))}f6.push(new fQ(f8+ga.text.slice(gd.ch),f4,f5));f2(ga,ga.text.slice(0,gc.ch)+gg[0],gf(0));ge.insert(gc.line+1,f6)}}else{if(gg.length==1){f2(ga,ga.text.slice(0,gc.ch)+gg[0]+gb.text.slice(gd.ch),gf(0));ge.remove(gc.line+1,f7)}else{f2(ga,ga.text.slice(0,gc.ch)+gg[0],gf(0));f2(gb,f8+gb.text.slice(gd.ch),f4);for(var f3=1,f6=[];f3<gg.length-1;++f3){f6.push(new fQ(gg[f3],gf(f3),f5))}if(f7>1){ge.remove(gc.line+1,f7-1)}ge.insert(gc.line+1,f6)}}}ad(ge,"change",ge,f9)}function eN(f2){this.lines=f2;this.parent=null;for(var f3=0,f1=0;f3<f2.length;++f3){f2[f3].parent=this;f1+=f2[f3].height}this.height=f1}eN.prototype={chunkSize:function(){return this.lines.length},removeInner:function(f1,f5){for(var f3=f1,f4=f1+f5;f3<f4;++f3){var f2=this.lines[f3];this.height-=f2.height;bz(f2);ad(f2,"delete")}this.lines.splice(f1,f5)},collapse:function(f1){f1.push.apply(f1,this.lines)},insertInner:function(f2,f3,f1){this.height+=f1;this.lines=this.lines.slice(0,f2).concat(f3).concat(this.lines.slice(f2));for(var f4=0;f4<f3.length;++f4){f3[f4].parent=this}},iterN:function(f1,f4,f3){for(var f2=f1+f4;f1<f2;++f1){if(f3(this.lines[f1])){return true}}}};function fl(f4){this.children=f4;var f3=0,f1=0;for(var f2=0;f2<f4.length;++f2){var f5=f4[f2];f3+=f5.chunkSize();f1+=f5.height;f5.parent=this}this.size=f3;this.height=f1;this.parent=null}fl.prototype={chunkSize:function(){return this.size},removeInner:function(f1,f8){this.size-=f8;for(var f3=0;f3<this.children.length;++f3){var f7=this.children[f3],f5=f7.chunkSize();if(f1<f5){var f4=Math.min(f8,f5-f1),f6=f7.height;f7.removeInner(f1,f4);this.height-=f6-f7.height;if(f5==f4){this.children.splice(f3--,1);f7.parent=null}if((f8-=f4)==0){break}f1=0}else{f1-=f5}}if(this.size-f8<25&&(this.children.length>1||!(this.children[0] instanceof eN))){var f2=[];this.collapse(f2);this.children=[new eN(f2)];this.children[0].parent=this}},collapse:function(f1){for(var f2=0;f2<this.children.length;++f2){this.children[f2].collapse(f1)}},insertInner:function(f2,f3,f1){this.size+=f3.length;this.height+=f1;for(var f6=0;f6<this.children.length;++f6){var f8=this.children[f6],f7=f8.chunkSize();if(f2<=f7){f8.insertInner(f2,f3,f1);if(f8.lines&&f8.lines.length>50){while(f8.lines.length>50){var f5=f8.lines.splice(f8.lines.length-25,25);var f4=new eN(f5);f8.height-=f4.height;this.children.splice(f6+1,0,f4);f4.parent=this}this.maybeSpill()}break}f2-=f7}},maybeSpill:function(){if(this.children.length<=10){return}var f4=this;do{var f2=f4.children.splice(f4.children.length-5,5);var f3=new fl(f2);if(!f4.parent){var f5=new fl(f4.children);f5.parent=f4;f4.children=[f5,f3];f4=f5}else{f4.size-=f3.size;f4.height-=f3.height;var f1=db(f4.parent.children,f4);f4.parent.children.splice(f1+1,0,f3)}f3.parent=f4.parent}while(f4.children.length>10);f4.parent.maybeSpill()},iterN:function(f1,f7,f6){for(var f2=0;f2<this.children.length;++f2){var f5=this.children[f2],f4=f5.chunkSize();if(f1<f4){var f3=Math.min(f7,f4-f1);if(f5.iterN(f1,f3,f6)){return true}if((f7-=f3)==0){break}f1=0}else{f1-=f4}}}};var cp=0;var at=J.Doc=function(f3,f2,f1){if(!(this instanceof at)){return new at(f3,f2,f1)}if(f1==null){f1=0}fl.call(this,[new eN([new fQ("",null)])]);this.first=f1;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=f1;var f4=X(f1,0);this.sel=eG(f4);this.history=new fG(null);this.id=++cp;this.modeOption=f2;if(typeof f3=="string"){f3=aW(f3)}fm(this,{from:f4,to:f4,text:f3});bS(this,eG(f4),Z)};at.prototype=cj(fl.prototype,{constructor:at,iter:function(f3,f2,f1){if(f1){this.iterN(f3-this.first,f2-f3,f1)}else{this.iterN(this.first,this.first+this.size,f3)}},insert:function(f2,f3){var f1=0;for(var f4=0;f4<f3.length;++f4){f1+=f3[f4].height}this.insertInner(f2-this.first,f3,f1)},remove:function(f1,f2){this.removeInner(f1-this.first,f2)},getValue:function(f2){var f1=aY(this,this.first,this.first+this.size);if(f2===false){return f1}return f1.join(f2||"\n")},setValue:cA(function(f2){var f3=X(this.first,0),f1=this.first+this.size-1;bb(this,{from:f3,to:X(f1,e2(this,f1).text.length),text:aW(f2),origin:"setValue"},true);bS(this,eG(f3))}),replaceRange:function(f2,f4,f3,f1){f4=fx(this,f4);f3=f3?fx(this,f3):f4;aX(this,f2,f4,f3,f1)},getRange:function(f4,f3,f2){var f1=fM(this,fx(this,f4),fx(this,f3));if(f2===false){return f1}return f1.join(f2||"\n")},getLine:function(f2){var f1=this.getLineHandle(f2);return f1&&f1.text},getLineHandle:function(f1){if(b7(this,f1)){return e2(this,f1)}},getLineNumber:function(f1){return bL(f1)},getLineHandleVisualStart:function(f1){if(typeof f1=="number"){f1=e2(this,f1)}return z(f1)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(f1){return fx(this,f1)},getCursor:function(f3){var f1=this.sel.primary(),f2;if(f3==null||f3=="head"){f2=f1.head}else{if(f3=="anchor"){f2=f1.anchor}else{if(f3=="end"||f3=="to"||f3===false){f2=f1.to()}else{f2=f1.from()}}}return f2},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cA(function(f1,f3,f2){H(this,fx(this,typeof f1=="number"?X(f1,f3||0):f1),null,f2)}),setSelection:cA(function(f2,f3,f1){H(this,fx(this,f2),fx(this,f3||f2),f1)}),extendSelection:cA(function(f3,f1,f2){fH(this,fx(this,f3),f1&&fx(this,f1),f2)}),extendSelections:cA(function(f2,f1){aw(this,dN(this,f2,f1))}),extendSelectionsBy:cA(function(f2,f1){aw(this,bQ(this.sel.ranges,f2),f1)}),setSelections:cA(function(f1,f5,f3){if(!f1.length){return}for(var f4=0,f2=[];f4<f1.length;f4++){f2[f4]=new dM(fx(this,f1[f4].anchor),fx(this,f1[f4].head))}if(f5==null){f5=Math.min(f1.length-1,this.sel.primIndex)}bS(this,cu(f2,f5),f3)}),addSelection:cA(function(f3,f4,f2){var f1=this.sel.ranges.slice(0);f1.push(new dM(fx(this,f3),fx(this,f4||f3)));bS(this,cu(f1,f1.length-1),f2)}),getSelection:function(f5){var f2=this.sel.ranges,f1;for(var f3=0;f3<f2.length;f3++){var f4=fM(this,f2[f3].from(),f2[f3].to());f1=f1?f1.concat(f4):f4}if(f5===false){return f1}else{return f1.join(f5||"\n")}},getSelections:function(f5){var f4=[],f1=this.sel.ranges;for(var f2=0;f2<f1.length;f2++){var f3=fM(this,f1[f2].from(),f1[f2].to());if(f5!==false){f3=f3.join(f5||"\n")}f4[f2]=f3}return f4},replaceSelection:function(f3,f5,f1){var f4=[];for(var f2=0;f2<this.sel.ranges.length;f2++){f4[f2]=f3}this.replaceSelections(f4,f5,f1||"+input")},replaceSelections:cA(function(f6,f8,f3){var f5=[],f7=this.sel;for(var f4=0;f4<f7.ranges.length;f4++){var f2=f7.ranges[f4];f5[f4]={from:f2.from(),to:f2.to(),text:aW(f6[f4]),origin:f3}}var f1=f8&&f8!="end"&&ae(this,f5,f8);for(var f4=f5.length-1;f4>=0;f4--){bb(this,f5[f4])}if(f1){eU(this,f1)}else{if(this.cm){fu(this.cm)}}}),undo:cA(function(){b6(this,"undo")}),redo:cA(function(){b6(this,"redo")}),undoSelection:cA(function(){b6(this,"undo",true)}),redoSelection:cA(function(){b6(this,"redo",true)}),setExtending:function(f1){this.extend=f1},getExtending:function(){return this.extend},historySize:function(){var f4=this.history,f1=0,f3=0;for(var f2=0;f2<f4.done.length;f2++){if(!f4.done[f2].ranges){++f1}}for(var f2=0;f2<f4.undone.length;f2++){if(!f4.undone[f2].ranges){++f3}}return{undo:f1,redo:f3}},clearHistory:function(){this.history=new fG(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(f1){if(f1){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(f1){return this.history.generation==(f1||this.cleanGeneration)},getHistory:function(){return{done:bN(this.history.done),undone:bN(this.history.undone)}},setHistory:function(f2){var f1=this.history=new fG(this.history.maxGeneration);f1.done=bN(f2.done.slice(0),null,true);f1.undone=bN(f2.undone.slice(0),null,true)},addLineClass:cA(function(f3,f2,f1){return em(this,f3,"class",function(f4){var f5=f2=="text"?"textClass":f2=="background"?"bgClass":"wrapClass";if(!f4[f5]){f4[f5]=f1}else{if(new RegExp("(?:^|\\s)"+f1+"(?:$|\\s)").test(f4[f5])){return false}else{f4[f5]+=" "+f1}}return true})}),removeLineClass:cA(function(f3,f2,f1){return em(this,f3,"class",function(f5){var f8=f2=="text"?"textClass":f2=="background"?"bgClass":"wrapClass";var f7=f5[f8];if(!f7){return false}else{if(f1==null){f5[f8]=null}else{var f6=f7.match(new RegExp("(?:^|\\s+)"+f1+"(?:$|\\s+)"));if(!f6){return false}var f4=f6.index+f6[0].length;f5[f8]=f7.slice(0,f6.index)+(!f6.index||f4==f7.length?"":" ")+f7.slice(f4)||null}}return true})}),markText:function(f3,f2,f1){return et(this,fx(this,f3),fx(this,f2),f1,"range")},setBookmark:function(f3,f1){var f2={replacedWith:f1&&(f1.nodeType==null?f1.widget:f1),insertLeft:f1&&f1.insertLeft,clearWhenEmpty:false,shared:f1&&f1.shared};f3=fx(this,f3);return et(this,f3,f3,f2,"bookmark")},findMarksAt:function(f5){f5=fx(this,f5);var f4=[],f2=e2(this,f5.line).markedSpans;if(f2){for(var f1=0;f1<f2.length;++f1){var f3=f2[f1];if((f3.from==null||f3.from<=f5.ch)&&(f3.to==null||f3.to>=f5.ch)){f4.push(f3.marker.parent||f3.marker)}}}return f4},findMarks:function(f5,f4,f1){f5=fx(this,f5);f4=fx(this,f4);var f2=[],f3=f5.line;this.iter(f5.line,f4.line+1,function(f6){var f8=f6.markedSpans;if(f8){for(var f7=0;f7<f8.length;f7++){var f9=f8[f7];if(!(f3==f5.line&&f5.ch>f9.to||f9.from==null&&f3!=f5.line||f3==f4.line&&f9.from>f4.ch)&&(!f1||f1(f9.marker))){f2.push(f9.marker.parent||f9.marker)}}}++f3});return f2},getAllMarks:function(){var f1=[];this.iter(function(f3){var f2=f3.markedSpans;if(f2){for(var f4=0;f4<f2.length;++f4){if(f2[f4].from!=null){f1.push(f2[f4].marker)}}}});return f1},posFromIndex:function(f2){var f1,f3=this.first;this.iter(function(f4){var f5=f4.text.length+1;if(f5>f2){f1=f2;return true}f2-=f5;++f3});return fx(this,X(f3,f1))},indexFromPos:function(f2){f2=fx(this,f2);var f1=f2.ch;if(f2.line<this.first||f2.ch<0){return 0}this.iter(this.first,f2.line,function(f3){f1+=f3.text.length+1});return f1},copy:function(f1){var f2=new at(aY(this,this.first,this.first+this.size),this.modeOption,this.first);f2.scrollTop=this.scrollTop;f2.scrollLeft=this.scrollLeft;f2.sel=this.sel;f2.extend=false;if(f1){f2.history.undoDepth=this.history.undoDepth;f2.setHistory(this.getHistory())}return f2},linkedDoc:function(f1){if(!f1){f1={}}var f4=this.first,f3=this.first+this.size;if(f1.from!=null&&f1.from>f4){f4=f1.from}if(f1.to!=null&&f1.to<f3){f3=f1.to}var f2=new at(aY(this,f4,f3),f1.mode||this.modeOption,f4);if(f1.sharedHist){f2.history=this.history}(this.linked||(this.linked=[])).push({doc:f2,sharedHist:f1.sharedHist});f2.linked=[{doc:this,isParent:true,sharedHist:f1.sharedHist}];dv(f2,eD(this));return f2},unlinkDoc:function(f2){if(f2 instanceof J){f2=f2.doc}if(this.linked){for(var f3=0;f3<this.linked.length;++f3){var f4=this.linked[f3];if(f4.doc!=f2){continue}this.linked.splice(f3,1);f2.unlinkDoc(this);eb(eD(this));break}}if(f2.history==this.history){var f1=[f2.id];dV(f2,function(f5){f1.push(f5.id)},true);f2.history=new fG(null);f2.history.done=bN(this.history.done,f1);f2.history.undone=bN(this.history.undone,f1)}},iterLinkedDocs:function(f1){dV(this,f1)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});at.prototype.eachLine=at.prototype.iter;var d="iter insert remove copy getEditor".split(" ");for(var bI in at.prototype){if(at.prototype.hasOwnProperty(bI)&&db(d,bI)<0){J.prototype[bI]=(function(f1){return function(){return f1.apply(this.doc,arguments)}})(at.prototype[bI])}}bw(at);function dV(f4,f3,f2){function f1(ga,f8,f6){if(ga.linked){for(var f7=0;f7<ga.linked.length;++f7){var f5=ga.linked[f7];if(f5.doc==f8){continue}var f9=f6&&f5.sharedHist;if(f2&&!f9){continue}f3(f5.doc,f9);f1(f5.doc,ga,f9)}}}f1(f4,null,true)}function dY(f1,f2){if(f2.cm){throw new Error("This document is already in use.")}f1.doc=f2;f2.cm=f1;Y(f1);bp(f1);if(!f1.options.lineWrapping){g(f1)}f1.options.mode=f2.modeOption;ag(f1)}function e2(f4,f6){f6-=f4.first;if(f6<0||f6>=f4.size){throw new Error("There is no line "+(f6+f4.first)+" in the document.")}for(var f1=f4;!f1.lines;){for(var f2=0;;++f2){var f5=f1.children[f2],f3=f5.chunkSize();if(f6<f3){f1=f5;break}f6-=f3}}return f1.lines[f6]}function fM(f3,f5,f1){var f2=[],f4=f5.line;f3.iter(f5.line,f1.line+1,function(f6){var f7=f6.text;if(f4==f1.line){f7=f7.slice(0,f1.ch)}if(f4==f5.line){f7=f7.slice(f5.ch)}f2.push(f7);++f4});return f2}function aY(f2,f4,f3){var f1=[];f2.iter(f4,f3,function(f5){f1.push(f5.text)});return f1}function fO(f2,f1){var f3=f1-f2.height;if(f3){for(var f4=f2;f4;f4=f4.parent){f4.height+=f3}}}function bL(f1){if(f1.parent==null){return null}var f5=f1.parent,f4=db(f5.lines,f1);for(var f2=f5.parent;f2;f5=f2,f2=f2.parent){for(var f3=0;;++f3){if(f2.children[f3]==f5){break}f4+=f2.children[f3].chunkSize()}}return f4+f5.first}function bE(f3,f6){var f8=f3.first;outer:do{for(var f4=0;f4<f3.children.length;++f4){var f7=f3.children[f4],f5=f7.height;if(f6<f5){f3=f7;continue outer}f6-=f5;f8+=f7.chunkSize()}return f8}while(!f3.lines);for(var f4=0;f4<f3.lines.length;++f4){var f2=f3.lines[f4],f1=f2.height;if(f6<f1){break}f6-=f1}return f8+f4}function bK(f3){f3=z(f3);var f5=0,f2=f3.parent;for(var f4=0;f4<f2.lines.length;++f4){var f1=f2.lines[f4];if(f1==f3){break}else{f5+=f1.height}}for(var f6=f2.parent;f6;f2=f6,f6=f2.parent){for(var f4=0;f4<f6.children.length;++f4){var f7=f6.children[f4];if(f7==f2){break}else{f5+=f7.height}}}return f5}function a(f2){var f1=f2.order;if(f1==null){f1=f2.order=bc(f2.text)}return f1}function fG(f1){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=f1||1}function dk(f1,f3){var f2={from:ch(f3.from),to:cR(f3),text:fM(f1,f3.from,f3.to)};bW(f1,f2,f3.from.line,f3.to.line+1);dV(f1,function(f4){bW(f4,f2,f3.from.line,f3.to.line+1)},true);return f2}function fp(f2){while(f2.length){var f1=fv(f2);if(f1.ranges){f2.pop()}else{break}}}function eA(f2,f1){if(f1){fp(f2.done);return fv(f2.done)}else{if(f2.done.length&&!fv(f2.done).ranges){return fv(f2.done)}else{if(f2.done.length>1&&!f2.done[f2.done.length-2].ranges){f2.done.pop();return fv(f2.done)}}}}function fA(f7,f5,f1,f4){var f3=f7.history;f3.undone.length=0;var f2=+new Date,f8;if((f3.lastOp==f4||f3.lastOrigin==f5.origin&&f5.origin&&((f5.origin.charAt(0)=="+"&&f7.cm&&f3.lastModTime>f2-f7.cm.options.historyEventDelay)||f5.origin.charAt(0)=="*"))&&(f8=eA(f3,f3.lastOp==f4))){var f9=fv(f8.changes);if(cd(f5.from,f5.to)==0&&cd(f5.from,f9.to)==0){f9.to=cR(f5)}else{f8.changes.push(dk(f7,f5))}}else{var f6=fv(f3.done);if(!f6||!f6.ranges){cJ(f7.sel,f3.done)}f8={changes:[dk(f7,f5)],generation:f3.generation};f3.done.push(f8);while(f3.done.length>f3.undoDepth){f3.done.shift();if(!f3.done[0].ranges){f3.done.shift()}}}f3.done.push(f1);f3.generation=++f3.maxGeneration;f3.lastModTime=f3.lastSelTime=f2;f3.lastOp=f3.lastSelOp=f4;f3.lastOrigin=f3.lastSelOrigin=f5.origin;if(!f9){aC(f7,"historyAdded")}}function by(f5,f1,f3,f4){var f2=f1.charAt(0);return f2=="*"||f2=="+"&&f3.ranges.length==f4.ranges.length&&f3.somethingSelected()==f4.somethingSelected()&&new Date-f5.history.lastSelTime<=(f5.cm?f5.cm.options.historyEventDelay:500)}function fU(f6,f4,f1,f3){var f5=f6.history,f2=f3&&f3.origin;if(f1==f5.lastSelOp||(f2&&f5.lastSelOrigin==f2&&(f5.lastModTime==f5.lastSelTime&&f5.lastOrigin==f2||by(f6,f2,fv(f5.done),f4)))){f5.done[f5.done.length-1]=f4}else{cJ(f4,f5.done)}f5.lastSelTime=+new Date;f5.lastSelOrigin=f2;f5.lastSelOp=f1;if(f3&&f3.clearRedo!==false){fp(f5.undone)}}function cJ(f2,f1){var f3=fv(f1);if(!(f3&&f3.ranges&&f3.equals(f2))){f1.push(f2)}}function bW(f2,f6,f5,f4){var f1=f6["spans_"+f2.id],f3=0;f2.iter(Math.max(f2.first,f5),Math.min(f2.first+f2.size,f4),function(f7){if(f7.markedSpans){(f1||(f1=f6["spans_"+f2.id]={}))[f3]=f7.markedSpans}++f3})}function bh(f3){if(!f3){return null}for(var f2=0,f1;f2<f3.length;++f2){if(f3[f2].marker.explicitlyCleared){if(!f1){f1=f3.slice(0,f2)}}else{if(f1){f1.push(f3[f2])}}}return !f1?f3:f1.length?f1:null}function b2(f4,f5){var f3=f5["spans_"+f4.id];if(!f3){return null}for(var f2=0,f1=[];f2<f5.text.length;++f2){f1.push(bh(f3[f2]))}return f1}function bN(gc,f4,gb){for(var f7=0,f2=[];f7<gc.length;++f7){var f3=gc[f7];if(f3.ranges){f2.push(gb?fL.prototype.deepCopy.call(f3):f3);continue}var f9=f3.changes,ga=[];f2.push({changes:ga});for(var f6=0;f6<f9.length;++f6){var f8=f9[f6],f5;ga.push({from:f8.from,to:f8.to,text:f8.text});if(f4){for(var f1 in f8){if(f5=f1.match(/^spans_(\d+)$/)){if(db(f4,Number(f5[1]))>-1){fv(ga)[f1]=f8[f1];delete f8[f1]}}}}}}return f2}function K(f4,f3,f2,f1){if(f2<f4.line){f4.line+=f1}else{if(f3<f4.line){f4.line=f3;f4.ch=0}}}function e4(f4,f6,f7,f8){for(var f3=0;f3<f4.length;++f3){var f1=f4[f3],f5=true;if(f1.ranges){if(!f1.copied){f1=f4[f3]=f1.deepCopy();f1.copied=true}for(var f2=0;f2<f1.ranges.length;f2++){K(f1.ranges[f2].anchor,f6,f7,f8);K(f1.ranges[f2].head,f6,f7,f8)}continue}for(var f2=0;f2<f1.changes.length;++f2){var f9=f1.changes[f2];if(f7<f9.from.line){f9.from=X(f9.from.line+f8,f9.from.ch);f9.to=X(f9.to.line+f8,f9.to.ch)}else{if(f6<=f9.to.line){f5=false;break}}}if(!f5){f4.splice(0,f3+1);f3=0}}}function du(f2,f5){var f4=f5.from.line,f3=f5.to.line,f1=f5.text.length-(f3-f4)-1;e4(f2.done,f4,f3,f1);e4(f2.undone,f4,f3,f1)}var cC=J.e_preventDefault=function(f1){if(f1.preventDefault){f1.preventDefault()}else{f1.returnValue=false}};var dg=J.e_stopPropagation=function(f1){if(f1.stopPropagation){f1.stopPropagation()}else{f1.cancelBubble=true}};function bJ(f1){return f1.defaultPrevented!=null?f1.defaultPrevented:f1.returnValue==false}var ee=J.e_stop=function(f1){cC(f1);dg(f1)};function M(f1){return f1.target||f1.srcElement}function fB(f2){var f1=f2.which;if(f1==null){if(f2.button&1){f1=1}else{if(f2.button&2){f1=3}else{if(f2.button&4){f1=2}}}}if(b5&&f2.ctrlKey&&f1==1){f1=3}return f1}var bV=J.on=function(f4,f2,f3){if(f4.addEventListener){f4.addEventListener(f2,f3,false)}else{if(f4.attachEvent){f4.attachEvent("on"+f2,f3)}else{var f5=f4._handlers||(f4._handlers={});var f1=f5[f2]||(f5[f2]=[]);f1.push(f3)}}};var d0=J.off=function(f5,f3,f4){if(f5.removeEventListener){f5.removeEventListener(f3,f4,false)}else{if(f5.detachEvent){f5.detachEvent("on"+f3,f4)}else{var f1=f5._handlers&&f5._handlers[f3];if(!f1){return}for(var f2=0;f2<f1.length;++f2){if(f1[f2]==f4){f1.splice(f2,1);break}}}}};var aC=J.signal=function(f5,f4){var f1=f5._handlers&&f5._handlers[f4];if(!f1){return}var f2=Array.prototype.slice.call(arguments,2);for(var f3=0;f3<f1.length;++f3){f1[f3].apply(null,f2)}};var bx=null;function ad(f7,f5){var f1=f7._handlers&&f7._handlers[f5];if(!f1){return}var f3=Array.prototype.slice.call(arguments,2),f6;if(bn){f6=bn.delayedCallbacks}else{if(bx){f6=bx}else{f6=bx=[];setTimeout(aJ,0)}}function f2(f8){return function(){f8.apply(null,f3)}}for(var f4=0;f4<f1.length;++f4){f6.push(f2(f1[f4]))}}function aJ(){var f1=bx;bx=null;for(var f2=0;f2<f1.length;++f2){f1[f2]()}}function aO(f1,f3,f2){aC(f1,f2||f3.type,f1,f3);return bJ(f3)||f3.codemirrorIgnore}function W(f2){var f1=f2._handlers&&f2._handlers.cursorActivity;if(!f1){return}var f4=f2.curOp.cursorActivityHandlers||(f2.curOp.cursorActivityHandlers=[]);for(var f3=0;f3<f1.length;++f3){if(db(f4,f1[f3])==-1){f4.push(f1[f3])}}}function e5(f3,f2){var f1=f3._handlers&&f3._handlers[f2];return f1&&f1.length>0}function bw(f1){f1.prototype.on=function(f2,f3){bV(this,f2,f3)};f1.prototype.off=function(f2,f3){d0(this,f2,f3)}}var bg=30;var b8=J.Pass={toString:function(){return"CodeMirror.Pass"}};var Z={scroll:false},N={origin:"*mouse"},cQ={origin:"+move"};function f0(){this.id=null}f0.prototype.set=function(f1,f2){clearTimeout(this.id);this.id=setTimeout(f2,f1)};var bR=J.countColumn=function(f4,f2,f6,f7,f3){if(f2==null){f2=f4.search(/[^\s\u00a0]/);if(f2==-1){f2=f4.length}}for(var f5=f7||0,f8=f3||0;;){var f1=f4.indexOf("\t",f5);if(f1<0||f1>=f2){return f8+(f2-f5)}f8+=f1-f5;f8+=f6-(f8%f6);f5=f1+1}};function ed(f5,f4,f6){for(var f7=0,f3=0;;){var f2=f5.indexOf("\t",f7);if(f2==-1){f2=f5.length}var f1=f2-f7;if(f2==f5.length||f3+f1>=f4){return f7+Math.min(f1,f4-f3)}f3+=f2-f7;f3+=f6-(f3%f6);f7=f2+1;if(f3>=f4){return f7}}}var aV=[""];function co(f1){while(aV.length<=f1){aV.push(fv(aV)+" ")}return aV[f1]}function fv(f1){return f1[f1.length-1]}var dA=function(f1){f1.select()};if(eP){dA=function(f1){f1.selectionStart=0;f1.selectionEnd=f1.value.length}}else{if(dz){dA=function(f2){try{f2.select()}catch(f1){}}}}function db(f3,f1){for(var f2=0;f2<f3.length;++f2){if(f3[f2]==f1){return f2}}return -1}if([].indexOf){db=function(f2,f1){return f2.indexOf(f1)}}function bQ(f4,f3){var f1=[];for(var f2=0;f2<f4.length;f2++){f1[f2]=f3(f4[f2],f2)}return f1}if([].map){bQ=function(f2,f1){return f2.map(f1)}}function cj(f4,f1){var f3;if(Object.create){f3=Object.create(f4)}else{var f2=function(){};f2.prototype=f4;f3=new f2()}if(f1){aK(f1,f3)}return f3}function aK(f3,f2,f1){if(!f2){f2={}}for(var f4 in f3){if(f3.hasOwnProperty(f4)&&(f1!==false||!f2.hasOwnProperty(f4))){f2[f4]=f3[f4]}}return f2}function ct(f2){var f1=Array.prototype.slice.call(arguments,1);return function(){return f2.apply(null,f1)}}var a8=/[\u00df\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;var fr=J.isWordChar=function(f1){return/\w/.test(f1)||f1>"\x80"&&(f1.toUpperCase()!=f1.toLowerCase()||a8.test(f1))};function cx(f1,f2){if(!f2){return fr(f1)}if(f2.source.indexOf("\\w")>-1&&fr(f1)){return true}return f2.test(f1)}function eI(f1){for(var f2 in f1){if(f1.hasOwnProperty(f2)&&f1[f2]){return false}}return true}var ex=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fd(f1){return f1.charCodeAt(0)>=768&&ex.test(f1)}function fK(f1,f5,f4,f3){var f6=document.createElement(f1);if(f4){f6.className=f4}if(f3){f6.style.cssText=f3}if(typeof f5=="string"){f6.appendChild(document.createTextNode(f5))}else{if(f5){for(var f2=0;f2<f5.length;++f2){f6.appendChild(f5[f2])}}}return f6}var ck;if(document.createRange){ck=function(f3,f4,f1){var f2=document.createRange();f2.setEnd(f3,f1);f2.setStart(f3,f4);return f2}}else{ck=function(f3,f4,f1){var f2=document.body.createTextRange();f2.moveToElementText(f3.parentNode);f2.collapse(true);f2.moveEnd("character",f1);f2.moveStart("character",f4);return f2}}function dP(f2){for(var f1=f2.childNodes.length;f1>0;--f1){f2.removeChild(f2.firstChild)}return f2}function bP(f1,f2){return dP(f1).appendChild(f2)}function fT(f1,f2){if(f1.contains){return f1.contains(f2)}while(f2=f2.parentNode){if(f2==f1){return true}}}function dC(){return document.activeElement}if(dz&&l<11){dC=function(){try{return document.activeElement}catch(f1){return document.body}}}function T(f1){return new RegExp("\\b"+f1+"\\b\\s*")}function f(f2,f1){var f3=T(f1);if(f3.test(f2.className)){f2.className=f2.className.replace(f3,"")}}function fo(f2,f1){if(!T(f1).test(f2.className)){f2.className+=" "+f1}}function fF(f3,f1){var f2=f3.split(" ");for(var f4=0;f4<f2.length;f4++){if(f2[f4]&&!T(f2[f4]).test(f1)){f1+=" "+f2[f4]}}return f1}function az(f4){if(!document.body.getElementsByClassName){return}var f3=document.body.getElementsByClassName("CodeMirror");for(var f2=0;f2<f3.length;f2++){var f1=f3[f2].CodeMirror;if(f1){f4(f1)}}}var cz=false;function be(){if(cz){return}fs();cz=true}function fs(){var f1;bV(window,"resize",function(){if(f1==null){f1=setTimeout(function(){f1=null;ej=null;az(aQ)},100)}});bV(window,"blur",function(){az(aR)})}var ez=function(){if(dz&&l<9){return false}var f1=fK("div");return"draggable" in f1||"dragDrop" in f1}();var ej;function k(f1){if(ej!=null){return ej}var f2=fK("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");bP(f1,f2);if(f2.offsetWidth){ej=f2.offsetHeight-f2.clientHeight}return ej||0}var fz;function bl(f1){if(fz==null){var f2=fK("span","\u200b");bP(f1,fK("span",[f2,document.createTextNode("x")]));if(f1.firstChild.offsetHeight!=0){fz=f2.offsetWidth<=1&&f2.offsetHeight>2&&!(dz&&l<8)}}if(fz){return fK("span","\u200b")}else{return fK("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}}var fy;function bM(f4){if(fy!=null){return fy}var f1=bP(f4,document.createTextNode("A\u062eA"));var f3=ck(f1,0,1).getBoundingClientRect();if(!f3||f3.left==f3.right){return false}var f2=ck(f1,1,2).getBoundingClientRect();return fy=(f2.right-f3.right<3)}var aW=J.splitLines="\n\nb".split(/\n/).length!=3?function(f6){var f7=0,f1=[],f5=f6.length;while(f7<=f5){var f4=f6.indexOf("\n",f7);if(f4==-1){f4=f6.length}var f3=f6.slice(f7,f6.charAt(f4-1)=="\r"?f4-1:f4);var f2=f3.indexOf("\r");if(f2!=-1){f1.push(f3.slice(0,f2));f7+=f2+1}else{f1.push(f3);f7=f4+1}}return f1}:function(f1){return f1.split(/\r\n?|\n/)};var bq=window.getSelection?function(f2){try{return f2.selectionStart!=f2.selectionEnd}catch(f1){return false}}:function(f3){try{var f1=f3.ownerDocument.selection.createRange()}catch(f2){}if(!f1||f1.parentElement()!=f3){return false}return f1.compareEndPoints("StartToEnd",f1)!=0};var c4=(function(){var f1=fK("div");if("oncopy" in f1){return true}f1.setAttribute("oncopy","return;");return typeof f1.oncopy=="function"})();var eT=null;function aI(f2){if(eT!=null){return eT}var f3=bP(f2,fK("span","x"));var f4=f3.getBoundingClientRect();var f1=ck(f3,0,1).getBoundingClientRect();return eT=Math.abs(f4.left-f1.left)>1}var e3={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};J.keyNames=e3;(function(){for(var f1=0;f1<10;f1++){e3[f1+48]=e3[f1+96]=String(f1)}for(var f1=65;f1<=90;f1++){e3[f1]=String.fromCharCode(f1)}for(var f1=1;f1<=12;f1++){e3[f1+111]=e3[f1+63235]="F"+f1}})();function dS(f1,f7,f6,f5){if(!f1){return f5(f7,f6,"ltr")}var f4=false;for(var f3=0;f3<f1.length;++f3){var f2=f1[f3];if(f2.from<f6&&f2.to>f7||f7==f6&&f2.to==f7){f5(Math.max(f2.from,f7),Math.min(f2.to,f6),f2.level==1?"rtl":"ltr");f4=true}}if(!f4){f5(f7,f6,"ltr")}}function dn(f1){return f1.level%2?f1.to:f1.from}function fW(f1){return f1.level%2?f1.from:f1.to}function cB(f2){var f1=a(f2);return f1?dn(f1[0]):0}function cO(f2){var f1=a(f2);if(!f1){return f2.text.length}return fW(fv(f1))}function br(f2,f5){var f3=e2(f2.doc,f5);var f6=z(f3);if(f6!=f3){f5=bL(f6)}var f1=a(f6);var f4=!f1?0:f1[0].level%2?cO(f6):cB(f6);return X(f5,f4)}function dD(f3,f6){var f2,f4=e2(f3.doc,f6);while(f2=ei(f4)){f4=f2.find(1,true).line;f6=null}var f1=a(f4);var f5=!f1?f4.text.length:f1[0].level%2?cB(f4):cO(f4);return X(f6==null?bL(f4):f6,f5)}function dy(f2,f7){var f6=br(f2,f7.line);var f3=e2(f2.doc,f6.line);var f1=a(f3);if(!f1||f1[0].level==0){var f5=Math.max(0,f3.text.search(/\S/));var f4=f7.line==f6.line&&f7.ch<=f5&&f7.ch;return X(f6.line,f4?0:f5)}return f6}function am(f2,f3,f1){var f4=f2[0].level;if(f3==f4){return true}if(f1==f4){return false}return f3<f1}var eQ;function aE(f1,f5){eQ=null;for(var f2=0,f3;f2<f1.length;++f2){var f4=f1[f2];if(f4.from<f5&&f4.to>f5){return f2}if((f4.from==f5||f4.to==f5)){if(f3==null){f3=f2}else{if(am(f1,f4.level,f1[f3].level)){if(f4.from!=f4.to){eQ=f3}return f2}else{if(f4.from!=f4.to){eQ=f2}return f3}}}}return f3}function e1(f1,f4,f2,f3){if(!f3){return f4+f2}do{f4+=f2}while(f4>0&&fd(f1.text.charAt(f4)));return f4}function v(f1,f8,f3,f4){var f5=a(f1);if(!f5){return ah(f1,f8,f3,f4)}var f7=aE(f5,f8),f2=f5[f7];var f6=e1(f1,f8,f2.level%2?-f3:f3,f4);for(;;){if(f6>f2.from&&f6<f2.to){return f6}if(f6==f2.from||f6==f2.to){if(aE(f5,f6)==f7){return f6}f2=f5[f7+=f3];return(f3>0)==f2.level%2?f2.to:f2.from}else{f2=f5[f7+=f3];if(!f2){return null}if((f3>0)==f2.level%2){f6=e1(f1,f2.to,-1,f4)}else{f6=e1(f1,f2.from,1,f4)}}}}function ah(f1,f5,f2,f3){var f4=f5+f2;if(f3){while(f4>0&&fd(f1.text.charAt(f4))){f4+=f2}}return f4<0||f4>f1.text.length?null:f4}var bc=(function(){var f7="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var f5="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";function f4(gb){if(gb<=247){return f7.charAt(gb)}else{if(1424<=gb&&gb<=1524){return"R"}else{if(1536<=gb&&gb<=1773){return f5.charAt(gb-1536)}else{if(1774<=gb&&gb<=2220){return"r"}else{if(8192<=gb&&gb<=8203){return"w"}else{if(gb==8204){return"b"}else{return"L"}}}}}}}var f1=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var ga=/[stwN]/,f3=/[LRr]/,f2=/[Lb1n]/,f6=/[1n]/;var f9="L";function f8(gd,gc,gb){this.level=gd;this.from=gc;this.to=gb}return function(gl){if(!f1.test(gl)){return false}var gr=gl.length,gh=[];for(var gq=0,gd;gq<gr;++gq){gh.push(gd=f4(gl.charCodeAt(gq)))}for(var gq=0,gk=f9;gq<gr;++gq){var gd=gh[gq];if(gd=="m"){gh[gq]=gk}else{gk=gd}}for(var gq=0,gb=f9;gq<gr;++gq){var gd=gh[gq];if(gd=="1"&&gb=="r"){gh[gq]="n"}else{if(f3.test(gd)){gb=gd;if(gd=="r"){gh[gq]="R"}}}}for(var gq=1,gk=gh[0];gq<gr-1;++gq){var gd=gh[gq];if(gd=="+"&&gk=="1"&&gh[gq+1]=="1"){gh[gq]="1"}else{if(gd==","&&gk==gh[gq+1]&&(gk=="1"||gk=="n")){gh[gq]=gk}}gk=gd}for(var gq=0;gq<gr;++gq){var gd=gh[gq];if(gd==","){gh[gq]="N"}else{if(gd=="%"){for(var ge=gq+1;ge<gr&&gh[ge]=="%";++ge){}var gs=(gq&&gh[gq-1]=="!")||(ge<gr&&gh[ge]=="1")?"1":"N";for(var go=gq;go<ge;++go){gh[go]=gs}gq=ge-1}}}for(var gq=0,gb=f9;gq<gr;++gq){var gd=gh[gq];if(gb=="L"&&gd=="1"){gh[gq]="L"}else{if(f3.test(gd)){gb=gd}}}for(var gq=0;gq<gr;++gq){if(ga.test(gh[gq])){for(var ge=gq+1;ge<gr&&ga.test(gh[ge]);++ge){}var gi=(gq?gh[gq-1]:f9)=="L";var gc=(ge<gr?gh[ge]:f9)=="L";var gs=gi||gc?"L":"R";for(var go=gq;go<ge;++go){gh[go]=gs}gq=ge-1}}var gp=[],gm;for(var gq=0;gq<gr;){if(f2.test(gh[gq])){var gf=gq;for(++gq;gq<gr&&f2.test(gh[gq]);++gq){}gp.push(new f8(0,gf,gq))}else{var gg=gq,gj=gp.length;for(++gq;gq<gr&&gh[gq]!="L";++gq){}for(var go=gg;go<gq;){if(f6.test(gh[go])){if(gg<go){gp.splice(gj,0,new f8(1,gg,go))}var gn=go;for(++go;go<gq&&f6.test(gh[go]);++go){}gp.splice(gj,0,new f8(2,gn,go));gg=go}else{++go}}if(gg<gq){gp.splice(gj,0,new f8(1,gg,gq))}}}if(gp[0].level==1&&(gm=gl.match(/^\s+/))){gp[0].from=gm[0].length;gp.unshift(new f8(0,0,gm[0].length))}if(fv(gp).level==1&&(gm=gl.match(/\s+$/))){fv(gp).to-=gm[0].length;gp.push(new f8(0,gr-gm[0].length,gr))}if(gp[0].level!=fv(gp).level){gp.push(new f8(gp[0].level,gr,gr))}return gp}})();J.version="4.7.0";return J});
(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("javascript",function(Y,ai){var k=Y.indentUnit;var z=ai.statementIndent;var ay=ai.jsonld;var y=ai.json||ay;var g=ai.typescript;var ar=ai.wordCharacters||/[\w$\xa1-\uffff]/;var ap=function(){function aO(aQ){return{type:aQ,style:"keyword"}}var aJ=aO("keyword a"),aH=aO("keyword b"),aG=aO("keyword c");var aI=aO("operator"),aM={type:"atom",style:"atom"};var aK={"if":aO("if"),"while":aJ,"with":aJ,"else":aH,"do":aH,"try":aH,"finally":aH,"return":aG,"break":aG,"continue":aG,"new":aG,"delete":aG,"throw":aG,"debugger":aG,"var":aO("var"),"const":aO("var"),let:aO("var"),"function":aO("function"),"catch":aO("catch"),"for":aO("for"),"switch":aO("switch"),"case":aO("case"),"default":aO("default"),"in":aI,"typeof":aI,"instanceof":aI,"true":aM,"false":aM,"null":aM,"undefined":aM,"NaN":aM,"Infinity":aM,"this":aO("this"),module:aO("module"),"class":aO("class"),"super":aO("atom"),yield:aG,"export":aO("export"),"import":aO("import"),"extends":aG};if(g){var aP={type:"variable",style:"variable-3"};var aL={"interface":aO("interface"),"extends":aO("extends"),constructor:aO("constructor"),"public":aO("public"),"private":aO("private"),"protected":aO("protected"),"static":aO("static"),string:aP,number:aP,bool:aP,any:aP};for(var aN in aL){aK[aN]=aL[aN]}}return aK}();var O=/[+\-*&%=<>!?|~^]/;var ao=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function E(aJ){var aH=false,aG,aI=false;while((aG=aJ.next())!=null){if(!aH){if(aG=="/"&&!aI){return}if(aG=="["){aI=true}else{if(aI&&aG=="]"){aI=false}}}aH=!aH&&aG=="\\"}}var R,F;function K(aI,aH,aG){R=aI;F=aG;return aH}function T(aK,aI){var aG=aK.next();if(aG=='"'||aG=="'"){aI.tokenize=Q(aG);return aI.tokenize(aK,aI)}else{if(aG=="."&&aK.match(/^\d+(?:[eE][+\-]?\d+)?/)){return K("number","number")}else{if(aG=="."&&aK.match("..")){return K("spread","meta")}else{if(/[\[\]{}\(\),;\:\.]/.test(aG)){return K(aG)}else{if(aG=="="&&aK.eat(">")){return K("=>","operator")}else{if(aG=="0"&&aK.eat(/x/i)){aK.eatWhile(/[\da-f]/i);return K("number","number")}else{if(/\d/.test(aG)){aK.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/);return K("number","number")}else{if(aG=="/"){if(aK.eat("*")){aI.tokenize=ax;return ax(aK,aI)}else{if(aK.eat("/")){aK.skipToEnd();return K("comment","comment")}else{if(aI.lastType=="operator"||aI.lastType=="keyword c"||aI.lastType=="sof"||/^[\[{}\(,;:]$/.test(aI.lastType)){E(aK);aK.eatWhile(/[gimy]/);return K("regexp","string-2")}else{aK.eatWhile(O);return K("operator","operator",aK.current())}}}}else{if(aG=="`"){aI.tokenize=az;return az(aK,aI)}else{if(aG=="#"){aK.skipToEnd();return K("error","error")}else{if(O.test(aG)){aK.eatWhile(O);return K("operator","operator",aK.current())}else{if(ar.test(aG)){aK.eatWhile(ar);var aJ=aK.current(),aH=ap.propertyIsEnumerable(aJ)&&ap[aJ];return(aH&&aI.lastType!=".")?K(aH.type,aH.style,aJ):K("variable","variable",aJ)}}}}}}}}}}}}}function Q(aG){return function(aK,aI){var aJ=false,aH;if(ay&&aK.peek()=="@"&&aK.match(ao)){aI.tokenize=T;return K("jsonld-keyword","meta")}while((aH=aK.next())!=null){if(aH==aG&&!aJ){break}aJ=!aJ&&aH=="\\"}if(!aJ){aI.tokenize=T}return K("string","string")}}function ax(aJ,aI){var aG=false,aH;while(aH=aJ.next()){if(aH=="/"&&aG){aI.tokenize=T;break}aG=(aH=="*")}return K("comment","comment")}function az(aJ,aH){var aI=false,aG;while((aG=aJ.next())!=null){if(!aI&&(aG=="`"||aG=="$"&&aJ.eat("{"))){aH.tokenize=T;break}aI=!aI&&aG=="\\"}return K("quasi","string-2",aJ.current())}var l="([{}])";function au(aM,aJ){if(aJ.fatArrowAt){aJ.fatArrowAt=null}var aI=aM.string.indexOf("=>",aM.start);if(aI<0){return}var aL=0,aH=false;for(var aN=aI-1;aN>=0;--aN){var aG=aM.string.charAt(aN);var aK=l.indexOf(aG);if(aK>=0&&aK<3){if(!aL){++aN;break}if(--aL==0){break}}else{if(aK>=3&&aK<6){++aL}else{if(ar.test(aG)){aH=true}else{if(aH&&!aL){++aN;break}}}}}if(aH&&!aL){aJ.fatArrowAt=aN}}var b={atom:true,number:true,variable:true,string:true,regexp:true,"this":true,"jsonld-keyword":true};function I(aL,aH,aG,aK,aI,aJ){this.indented=aL;this.column=aH;this.type=aG;this.prev=aI;this.info=aJ;if(aK!=null){this.align=aK}}function r(aJ,aI){for(var aH=aJ.localVars;aH;aH=aH.next){if(aH.name==aI){return true}}for(var aG=aJ.context;aG;aG=aG.prev){for(var aH=aG.vars;aH;aH=aH.next){if(aH.name==aI){return true}}}}function f(aK,aH,aG,aJ,aL){var aM=aK.cc;C.state=aK;C.stream=aL;C.marked=null,C.cc=aM;C.style=aH;if(!aK.lexical.hasOwnProperty("align")){aK.lexical.align=true}while(true){var aI=aM.length?aM.pop():y?am:aE;if(aI(aG,aJ)){while(aM.length&&aM[aM.length-1].lex){aM.pop()()}if(C.marked){return C.marked}if(aG=="variable"&&r(aK,aJ)){return"variable-2"}return aH}}}var C={state:null,column:null,marked:null,cc:null};function Z(){for(var aG=arguments.length-1;aG>=0;aG--){C.cc.push(arguments[aG])}}function ad(){Z.apply(null,arguments);return true}function at(aH){function aG(aK){for(var aJ=aK;aJ;aJ=aJ.next){if(aJ.name==aH){return true}}return false}var aI=C.state;if(aI.context){C.marked="def";if(aG(aI.localVars)){return}aI.localVars={name:aH,next:aI.localVars}}else{if(aG(aI.globalVars)){return}if(ai.globalVars){aI.globalVars={name:aH,next:aI.globalVars}}}}var p={name:"this",next:{name:"arguments"}};function v(){C.state.context={prev:C.state.context,vars:C.state.localVars};C.state.localVars=p}function w(){C.state.localVars=C.state.context.vars;C.state.context=C.state.context.prev}function aC(aH,aI){var aG=function(){var aL=C.state,aJ=aL.indented;if(aL.lexical.type=="stat"){aJ=aL.lexical.indented}else{for(var aK=aL.lexical;aK&&aK.type==")"&&aK.align;aK=aK.prev){aJ=aK.indented}}aL.lexical=new I(aJ,C.stream.column(),aH,null,aL.lexical,aI)};aG.lex=true;return aG}function h(){var aG=C.state;if(aG.lexical.prev){if(aG.lexical.type==")"){aG.indented=aG.lexical.indented}aG.lexical=aG.lexical.prev}}h.lex=true;function q(aG){function aH(aI){if(aI==aG){return ad()}else{if(aG==";"){return Z()}else{return ad(aH)}}}return aH}function aE(aG,aH){if(aG=="var"){return ad(aC("vardef",aH.length),d,q(";"),h)}if(aG=="keyword a"){return ad(aC("form"),am,aE,h)}if(aG=="keyword b"){return ad(aC("form"),aE,h)}if(aG=="{"){return ad(aC("}"),x,h)}if(aG==";"){return ad()}if(aG=="if"){if(C.state.lexical.info=="else"&&C.state.cc[C.state.cc.length-1]==h){C.state.cc.pop()()}return ad(aC("form"),am,aE,h,e)}if(aG=="function"){return ad(L)}if(aG=="for"){return ad(aC("form"),t,aE,h)}if(aG=="variable"){return ad(aC("stat"),aF)}if(aG=="switch"){return ad(aC("form"),am,aC("}","switch"),q("{"),x,h,h)}if(aG=="case"){return ad(am,q(":"))}if(aG=="default"){return ad(q(":"))}if(aG=="catch"){return ad(aC("form"),v,q("("),ae,q(")"),aE,h,w)}if(aG=="module"){return ad(aC("form"),v,G,w,h)}if(aG=="class"){return ad(aC("form"),U,h)}if(aG=="export"){return ad(aC("form"),aD,h)}if(aG=="import"){return ad(aC("form"),af,h)}return Z(aC("stat"),am,q(";"),h)}function am(aG){return X(aG,false)}function aB(aG){return X(aG,true)}function X(aH,aJ){if(C.state.fatArrowAt==C.stream.start){var aG=aJ?M:V;if(aH=="("){return ad(v,aC(")"),aq(i,")"),h,q("=>"),aG,w)}else{if(aH=="variable"){return Z(v,i,q("=>"),aG,w)}}}var aI=aJ?j:aa;if(b.hasOwnProperty(aH)){return ad(aI)}if(aH=="function"){return ad(L,aI)}if(aH=="keyword c"){return ad(aJ?aj:ah)}if(aH=="("){return ad(aC(")"),ah,aw,q(")"),h,aI)}if(aH=="operator"||aH=="spread"){return ad(aJ?aB:am)}if(aH=="["){return ad(aC("]"),m,h,aI)}if(aH=="{"){return av(s,"}",null,aI)}if(aH=="quasi"){return Z(P,aI)}return ad()}function ah(aG){if(aG.match(/[;\}\)\],]/)){return Z()}return Z(am)}function aj(aG){if(aG.match(/[;\}\)\],]/)){return Z()}return Z(aB)}function aa(aG,aH){if(aG==","){return ad(am)}return j(aG,aH,false)}function j(aG,aI,aK){var aH=aK==false?aa:j;var aJ=aK==false?am:aB;if(aG=="=>"){return ad(v,aK?M:V,w)}if(aG=="operator"){if(/\+\+|--/.test(aI)){return ad(aH)}if(aI=="?"){return ad(am,q(":"),aJ)}return ad(aJ)}if(aG=="quasi"){return Z(P,aH)}if(aG==";"){return}if(aG=="("){return av(aB,")","call",aH)}if(aG=="."){return ad(ak,aH)}if(aG=="["){return ad(aC("]"),ah,q("]"),h,aH)}}function P(aG,aH){if(aG!="quasi"){return Z()}if(aH.slice(aH.length-2)!="${"){return ad(P)}return ad(am,o)}function o(aG){if(aG=="}"){C.marked="string-2";C.state.tokenize=az;return ad(P)}}function V(aG){au(C.stream,C.state);return Z(aG=="{"?aE:am)}function M(aG){au(C.stream,C.state);return Z(aG=="{"?aE:aB)}function aF(aG){if(aG==":"){return ad(h,aE)}return Z(aa,q(";"),h)}function ak(aG){if(aG=="variable"){C.marked="property";return ad()}}function s(aG,aH){if(aG=="variable"||C.style=="keyword"){C.marked="property";if(aH=="get"||aH=="set"){return ad(H)}return ad(J)}else{if(aG=="number"||aG=="string"){C.marked=ay?"property":(C.style+" property");return ad(J)}else{if(aG=="jsonld-keyword"){return ad(J)}else{if(aG=="["){return ad(am,q("]"),J)}}}}}function H(aG){if(aG!="variable"){return Z(J)}C.marked="property";return ad(L)}function J(aG){if(aG==":"){return ad(aB)}if(aG=="("){return Z(L)}}function aq(aI,aG){function aH(aK){if(aK==","){var aJ=C.state.lexical;if(aJ.info=="call"){aJ.pos=(aJ.pos||0)+1}return ad(aI,aH)}if(aK==aG){return ad()}return ad(q(aG))}return function(aJ){if(aJ==aG){return ad()}return Z(aI,aH)}}function av(aJ,aG,aI){for(var aH=3;aH<arguments.length;aH++){C.cc.push(arguments[aH])}return ad(aC(aG,aI),aq(aJ,aG),h)}function x(aG){if(aG=="}"){return ad()}return Z(aE,x)}function S(aG){if(g&&aG==":"){return ad(ac)}}function ac(aG){if(aG=="variable"){C.marked="variable-3";return ad()}}function d(){return Z(i,S,ab,W)}function i(aG,aH){if(aG=="variable"){at(aH);return ad()}if(aG=="["){return av(i,"]")}if(aG=="{"){return av(aA,"}")}}function aA(aG,aH){if(aG=="variable"&&!C.stream.match(/^\s*:/,false)){at(aH);return ad(ab)}if(aG=="variable"){C.marked="property"}return ad(q(":"),i,ab)}function ab(aG,aH){if(aH=="="){return ad(aB)}}function W(aG){if(aG==","){return ad(d)}}function e(aG,aH){if(aG=="keyword b"&&aH=="else"){return ad(aC("form","else"),aE,h)}}function t(aG){if(aG=="("){return ad(aC(")"),D,q(")"),h)}}function D(aG){if(aG=="var"){return ad(d,q(";"),B)}if(aG==";"){return ad(B)}if(aG=="variable"){return ad(u)}return Z(am,q(";"),B)}function u(aG,aH){if(aH=="in"||aH=="of"){C.marked="keyword";return ad(am)}return ad(aa,B)}function B(aG,aH){if(aG==";"){return ad(A)}if(aH=="in"||aH=="of"){C.marked="keyword";return ad(am)}return Z(am,q(";"),A)}function A(aG){if(aG!=")"){ad(am)}}function L(aG,aH){if(aH=="*"){C.marked="keyword";return ad(L)}if(aG=="variable"){at(aH);return ad(L)}if(aG=="("){return ad(v,aC(")"),aq(ae,")"),h,aE,w)}}function ae(aG){if(aG=="spread"){return ad(ae)}return Z(i,S)}function U(aG,aH){if(aG=="variable"){at(aH);return ad(N)}}function N(aG,aH){if(aH=="extends"){return ad(am,N)}if(aG=="{"){return ad(aC("}"),n,h)}}function n(aG,aH){if(aG=="variable"||C.style=="keyword"){C.marked="property";if(aH=="get"||aH=="set"){return ad(c,L,n)}return ad(L,n)}if(aH=="*"){C.marked="keyword";return ad(n)}if(aG==";"){return ad(n)}if(aG=="}"){return ad()}}function c(aG){if(aG!="variable"){return Z()}C.marked="property";return ad()}function G(aG,aH){if(aG=="string"){return ad(aE)}if(aG=="variable"){at(aH);return ad(ag)}}function aD(aG,aH){if(aH=="*"){C.marked="keyword";return ad(ag,q(";"))}if(aH=="default"){C.marked="keyword";return ad(am,q(";"))}return Z(aE)}function af(aG){if(aG=="string"){return ad()}return Z(an,ag)}function an(aG,aH){if(aG=="{"){return av(an,"}")}if(aG=="variable"){at(aH)}return ad()}function ag(aG,aH){if(aH=="from"){C.marked="keyword";return ad(am)}}function m(aG){if(aG=="]"){return ad()}return Z(aB,al)}function al(aG){if(aG=="for"){return Z(aw,q("]"))}if(aG==","){return ad(aq(aj,"]"))}return Z(aq(aB,"]"))}function aw(aG){if(aG=="for"){return ad(t,aw)}if(aG=="if"){return ad(am,aw)}}return{startState:function(aH){var aG={tokenize:T,lastType:"sof",cc:[],lexical:new I((aH||0)-k,0,"block",false),localVars:ai.localVars,context:ai.localVars&&{vars:ai.localVars},indented:0};if(ai.globalVars&&typeof ai.globalVars=="object"){aG.globalVars=ai.globalVars}return aG},token:function(aI,aH){if(aI.sol()){if(!aH.lexical.hasOwnProperty("align")){aH.lexical.align=false}aH.indented=aI.indentation();au(aI,aH)}if(aH.tokenize!=ax&&aI.eatSpace()){return null}var aG=aH.tokenize(aI,aH);if(R=="comment"){return aG}aH.lastType=R=="operator"&&(F=="++"||F=="--")?"incdec":R;return f(aH,aG,R,F,aI)},indent:function(aM,aG){if(aM.tokenize==ax){return a.Pass}if(aM.tokenize!=T){return 0}var aL=aG&&aG.charAt(0),aJ=aM.lexical;if(!/^\s*else\b/.test(aG)){for(var aI=aM.cc.length-1;aI>=0;--aI){var aN=aM.cc[aI];if(aN==h){aJ=aJ.prev}else{if(aN!=e){break}}}}if(aJ.type=="stat"&&aL=="}"){aJ=aJ.prev}if(z&&aJ.type==")"&&aJ.prev.type=="stat"){aJ=aJ.prev}var aK=aJ.type,aH=aL==aK;if(aK=="vardef"){return aJ.indented+(aM.lastType=="operator"||aM.lastType==","?aJ.info+1:0)}else{if(aK=="form"&&aL=="{"){return aJ.indented}else{if(aK=="form"){return aJ.indented+k}else{if(aK=="stat"){return aJ.indented+(aM.lastType=="operator"||aM.lastType==","?z||k:0)}else{if(aJ.info=="switch"&&!aH&&ai.doubleIndentSwitch!=false){return aJ.indented+(/^(?:case|default)\b/.test(aG)?k:2*k)}else{if(aJ.align){return aJ.column+(aH?0:1)}else{return aJ.indented+(aH?0:k)}}}}}}},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:y?null:"/*",blockCommentEnd:y?null:"*/",lineComment:y?null:"//",fold:"brace",helperType:y?"json":"javascript",jsonldMode:ay,jsonMode:y}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",json:true});a.defineMIME("application/x-json",{name:"javascript",json:true});a.defineMIME("application/ld+json",{name:"javascript",jsonld:true});a.defineMIME("text/typescript",{name:"javascript",typescript:true});a.defineMIME("application/typescript",{name:"javascript",typescript:true})});