(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery||Zepto)})(function(c){var f=function(h,o,n){h=c(h);var j=this,i=h.val(),b;o="function"===typeof o?o(h.val(),void 0,h,n):o;var m={invalid:[],getCaret:function(){try{var l,g=0,p=h.get(0),k=document.selection,s=p.selectionStart;if(k&&-1===navigator.appVersion.indexOf("MSIE 10")){l=k.createRange(),l.moveStart("character",h.is("input")?-h.val().length:-h.text().length),g=l.text.length}else{if(s||"0"===s){g=s}}return g}catch(r){}},setCaret:function(l){try{if(h.is(":focus")){var g,p=h.get(0);p.setSelectionRange?p.setSelectionRange(l,l):p.createTextRange&&(g=p.createTextRange(),g.collapse(!0),g.moveEnd("character",l),g.moveStart("character",l),g.select())}}catch(k){}},events:function(){h.on("input.mask keyup.mask",m.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){h.keydown().keyup()},100)}).on("change.mask",function(){h.data("changed",!0)}).on("blur.mask",function(){i===h.val()||h.data("changed")||h.triggerHandler("change");h.data("changed",!1)}).on("blur.mask",function(){i=h.val()}).on("focus.mask",function(g){!0===n.selectOnFocus&&c(g.target).select()}).on("focusout.mask",function(){n.clearIfNotMatch&&!b.test(m.val())&&m.val("")})},getRegexMask:function(){for(var k=[],g,q,p,r,l=0;l<o.length;l++){(g=j.translation[o.charAt(l)])?(q=g.pattern.toString().replace(/.{1}$|^.{1}/g,""),p=g.optional,(g=g.recursive)?(k.push(o.charAt(l)),r={digit:o.charAt(l),pattern:q}):k.push(p||g?q+"?":q)):k.push(o.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"))}k=k.join("");r&&(k=k.replace(new RegExp("("+r.digit+"(.*"+r.digit+")?)"),"($1)?").replace(new RegExp(r.digit,"g"),r.pattern));return new RegExp(k)},destroyEvents:function(){h.off("input keydown keyup paste drop blur focusout ".split(" ").join(".mask "))},val:function(g){var k=h.is("input")?"val":"text";if(0<arguments.length){if(h[k]()!==g){h[k](g)}k=h}else{k=h[k]()}return k},getMCharsBeforeCount:function(k,g){for(var p=0,l=0,q=o.length;l<q&&l<k;l++){j.translation[o.charAt(l)]||(k=g?k+1:k,p++)}return p},caretPos:function(k,g,p,l){return j.translation[o.charAt(Math.min(k-1,o.length-1))]?Math.min(k+p-g-l,p):m.caretPos(k+1,g,p,l)},behaviour:function(l){l=l||window.event;m.invalid=[];var u=l.keyCode||l.which;if(-1===c.inArray(u,j.byPassKeys)){var s=m.getCaret(),r=m.val().length,t=s<r,q=m.getMasked(),p=q.length,g=m.getMCharsBeforeCount(p-1)-m.getMCharsBeforeCount(r-1);m.val(q);!t||65===u&&l.ctrlKey||(8!==u&&46!==u&&(s=m.caretPos(s,r,p,g)),m.setCaret(s));return m.callbacks(l)}},getMasked:function(F){var D=[],A=m.val(),C=0,s=o.length,B=0,z=A.length,y=1,q="push",I=-1,J,G;n.reverse?(q="unshift",y=-1,J=0,C=s-1,B=z-1,G=function(){return -1<C&&-1<B}):(J=s-1,G=function(){return C<s&&B<z});for(;G();){var E=o.charAt(C),H=A.charAt(B),g=j.translation[E];if(g){H.match(g.pattern)?(D[q](H),g.recursive&&(-1===I?I=C:C===J&&(C=I-y),J===I&&(C-=y)),C+=y):g.optional?(C+=y,B-=y):g.fallback?(D[q](g.fallback),C+=y,B-=y):m.invalid.push({p:B,v:H,e:g.pattern}),B+=y}else{if(!F){D[q](E)}H===E&&(B+=y);C+=y}}F=o.charAt(J);s!==z+1||j.translation[F]||D.push(F);return D.join("")},callbacks:function(k){var q=m.val(),p=q!==i,r=[q,k,h,n],s=function(l,g,t){"function"===typeof n[l]&&g&&n[l].apply(this,t)};s("onChange",!0===p,r);s("onKeyPress",!0===p,r);s("onComplete",q.length===o.length,r);s("onInvalid",0<m.invalid.length,[q,k,h,m.invalid,n])}};j.mask=o;j.options=n;j.remove=function(){var g=m.getCaret();m.destroyEvents();m.val(j.getCleanVal());m.setCaret(g-m.getMCharsBeforeCount(g));return h};j.getCleanVal=function(){return m.getMasked(!0)};j.init=function(g){g=g||!1;n=n||{};j.byPassKeys=c.jMaskGlobals.byPassKeys;j.translation=c.jMaskGlobals.translation;j.translation=c.extend({},j.translation,n.translation);j=c.extend(!0,{},j,n);b=m.getRegexMask();!1===g?(n.placeholder&&h.attr("placeholder",n.placeholder),c("input").length&&!1==="oninput" in c("input")[0]&&"on"===h.attr("autocomplete")&&h.attr("autocomplete","off"),m.destroyEvents(),m.events(),g=m.getCaret(),m.val(m.getMasked()),m.setCaret(g+m.getMCharsBeforeCount(g,!0))):(m.events(),m.val(m.getMasked()))};j.init(!h.is("input"))};c.maskWatchers={};var a=function(){var b=c(this),h={},g=b.attr("data-mask");b.attr("data-mask-reverse")&&(h.reverse=!0);b.attr("data-mask-clearifnotmatch")&&(h.clearIfNotMatch=!0);"true"===b.attr("data-mask-selectonfocus")&&(h.selectOnFocus=!0);if(e(b,g,h)){return b.data("mask",new f(this,g,h))}},e=function(h,n,m){m=m||{};var j=c(h).data("mask"),i=JSON.stringify;h=c(h).val()||c(h).text();try{return"function"===typeof n&&(n=n(h)),"object"!==typeof j||i(j.options)!==i(m)||j.mask!==n}catch(b){}};c.fn.mask=function(h,n){n=n||{};var m=this.selector,j=c.jMaskGlobals,i=c.jMaskGlobals.watchInterval,b=function(){if(e(this,h,n)){return c(this).data("mask",new f(this,h,n))}};c(this).each(b);m&&""!==m&&j.watchInputs&&(clearInterval(c.maskWatchers[m]),c.maskWatchers[m]=setInterval(function(){c(document).find(m).each(b)},i));return this};c.fn.unmask=function(){clearInterval(c.maskWatchers[this.selector]);delete c.maskWatchers[this.selector];return this.each(function(){var b=c(this).data("mask");b&&b.remove().removeData("mask")})};c.fn.cleanVal=function(){return this.data("mask").getCleanVal()};c.applyDataMask=function(b){b=b||c.jMaskGlobals.maskElements;(b instanceof c?b:c(b)).filter(c.jMaskGlobals.dataMaskAttr).each(a)};var d={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};c.jMaskGlobals=c.jMaskGlobals||{};d=c.jMaskGlobals=c.extend(!0,{},d,c.jMaskGlobals);d.dataMask&&c.applyDataMask();setInterval(function(){c.jMaskGlobals.watchDataMask&&c.applyDataMask()},d.watchInterval)});
jQuery(document).ready(function(d){var c=document.querySelector(".js-switch");var e=new Switchery(c,{color:"#008a96",size:"small"});d(".icheckbox, .iradio").each(function(){d(this).iCheck({checkboxClass:"icheckbox_square-green",radioClass:"iradio_square-green",})});d(".input-group.date").datepicker({todayBtn:"linked",keyboardNavigation:false,forceParse:false,calendarWeeks:true,autoclose:true,format:d("#formFormatDate").text(),});d(".colorpickers").each(function(f){d(this).colorpicker({format:"rgba",})});d(".richtexts").each(function(g){var h=d(this);var f=140;if(d(this).attr("data-height")!=undefined){f=parseInt(d(this).attr("data-height"))}d(this).summernote({lang:"fr",height:f,focus:true,toolbar:[["style",["style"]],["font",["bold","italic","underline","clear"]],["fontname",["fontname"]],["color",["color"]],["para",["ul","ol","paragraph"]],["table",["table"]],["insert",["link","picture"]],["help",["help"]]]})});d('body [data-toggle="popover"]').popover({});d('body [data-toggle="tooltip"]').tooltip({container:"body",delay:{show:500,hide:100},});d("body .input-group.mask >input[class^=mask-]").each(function(j){var f=this;var i=d(this).parent();var g=j;var h=d(i).find("> .input-group-addon").first();if(d(this).hasClass("mask-money")){d(i).data("format","# ##0,00");d(i).data("params",{placeholder:"0,00",reverse:"true","data-mask-clearifnotmatch":"true"})}else{if(d(this).hasClass("mask-tel")){d(i).data("format","00 00 00 00 00");d(i).data("params",{placeholder:"Téléphone","data-mask-clearifnotmatch":"true"})}else{if(d(this).hasClass("mask-cp")){d(i).data("format","00000");d(i).data("params",{placeholder:"Code postal","data-mask-clearifnotmatch":"true"})}else{if(d(this).hasClass("mask-dept")){d(i).data("format","00");d(i).data("params",{placeholder:"Département","data-mask-clearifnotmatch":"true"})}else{if(d(this).hasClass("mask-siret")){d(i).data("format","000000000-00000");d(i).data("params",{placeholder:"Siret (9+5 chiffres)","data-mask-clearifnotmatch":"true"})}else{if(d(this).hasClass("mask-siren")){d(i).data("format","000000000");d(i).data("params",{placeholder:"Siren (9 chiffres)","data-mask-clearifnotmatch":"true"})}else{return false}}}}}}d(this).mask(d(i).data("format"),d(i).data("params"));d(i).data("data-mask-switch",true);d(h).on("click",function(k){if(d(i).data("data-mask-switch")==false){d(i).data("data-mask-switch",true);d(this,">i.fa").removeClass("text-danger");d(f).mask(d(i).data("format"),d(i).data("params"))}else{d(i).data("data-mask-switch",false);d(this,">i.fa").addClass("text-danger");d(f).unmask().attr("placeholder",null)}})});if(d(".master-nestable-menu").length){d(".master-nestable-menu").each(function(n){var o=d(this).attr("id");console.log("New nestable : ",o);var k=d.parseJSON(d("[data-info-roles]",this).first().attr("data-info-roles"));var h=d.parseJSON(d("[data-info-pagewebs]",this).first().attr("data-info-pagewebs"));var m=d.parseJSON(d("[data-info-messages]",this).first().attr("data-info-messages"));console.log("Messages : ",window.JSON.stringify(m));var l=d(this);var q=d(this).attr("data-bundle");var g=d(this).attr("data-name");var i=parseInt(d(this).attr("data-maxDepth"));var f=d(this).attr("data-url");d("div.dd3-content",this).first().css("background-color","#ddd;");d(this).nestable({group:o,maxDepth:i,}).on("change",function(){d.ajax({url:f,method:"POST",data:{tree:l.nestable("serialize")},})});var p=function(s,t){var r=d("div#"+s+" li#li-"+s+"-"+t);data=r.attr("data-item");return d.parseJSON(data)};var j=function(t,v,u,s){var r=d("div#"+t+" li#li-"+t+"-"+v);switch(u){case"name":d(".dd3-content > span.text",r).first().text(s.name);if(m.hasOwnProperty(s.name)==true){s.name=m[s.name]}break;case"pageweb":d(".dd3-content .pageweb",r).first().text(h[s.path.params.pageweb]);break;case"role":d(".dd3-content > span > small",r).first().text(k[s.role]);break;case"icon":$elem=d(".dd3-content > i.fa",r).first();icon=$elem.attr("data-fa");$elem.removeClass(icon);$elem.attr("data-fa",s.icon);$elem.addClass(s.icon);break}r.attr("data-item",window.JSON.stringify(s))};d("body").on("change","input.name",function(t){var s=d(this).attr("data-idnest");var u=d(this).attr("data-id");var r=p(s,u);r.name=d(this).val();j(s,u,"name",r);d.ajax({url:f,method:"POST",data:{tree:l.nestable("serialize")},}).complete(function(){})});d("body").on("change","select.pageweb",function(t){d(this).trigger("chosen:updated");var s=d(this).attr("data-idnest");var u=d(this).attr("data-id");var r=p(s,u);r.path.params.pageweb=d(this).val();j(s,u,"pageweb",r);d.ajax({url:f,method:"POST",data:{tree:l.nestable("serialize")},}).complete(function(){})});d("body").on("change","select.role",function(t){d(this).trigger("chosen:updated");var s=d(this).attr("data-idnest");var u=d(this).attr("data-id");var r=p(s,u);r.role=d(this).val();j(s,u,"role",r);d.ajax({url:f,method:"POST",data:{tree:l.nestable("serialize")},}).complete(function(){})});d("body").on("click","button.icon",function(v){d("button.icon",d(this).parent()).removeClass("btn-primary").addClass("btn-white");d(this).toggleClass("btn-white").toggleClass("btn-primary");var s=d(">i.fa",this).first().attr("data-fa");var r=d("div.well >i.fa",d(this).parent().parent()).first();var x=r.attr("data-fa");r.removeClass(x).addClass(s).attr("data-fa",s);var u=d(this).attr("data-idnest");var w=d(this).attr("data-id");var t=p(u,w);t.icon=s;j(u,w,"icon",t);d.ajax({url:f,method:"POST",data:{tree:l.nestable("serialize")},}).complete(function(){})})});d("body").on("click",".nest-menu button",function(f){switch(d(this).attr("data-action")){case"add":idnest=d(this).attr("data-idnest");alert("Ajouter un nouvel item "+idnest);$newil=d(d('<ol class="dd-list bis">')).prepend(d('<li class="dd-item bis">').prepend(d('<div class="dd-handle bis">')));d(idnest).prepend($newil);break;default:d(d(this).attr("data-idnest")).nestable(d(this).attr("data-action"))}});d(".menu-icons-item").hide();d(".menu-icons-item").first().show();d(".menu-params-item").hide();d(".menu-params-item").first().show();d("body").on("mouseenter","div.dd div.dd3-content",function(h){var g=d(this).first().attr("data-toggle");var f="#"+d(this).first().attr("data-id");d(f+" div.dd3-content").css("background-color","#fff;");d(this).css("background-color","#ddd;");d(".menu-params-item").hide();d(".menu-icons-item").hide();d(g+"-param").show();d(g+"-icon").show()});d(".depthSlider").each(function(){var g=d(this);var h=d(d(this).attr("data-maj-target"));var f=d(this).attr("data-idnest");noUiSlider.create(d(this).get(0),{start:parseInt(d(this).attr("data-steps")),behaviour:"tap",connect:"upper",animate:true,step:1,range:{min:1,max:6,},direction:"ltr",pips:{mode:"steps",density:20,},}).on("change",function(){var j=this;var k=parseInt(this.get());j.set(k);h.text(k);var i=g.attr("data-url").replace("%23%23%23value%23%23%23",k);d.ajax({url:i,method:"GET",}).complete(function(l){newvalue=parseInt(l.responseJSON.value);j.set(newvalue);h.text(newvalue);d("#"+f).nestable({group:f,maxDepth:newvalue,}).trigger("change")})})})}var b={".chosen-select":{},".chosen-select-deselect":{allow_single_deselect:true},".chosen-select-no-single":{disable_search_threshold:5},".chosen-select-no-results":{no_results_text:"Aucun résultat…"},".chosen-select-width":{width:"95%"},".chosen-select-max1":{max_selected_options:1},".chosen-required":{allow_single_deselect:false},};for(var a in b){d(a).chosen(b[a])}d(".chosen-multi-max1").chosen({allow_single_deselect:true,disable_search_threshold:5,no_results_text:"Aucun résultat…",width:"95%",max_selected_options:1});d("body .chosen-container").css({width:"100%"});d("[id^=multi-form_].multi-form").each(function(B){var B=B;var i="success";var g=d(this).attr("id").replace(/^multi-form_/gi,"");var F=g+"_"+B;var D="table_"+F;var s="delete_"+g+"_";var r=s+B;var v=d(d(this).attr("data-table-prototype")).attr("id",D);var m=d("#"+d(this).attr("id")+" > ul.multi-form-ul").first();var k=new RegExp("[ ,;:|]+","g");var n=m.attr("data-columns").split(k);var f=m.find(" > li").length;var j=m.attr("data-prototype");var w=d(".add_multiform_link[data-target=#"+d(this).attr("id")+"]");var z=function(G){if(G==undefined){alert("Erreur programme : col doit être défini !");return false}var G=G;return d(j).find(".form-group:eq("+G+") > label").first().text().replace("*","")};var h=function(){var G="<th></th>";v.find("> thead > tr").append(G);for(var H=0;H<=n.length-1;H++){v.find("> thead > tr").append("<th class='ellipsis'>"+z(n[H])+"</th>")}};var o=function(){v.find(" > tbody").first().empty()};var l=function(I,H,M){if(I==undefined){alert("Erreur programme : index doit être défini !");return false}var I=I;if(H==undefined){alert("Erreur programme : col doit être défini !");return false}var H=H;if(M==undefined){M=false}var M=M;var N=undefined;var G=m.find(" > li:eq("+I+") > div .form-group:eq("+H+") input").first();if(G.length){if(d(G).attr("type")=="text"){N=d(G).val()}}if(N==undefined){G=m.find(" > li:eq("+I+") > div .form-group:eq("+H+") select").first();if(G.length){if(M==true){N=d(G).find("option:selected").first().text()}else{var K=d(G).find("option:selected");if(K.length>0){var L=new Array();for(var J=0;J<=K.length-1;J++){L.push(d(K[J]).text())}N=L.join("<br>")}}}}if(N==undefined){N=""}return N};var C=function(H){if(H==undefined){alert("Erreur programme : index doit être défini !");return false}var H=H;var G="";for(var I=0;I<=n.length-1;I++){G+="<td class='change_item in_cols ellipsis' style='cursor:pointer;'>"+l(H,n[I])+"</td>"}return G};var A=function(){var H="";var G=v.find(" > tbody").first();var J=m.find(" > li");o();if(J.length>0){var I="";for(var K=0;K<=J.length-1;K++){H="<td class='text-center delete_column' data-confirm-title='Confirmation' data-confirm-message='Souhaitez-vous supprimer cette ligne ?' title='Supprimer cette ligne' style='width: 36px;'><button id='"+r+"_"+K+"' class='btn btn-xs btn-danger btn-outline' data-item='"+K+"'><i class='fa fa-times'></i></button></td>";if(d(J[K]).css("display")!="none"){I=" "+i}else{I=""}G.append("<tr class='ellipsis"+I+"'>"+H+C(K)+"</tr>")}}};var q=function(){return m.find(" > li").length};var E=function(){return d("#"+D+" > tbody > tr."+i).index("#"+D+" > tbody > tr")};var y=function(G){m.find(" > li").hide();if(G==undefined||G>=(q())||G<0||G=="first"){m.find(" > li").first().show()}else{if(G=="last"){m.find(" > li").last().show()}else{m.find(" > li:eq("+G+")").show()}}A()};var p=function(){$newLi=d("<li></li>").append(j.replace(/__name__/gi,f++));m.append($newLi);y("last")};var u=function(G){var H=false;if(G==E()){H=true}m.find(" > li:eq("+G+")").remove();if(H){y(G-1)}else{A()}};var t=function(K){if(K==undefined){alert("Erreur programme : elem doit être défini !");return false}var K=K;var H=d(K).closest("li");var L=d(H).parent();var J=d(H).index("#"+d(L).attr("id")+" > li");var M=d(K).closest(".form-group");var G=d(M).parent();var I=d(M).index("#"+d(G).attr("id")+" > .form-group");return{index:J,col:I}};var x=function(I){if(I==undefined){alert("Erreur programme : elem doit être défini !");return false}var I=I;var J=d(I).closest("tr");var H=d(J).index("#"+D+" > tbody > tr");var K=d(I).closest("td");var G=d(K).index("#"+D+" > tbody > tr > td.in_cols");return{index:H,col:G}};d(this).prepend(v);h();y();v.on("click","tbody > tr > td.change_item",function(G){y(d(this).parent().index())});m.on("keyup","input",function(G){data=t(this);if(n.indexOf(data.col+"")!=-1){A()}});m.on("change","select",function(G){data=t(this);if(n.indexOf(data.col+"")!=-1){A()}});w.on("click",function(G){G.preventDefault();p()});d("body").on("click","[id^="+r+"]",function(J){J.preventDefault();var H=x(this);var K=d(this).attr("data-confirm-title");if(K==undefined){K="Confirmation"}var G=d(this).attr("data-confirm-message");if(G==undefined){G="Confirmez cette action, s.v.p."}var I=confirm(K+"\n"+G);if(I){u(H.index)}})})});
/*!
 * Cropper v2.2.5
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2016 Fengyuan Chen and contributors
 * Released under the MIT license
 *
 * Date: 2016-01-18T05:42:50.800Z
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}})(function(ak){var K=ak(window);var x=ak(document);var aq=window.location;var am=window.ArrayBuffer;var E=window.Uint8Array;var l=window.DataView;var I=window.btoa;var f="cropper";var v="cropper-modal";var ah="cropper-hide";var V="cropper-hidden";var ab="cropper-invisible";var ai="cropper-move";var T="cropper-crop";var O="cropper-disabled";var C="cropper-bg";var y="mousedown touchstart pointerdown MSPointerDown";var af="mousemove touchmove pointermove MSPointerMove";var Z="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel";var b="wheel mousewheel DOMMouseScroll";var q="dblclick";var an="load."+f;var X="error."+f;var Q="resize."+f;var d="build."+f;var a="built."+f;var j="cropstart."+f;var ay="cropmove."+f;var aj="cropend."+f;var n="crop."+f;var av="zoom."+f;var aw=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/;var h=/^data\:/;var N=/^data\:([^\;]+)\;base64,/;var S=/^data\:image\/jpeg.*;base64,/;var aA="preview";var g="action";var W="e";var ap="w";var e="s";var i="n";var A="se";var ac="sw";var w="ne";var Y="nw";var o="all";var aa="crop";var au="move";var H="zoom";var t="none";var p=ak.isFunction(ak("<canvas>")[0].getContext);var az=Number;var at=Math.min;var k=Math.max;var L=Math.abs;var ag=Math.sin;var r=Math.cos;var B=Math.sqrt;var D=Math.round;var R=Math.floor;var c=String.fromCharCode;function J(aC){return typeof aC==="number"&&!isNaN(aC)}function M(aC){return typeof aC==="undefined"}function G(aD,aE){var aC=[];if(J(aE)){aC.push(aE)}return aC.slice.apply(aD,aC)}function s(aE,aD){var aC=G(arguments,2);return function(){return aE.apply(aD,aC.concat(G(arguments)))}}function U(aC){var aD=aC.match(/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i);return aD&&(aD[1]!==aq.protocol||aD[2]!==aq.hostname||aD[3]!==aq.port)}function z(aC){var aD="timestamp="+(new Date()).getTime();return(aC+(aC.indexOf("?")===-1?"?":"&")+aD)}function aB(aC){return aC?' crossOrigin="'+aC+'"':""}function m(aC,aE){var aD;if(aC.naturalWidth){return aE(aC.naturalWidth,aC.naturalHeight)}aD=document.createElement("img");aD.onload=function(){aE(this.width,this.height)};aD.src=aC.src}function ad(aF){var aG=[];var aE=aF.rotate;var aD=aF.scaleX;var aC=aF.scaleY;if(J(aE)){aG.push("rotate("+aE+"deg)")}if(J(aD)&&J(aC)){aG.push("scale("+aD+","+aC+")")}return aG.length?aG.join(" "):"none"}function ax(aI,aG){var aD=L(aI.degree)%180;var aF=(aD>90?(180-aD):aD)*Math.PI/180;var aJ=ag(aF);var aL=r(aF);var aE=aI.width;var aM=aI.height;var aK=aI.aspectRatio;var aH;var aC;if(!aG){aH=aE*aL+aM*aJ;aC=aE*aJ+aM*aL}else{aH=aE/(aL+aJ/aK);aC=aH/aK}return{width:aH,height:aC}}function al(aL,aT){var aE=ak("<canvas>")[0];var aD=aE.getContext("2d");var aJ=0;var aI=0;var aM=aT.naturalWidth;var aK=aT.naturalHeight;var aN=aT.rotate;var aQ=aT.scaleX;var aP=aT.scaleY;var aH=J(aQ)&&J(aP)&&(aQ!==1||aP!==1);var aR=J(aN)&&aN!==0;var aG=aR||aH;var aO=aM;var aC=aK;var aU;var aS;var aF;if(aH){aU=aM/2;aS=aK/2}if(aR){aF=ax({width:aM,height:aK,degree:aN});aO=aF.width;aC=aF.height;aU=aF.width/2;aS=aF.height/2}aE.width=aO;aE.height=aC;if(aG){aJ=-aM/2;aI=-aK/2;aD.save();aD.translate(aU,aS)}if(aR){aD.rotate(aN*Math.PI/180)}if(aH){aD.scale(aQ,aP)}aD.drawImage(aL,R(aJ),R(aI),R(aM),R(aK));if(aG){aD.restore()}return aE}function ae(aF){var aE=aF.length;var aD=0;var aC=0;if(aE){ak.each(aF,function(aG,aH){aD+=aH.pageX;aC+=aH.pageY});aD/=aE;aC/=aE}return{pageX:aD,pageY:aC}}function P(aF,aG,aD){var aE="";var aC;for(aC=aG,aD+=aG;aC<aD;aC++){aE+=c(aF.getUint8(aC))}return aE}function F(aJ){var aM=new l(aJ);var aF=aM.byteLength;var aE;var aN;var aL;var aC;var aD;var aK;var aI;var aO;var aG;var aH;if(aM.getUint8(0)===255&&aM.getUint8(1)===216){aG=2;while(aG<aF){if(aM.getUint8(aG)===255&&aM.getUint8(aG+1)===225){aI=aG;break}aG++}}if(aI){aN=aI+4;aL=aI+10;if(P(aM,aN,4)==="Exif"){aK=aM.getUint16(aL);aD=aK===18761;if(aD||aK===19789){if(aM.getUint16(aL+2,aD)===42){aC=aM.getUint32(aL+4,aD);if(aC>=8){aO=aL+aC}}}}}if(aO){aF=aM.getUint16(aO,aD);for(aH=0;aH<aF;aH++){aG=aO+aH*12+2;if(aM.getUint16(aG,aD)===274){aG+=8;aE=aM.getUint16(aG,aD);aM.setUint16(aG,1,aD);break}}}return aE}function ar(aH){var aC=aH.replace(N,"");var aI=atob(aC);var aF=aI.length;var aE=new am(aF);var aG=new E(aE);var aD;for(aD=0;aD<aF;aD++){aG[aD]=aI.charCodeAt(aD)}return aE}function ao(aE){var aG=new E(aE);var aF=aG.length;var aC="";var aD;for(aD=0;aD<aF;aD++){aC+=c(aG[aD])}return"data:image/jpeg;base64,"+I(aC)}function u(aD,aC){this.$element=ak(aD);this.options=ak.extend({},u.DEFAULTS,ak.isPlainObject(aC)&&aC);this.isLoaded=false;this.isBuilt=false;this.isCompleted=false;this.isRotated=false;this.isCropped=false;this.isDisabled=false;this.isReplaced=false;this.isLimited=false;this.wheeling=false;this.isImg=false;this.originalUrl="";this.canvas=null;this.cropBox=null;this.init()}u.prototype={constructor:u,init:function(){var aD=this.$element;var aC;if(aD.is("img")){this.isImg=true;this.originalUrl=aC=aD.attr("src");if(!aC){return}aC=aD.prop("src")}else{if(aD.is("canvas")&&p){aC=aD[0].toDataURL()}}this.load(aC)},trigger:function(aC,aD){var aE=ak.Event(aC,aD);this.$element.trigger(aE);return aE},load:function(aD){var aC=this.options;var aF=this.$element;var aE;var aG;if(!aD){return}aF.one(d,aC.build);if(this.trigger(d).isDefaultPrevented()){return}this.url=aD;this.image={};if(!aC.checkOrientation||!am){return this.clone()}aE=ak.proxy(this.read,this);if(h.test(aD)){return S.test(aD)?aE(ar(aD)):this.clone()}aG=new XMLHttpRequest();aG.onerror=aG.onabort=ak.proxy(function(){this.clone()},this);aG.onload=function(){aE(this.response)};aG.open("get",aD);aG.responseType="arraybuffer";aG.send()},read:function(aH){var aG=this.options;var aD=F(aH);var aI=this.image;var aF;var aE;var aC;if(aD>1){this.url=ao(aH);switch(aD){case 2:aE=-1;break;case 3:aF=-180;break;case 4:aC=-1;break;case 5:aF=90;aC=-1;break;case 6:aF=90;break;case 7:aF=90;aE=-1;break;case 8:aF=-90;break}}if(aG.rotatable){aI.rotate=aF}if(aG.scalable){aI.scaleX=aE;aI.scaleY=aC}this.clone()},clone:function(){var aE=this.options;var aH=this.$element;var aD=this.url;var aC="";var aF;var aG;if(aE.checkCrossOrigin&&U(aD)){aC=aH.prop("crossOrigin");if(aC){aF=aD}else{aC="anonymous";aF=z(aD)}}this.crossOrigin=aC;this.crossOriginUrl=aF;this.$clone=aG=ak("<img"+aB(aC)+' src="'+(aF||aD)+'">');if(this.isImg){if(aH[0].complete){this.start()}else{aH.one(an,ak.proxy(this.start,this))}}else{aG.one(an,ak.proxy(this.start,this)).one(X,ak.proxy(this.stop,this)).addClass(ah).insertAfter(aH)}},start:function(){var aC=this.$element;var aD=this.$clone;if(!this.isImg){aD.off(X,this.stop);aC=aD}m(aC[0],ak.proxy(function(aE,aF){ak.extend(this.image,{naturalWidth:aE,naturalHeight:aF,aspectRatio:aE/aF});this.isLoaded=true;this.build()},this))},stop:function(){this.$clone.remove();this.$clone=null},build:function(){var aF=this.options;var aH=this.$element;var aG=this.$clone;var aD;var aC;var aE;if(!this.isLoaded){return}if(this.isBuilt){this.unbuild()}this.$container=aH.parent();this.$cropper=aD=ak(u.TEMPLATE);this.$canvas=aD.find(".cropper-canvas").append(aG);this.$dragBox=aD.find(".cropper-drag-box");this.$cropBox=aC=aD.find(".cropper-crop-box");this.$viewBox=aD.find(".cropper-view-box");this.$face=aE=aC.find(".cropper-face");aH.addClass(V).after(aD);if(!this.isImg){aG.removeClass(ah)}this.initPreview();this.bind();aF.aspectRatio=k(0,aF.aspectRatio)||NaN;aF.viewMode=k(0,at(3,D(aF.viewMode)))||0;if(aF.autoCrop){this.isCropped=true;if(aF.modal){this.$dragBox.addClass(v)}}else{aC.addClass(V)}if(!aF.guides){aC.find(".cropper-dashed").addClass(V)}if(!aF.center){aC.find(".cropper-center").addClass(V)}if(aF.cropBoxMovable){aE.addClass(ai).data(g,o)}if(!aF.highlight){aE.addClass(ab)}if(aF.background){aD.addClass(C)}if(!aF.cropBoxResizable){aC.find(".cropper-line, .cropper-point").addClass(V)}this.setDragMode(aF.dragMode);this.render();this.isBuilt=true;this.setData(aF.data);aH.one(a,aF.built);setTimeout(ak.proxy(function(){this.trigger(a);this.isCompleted=true},this),0)},unbuild:function(){if(!this.isBuilt){return}this.isBuilt=false;this.isCompleted=false;this.initialImage=null;this.initialCanvas=null;this.initialCropBox=null;this.container=null;this.canvas=null;this.cropBox=null;this.unbind();this.resetPreview();this.$preview=null;this.$viewBox=null;this.$cropBox=null;this.$dragBox=null;this.$canvas=null;this.$container=null;this.$cropper.remove();this.$cropper=null},render:function(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.isCropped){this.renderCropBox()}},initContainer:function(){var aD=this.options;var aE=this.$element;var aF=this.$container;var aC=this.$cropper;aC.addClass(V);aE.removeClass(V);aC.css((this.container={width:k(aF.width(),az(aD.minContainerWidth)||200),height:k(aF.height(),az(aD.minContainerHeight)||100)}));aE.addClass(V);aC.removeClass(V)},initCanvas:function(){var aG=this.options.viewMode;var aD=this.container;var aL=aD.width;var aP=aD.height;var aH=this.image;var aN=aH.naturalWidth;var aK=aH.naturalHeight;var aC=L(aH.rotate)===90;var aJ=aC?aK:aN;var aM=aC?aN:aK;var aO=aJ/aM;var aF=aL;var aI=aP;var aE;if(aP*aO>aL){if(aG===3){aF=aP*aO}else{aI=aL/aO}}else{if(aG===3){aI=aL/aO}else{aF=aP*aO}}aE={naturalWidth:aJ,naturalHeight:aM,aspectRatio:aO,width:aF,height:aI};aE.oldLeft=aE.left=(aL-aF)/2;aE.oldTop=aE.top=(aP-aI)/2;this.canvas=aE;this.isLimited=(aG===1||aG===2);this.limitCanvas(true,true);this.initialImage=ak.extend({},aH);this.initialCanvas=ak.extend({},aE)},limitCanvas:function(aL,aI){var aQ=this.options;var aG=aQ.viewMode;var aC=this.container;var aM=aC.width;var aP=aC.height;var aF=this.canvas;var aN=aF.aspectRatio;var aH=this.cropBox;var aE=this.isCropped&&aH;var aO;var aJ;var aD;var aK;if(aL){aO=az(aQ.minCanvasWidth)||0;aJ=az(aQ.minCanvasHeight)||0;if(aG){if(aG>1){aO=k(aO,aM);aJ=k(aJ,aP);if(aG===3){if(aJ*aN>aO){aO=aJ*aN}else{aJ=aO/aN}}}else{if(aO){aO=k(aO,aE?aH.width:0)}else{if(aJ){aJ=k(aJ,aE?aH.height:0)}else{if(aE){aO=aH.width;aJ=aH.height;if(aJ*aN>aO){aO=aJ*aN}else{aJ=aO/aN}}}}}}if(aO&&aJ){if(aJ*aN>aO){aJ=aO/aN}else{aO=aJ*aN}}else{if(aO){aJ=aO/aN}else{if(aJ){aO=aJ*aN}}}aF.minWidth=aO;aF.minHeight=aJ;aF.maxWidth=Infinity;aF.maxHeight=Infinity}if(aI){if(aG){aD=aM-aF.width;aK=aP-aF.height;aF.minLeft=at(0,aD);aF.minTop=at(0,aK);aF.maxLeft=k(0,aD);aF.maxTop=k(0,aK);if(aE&&this.isLimited){aF.minLeft=at(aH.left,aH.left+aH.width-aF.width);aF.minTop=at(aH.top,aH.top+aH.height-aF.height);aF.maxLeft=aH.left;aF.maxTop=aH.top;if(aG===2){if(aF.width>=aM){aF.minLeft=at(0,aD);aF.maxLeft=k(0,aD)}if(aF.height>=aP){aF.minTop=at(0,aK);aF.maxTop=k(0,aK)}}}}else{aF.minLeft=-aF.width;aF.minTop=-aF.height;aF.maxLeft=aM;aF.maxTop=aP}}},renderCanvas:function(aD){var aG=this.canvas;var aJ=this.image;var aF=aJ.rotate;var aE=aJ.naturalWidth;var aI=aJ.naturalHeight;var aH;var aC;if(this.isRotated){this.isRotated=false;aC=ax({width:aJ.width,height:aJ.height,degree:aF});aH=aC.width/aC.height;if(aH!==aG.aspectRatio){aG.left-=(aC.width-aG.width)/2;aG.top-=(aC.height-aG.height)/2;aG.width=aC.width;aG.height=aC.height;aG.aspectRatio=aH;aG.naturalWidth=aE;aG.naturalHeight=aI;if(aF%180){aC=ax({width:aE,height:aI,degree:aF});aG.naturalWidth=aC.width;aG.naturalHeight=aC.height}this.limitCanvas(true,false)}}if(aG.width>aG.maxWidth||aG.width<aG.minWidth){aG.left=aG.oldLeft}if(aG.height>aG.maxHeight||aG.height<aG.minHeight){aG.top=aG.oldTop}aG.width=at(k(aG.width,aG.minWidth),aG.maxWidth);aG.height=at(k(aG.height,aG.minHeight),aG.maxHeight);this.limitCanvas(false,true);aG.oldLeft=aG.left=at(k(aG.left,aG.minLeft),aG.maxLeft);aG.oldTop=aG.top=at(k(aG.top,aG.minTop),aG.maxTop);this.$canvas.css({width:aG.width,height:aG.height,left:aG.left,top:aG.top});this.renderImage();if(this.isCropped&&this.isLimited){this.limitCropBox(true,true)}if(aD){this.output()}},renderImage:function(aC){var aD=this.canvas;var aE=this.image;var aF;if(aE.rotate){aF=ax({width:aD.width,height:aD.height,degree:aE.rotate,aspectRatio:aE.aspectRatio},true)}ak.extend(aE,aF?{width:aF.width,height:aF.height,left:(aD.width-aF.width)/2,top:(aD.height-aF.height)/2}:{width:aD.width,height:aD.height,left:0,top:0});this.$clone.css({width:aE.width,height:aE.height,marginLeft:aE.left,marginTop:aE.top,transform:ad(aE)});if(aC){this.output()}},initCropBox:function(){var aD=this.options;var aC=this.canvas;var aF=aD.aspectRatio;var aG=az(aD.autoCropArea)||0.8;var aE={width:aC.width,height:aC.height};if(aF){if(aC.height*aF>aC.width){aE.height=aE.width/aF}else{aE.width=aE.height*aF}}this.cropBox=aE;this.limitCropBox(true,true);aE.width=at(k(aE.width,aE.minWidth),aE.maxWidth);aE.height=at(k(aE.height,aE.minHeight),aE.maxHeight);aE.width=k(aE.minWidth,aE.width*aG);aE.height=k(aE.minHeight,aE.height*aG);aE.oldLeft=aE.left=aC.left+(aC.width-aE.width)/2;aE.oldTop=aE.top=aC.top+(aC.height-aE.height)/2;this.initialCropBox=ak.extend({},aE)},limitCropBox:function(aJ,aG){var aP=this.options;var aM=aP.aspectRatio;var aD=this.container;var aK=aD.width;var aO=aD.height;var aE=this.canvas;var aF=this.cropBox;var aN=this.isLimited;var aC;var aH;var aI;var aL;if(aJ){aC=az(aP.minCropBoxWidth)||0;aH=az(aP.minCropBoxHeight)||0;aC=at(aC,aK);aH=at(aH,aO);aI=at(aK,aN?aE.width:aK);aL=at(aO,aN?aE.height:aO);if(aM){if(aC&&aH){if(aH*aM>aC){aH=aC/aM}else{aC=aH*aM}}else{if(aC){aH=aC/aM}else{if(aH){aC=aH*aM}}}if(aL*aM>aI){aL=aI/aM}else{aI=aL*aM}}aF.minWidth=at(aC,aI);aF.minHeight=at(aH,aL);aF.maxWidth=aI;aF.maxHeight=aL}if(aG){if(aN){aF.minLeft=k(0,aE.left);aF.minTop=k(0,aE.top);aF.maxLeft=at(aK,aE.left+aE.width)-aF.width;aF.maxTop=at(aO,aE.top+aE.height)-aF.height}else{aF.minLeft=0;aF.minTop=0;aF.maxLeft=aK-aF.width;aF.maxTop=aO-aF.height}}},renderCropBox:function(){var aD=this.options;var aC=this.container;var aG=aC.width;var aF=aC.height;var aE=this.cropBox;if(aE.width>aE.maxWidth||aE.width<aE.minWidth){aE.left=aE.oldLeft}if(aE.height>aE.maxHeight||aE.height<aE.minHeight){aE.top=aE.oldTop}aE.width=at(k(aE.width,aE.minWidth),aE.maxWidth);aE.height=at(k(aE.height,aE.minHeight),aE.maxHeight);this.limitCropBox(false,true);aE.oldLeft=aE.left=at(k(aE.left,aE.minLeft),aE.maxLeft);aE.oldTop=aE.top=at(k(aE.top,aE.minTop),aE.maxTop);if(aD.movable&&aD.cropBoxMovable){this.$face.data(g,(aE.width===aG&&aE.height===aF)?au:o)}this.$cropBox.css({width:aE.width,height:aE.height,left:aE.left,top:aE.top});if(this.isCropped&&this.isLimited){this.limitCanvas(true,true)}if(!this.isDisabled){this.output()}},output:function(){this.preview();if(this.isCompleted){this.trigger(n,this.getData())}else{if(!this.isBuilt){this.$element.one(a,ak.proxy(function(){this.trigger(n,this.getData())},this))}}},initPreview:function(){var aC=aB(this.crossOrigin);var aD=aC?this.crossOriginUrl:this.url;this.$preview=ak(this.options.preview);this.$viewBox.html("<img"+aC+' src="'+aD+'">');this.$preview.each(function(){var aE=ak(this);aE.data(aA,{width:aE.width(),height:aE.height(),html:aE.html()});aE.html("<img"+aC+' src="'+aD+'" style="display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;">')})},resetPreview:function(){this.$preview.each(function(){var aD=ak(this);var aC=aD.data(aA);aD.css({width:aC.width,height:aC.height}).html(aC.html).removeData(aA)})},preview:function(){var aG=this.image;var aE=this.canvas;var aH=this.cropBox;var aC=aH.width;var aI=aH.height;var aD=aG.width;var aK=aG.height;var aF=aH.left-aE.left-aG.left;var aJ=aH.top-aE.top-aG.top;if(!this.isCropped||this.isDisabled){return}this.$viewBox.find("img").css({width:aD,height:aK,marginLeft:-aF,marginTop:-aJ,transform:ad(aG)});this.$preview.each(function(){var aQ=ak(this);var aP=aQ.data(aA);var aR=aP.width;var aO=aP.height;var aN=aR;var aL=aO;var aM=1;if(aC){aM=aR/aC;aL=aI*aM}if(aI&&aL>aO){aM=aO/aI;aN=aC*aM;aL=aO}aQ.css({width:aN,height:aL}).find("img").css({width:aD*aM,height:aK*aM,marginLeft:-aF*aM,marginTop:-aJ*aM,transform:ad(aG)})})},bind:function(){var aD=this.options;var aE=this.$element;var aC=this.$cropper;if(ak.isFunction(aD.cropstart)){aE.on(j,aD.cropstart)}if(ak.isFunction(aD.cropmove)){aE.on(ay,aD.cropmove)}if(ak.isFunction(aD.cropend)){aE.on(aj,aD.cropend)}if(ak.isFunction(aD.crop)){aE.on(n,aD.crop)}if(ak.isFunction(aD.zoom)){aE.on(av,aD.zoom)}aC.on(y,ak.proxy(this.cropStart,this));if(aD.zoomable&&aD.zoomOnWheel){aC.on(b,ak.proxy(this.wheel,this))}if(aD.toggleDragModeOnDblclick){aC.on(q,ak.proxy(this.dblclick,this))}x.on(af,(this._cropMove=s(this.cropMove,this))).on(Z,(this._cropEnd=s(this.cropEnd,this)));if(aD.responsive){K.on(Q,(this._resize=s(this.resize,this)))}},unbind:function(){var aD=this.options;var aE=this.$element;var aC=this.$cropper;if(ak.isFunction(aD.cropstart)){aE.off(j,aD.cropstart)}if(ak.isFunction(aD.cropmove)){aE.off(ay,aD.cropmove)}if(ak.isFunction(aD.cropend)){aE.off(aj,aD.cropend)}if(ak.isFunction(aD.crop)){aE.off(n,aD.crop)}if(ak.isFunction(aD.zoom)){aE.off(av,aD.zoom)}aC.off(y,this.cropStart);if(aD.zoomable&&aD.zoomOnWheel){aC.off(b,this.wheel)}if(aD.toggleDragModeOnDblclick){aC.off(q,this.dblclick)}x.off(af,this._cropMove).off(Z,this._cropEnd);if(aD.responsive){K.off(Q,this._resize)}},resize:function(){var aF=this.options.restore;var aH=this.$container;var aC=this.container;var aD;var aG;var aE;if(this.isDisabled||!aC){return}aE=aH.width()/aC.width;if(aE!==1||aH.height()!==aC.height){if(aF){aD=this.getCanvasData();aG=this.getCropBoxData()}this.render();if(aF){this.setCanvasData(ak.each(aD,function(aI,aJ){aD[aI]=aJ*aE}));this.setCropBoxData(ak.each(aG,function(aI,aJ){aG[aI]=aJ*aE}))}}},dblclick:function(){if(this.isDisabled){return}if(this.$dragBox.hasClass(T)){this.setDragMode(au)}else{this.setDragMode(aa)}},wheel:function(aD){var aE=aD.originalEvent||aD;var aC=az(this.options.wheelZoomRatio)||0.1;var aF=1;if(this.isDisabled){return}aD.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(ak.proxy(function(){this.wheeling=false},this),50);if(aE.deltaY){aF=aE.deltaY>0?1:-1}else{if(aE.wheelDelta){aF=-aE.wheelDelta/120}else{if(aE.detail){aF=aE.detail>0?1:-1}}}this.zoom(-aF*aC,aD)},cropStart:function(aF){var aE=this.options;var aC=aF.originalEvent;var aI=aC&&aC.touches;var aH=aF;var aD;var aG;if(this.isDisabled){return}if(aI){aD=aI.length;if(aD>1){if(aE.zoomable&&aE.zoomOnTouch&&aD===2){aH=aI[1];this.startX2=aH.pageX;this.startY2=aH.pageY;aG=H}else{return}}aH=aI[0]}aG=aG||ak(aH.target).data(g);if(aw.test(aG)){if(this.trigger(j,{originalEvent:aC,action:aG}).isDefaultPrevented()){return}aF.preventDefault();this.action=aG;this.cropping=false;this.startX=aH.pageX||aC&&aC.pageX;this.startY=aH.pageY||aC&&aC.pageY;if(aG===aa){this.cropping=true;this.$dragBox.addClass(v)}}},cropMove:function(aF){var aE=this.options;var aC=aF.originalEvent;var aI=aC&&aC.touches;var aH=aF;var aG=this.action;var aD;if(this.isDisabled){return}if(aI){aD=aI.length;if(aD>1){if(aE.zoomable&&aE.zoomOnTouch&&aD===2){aH=aI[1];this.endX2=aH.pageX;this.endY2=aH.pageY}else{return}}aH=aI[0]}if(aG){if(this.trigger(ay,{originalEvent:aC,action:aG}).isDefaultPrevented()){return}aF.preventDefault();this.endX=aH.pageX||aC&&aC.pageX;this.endY=aH.pageY||aC&&aC.pageY;this.change(aH.shiftKey,aG===H?aF:null)}},cropEnd:function(aD){var aC=aD.originalEvent;var aE=this.action;if(this.isDisabled){return}if(aE){aD.preventDefault();if(this.cropping){this.cropping=false;this.$dragBox.toggleClass(v,this.isCropped&&this.options.modal)}this.action="";this.trigger(aj,{originalEvent:aC,action:aE})}},change:function(aO,aU){var aF=this.options;var aD=aF.aspectRatio;var aT=this.action;var aK=this.container;var aE=this.canvas;var aC=this.cropBox;var aS=aC.width;var aN=aC.height;var aG=aC.left;var aM=aC.top;var aW=aG+aS;var aI=aM+aN;var aP=0;var aJ=0;var aV=aK.width;var aR=aK.height;var aQ=true;var aH;var aL;if(!aD&&aO){aD=aS&&aN?aS/aN:1}if(this.limited){aP=aC.minLeft;aJ=aC.minTop;aV=aP+at(aK.width,aE.width);aR=aJ+at(aK.height,aE.height)}aL={x:this.endX-this.startX,y:this.endY-this.startY};if(aD){aL.X=aL.y*aD;aL.Y=aL.x/aD}switch(aT){case o:aG+=aL.x;aM+=aL.y;break;case W:if(aL.x>=0&&(aW>=aV||aD&&(aM<=aJ||aI>=aR))){aQ=false;break}aS+=aL.x;if(aD){aN=aS/aD;aM-=aL.Y/2}if(aS<0){aT=ap;aS=0}break;case i:if(aL.y<=0&&(aM<=aJ||aD&&(aG<=aP||aW>=aV))){aQ=false;break}aN-=aL.y;aM+=aL.y;if(aD){aS=aN*aD;aG+=aL.X/2}if(aN<0){aT=e;aN=0}break;case ap:if(aL.x<=0&&(aG<=aP||aD&&(aM<=aJ||aI>=aR))){aQ=false;break}aS-=aL.x;aG+=aL.x;if(aD){aN=aS/aD;aM+=aL.Y/2}if(aS<0){aT=W;aS=0}break;case e:if(aL.y>=0&&(aI>=aR||aD&&(aG<=aP||aW>=aV))){aQ=false;break}aN+=aL.y;if(aD){aS=aN*aD;aG-=aL.X/2}if(aN<0){aT=i;aN=0}break;case w:if(aD){if(aL.y<=0&&(aM<=aJ||aW>=aV)){aQ=false;break}aN-=aL.y;aM+=aL.y;aS=aN*aD}else{if(aL.x>=0){if(aW<aV){aS+=aL.x}else{if(aL.y<=0&&aM<=aJ){aQ=false}}}else{aS+=aL.x}if(aL.y<=0){if(aM>aJ){aN-=aL.y;aM+=aL.y}}else{aN-=aL.y;aM+=aL.y}}if(aS<0&&aN<0){aT=ac;aN=0;aS=0}else{if(aS<0){aT=Y;aS=0}else{if(aN<0){aT=A;aN=0}}}break;case Y:if(aD){if(aL.y<=0&&(aM<=aJ||aG<=aP)){aQ=false;break}aN-=aL.y;aM+=aL.y;aS=aN*aD;aG+=aL.X}else{if(aL.x<=0){if(aG>aP){aS-=aL.x;aG+=aL.x}else{if(aL.y<=0&&aM<=aJ){aQ=false}}}else{aS-=aL.x;aG+=aL.x}if(aL.y<=0){if(aM>aJ){aN-=aL.y;aM+=aL.y}}else{aN-=aL.y;aM+=aL.y}}if(aS<0&&aN<0){aT=A;aN=0;aS=0}else{if(aS<0){aT=w;aS=0}else{if(aN<0){aT=ac;aN=0}}}break;case ac:if(aD){if(aL.x<=0&&(aG<=aP||aI>=aR)){aQ=false;break}aS-=aL.x;aG+=aL.x;aN=aS/aD}else{if(aL.x<=0){if(aG>aP){aS-=aL.x;aG+=aL.x}else{if(aL.y>=0&&aI>=aR){aQ=false}}}else{aS-=aL.x;aG+=aL.x}if(aL.y>=0){if(aI<aR){aN+=aL.y}}else{aN+=aL.y}}if(aS<0&&aN<0){aT=w;aN=0;aS=0}else{if(aS<0){aT=A;aS=0}else{if(aN<0){aT=Y;aN=0}}}break;case A:if(aD){if(aL.x>=0&&(aW>=aV||aI>=aR)){aQ=false;break}aS+=aL.x;aN=aS/aD}else{if(aL.x>=0){if(aW<aV){aS+=aL.x}else{if(aL.y>=0&&aI>=aR){aQ=false}}}else{aS+=aL.x}if(aL.y>=0){if(aI<aR){aN+=aL.y}}else{aN+=aL.y}}if(aS<0&&aN<0){aT=Y;aN=0;aS=0}else{if(aS<0){aT=ac;aS=0}else{if(aN<0){aT=w;aN=0}}}break;case au:this.move(aL.x,aL.y);aQ=false;break;case H:this.zoom((function(aY,a0,aX,aZ){var a2=B(aY*aY+a0*a0);var a1=B(aX*aX+aZ*aZ);return(a1-a2)/a2})(L(this.startX-this.startX2),L(this.startY-this.startY2),L(this.endX-this.endX2),L(this.endY-this.endY2)),aU);this.startX2=this.endX2;this.startY2=this.endY2;aQ=false;break;case aa:if(!aL.x||!aL.y){aQ=false;break}aH=this.$cropper.offset();aG=this.startX-aH.left;aM=this.startY-aH.top;aS=aC.minWidth;aN=aC.minHeight;if(aL.x>0){aT=aL.y>0?A:w}else{if(aL.x<0){aG-=aS;aT=aL.y>0?ac:Y}}if(aL.y<0){aM-=aN}if(!this.isCropped){this.$cropBox.removeClass(V);this.isCropped=true;if(this.limited){this.limitCropBox(true,true)}}break}if(aQ){aC.width=aS;aC.height=aN;aC.left=aG;aC.top=aM;this.action=aT;this.renderCropBox()}this.startX=this.endX;this.startY=this.endY},crop:function(){if(!this.isBuilt||this.isDisabled){return}if(!this.isCropped){this.isCropped=true;this.limitCropBox(true,true);if(this.options.modal){this.$dragBox.addClass(v)}this.$cropBox.removeClass(V)}this.setCropBoxData(this.initialCropBox)},reset:function(){if(!this.isBuilt||this.isDisabled){return}this.image=ak.extend({},this.initialImage);this.canvas=ak.extend({},this.initialCanvas);this.cropBox=ak.extend({},this.initialCropBox);this.renderCanvas();if(this.isCropped){this.renderCropBox()}},clear:function(){if(!this.isCropped||this.isDisabled){return}ak.extend(this.cropBox,{left:0,top:0,width:0,height:0});this.isCropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();this.$dragBox.removeClass(v);this.$cropBox.addClass(V)},replace:function(aC){if(!this.isDisabled&&aC){if(this.isImg){this.isReplaced=true;this.$element.attr("src",aC)}this.options.data=null;this.load(aC)}},enable:function(){if(this.isBuilt){this.isDisabled=false;this.$cropper.removeClass(O)}},disable:function(){if(this.isBuilt){this.isDisabled=true;this.$cropper.addClass(O)}},destroy:function(){var aC=this.$element;if(this.isLoaded){if(this.isImg&&this.isReplaced){aC.attr("src",this.originalUrl)}this.unbuild();aC.removeClass(V)}else{if(this.isImg){aC.off(an,this.start)}else{if(this.$clone){this.$clone.remove()}}}aC.removeData(f)},move:function(aC,aE){var aD=this.canvas;this.moveTo(M(aC)?aC:aD.left+az(aC),M(aE)?aE:aD.top+az(aE))},moveTo:function(aC,aF){var aE=this.canvas;var aD=false;if(M(aF)){aF=aC}aC=az(aC);aF=az(aF);if(this.isBuilt&&!this.isDisabled&&this.options.movable){if(J(aC)){aE.left=aC;aD=true}if(J(aF)){aE.top=aF;aD=true}if(aD){this.renderCanvas(true)}}},zoom:function(aE,aC){var aD=this.canvas;aE=az(aE);if(aE<0){aE=1/(1-aE)}else{aE=1+aE}this.zoomTo(aD.width*aE/aD.naturalWidth,aC)},zoomTo:function(aL,aH){var aO=this.options;var aG=this.canvas;var aF=aG.width;var aN=aG.height;var aK=aG.naturalWidth;var aM=aG.naturalHeight;var aE;var aJ;var aD;var aI;var aC;aL=az(aL);if(aL>=0&&this.isBuilt&&!this.isDisabled&&aO.zoomable){aJ=aK*aL;aD=aM*aL;if(aH){aE=aH.originalEvent}if(this.trigger(av,{originalEvent:aE,oldRatio:aF/aK,ratio:aJ/aK}).isDefaultPrevented()){return}if(aE){aI=this.$cropper.offset();aC=aE.touches?ae(aE.touches):{pageX:aH.pageX||aE.pageX||0,pageY:aH.pageY||aE.pageY||0};aG.left-=(aJ-aF)*(((aC.pageX-aI.left)-aG.left)/aF);aG.top-=(aD-aN)*(((aC.pageY-aI.top)-aG.top)/aN)}else{aG.left-=(aJ-aF)/2;aG.top-=(aD-aN)/2}aG.width=aJ;aG.height=aD;this.renderCanvas(true)}},rotate:function(aC){this.rotateTo((this.image.rotate||0)+az(aC))},rotateTo:function(aC){aC=az(aC);if(J(aC)&&this.isBuilt&&!this.isDisabled&&this.options.rotatable){this.image.rotate=aC%360;this.isRotated=true;this.renderCanvas(true)}},scale:function(aE,aD){var aF=this.image;var aC=false;if(M(aD)){aD=aE}aE=az(aE);aD=az(aD);if(this.isBuilt&&!this.isDisabled&&this.options.scalable){if(J(aE)){aF.scaleX=aE;aC=true}if(J(aD)){aF.scaleY=aD;aC=true}if(aC){this.renderImage(true)}}},scaleX:function(aD){var aC=this.image.scaleY;this.scale(aD,J(aC)?aC:1)},scaleY:function(aC){var aD=this.image.scaleX;this.scale(J(aD)?aD:1,aC)},getData:function(aE){var aD=this.options;var aI=this.image;var aC=this.canvas;var aG=this.cropBox;var aF;var aH;if(this.isBuilt&&this.isCropped){aH={x:aG.left-aC.left,y:aG.top-aC.top,width:aG.width,height:aG.height};aF=aI.width/aI.naturalWidth;ak.each(aH,function(aJ,aK){aK=aK/aF;aH[aJ]=aE?D(aK):aK})}else{aH={x:0,y:0,width:0,height:0}}if(aD.rotatable){aH.rotate=aI.rotate||0}if(aD.scalable){aH.scaleX=aI.scaleX||1;aH.scaleY=aI.scaleY||1}return aH},setData:function(aH){var aD=this.options;var aI=this.image;var aC=this.canvas;var aG={};var aF;var aJ;var aE;if(ak.isFunction(aH)){aH=aH.call(this.element)}if(this.isBuilt&&!this.isDisabled&&ak.isPlainObject(aH)){if(aD.rotatable){if(J(aH.rotate)&&aH.rotate!==aI.rotate){aI.rotate=aH.rotate;this.isRotated=aF=true}}if(aD.scalable){if(J(aH.scaleX)&&aH.scaleX!==aI.scaleX){aI.scaleX=aH.scaleX;aJ=true}if(J(aH.scaleY)&&aH.scaleY!==aI.scaleY){aI.scaleY=aH.scaleY;aJ=true}}if(aF){this.renderCanvas()}else{if(aJ){this.renderImage()}}aE=aI.width/aI.naturalWidth;if(J(aH.x)){aG.left=aH.x*aE+aC.left}if(J(aH.y)){aG.top=aH.y*aE+aC.top}if(J(aH.width)){aG.width=aH.width*aE}if(J(aH.height)){aG.height=aH.height*aE}this.setCropBoxData(aG)}},getContainerData:function(){return this.isBuilt?this.container:{}},getImageData:function(){return this.isLoaded?this.image:{}},getCanvasData:function(){var aC=this.canvas;var aD={};if(this.isBuilt){ak.each(["left","top","width","height","naturalWidth","naturalHeight"],function(aE,aF){aD[aF]=aC[aF]})}return aD},setCanvasData:function(aE){var aC=this.canvas;var aD=aC.aspectRatio;if(ak.isFunction(aE)){aE=aE.call(this.$element)}if(this.isBuilt&&!this.isDisabled&&ak.isPlainObject(aE)){if(J(aE.left)){aC.left=aE.left}if(J(aE.top)){aC.top=aE.top}if(J(aE.width)){aC.width=aE.width;aC.height=aE.width/aD}else{if(J(aE.height)){aC.height=aE.height;aC.width=aE.height*aD}}this.renderCanvas(true)}},getCropBoxData:function(){var aC=this.cropBox;var aD;if(this.isBuilt&&this.isCropped){aD={left:aC.left,top:aC.top,width:aC.width,height:aC.height}}return aD||{}},setCropBoxData:function(aG){var aE=this.cropBox;var aF=this.options.aspectRatio;var aD;var aC;if(ak.isFunction(aG)){aG=aG.call(this.$element)}if(this.isBuilt&&this.isCropped&&!this.isDisabled&&ak.isPlainObject(aG)){if(J(aG.left)){aE.left=aG.left}if(J(aG.top)){aE.top=aG.top}if(J(aG.width)){aD=true;aE.width=aG.width}if(J(aG.height)){aC=true;aE.height=aG.height}if(aF){if(aD){aE.height=aE.width/aF}else{if(aC){aE.width=aE.height*aF}}}this.renderCropBox()}},getCroppedCanvas:function(aN){var aD;var aH;var aF;var aJ;var aI;var aK;var aM;var aL;var aE;var aC;var aG;if(!this.isBuilt||!this.isCropped||!p){return}if(!ak.isPlainObject(aN)){aN={}}aG=this.getData();aD=aG.width;aH=aG.height;aL=aD/aH;if(ak.isPlainObject(aN)){aI=aN.width;aK=aN.height;if(aI){aK=aI/aL;aM=aI/aD}else{if(aK){aI=aK*aL;aM=aK/aH}}}aF=R(aI||aD);aJ=R(aK||aH);aE=ak("<canvas>")[0];aE.width=aF;aE.height=aJ;aC=aE.getContext("2d");if(aN.fillColor){aC.fillStyle=aN.fillColor;aC.fillRect(0,0,aF,aJ)}aC.drawImage.apply(aC,(function(){var aO=al(this.$clone[0],this.image);var aP=aO.width;var aQ=aO.height;var aU=[aO];var aT=aG.x;var aS=aG.y;var aR;var aZ;var aX;var aW;var aY;var aV;if(aT<=-aD||aT>aP){aT=aR=aX=aY=0}else{if(aT<=0){aX=-aT;aT=0;aR=aY=at(aP,aD+aT)}else{if(aT<=aP){aX=0;aR=aY=at(aD,aP-aT)}}}if(aR<=0||aS<=-aH||aS>aQ){aS=aZ=aW=aV=0}else{if(aS<=0){aW=-aS;aS=0;aZ=aV=at(aQ,aH+aS)}else{if(aS<=aQ){aW=0;aZ=aV=at(aH,aQ-aS)}}}aU.push(R(aT),R(aS),R(aR),R(aZ));if(aM){aX*=aM;aW*=aM;aY*=aM;aV*=aM}if(aY>0&&aV>0){aU.push(R(aX),R(aW),R(aY),R(aV))}return aU}).call(this));return aE},setAspectRatio:function(aD){var aC=this.options;if(!this.isDisabled&&!M(aD)){aC.aspectRatio=k(0,aD)||NaN;if(this.isBuilt){this.initCropBox();if(this.isCropped){this.renderCropBox()}}}},setDragMode:function(aF){var aC=this.options;var aE;var aD;if(this.isLoaded&&!this.isDisabled){aE=aF===aa;aD=aC.movable&&aF===au;aF=(aE||aD)?aF:t;this.$dragBox.data(g,aF).toggleClass(T,aE).toggleClass(ai,aD);if(!aC.cropBoxMovable){this.$face.data(g,aF).toggleClass(T,aE).toggleClass(ai,aD)}}}};u.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:0.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:0.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};u.setDefaults=function(aC){ak.extend(u.DEFAULTS,aC)};u.TEMPLATE=('<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>');u.other=ak.fn.cropper;ak.fn.cropper=function(aE){var aD=G(arguments,1);var aC;this.each(function(){var aI=ak(this);var aH=aI.data(f);var aF;var aG;if(!aH){if(/destroy/.test(aE)){return}aF=ak.extend({},aI.data(),ak.isPlainObject(aE)&&aE);aI.data(f,(aH=new u(this,aF)))}if(typeof aE==="string"&&ak.isFunction(aG=aH[aE])){aC=aG.apply(aH,aD)}});return M(aC)?this:aC};ak.fn.cropper.Constructor=u;ak.fn.cropper.setDefaults=u.setDefaults;ak.fn.cropper.noConflict=function(){ak.fn.cropper=u.other;return this}});
$(document).ready(function(){var b=false;var e=false;var d="_cropper";$("form .cropper-block").each(function(F){if(b){console.log("• Loading :","Cropper-image")}var j=$(".loadOff",this);var z=$(".loadOn",this);var C=null;var h="#"+$(this).attr("id").replace(new RegExp("("+d+")$","g"),"");var l=$(this).attr("data-form-name");var G=$("span.cropper-send-rawfile",this).first().attr("data-send");var A=$.parseJSON($("span.cropper-info",this).first().attr("data-cropper"));var H={height:0,width:0,ratioIndex:0,file:{type:null,name:null,size:null,},removeImage:false,dataType:"cropper",rawfiles:{actual:null,list:new Array(),},};var o=function(i){$(h).data("infoForPersist",H);if(b){console.log("infoForPersist",$(h).data("infoForPersist"))}};if(A.format.length>0){var u=new Array();if(A.format.x!=undefined&&A.format.y!=undefined){u.push(A.format[0]/A.format[1])}else{for(var B=0;B<A.format.length;B++){if(parseInt(A.ratioIndex)==B){H.ratioIndex=parseInt(A.ratioIndex);o()}if(A.format[B]==null){u.push(null)}else{if(A.format[B].length>1){u.push(A.format[B][0]/A.format[B][1])}}}}}if(u==undefined){var u=new Array(null)}var r=new Array();for(var B=0;B<A.filenameCopy.length;B++){copyField=h.replace(new RegExp("(_"+l+")$","g"),"_"+A.filenameCopy[B]);if($(copyField).length){r.push($(copyField))}}var x=h.replace(new RegExp("(_"+l+")$","g"),"_infoForPersist");$(h).data("infoForPersist_field",x);var w=$(h+"_fileInput");var m=$(h+"_image");var y=$(".img-preview",this);var v=$(".docs-buttons button[data-method]",this);var D=$(".containerImageNull",this);var t=$(".noImage",this);var p=$(".container-actions",this);if(b){console.log("cropperId :",h);console.log("fieldName :",l);console.log("URLrawfile :",G);console.log("infoForPersist_field :",x);console.log("fieldForCopy :",r.length);console.log("format :",u);console.log("Accept :",A.accept);console.log("Init :",A.init)}if(A.deletable==undefined){A.deletable=false;$(".noImage",this).remove()}var k=function(I){if(I==undefined){I=r}if(C!=null){var J=C.name}else{var J=""}for(var K=0;K<I.length;K++){I[K].val(J)}};var g=function(){var i=m.attr("src");if(i=="#"||i==""){D.addClass("hidden");H.removeImage=true;return true}else{D.removeClass("hidden");H.removeImage=false;return false}};var E=function(i){if(i==true){$(j).addClass("hidden");$(z).removeClass("hidden")}else{$(z).addClass("hidden");$(j).removeClass("hidden")}e=i};var n=function(i){var i=i;i.css({display:"block",width:"100%",minWidth:0,minHeight:0,maxWidth:"none",maxHeight:"none",}).addClass("img-responsive");y.css({width:"100%",overflow:"hidden",}).addClass("img-rounded").html(i)};var f={aspectRatio:u[H.ratioIndex],preview:h+d+" .img-preview",autoCropArea:1,responsive:true,restore:true,viewMode:2,movable:false,zoomOnTouch:false,zoomOnWheel:false,wheelZoomRatio:false,cropBoxMovable:true,toggleDragModeOnDblclick:false,build:function(i){n($(this).clone())},crop:function(I){var J=$(this).cropper("imageData");var i=I.width/I.height;console.log("imageData : ",J);H.width=J.context.naturalWidth;H.height=J.context.naturalHeight;o();y.each(function(){var M=$(this);var L=M.width();var K=L/i;var N=I.width/L;M.height(K).find("img").css({width:J.context.naturalWidth/N,height:J.context.naturalHeight/N,marginLeft:-I.x/N,marginTop:-I.y/N,})})},};m.one("built.cropper",function(i){if(A.init!=undefined&&A.init!=null){m.cropper("setData",A.init);A.init=null}g()});if(m.attr("src")!="#"&&m.attr("src")!=""){D.removeClass("hidden");m.cropper(f)}else{g()}var q=(window.URL||window.webkitURL);var s;if(q){w.on("change",function(){var K=this.files;var I;if(K&&K.length){I=K[0];reg=new RegExp("^image/","gi");test=reg.test(I.type);if(b){console.log("Format file test : ",I.type+" = "+test)}if(test){if(I.size<(A.maxfilesize*1000000)){var i=$.extend({},H);H.file={type:I.type,name:I.name,size:I.size,};E(true);var J=new FileReader();J.readAsDataURL(I);J.onloadend=function(M){C=I;var L=$.extend({},H);L.raw=M.target.result;$.ajax({method:"POST",url:G,data:{data:L},}).done(function(N){N=$.parseJSON(N);if(N.result!=true){alert("Une erreur est survenue lors de l'enregistrement. Veuillez recommencer, SVP.\nAttention : un fichier corrompu, non conforme ou trop lourd (Max. "+A.maxfilesize+"Mo) peut faire échouer l'opération.");H=i;o()}else{m.attr("src",N.data.image);D.removeClass("hidden");if(H.rawfiles.actual!=null){H.rawfiles.list.push(H.rawfiles.actual)}H.rawfiles.actual=N.data.id;H.removeImage=false;o();k();m.cropper("destroy").cropper(f)}}).fail(function(N,O){if(b){alert("Une erreur est survenue lors de l'enregistrement. Veuillez recommencer, SVP.\nAttention : un fichier corrompu, non conforme ou trop lourd (Max. "+A.maxfilesize+"Mo) peut faire échouer l'opération.\nRequest failed: "+O)}else{alert("Une erreur est survenue lors de l'enregistrement. Veuillez recommencer, SVP.\nAttention : un fichier corrompu, non conforme ou trop lourd (Max. "+A.maxfilesize+"Mo) peut faire échouer l'opération.")}H=i;o()}).always(function(){E(false);w.val("");g()})}}else{alert("Fichier trop lourd… vous devez choisir un fichier de moins de "+A.maxfilesize+"Mo.")}}else{alert("Fichier de type "+I.type+".\nVous devez sélectionner un fichier de type image.")}}})}else{w.prop("disabled",true).parent().addClass("disabled")}t.on("click",function(i){i.preventDefault();m.attr("src","#");o();g()});v.on("click",function(){var L=$(this);var J=L.data();var I;var i;if(L.prop("disabled")||L.hasClass("disabled")){return}if(m.data("cropper")&&J.method){J=$.extend({},J);if(typeof J.target!=="undefined"){I=$(J.target);if(typeof J.option==="undefined"){try{J.option=JSON.parse(I.val())}catch(K){console.log(K.message)}}}i=m.cropper(J.method,J.option,J.secondOption);switch(J.method){case"scaleX":case"scaleY":$(this).data("option",-J.option);break}if($.isPlainObject(i)&&I){try{I.val(JSON.stringify(i))}catch(K){console.log(K.message)}}}});$(".docs-toggles",this).on("change","input",function(I){var i=parseInt($(this).attr("data-ratio-index"));if(i!=undefined){H.ratioIndex=i;o()}f.aspectRatio=u[i];if(f.aspectRatio==undefined){f.aspectRatio=null}m.cropper("destroy").cropper(f)})});var a=function(h){var f=$(h+"_image");var g=$(h).data("infoForPersist");g.getData=f.cropper("getData");g.getData.x=Math.round(g.getData.x);g.getData.y=Math.round(g.getData.y);g.getData.width=Math.round(g.getData.width);g.getData.height=Math.round(g.getData.height);$($(h).data("infoForPersist_field")).val(JSON.stringify(g))};var c=false;$(document.body).on("submit","form",function(g){var f=$(".cropper-block",this);if(f.length){if(c==false){g.preventDefault();if(e==false){c=true;f.each(function(h){a("#"+$(this).attr("id").replace(new RegExp("("+d+")$","g"),""))});$(this).submit()}else{alert("Le chargement est toujours en cours, veuillez patienter, svp.")}}}})});
/*! nouislider - 8.3.0 - 2016-02-14 17:37:19 */
(function(a){if(typeof define==="function"&&define.amd){define([],a)}else{if(typeof exports==="object"){module.exports=a()}else{window.noUiSlider=a()}}}(function(){function c(U){return U.filter(function(V){return !this[V]?this[V]=true:false},{})}function q(U,V){return Math.round(U/V)*V}function N(X){var W=X.getBoundingClientRect(),Y=X.ownerDocument,U=Y.documentElement,V=O();if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){V.x=0}return{top:W.top+V.y-U.clientTop,left:W.left+V.x-U.clientLeft}}function t(U){return typeof U==="number"&&!isNaN(U)&&isFinite(U)}function r(U){var V=Math.pow(10,7);return Number((Math.round(U*V)/V).toFixed(7))}function D(U,V,W){B(U,V);setTimeout(function(){n(U,V)},W)}function v(U){return Math.max(Math.min(U,100),0)}function A(U){return Array.isArray(U)?U:[U]}function F(V){var U=V.split(".");return U.length>1?U[1].length:0}function B(V,U){if(V.classList){V.classList.add(U)}else{V.className+=" "+U}}function n(V,U){if(V.classList){V.classList.remove(U)}else{V.className=V.className.replace(new RegExp("(^|\\b)"+U.split(" ").join("|")+"(\\b|$)","gi")," ")}}function P(V,U){return V.classList?V.classList.contains(U):new RegExp("\\b"+U+"\\b").test(V.className)}function O(){var V=window.pageXOffset!==undefined,W=((document.compatMode||"")==="CSS1Compat"),U=V?window.pageXOffset:W?document.documentElement.scrollLeft:document.body.scrollLeft,X=V?window.pageYOffset:W?document.documentElement.scrollTop:document.body.scrollTop;return{x:U,y:X}}function J(U){U.stopPropagation()}function K(U){return function(V){return U+V}}var L=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},G="noUi-";function m(V,U){return(100/(U-V))}function k(U,V){return(V*100)/(U[1]-U[0])}function E(U,V){return k(U,U[0]<0?V+Math.abs(U[0]):V-U[0])}function p(U,V){return((V*(U[1]-U[0]))/100)+U[0]}function R(W,U){var V=1;while(W>=U[V]){V+=1}return V}function z(ab,Z,aa){if(aa>=ab.slice(-1)[0]){return 100}var U=R(aa,ab),Y,X,W,V;Y=ab[U-1];X=ab[U];W=Z[U-1];V=Z[U];return W+(E([Y,X],aa)/m(W,V))}function o(ab,Z,aa){if(aa>=100){return ab.slice(-1)[0]}var U=R(aa,Z),Y,X,W,V;Y=ab[U-1];X=ab[U];W=Z[U-1];V=Z[U];return p([Y,X],(aa-W)*m(W,V))}function h(Z,W,V,aa){if(aa===100){return aa}var Y=R(aa,Z),X,U;if(V){X=Z[Y-1];U=Z[Y];if((aa-X)>((U-X)/2)){return U}return X}if(!W[Y-1]){return aa}return Z[Y-1]+q(aa-Z[Y-1],W[Y-1])}function l(V,X,W){var U;if(typeof X==="number"){X=[X]}if(Object.prototype.toString.call(X)!=="[object Array]"){throw new Error("noUiSlider: 'range' contains invalid value.")}if(V==="min"){U=0}else{if(V==="max"){U=100}else{U=parseFloat(V)}}if(!t(U)||!t(X[0])){throw new Error("noUiSlider: 'range' value isn't numeric.")}W.xPct.push(U);W.xVal.push(X[0]);if(!U){if(!isNaN(X[1])){W.xSteps[0]=X[1]}}else{W.xSteps.push(isNaN(X[1])?false:X[1])}}function s(U,W,V){if(!W){return true}V.xSteps[U]=k([V.xVal[U],V.xVal[U+1]],W)/m(V.xPct[U],V.xPct[U+1])}function Q(Y,U,Z,X){this.xPct=[];this.xVal=[];this.xSteps=[X||false];this.xNumSteps=[false];this.snap=U;this.direction=Z;var W,V=[];for(W in Y){if(Y.hasOwnProperty(W)){V.push([Y[W],W])}}if(V.length&&typeof V[0][0]==="object"){V.sort(function(ab,aa){return ab[0][0]-aa[0][0]})}else{V.sort(function(ab,aa){return ab[0]-aa[0]})}for(W=0;W<V.length;W++){l(V[W][1],V[W][0],this)}this.xNumSteps=this.xSteps.slice(0);for(W=0;W<this.xNumSteps.length;W++){s(W,this.xNumSteps[W],this)}}Q.prototype.getMargin=function(U){return this.xPct.length===2?k(this.xVal,U):false};Q.prototype.toStepping=function(U){U=z(this.xVal,this.xPct,U);if(this.direction){U=100-U}return U};Q.prototype.fromStepping=function(U){if(this.direction){U=100-U}return r(o(this.xVal,this.xPct,U))};Q.prototype.getStep=function(U){if(this.direction){U=100-U}U=h(this.xPct,this.xSteps,this.snap,U);if(this.direction){U=100-U}return U};Q.prototype.getApplicableStep=function(V){var U=R(V,this.xPct),W=V===100?2:1;return[this.xNumSteps[U-2],this.xVal[U-W],this.xNumSteps[U-W]]};Q.prototype.convert=function(U){return this.getStep(this.toStepping(U))};var e={to:function(U){return U!==undefined&&U.toFixed(2)},from:Number};function w(U,V){if(!t(V)){throw new Error("noUiSlider: 'step' is not numeric.")}U.singleStep=V}function y(U,V){if(typeof V!=="object"||Array.isArray(V)){throw new Error("noUiSlider: 'range' is not an object.")}if(V.min===undefined||V.max===undefined){throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.")}if(V.min===V.max){throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.")}U.spectrum=new Q(V,U.snap,U.dir,U.singleStep)}function M(U,V){V=A(V);if(!Array.isArray(V)||!V.length||V.length>2){throw new Error("noUiSlider: 'start' option is incorrect.")}U.handles=V.length;U.start=V}function u(U,V){U.snap=V;if(typeof V!=="boolean"){throw new Error("noUiSlider: 'snap' option must be a boolean.")}}function C(U,V){U.animate=V;if(typeof V!=="boolean"){throw new Error("noUiSlider: 'animate' option must be a boolean.")}}function T(U,V){if(V==="lower"&&U.handles===1){U.connect=1}else{if(V==="upper"&&U.handles===1){U.connect=2}else{if(V===true&&U.handles===2){U.connect=3}else{if(V===false){U.connect=0}else{throw new Error("noUiSlider: 'connect' option doesn't match handle count.")}}}}}function j(U,V){switch(V){case"horizontal":U.ort=0;break;case"vertical":U.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function b(U,V){if(!t(V)){throw new Error("noUiSlider: 'margin' option must be numeric.")}if(V===0){return}U.margin=U.spectrum.getMargin(V);if(!U.margin){throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}}function I(U,V){if(!t(V)){throw new Error("noUiSlider: 'limit' option must be numeric.")}U.limit=U.spectrum.getMargin(V);if(!U.limit){throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}}function H(U,V){switch(V){case"ltr":U.dir=0;break;case"rtl":U.dir=1;U.connect=[0,2,1,3][U.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function S(W,aa){if(typeof aa!=="string"){throw new Error("noUiSlider: 'behaviour' must be a string containing options.")}var V=aa.indexOf("tap")>=0,Y=aa.indexOf("drag")>=0,Z=aa.indexOf("fixed")>=0,U=aa.indexOf("snap")>=0,X=aa.indexOf("hover")>=0;if(Y&&!W.connect){throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.")}W.events={tap:V||U,drag:Y,fixed:Z,snap:U,hover:X}}function i(U,W){var V;if(W===false){return}else{if(W===true){U.tooltips=[];for(V=0;V<U.handles;V++){U.tooltips.push(true)}}else{U.tooltips=A(W);if(U.tooltips.length!==U.handles){throw new Error("noUiSlider: must pass a formatter for all handles.")}U.tooltips.forEach(function(X){if(typeof X!=="boolean"&&(typeof X!=="object"||typeof X.to!=="function")){throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}})}}}function x(U,V){U.format=V;if(typeof V.to==="function"&&typeof V.from==="function"){return true}throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function d(U,V){if(V!==undefined&&typeof V!=="string"){throw new Error("noUiSlider: 'cssPrefix' must be a string.")}U.cssPrefix=V}function f(V){var U={margin:0,limit:0,animate:true,format:e},W;W={step:{r:false,t:w},start:{r:true,t:M},connect:{r:true,t:T},direction:{r:true,t:H},snap:{r:false,t:u},animate:{r:false,t:C},range:{r:true,t:y},orientation:{r:false,t:j},margin:{r:false,t:b},limit:{r:false,t:I},behaviour:{r:true,t:S},format:{r:false,t:x},tooltips:{r:false,t:i},cssPrefix:{r:false,t:d}};var X={connect:false,direction:"ltr",behaviour:"tap",orientation:"horizontal"};Object.keys(W).forEach(function(Y){if(V[Y]===undefined&&X[Y]===undefined){if(W[Y].r){throw new Error("noUiSlider: '"+Y+"' is required.")}return true}W[Y].t(U,V[Y]===undefined?X[Y]:V[Y])});U.pips=V.pips;U.style=U.ort?"top":"left";return U}function a(U,ar){var ax=U,aj=[-1,-1],ap,aB,an=ar.spectrum,av=[],X={},ac;var ay=["target","base","origin","handle","horizontal","vertical","background","connect","ltr","rtl","draggable","","state-drag","","state-tap","active","","stacking","tooltip","","pips","marker","value"].map(K(ar.cssPrefix||G));function am(aN,aM,aO){var aQ=aN+aM[0],aP=aN+aM[1];if(aO){if(aQ<0){aP+=Math.abs(aQ)}if(aP>100){aQ-=(aP-100)}return[v(aQ),v(aP)]}return[aQ,aP]}function aL(aQ,aO){aQ.preventDefault();var aT=aQ.type.indexOf("touch")===0,aN=aQ.type.indexOf("mouse")===0,aR=aQ.type.indexOf("pointer")===0,aM,aS,aP=aQ;if(aQ.type.indexOf("MSPointer")===0){aR=true}if(aT){aM=aQ.changedTouches[0].pageX;aS=aQ.changedTouches[0].pageY}aO=aO||O();if(aN||aR){aM=aQ.clientX+aO.x;aS=aQ.clientY+aO.y}aP.pageOffset=aO;aP.points=[aM,aS];aP.cursor=aN||aR;return aP}function ag(aQ,aN){var aM=document.createElement("div"),aP=document.createElement("div"),aO=["-lower","-upper"];if(aQ){aO.reverse()}B(aP,ay[3]);B(aP,ay[3]+aO[aN]);B(aM,ay[2]);aM.appendChild(aP);return aM}function aE(aM,aO,aN){switch(aM){case 1:B(aO,ay[7]);B(aN[0],ay[6]);break;case 3:B(aN[1],ay[6]);case 2:B(aN[0],ay[7]);case 0:B(aO,ay[6]);break}}function aa(aO,aQ,aP){var aM,aN=[];for(aM=0;aM<aO;aM+=1){aN.push(aP.appendChild(ag(aQ,aM)))}return aN}function V(aO,aM,aN){B(aN,ay[0]);B(aN,ay[8+aO]);B(aN,ay[4+aM]);var aP=document.createElement("div");B(aP,ay[1]);aN.appendChild(aP);return aP}function ab(aO,aM){if(!ar.tooltips[aM]){return false}var aN=document.createElement("div");aN.className=ay[18];return aO.firstChild.appendChild(aN)}function aG(){if(ar.dir){ar.tooltips.reverse()}var aM=aB.map(ab);if(ar.dir){aM.reverse();ar.tooltips.reverse()}aw("update",function(aO,aP,aN){if(aM[aP]){aM[aP].innerHTML=ar.tooltips[aP]===true?aO[aP]:ar.tooltips[aP].to(aN[aP])}})}function ak(aR,aN,aO){if(aR==="range"||aR==="steps"){return an.xVal}if(aR==="count"){var aQ=(100/(aN-1)),aM,aP=0;aN=[];while((aM=aP++*aQ)<=100){aN.push(aM)}aR="positions"}if(aR==="positions"){return aN.map(function(aS){return an.fromStepping(aO?an.getStep(aS):aS)})}if(aR==="values"){if(aO){return aN.map(function(aS){return an.fromStepping(an.getStep(an.toStepping(aS)))})}return aN}}function ad(aT,aQ,aU){function aO(aY,aX){return(aY+aX).toFixed(7)/1}var aV=an.direction,aR={},aN=an.xVal[0],aM=an.xVal[an.xVal.length-1],aP=false,aS=false,aW=0;an.direction=0;aU=c(aU.slice().sort(function(aY,aX){return aY-aX}));if(aU[0]!==aN){aU.unshift(aN);aP=true}if(aU[aU.length-1]!==aM){aU.push(aM);aS=true}aU.forEach(function(a6,a5){var aZ,a3,aY,a8=a6,a1=aU[a5+1],ba,aX,a0,a7,a9,a2,a4;if(aQ==="steps"){aZ=an.xNumSteps[a5]}if(!aZ){aZ=a1-a8}if(a8===false||a1===undefined){return}for(a3=a8;a3<=a1;a3=aO(a3,aZ)){ba=an.toStepping(a3);aX=ba-aW;a9=aX/aT;a2=Math.round(a9);a4=aX/a2;for(aY=1;aY<=a2;aY+=1){a0=aW+(aY*a4);aR[a0.toFixed(5)]=["x",0]}a7=(aU.indexOf(a3)>-1)?1:(aQ==="steps"?2:0);if(!a5&&aP){a7=0}if(!(a3===a1&&aS)){aR[ba.toFixed(5)]=[a3,a7]}aW=ba}});an.direction=aV;return aR}function aq(aQ,aP,aR){var aM=["horizontal","vertical"][ar.ort],aO=document.createElement("div"),aN="";B(aO,ay[20]);B(aO,ay[20]+"-"+aM);function aT(aV){return["-normal","-large","-sub"][aV]}function aU(aX,aW,aV){return'class="'+aW+" "+aW+"-"+aM+" "+aW+aT(aV[1])+'" style="'+ar.style+": "+aX+'%"'}function aS(aW,aV){if(an.direction){aW=100-aW}aV[1]=(aV[1]&&aP)?aP(aV[0],aV[1]):aV[1];aN+="<div "+aU(aW,ay[21],aV)+"></div>";if(aV[1]){aN+="<div "+aU(aW,ay[22],aV)+">"+aR.to(aV[0])+"</div>"}}Object.keys(aQ).forEach(function(aV){aS(aV,aQ[aV])});aO.innerHTML=aN;return aO}function Y(aM){var aO=aM.mode,aR=aM.density||1,aN=aM.filter||false,aT=aM.values||false,aU=aM.stepped||false,aS=ak(aO,aT,aU),aP=ad(aR,aO,aS),aQ=aM.format||{to:Math.round};return ax.appendChild(aq(aP,aN,aQ))}function aC(){var aM=ap.getBoundingClientRect(),aN="offset"+["Width","Height"][ar.ort];return ar.ort===0?(aM.width||ap[aN]):(aM.height||ap[aN])}function aI(aN,aO,aM){if(aO!==undefined&&ar.handles!==1){aO=Math.abs(aO-ar.dir)}Object.keys(X).forEach(function(aQ){var aP=aQ.split(".")[0];if(aN===aP){X[aQ].forEach(function(aR){aR.call(ac,A(af()),aO,A(az(Array.prototype.slice.call(av))),aM||false,aj)})}})}function az(aM){if(aM.length===1){return aM[0]}if(ar.dir){return aM.reverse()}return aM}function ai(aO,aN,aR,aP){var aQ=function(aS){if(ax.hasAttribute("disabled")){return false}if(P(ax,ay[14])){return false}aS=aL(aS,aP.pageOffset);if(aO===L.start&&aS.buttons!==undefined&&aS.buttons>1){return false}if(aP.hover&&aS.buttons){return false}aS.calcPoint=aS.points[ar.ort];aR(aS,aP)},aM=[];aO.split(" ").forEach(function(aS){aN.addEventListener(aS,aQ,false);aM.push([aS,aQ])});return aM}function al(aQ,aS){if(navigator.appVersion.indexOf("MSIE 9")===-1&&aQ.buttons===0&&aS.buttonsProperty!==0){return ao(aQ,aS)}var aP=aS.handles||aB,aM,aR=false,aN=((aQ.calcPoint-aS.start)*100)/aS.baseSize,aT=aP[0]===aB[0]?0:1,aO;aM=am(aN,aS.positions,aP.length>1);aR=Z(aP[0],aM[aT],aP.length===1);if(aP.length>1){aR=Z(aP[1],aM[aT?0:1],false)||aR;if(aR){for(aO=0;aO<aS.handles.length;aO++){aI("slide",aO)}}}else{if(aR){aI("slide",aT)}}}function ao(aM,aN){var aO=ap.querySelector("."+ay[15]),aQ=aN.handles[0]===aB[0]?0:1;if(aO!==null){n(aO,ay[15])}if(aM.cursor){document.body.style.cursor="";document.body.removeEventListener("selectstart",document.body.noUiListener)}var aP=document.documentElement;aP.noUiListeners.forEach(function(aR){aP.removeEventListener(aR[0],aR[1])});n(ax,ay[12]);aI("set",aQ);aI("change",aQ);if(aN.handleNumber!==undefined){aI("end",aN.handleNumber)}}function aF(aM,aN){if(aM.type==="mouseout"&&aM.target.nodeName==="HTML"&&aM.relatedTarget===null){ao(aM,aN)}}function at(aN,aP){var aR=document.documentElement;if(aP.handles.length===1){B(aP.handles[0].children[0],ay[15]);if(aP.handles[0].hasAttribute("disabled")){return false}}aN.preventDefault();aN.stopPropagation();var aQ=ai(L.move,aR,al,{start:aN.calcPoint,baseSize:aC(),pageOffset:aN.pageOffset,handles:aP.handles,handleNumber:aP.handleNumber,buttonsProperty:aN.buttons,positions:[aj[0],aj[aB.length-1]]}),aS=ai(L.end,aR,ao,{handles:aP.handles,handleNumber:aP.handleNumber});var aM=ai("mouseout",aR,aF,{handles:aP.handles,handleNumber:aP.handleNumber});aR.noUiListeners=aQ.concat(aS,aM);if(aN.cursor){document.body.style.cursor=getComputedStyle(aN.target).cursor;if(aB.length>1){B(ax,ay[12])}var aO=function(){return false};document.body.noUiListener=aO;document.body.addEventListener("selectstart",aO,false)}if(aP.handleNumber!==undefined){aI("start",aP.handleNumber)}}function aD(aO){var aM=aO.calcPoint,aN=0,aQ,aP;aO.stopPropagation();aB.forEach(function(aR){aN+=N(aR)[ar.style]});aQ=(aM<aN/2||aB.length===1)?0:1;if(aB[aQ].hasAttribute("disabled")){aQ=aQ?0:1}aM-=N(ap)[ar.style];aP=(aM*100)/aC();if(!ar.events.snap){D(ax,ay[14],300)}if(aB[aQ].hasAttribute("disabled")){return false}Z(aB[aQ],aP);aI("slide",aQ,true);aI("set",aQ,true);aI("change",aQ,true);if(ar.events.snap){at(aO,{handles:[aB[aQ]]})}}function ah(aN){var aM=aN.calcPoint-N(ap)[ar.style],aP=an.getStep((aM*100)/aC()),aO=an.fromStepping(aP);Object.keys(X).forEach(function(aQ){if("hover"===aQ.split(".")[0]){X[aQ].forEach(function(aR){aR.call(ac,aO)})}})}function au(aO){var aM,aN;if(!aO.fixed){for(aM=0;aM<aB.length;aM+=1){ai(L.start,aB[aM].children[0],at,{handles:[aB[aM]],handleNumber:aM})}}if(aO.tap){ai(L.start,ap,aD,{handles:aB})}if(aO.hover){ai(L.move,ap,ah,{hover:true});for(aM=0;aM<aB.length;aM+=1){["mousemove MSPointerMove pointermove"].forEach(function(aP){aB[aM].children[0].addEventListener(aP,J,false)})}}if(aO.drag){aN=[ap.querySelector("."+ay[7])];B(aN[0],ay[10]);if(aO.fixed){aN.push(aB[(aN[0]===aB[0]?1:0)].children[0])}aN.forEach(function(aP){ai(L.start,aP,at,{handles:aB})})}}function Z(aR,aT,aO){var aN=aR!==aB[0]?1:0,aS=aj[0]+ar.margin,aM=aj[1]-ar.margin,aQ=aj[0]+ar.limit,aP=aj[1]-ar.limit;if(aB.length>1){aT=aN?Math.max(aT,aS):Math.min(aT,aM)}if(aO!==false&&ar.limit&&aB.length>1){aT=aN?Math.min(aT,aQ):Math.max(aT,aP)}aT=an.getStep(aT);aT=v(parseFloat(aT.toFixed(7)));if(aT===aj[aN]){return false}if(window.requestAnimationFrame){window.requestAnimationFrame(function(){aR.style[ar.style]=aT+"%"})}else{aR.style[ar.style]=aT+"%"}if(!aR.previousSibling){n(aR,ay[17]);if(aT>50){B(aR,ay[17])}}aj[aN]=aT;av[aN]=an.fromStepping(aT);aI("update",aN);return true}function aA(aP,aM){var aO,aN,aQ;if(ar.limit){aP+=1}for(aO=0;aO<aP;aO+=1){aN=aO%2;aQ=aM[aN];if(aQ!==null&&aQ!==false){if(typeof aQ==="number"){aQ=String(aQ)}aQ=ar.format.from(aQ);if(aQ===false||isNaN(aQ)||Z(aB[aN],an.toStepping(aQ),aO===(3-ar.dir))===false){aI("update",aN)}}}}function aJ(aN){var aP,aM=A(aN),aO;if(ar.dir&&ar.handles>1){aM.reverse()}if(ar.animate&&aj[0]!==-1){D(ax,ay[14],300)}aP=aB.length>1?3:1;if(aM.length===1){aP=1}aA(aP,aM);for(aO=0;aO<aB.length;aO++){if(aM[aO]!==null){aI("set",aO)}}}function af(){var aM,aN=[];for(aM=0;aM<ar.handles;aM+=1){aN[aM]=ar.format.to(av[aM])}return az(aN)}function aH(){ay.forEach(function(aM){if(!aM){return}n(ax,aM)});while(ax.firstChild){ax.removeChild(ax.firstChild)}delete ax.noUiSlider}function ae(){var aM=aj.map(function(aO,aP){var aR=an.getApplicableStep(aO),aU=F(String(aR[2])),aT=av[aP],aN=aO===100?null:aR[2],aQ=Number((aT-aR[2]).toFixed(aU)),aS=aO===0?null:(aQ>=aR[1])?aR[2]:(aR[0]||false);return[aS,aN]});return az(aM)}function aw(aM,aN){X[aM]=X[aM]||[];X[aM].push(aN);if(aM.split(".")[0]==="update"){aB.forEach(function(aO,aP){aI("update",aP)})}}function W(aM){var aO=aM.split(".")[0],aN=aM.substring(aO.length);Object.keys(X).forEach(function(aR){var aQ=aR.split(".")[0],aP=aR.substring(aQ.length);if((!aO||aO===aQ)&&(!aN||aN===aP)){delete X[aR]}})}function aK(aN){var aM=af(),aO,aP=f({start:[0,0],margin:aN.margin,limit:aN.limit,step:aN.step,range:aN.range,animate:aN.animate,snap:aN.snap===undefined?ar.snap:aN.snap});["margin","limit","step","range","animate"].forEach(function(aQ){if(aN[aQ]!==undefined){ar[aQ]=aN[aQ]}});aP.spectrum.direction=an.direction;an=aP.spectrum;aj=[-1,-1];aJ(aM);for(aO=0;aO<aB.length;aO++){aI("update",aO)}}if(ax.noUiSlider){throw new Error("Slider was already initialized.")}ap=V(ar.dir,ar.ort,ax);aB=aa(ar.handles,ar.dir,ap);aE(ar.connect,ax,aB);if(ar.pips){Y(ar.pips)}if(ar.tooltips){aG()}ac={destroy:aH,steps:ae,on:aw,off:W,get:af,set:aJ,updateOptions:aK,options:ar,target:ax,pips:Y};au(ar.events);return ac}function g(W,X){if(!W.nodeName){throw new Error("noUiSlider.create requires a single element.")}var U=f(X,W),V=a(W,U);V.set(U.start);W.noUiSlider=V;return V}return{create:g}}));